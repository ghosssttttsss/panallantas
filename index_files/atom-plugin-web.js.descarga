var AtomPlugin=function(){function o(){var r=this;this.commands=[],this.events=[],window.addEventListener("message",function(t){if(window.location.origin===t.origin){var n=t.data;if("pluginWeb"===n.from){var e=r.commands.find(function(i){return i.name===n.name});e&&(n.args||e.handler(),n.args&&e.handler.apply(e,n.args))}}})}return o.prototype.getEvents=function(){return this.events},o.prototype.getCommands=function(){return this.commands},o.prototype.addEvents=function(r){var t=this;r.forEach(function(n){t.events.find(function(i){return i.elementId===n.elementId&&i.type===n.type})||(t.events.push(n),document.getElementById(n.elementId).addEventListener(n.type,function(){window.postMessage({name:"sendMessage",from:"clientPage",message:n.message},window.location.origin)}))})},o.prototype.addCommands=function(r){var t=this;r.forEach(function(n){t.commands.find(function(e){return e.name===n.name})||t.commands.push(n)})},o}();
(()=>{"use strict";var e,_={},b={};function n(e){var a=b[e];if(void 0!==a)return a.exports;var r=b[e]={exports:{}};return _[e].call(r.exports,r,r.exports,n),r.exports}n.m=_,e=[],n.O=(a,r,u,t)=>{if(!r){var c=1/0;for(l=0;l<e.length;l++){for(var[r,u,t]=e[l],s=!0,f=0;f<r.length;f++)(!1&t||c>=t)&&Object.keys(n.O).every(d=>n.O[d](r[f]))?r.splice(f--,1):(s=!1,t<c&&(c=t));if(s){e.splice(l--,1);var o=u();void 0!==o&&(a=o)}}return a}t=t||0;for(var l=e.length;l>0&&e[l-1][2]>t;l--)e[l]=e[l-1];e[l]=[r,u,t]},n.n=e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return n.d(a,{a}),a},n.d=(e,a)=>{for(var r in a)n.o(a,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:a[r]})},n.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),(()=>{var e={666:0};n.O.j=u=>0===e[u];var a=(u,t)=>{var f,o,[l,c,s]=t,v=0;if(l.some(p=>0!==e[p])){for(f in c)n.o(c,f)&&(n.m[f]=c[f]);if(s)var i=s(n)}for(u&&u(t);v<l.length;v++)n.o(e,o=l[v])&&e[o]&&e[o][0](),e[o]=0;return n.O(i)},r=self.webpackChunkAtomPluginWeb=self.webpackChunkAtomPluginWeb||[];r.forEach(a.bind(null,0)),r.push=a.bind(null,r.push.bind(r))})()})();
(self.webpackChunkAtomPluginWeb=self.webpackChunkAtomPluginWeb||[]).push([[429],{321:(Y,ve,De)=>{"use strict";De(332),De(894)},894:()=>{!function(Y,ve){"use strict";function De(){var n=$e.splice(0,$e.length);for(N=0;n.length;)n.shift().call(null,n.shift())}function xe(n,o){for(var l=0,f=n.length;l<f;l++)Ze(n[l],o)}function Ue(n){return function(o){Ce(o)&&(Ze(o,n),r.length&&xe(o.querySelectorAll(r),n))}}function Ge(n){var o=t.call(n,"is"),l=n.nodeName.toUpperCase(),f=s.call(Be,o?Ie+o.toUpperCase():Ve+l);return o&&-1<f&&!et(l,o)?-1:f}function et(n,o){return-1<r.indexOf(n+'[is="'+o+'"]')}function tt(n){var o=n.currentTarget,l=n.attrChange,f=n.attrName,T=n.target,w=n[Qe]||2,H=n[at]||3;!J||T&&T!==o||!o[Oe]||"style"===f||n.prevValue===n.newValue&&(""!==n.newValue||l!==w&&l!==H)||o[Oe](f,l===w?null:n.prevValue,l===H?null:n.newValue)}function Pe(n){var o=Ue(n);return function(l){$e.push(o,l.target),N&&clearTimeout(N),N=setTimeout(De,1)}}function Me(n){Q&&(Q=!1,n.currentTarget.removeEventListener(_t,Me)),r.length&&xe((n.target||U).querySelectorAll(r),n.detail===we?we:Se),oe&&function $(){for(var n,o=0,l=Te.length;o<l;o++)i.contains(n=Te[o])||(l--,Te.splice(o--,1),Ze(n,we))}()}function qe(n,o){var l=this;G.call(l,n,o),it.call(l,{target:l})}function nt(n,o,l){var f=o.apply(n,l),T=Ge(f);return-1<T&&be(f,e[T]),l.pop()&&r.length&&function ft(n){for(var o,l=0,f=n.length;l<f;l++)be(o=n[l],e[Ge(o)])}(f.querySelectorAll(r)),f}function Xe(n,o){B(n,o),je?je.observe(n,E):(A&&(n.setAttribute=qe,n[Re]=ke(n),n[ye](gt,it)),n[ye](Ae,tt)),n[Je]&&J&&(n.created=!0,n[Je](),n.created=!1)}function ze(n){throw new Error("A "+n+" type is already registered")}function Ze(n,o){var l,f,T=Ge(n);-1<T&&!g.call(n,"TEMPLATE")&&(ct(n,e[T]),T=0,o!==Se||n[Se]?o!==we||n[we]||(n[Se]=!1,n[we]=!0,f="disconnected",T=1):(n[we]=!1,n[Se]=!0,f="connected",T=1,oe&&s.call(Te,n)<0&&Te.push(n)),T&&(l=n[o+me]||n[f+me])&&l.call(n))}function fe(){}function ht(n,o,l){var f=l&&l[We]||"",T=o.prototype,w=_(T),H=o.observedAttributes||D,ee={prototype:w};se(w,Je,{value:function(){if(z)z=!1;else if(!this[q]){this[q]=!0,new o(this),T[Je]&&T[Je].call(this);var x=ae[v.get(o)];(!re||x.create.length>1)&&lt(this)}}}),se(w,Oe,{value:function(x){-1<s.call(H,x)&&T[Oe]&&T[Oe].apply(this,arguments)}}),T[Tt]&&se(w,Et,{value:T[Tt]}),T[ut]&&se(w,pt,{value:T[ut]}),f&&(ee[We]=f),n=n.toUpperCase(),ae[n]={constructor:o,create:f?[f,K(n)]:[n]},v.set(o,n),U[Fe](n.toLowerCase(),ee),ot(n),V[n].r()}function rt(n){var o=ae[n.toUpperCase()];return o&&o.constructor}function dt(n){return"string"==typeof n?n:n&&n.is||""}function lt(n){for(var o,l=n[Oe],f=l?n.attributes:D,T=f.length;T--;)l.call(n,(o=f[T]).name||o.nodeName,null,o.value||o.nodeValue)}function ot(n){return(n=n.toUpperCase())in V||(V[n]={},V[n].p=new Ee(function(o){V[n].r=o})),V[n].p}function Ye(){ce&&delete Y.customElements,p(Y,"customElements",{configurable:!0,value:new fe}),p(Y,"CustomElementRegistry",{configurable:!0,value:fe});for(var n=st.get(/^HTML[A-Z]*[a-z]/),o=n.length;o--;function(l){var f=Y[l];if(f){Y[l]=function(T){var w,H;return T||(T=this),T[q]||(z=!0,w=ae[v.get(T.constructor)],(T=(H=re&&1===w.create.length)?Reflect.construct(f,D,w.constructor):U.createElement.apply(U,w.create))[q]=!0,z=!1,H||lt(T)),T},Y[l].prototype=f.prototype;try{f.prototype.constructor=Y[l]}catch{p(f,q,{value:Y[l]})}}}(n[o]));U.createElement=function(l,f){var T=dt(f);return T?c.call(this,l,K(T)):c.call(this,l)},L||(Z=!0,U[Fe](""))}var U=Y.document,ge=Y.Object,st=function(n){var o,l,f,T,w=/^[A-Z]+[a-z]/,ee=function(he,ue){(ue=ue.toLowerCase())in x||(x[he]=(x[he]||[]).concat(ue),x[ue]=x[ue.toUpperCase()]=he)},x=(ge.create||ge)(null),ne={};for(l in n)for(T in n[l])for(x[T]=f=n[l][T],o=0;o<f.length;o++)x[f[o].toLowerCase()]=x[f[o].toUpperCase()]=T;return ne.get=function(he){return"string"==typeof he?x[he]||(w.test(he)?[]:""):function(he){var ue,de=[];for(ue in x)he.test(ue)&&de.push(ue);return de}(he)},ne.set=function(he,ue){return w.test(he)?ee(he,ue):ee(ue,he),ne},ne}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});"object"!=typeof ve&&(ve={type:ve||"auto"});var $e,it,Ke,ke,je,Le,ct,be,Ne,n,o,l,f,T,Fe="registerElement",mt=1e5*Y.Math.random()>>0,Re="__"+Fe+mt,ye="addEventListener",Se="attached",me="Callback",we="detached",We="extends",Oe="attributeChanged"+me,Et=Se+me,Tt="connected"+me,ut="disconnected"+me,Je="created"+me,pt=we+me,Qe="ADDITION",at="REMOVAL",Ae="DOMAttrModified",_t="DOMContentLoaded",gt="DOMSubtreeModified",Ve="<",Ie="=",yt=/^[A-Z][._A-Z0-9]*-[-._A-Z0-9]*$/,vt=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],Be=[],e=[],r="",i=U.documentElement,s=Be.indexOf||function(n){for(var o=this.length;o--&&this[o]!==n;);return o},a=ge.prototype,d=a.hasOwnProperty,k=a.isPrototypeOf,p=ge.defineProperty,D=[],P=ge.getOwnPropertyDescriptor,M=ge.getOwnPropertyNames,W=ge.getPrototypeOf,j=ge.setPrototypeOf,F=!!ge.__proto__,q="__dreCEv1",ce=Y.customElements,re=!/^force/.test(ve.type)&&!!(ce&&ce.define&&ce.get&&ce.whenDefined),S=ge.create||ge,b=Y.Map||function(){var n,o=[],l=[];return{get:function(f){return l[s.call(o,f)]},set:function(f,T){(n=s.call(o,f))<0?l[o.push(f)-1]=T:l[n]=T}}},Ee=Y.Promise||function(n){function o(w){for(f=!0;l.length;)l.shift()(w)}var l=[],f=!1,T={catch:function(){return T},then:function(w){return l.push(w),f&&setTimeout(o,1),T}};return n(o),T},z=!1,ae=S(null),V=S(null),v=new b,K=function(n){return n.toLowerCase()},_=ge.create||function n(o){return o?(n.prototype=o,new n):this},B=j||(F?function(n,o){return n.__proto__=o,n}:M&&P?function(){function n(o,l){for(var f,T=M(l),w=0,H=T.length;w<H;w++)d.call(o,f=T[w])||p(o,f,P(l,f))}return function(o,l){do{n(o,l)}while((l=W(l))&&!k.call(l,o));return o}}():function(n,o){for(var l in o)n[l]=o[l];return n}),O=Y.MutationObserver||Y.WebKitMutationObserver,pe=Y.HTMLAnchorElement,te=(Y.HTMLElement||Y.Element||Y.Node).prototype,oe=!k.call(te,i),se=oe?function(n,o,l){return n[o]=l.value,n}:p,Ce=oe?function(n){return 1===n.nodeType}:function(n){return k.call(te,n)},Te=oe&&[],le=te.attachShadow,X=te.cloneNode,g=te.closest||function(n){for(var o=this;o&&o.nodeName!==n;)o=o.parentNode;return o},u=te.dispatchEvent,t=te.getAttribute,y=te.hasAttribute,R=te.removeAttribute,G=te.setAttribute,h=U.createElement,m=U.importNode,c=h,E=O&&{attributes:!0,characterData:!0,attributeOldValue:!0},C=O||function(n){A=!1,i.removeEventListener(Ae,C)},N=0,L=Fe in U&&!/^force-all/.test(ve.type),I=!0,Z=!1,A=!0,Q=!0,J=!0;if(O&&((Ne=U.createElement("div")).innerHTML="<div><div></div></div>",new O(function(n,o){if(n[0]&&"childList"==n[0].type&&!n[0].removedNodes[0].childNodes.length){var l=(Ne=P(te,"innerHTML"))&&Ne.set;l&&p(te,"innerHTML",{set:function(f){for(;this.lastChild;)this.removeChild(this.lastChild);l.call(this,f)}})}o.disconnect(),Ne=null}).observe(Ne,{childList:!0,subtree:!0}),Ne.innerHTML=""),L||(j||F?(ct=function(n,o){k.call(o,n)||Xe(n,o)},be=Xe):(ct=function(n,o){n[Re]||(n[Re]=ge(!0),Xe(n,o))},be=ct),oe?(A=!1,n=P(te,ye),o=n.value,l=function(w){var H=new CustomEvent(Ae,{bubbles:!0});H.attrName=w,H.prevValue=t.call(this,w),H.newValue=null,H[at]=H.attrChange=2,R.call(this,w),u.call(this,H)},f=function(w,H){var ee=y.call(this,w),x=ee&&t.call(this,w),ne=new CustomEvent(Ae,{bubbles:!0});G.call(this,w,H),ne.attrName=w,ne.prevValue=ee?x:null,ne.newValue=H,ee?ne.MODIFICATION=ne.attrChange=1:ne[Qe]=ne.attrChange=0,u.call(this,ne)},T=function(w){var H,ee=w.currentTarget,x=ee[Re],ne=w.propertyName;x.hasOwnProperty(ne)&&(x=x[ne],(H=new CustomEvent(Ae,{bubbles:!0})).attrName=x.name,H.prevValue=x.value||null,H.newValue=x.value=ee[ne]||null,null==H.prevValue?H[Qe]=H.attrChange=0:H.MODIFICATION=H.attrChange=1,u.call(ee,H))},n.value=function(w,H,ee){w===Ae&&this[Oe]&&this.setAttribute!==f&&(this[Re]={className:{name:"class",value:this.className}},this.setAttribute=f,this.removeAttribute=l,o.call(this,"propertychange",T)),o.call(this,w,H,ee)},p(te,ye,n)):O||(i[ye](Ae,C),i.setAttribute(Re,1),i.removeAttribute(Re),A&&(it=function(n){var o,l,f,T=this;if(T===n.target){for(f in o=T[Re],T[Re]=l=ke(T),l){if(!(f in o))return Ke(0,T,f,o[f],l[f],Qe);if(l[f]!==o[f])return Ke(1,T,f,o[f],l[f],"MODIFICATION")}for(f in o)if(!(f in l))return Ke(2,T,f,o[f],l[f],at)}},Ke=function(n,o,l,f,T,w){var H={attrChange:n,currentTarget:o,attrName:l,prevValue:f,newValue:T};H[w]=n,tt(H)},ke=function(n){for(var o,l,f={},T=n.attributes,w=0,H=T.length;w<H;w++)"setAttribute"!==(l=(o=T[w]).name)&&(f[l]=o.value);return f})),U[Fe]=function(n,o){if(l=n.toUpperCase(),I&&(I=!1,O?(je=function(x,ne){function he(ue,de){for(var _e=0,He=ue.length;_e<He;de(ue[_e++]));}return new O(function(ue){for(var de,_e,He,kt=0,bt=ue.length;kt<bt;kt++)"childList"===(de=ue[kt]).type?(he(de.addedNodes,x),he(de.removedNodes,ne)):(_e=de.target,J&&_e[Oe]&&"style"!==de.attributeName&&(He=t.call(_e,de.attributeName))!==de.oldValue&&_e[Oe](de.attributeName,de.oldValue,He))})}(Ue(Se),Ue(we)),(Le=function(x){return je.observe(x,{childList:!0,subtree:!0}),x})(U),le&&(te.attachShadow=function(){return Le(le.apply(this,arguments))})):($e=[],U[ye]("DOMNodeInserted",Pe(Se)),U[ye]("DOMNodeRemoved",Pe(we))),U[ye](_t,Me),U[ye]("readystatechange",Me),U.importNode=function(x,ne){switch(x.nodeType){case 1:return nt(U,m,[x,!!ne]);case 11:for(var he=U.createDocumentFragment(),ue=x.childNodes,de=ue.length,_e=0;_e<de;_e++)he.appendChild(U.importNode(ue[_e],!!ne));return he;default:return X.call(x,!!ne)}},te.cloneNode=function(x){return nt(this,X,[!!x])}),Z)return Z=!1;if(-2<s.call(Be,Ie+l)+s.call(Be,Ve+l)&&ze(n),!yt.test(l)||-1<s.call(vt,l))throw new Error("The type "+n+" is invalid");var l,f,T=function(){return H?U.createElement(ee,l):U.createElement(ee)},w=o||a,H=d.call(w,We),ee=H?o[We].toUpperCase():l;return H&&-1<s.call(Be,Ve+ee)&&ze(ee),f=Be.push((H?Ie:Ve)+l)-1,r=r.concat(r.length?",":"",H?ee+'[is="'+n.toLowerCase()+'"]':ee),T.prototype=e[f]=d.call(w,"prototype")?w.prototype:_(te),r.length&&xe(U.querySelectorAll(r),Se),T},U.createElement=c=function(n,o){var l=dt(o),f=l?h.call(U,n,K(l)):h.call(U,n),T=""+n,w=s.call(Be,(l?Ie:Ve)+(l||T).toUpperCase()),H=-1<w;return l&&(f.setAttribute("is",l=l.toLowerCase()),H&&(H=et(T.toUpperCase(),l))),J=!U.createElement.innerHTMLHelper,H&&be(f,e[w]),f}),addEventListener("beforeunload",function(){delete U.createElement,delete U.importNode,delete U[Fe]},!1),fe.prototype={constructor:fe,define:re?function(n,o,l){if(l)ht(n,o,l);else{var f=n.toUpperCase();ae[f]={constructor:o,create:[f]},v.set(o,f),ce.define(n,o)}}:ht,get:re?function(n){return ce.get(n)||rt(n)}:rt,whenDefined:re?function(n){return Ee.race([ce.whenDefined(n),ot(n)])}:ot},!ce||/^force/.test(ve.type))Ye();else if(!ve.noBuiltIn)try{!function(n,o,l){var f=new RegExp("^<a\\s+is=('|\")"+l+"\\1></a>$");if(o[We]="a",(n.prototype=_(pe.prototype)).constructor=n,Y.customElements.define(l,n,o),!f.test(U.createElement("a",{is:l}).outerHTML)||!f.test((new n).outerHTML))throw o}(function n(){return Reflect.construct(pe,[],n)},{},"document-register-element-a"+mt)}catch{Ye()}if(!ve.noBuiltIn)try{if(h.call(U,"a","a").outerHTML.indexOf("is")<0)throw{}}catch{K=function(o){return{is:o.toLowerCase()}}}}(window)},332:()=>{"use strict";!function(e){const r=e.performance;function i(X){r&&r.mark&&r.mark(X)}function s(X,g){r&&r.measure&&r.measure(X,g)}i("Zone");const a=e.__Zone_symbol_prefix||"__zone_symbol__";function d(X){return a+X}const k=!0===e[d("forceDuplicateZoneCheck")];if(e.Zone){if(k||"function"!=typeof e.Zone.__symbol__)throw new Error("Zone already loaded.");return e.Zone}let p=(()=>{class g{static assertZonePatched(){if(e.Promise!==te.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let t=g.current;for(;t.parent;)t=t.parent;return t}static get current(){return se.zone}static get currentTask(){return Ce}static __load_patch(t,y,R=!1){if(te.hasOwnProperty(t)){if(!R&&k)throw Error("Already loaded patch: "+t)}else if(!e["__Zone_disable_"+t]){const G="Zone:"+t;i(G),te[t]=y(e,g,oe),s(G,G)}}get parent(){return this._parent}get name(){return this._name}constructor(t,y){this._parent=t,this._name=y?y.name||"unnamed":"<root>",this._properties=y&&y.properties||{},this._zoneDelegate=new P(this,this._parent&&this._parent._zoneDelegate,y)}get(t){const y=this.getZoneWith(t);if(y)return y._properties[t]}getZoneWith(t){let y=this;for(;y;){if(y._properties.hasOwnProperty(t))return y;y=y._parent}return null}fork(t){if(!t)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,t)}wrap(t,y){if("function"!=typeof t)throw new Error("Expecting function got: "+t);const R=this._zoneDelegate.intercept(this,t,y),G=this;return function(){return G.runGuarded(R,this,arguments,y)}}run(t,y,R,G){se={parent:se,zone:this};try{return this._zoneDelegate.invoke(this,t,y,R,G)}finally{se=se.parent}}runGuarded(t,y=null,R,G){se={parent:se,zone:this};try{try{return this._zoneDelegate.invoke(this,t,y,R,G)}catch(h){if(this._zoneDelegate.handleError(this,h))throw h}}finally{se=se.parent}}runTask(t,y,R){if(t.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(t.zone||Ee).name+"; Execution: "+this.name+")");if(t.state===z&&(t.type===pe||t.type===O))return;const G=t.state!=v;G&&t._transitionTo(v,V),t.runCount++;const h=Ce;Ce=t,se={parent:se,zone:this};try{t.type==O&&t.data&&!t.data.isPeriodic&&(t.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,t,y,R)}catch(m){if(this._zoneDelegate.handleError(this,m))throw m}}finally{t.state!==z&&t.state!==_&&(t.type==pe||t.data&&t.data.isPeriodic?G&&t._transitionTo(V,v):(t.runCount=0,this._updateTaskCount(t,-1),G&&t._transitionTo(z,v,z))),se=se.parent,Ce=h}}scheduleTask(t){if(t.zone&&t.zone!==this){let R=this;for(;R;){if(R===t.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${t.zone.name}`);R=R.parent}}t._transitionTo(ae,z);const y=[];t._zoneDelegates=y,t._zone=this;try{t=this._zoneDelegate.scheduleTask(this,t)}catch(R){throw t._transitionTo(_,ae,z),this._zoneDelegate.handleError(this,R),R}return t._zoneDelegates===y&&this._updateTaskCount(t,1),t.state==ae&&t._transitionTo(V,ae),t}scheduleMicroTask(t,y,R,G){return this.scheduleTask(new M(B,t,y,R,G,void 0))}scheduleMacroTask(t,y,R,G,h){return this.scheduleTask(new M(O,t,y,R,G,h))}scheduleEventTask(t,y,R,G,h){return this.scheduleTask(new M(pe,t,y,R,G,h))}cancelTask(t){if(t.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(t.zone||Ee).name+"; Execution: "+this.name+")");if(t.state===V||t.state===v){t._transitionTo(K,V,v);try{this._zoneDelegate.cancelTask(this,t)}catch(y){throw t._transitionTo(_,K),this._zoneDelegate.handleError(this,y),y}return this._updateTaskCount(t,-1),t._transitionTo(z,K),t.runCount=0,t}}_updateTaskCount(t,y){const R=t._zoneDelegates;-1==y&&(t._zoneDelegates=null);for(let G=0;G<R.length;G++)R[G]._updateTaskCount(t.type,y)}}return g.__symbol__=d,g})();const D={name:"",onHasTask:(X,g,u,t)=>X.hasTask(u,t),onScheduleTask:(X,g,u,t)=>X.scheduleTask(u,t),onInvokeTask:(X,g,u,t,y,R)=>X.invokeTask(u,t,y,R),onCancelTask:(X,g,u,t)=>X.cancelTask(u,t)};class P{constructor(g,u,t){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=g,this._parentDelegate=u,this._forkZS=t&&(t&&t.onFork?t:u._forkZS),this._forkDlgt=t&&(t.onFork?u:u._forkDlgt),this._forkCurrZone=t&&(t.onFork?this.zone:u._forkCurrZone),this._interceptZS=t&&(t.onIntercept?t:u._interceptZS),this._interceptDlgt=t&&(t.onIntercept?u:u._interceptDlgt),this._interceptCurrZone=t&&(t.onIntercept?this.zone:u._interceptCurrZone),this._invokeZS=t&&(t.onInvoke?t:u._invokeZS),this._invokeDlgt=t&&(t.onInvoke?u:u._invokeDlgt),this._invokeCurrZone=t&&(t.onInvoke?this.zone:u._invokeCurrZone),this._handleErrorZS=t&&(t.onHandleError?t:u._handleErrorZS),this._handleErrorDlgt=t&&(t.onHandleError?u:u._handleErrorDlgt),this._handleErrorCurrZone=t&&(t.onHandleError?this.zone:u._handleErrorCurrZone),this._scheduleTaskZS=t&&(t.onScheduleTask?t:u._scheduleTaskZS),this._scheduleTaskDlgt=t&&(t.onScheduleTask?u:u._scheduleTaskDlgt),this._scheduleTaskCurrZone=t&&(t.onScheduleTask?this.zone:u._scheduleTaskCurrZone),this._invokeTaskZS=t&&(t.onInvokeTask?t:u._invokeTaskZS),this._invokeTaskDlgt=t&&(t.onInvokeTask?u:u._invokeTaskDlgt),this._invokeTaskCurrZone=t&&(t.onInvokeTask?this.zone:u._invokeTaskCurrZone),this._cancelTaskZS=t&&(t.onCancelTask?t:u._cancelTaskZS),this._cancelTaskDlgt=t&&(t.onCancelTask?u:u._cancelTaskDlgt),this._cancelTaskCurrZone=t&&(t.onCancelTask?this.zone:u._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const y=t&&t.onHasTask;(y||u&&u._hasTaskZS)&&(this._hasTaskZS=y?t:D,this._hasTaskDlgt=u,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=g,t.onScheduleTask||(this._scheduleTaskZS=D,this._scheduleTaskDlgt=u,this._scheduleTaskCurrZone=this.zone),t.onInvokeTask||(this._invokeTaskZS=D,this._invokeTaskDlgt=u,this._invokeTaskCurrZone=this.zone),t.onCancelTask||(this._cancelTaskZS=D,this._cancelTaskDlgt=u,this._cancelTaskCurrZone=this.zone))}fork(g,u){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,g,u):new p(g,u)}intercept(g,u,t){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,g,u,t):u}invoke(g,u,t,y,R){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,g,u,t,y,R):u.apply(t,y)}handleError(g,u){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,g,u)}scheduleTask(g,u){let t=u;if(this._scheduleTaskZS)this._hasTaskZS&&t._zoneDelegates.push(this._hasTaskDlgtOwner),t=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,g,u),t||(t=u);else if(u.scheduleFn)u.scheduleFn(u);else{if(u.type!=B)throw new Error("Task is missing scheduleFn.");S(u)}return t}invokeTask(g,u,t,y){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,g,u,t,y):u.callback.apply(t,y)}cancelTask(g,u){let t;if(this._cancelTaskZS)t=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,g,u);else{if(!u.cancelFn)throw Error("Task is not cancelable");t=u.cancelFn(u)}return t}hasTask(g,u){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,g,u)}catch(t){this.handleError(g,t)}}_updateTaskCount(g,u){const t=this._taskCounts,y=t[g],R=t[g]=y+u;if(R<0)throw new Error("More tasks executed then were scheduled.");0!=y&&0!=R||this.hasTask(this.zone,{microTask:t.microTask>0,macroTask:t.macroTask>0,eventTask:t.eventTask>0,change:g})}}class M{constructor(g,u,t,y,R,G){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=g,this.source=u,this.data=y,this.scheduleFn=R,this.cancelFn=G,!t)throw new Error("callback is not defined");this.callback=t;const h=this;this.invoke=g===pe&&y&&y.useG?M.invokeTask:function(){return M.invokeTask.call(e,h,this,arguments)}}static invokeTask(g,u,t){g||(g=this),Te++;try{return g.runCount++,g.zone.runTask(g,u,t)}finally{1==Te&&b(),Te--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(z,ae)}_transitionTo(g,u,t){if(this._state!==u&&this._state!==t)throw new Error(`${this.type} '${this.source}': can not transition to '${g}', expecting state '${u}'${t?" or '"+t+"'":""}, was '${this._state}'.`);this._state=g,g==z&&(this._zoneDelegates=null)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const W=d("setTimeout"),j=d("Promise"),F=d("then");let ce,ie=[],q=!1;function re(X){if(ce||e[j]&&(ce=e[j].resolve(0)),ce){let g=ce[F];g||(g=ce.then),g.call(ce,X)}else e[W](X,0)}function S(X){0===Te&&0===ie.length&&re(b),X&&ie.push(X)}function b(){if(!q){for(q=!0;ie.length;){const X=ie;ie=[];for(let g=0;g<X.length;g++){const u=X[g];try{u.zone.runTask(u,null,null)}catch(t){oe.onUnhandledError(t)}}}oe.microtaskDrainDone(),q=!1}}const Ee={name:"NO ZONE"},z="notScheduled",ae="scheduling",V="scheduled",v="running",K="canceling",_="unknown",B="microTask",O="macroTask",pe="eventTask",te={},oe={symbol:d,currentZoneFrame:()=>se,onUnhandledError:le,microtaskDrainDone:le,scheduleMicroTask:S,showUncaughtError:()=>!p[d("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:le,patchMethod:()=>le,bindArguments:()=>[],patchThen:()=>le,patchMacroTask:()=>le,patchEventPrototype:()=>le,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>le,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>le,wrapWithCurrentZone:()=>le,filterProperties:()=>[],attachOriginToPatched:()=>le,_redefineProperty:()=>le,patchCallbacks:()=>le,nativeScheduleMicroTask:re};let se={parent:null,zone:new p(null,null)},Ce=null,Te=0;function le(){}s("Zone","Zone"),e.Zone=p}(typeof window<"u"&&window||typeof self<"u"&&self||global);const Y=Object.getOwnPropertyDescriptor,ve=Object.defineProperty,De=Object.getPrototypeOf,xe=Object.create,ft=Array.prototype.slice,Ue="addEventListener",Ge="removeEventListener",et=Zone.__symbol__(Ue),tt=Zone.__symbol__(Ge),Pe="true",Me="false",qe=Zone.__symbol__("");function nt(e,r){return Zone.current.wrap(e,r)}function Xe(e,r,i,s,a){return Zone.current.scheduleMacroTask(e,r,i,s,a)}const $=Zone.__symbol__,ze=typeof window<"u",Ze=ze?window:void 0,fe=ze&&Ze||"object"==typeof self&&self||global,ht="removeAttribute";function rt(e,r){for(let i=e.length-1;i>=0;i--)"function"==typeof e[i]&&(e[i]=nt(e[i],r+"_"+i));return e}function lt(e){return!e||!1!==e.writable&&!("function"==typeof e.get&&typeof e.set>"u")}const ot=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Ye=!("nw"in fe)&&typeof fe.process<"u"&&"[object process]"==={}.toString.call(fe.process),U=!Ye&&!ot&&!(!ze||!Ze.HTMLElement),ge=typeof fe.process<"u"&&"[object process]"==={}.toString.call(fe.process)&&!ot&&!(!ze||!Ze.HTMLElement),st={},$e=function(e){if(!(e=e||fe.event))return;let r=st[e.type];r||(r=st[e.type]=$("ON_PROPERTY"+e.type));const i=this||e.target||fe,s=i[r];let a;return U&&i===Ze&&"error"===e.type?(a=s&&s.call(this,e.message,e.filename,e.lineno,e.colno,e.error),!0===a&&e.preventDefault()):(a=s&&s.apply(this,arguments),null!=a&&!a&&e.preventDefault()),a};function it(e,r,i){let s=Y(e,r);if(!s&&i&&Y(i,r)&&(s={enumerable:!0,configurable:!0}),!s||!s.configurable)return;const a=$("on"+r+"patched");if(e.hasOwnProperty(a)&&e[a])return;delete s.writable,delete s.value;const d=s.get,k=s.set,p=r.slice(2);let D=st[p];D||(D=st[p]=$("ON_PROPERTY"+p)),s.set=function(P){let M=this;!M&&e===fe&&(M=fe),M&&("function"==typeof M[D]&&M.removeEventListener(p,$e),k&&k.call(M,null),M[D]=P,"function"==typeof P&&M.addEventListener(p,$e,!1))},s.get=function(){let P=this;if(!P&&e===fe&&(P=fe),!P)return null;const M=P[D];if(M)return M;if(d){let W=d.call(this);if(W)return s.set.call(this,W),"function"==typeof P[ht]&&P.removeAttribute(r),W}return null},ve(e,r,s),e[a]=!0}function Ke(e,r,i){if(r)for(let s=0;s<r.length;s++)it(e,"on"+r[s],i);else{const s=[];for(const a in e)"on"==a.slice(0,2)&&s.push(a);for(let a=0;a<s.length;a++)it(e,s[a],i)}}const ke=$("originalInstance");function je(e){const r=fe[e];if(!r)return;fe[$(e)]=r,fe[e]=function(){const a=rt(arguments,e);switch(a.length){case 0:this[ke]=new r;break;case 1:this[ke]=new r(a[0]);break;case 2:this[ke]=new r(a[0],a[1]);break;case 3:this[ke]=new r(a[0],a[1],a[2]);break;case 4:this[ke]=new r(a[0],a[1],a[2],a[3]);break;default:throw new Error("Arg list too long.")}},be(fe[e],r);const i=new r(function(){});let s;for(s in i)"XMLHttpRequest"===e&&"responseBlob"===s||function(a){"function"==typeof i[a]?fe[e].prototype[a]=function(){return this[ke][a].apply(this[ke],arguments)}:ve(fe[e].prototype,a,{set:function(d){"function"==typeof d?(this[ke][a]=nt(d,e+"."+a),be(this[ke][a],d)):this[ke][a]=d},get:function(){return this[ke][a]}})}(s);for(s in r)"prototype"!==s&&r.hasOwnProperty(s)&&(fe[e][s]=r[s])}function Le(e,r,i){let s=e;for(;s&&!s.hasOwnProperty(r);)s=De(s);!s&&e[r]&&(s=e);const a=$(r);let d=null;if(s&&(!(d=s[a])||!s.hasOwnProperty(a))&&(d=s[a]=s[r],lt(s&&Y(s,r)))){const p=i(d,a,r);s[r]=function(){return p(this,arguments)},be(s[r],d)}return d}function ct(e,r,i){let s=null;function a(d){const k=d.data;return k.args[k.cbIdx]=function(){d.invoke.apply(this,arguments)},s.apply(k.target,k.args),d}s=Le(e,r,d=>function(k,p){const D=i(k,p);return D.cbIdx>=0&&"function"==typeof p[D.cbIdx]?Xe(D.name,p[D.cbIdx],D,a):d.apply(k,p)})}function be(e,r){e[$("OriginalDelegate")]=r}let Ne=!1,Fe=!1;function Re(){if(Ne)return Fe;Ne=!0;try{const e=Ze.navigator.userAgent;(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/")||-1!==e.indexOf("Edge/"))&&(Fe=!0)}catch{}return Fe}Zone.__load_patch("ZoneAwarePromise",(e,r,i)=>{const s=Object.getOwnPropertyDescriptor,a=Object.defineProperty,k=i.symbol,p=[],D=!0===e[k("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],P=k("Promise"),M=k("then"),W="__creationTrace__";i.onUnhandledError=h=>{if(i.showUncaughtError()){const m=h&&h.rejection;m?console.error("Unhandled Promise rejection:",m instanceof Error?m.message:m,"; Zone:",h.zone.name,"; Task:",h.task&&h.task.source,"; Value:",m,m instanceof Error?m.stack:void 0):console.error(h)}},i.microtaskDrainDone=()=>{for(;p.length;){const h=p.shift();try{h.zone.runGuarded(()=>{throw h.throwOriginal?h.rejection:h})}catch(m){F(m)}}};const j=k("unhandledPromiseRejectionHandler");function F(h){i.onUnhandledError(h);try{const m=r[j];"function"==typeof m&&m.call(this,h)}catch{}}function ie(h){return h&&h.then}function q(h){return h}function ce(h){return u.reject(h)}const re=k("state"),S=k("value"),b=k("finally"),Ee=k("parentPromiseValue"),z=k("parentPromiseState"),ae="Promise.then",V=null,v=!0,K=!1,_=0;function B(h,m){return c=>{try{oe(h,m,c)}catch(E){oe(h,!1,E)}}}const O=function(){let h=!1;return function(c){return function(){h||(h=!0,c.apply(null,arguments))}}},pe="Promise resolved with itself",te=k("currentTaskTrace");function oe(h,m,c){const E=O();if(h===c)throw new TypeError(pe);if(h[re]===V){let C=null;try{("object"==typeof c||"function"==typeof c)&&(C=c&&c.then)}catch(N){return E(()=>{oe(h,!1,N)})(),h}if(m!==K&&c instanceof u&&c.hasOwnProperty(re)&&c.hasOwnProperty(S)&&c[re]!==V)Ce(c),oe(h,c[re],c[S]);else if(m!==K&&"function"==typeof C)try{C.call(c,E(B(h,m)),E(B(h,!1)))}catch(N){E(()=>{oe(h,!1,N)})()}else{h[re]=m;const N=h[S];if(h[S]=c,h[b]===b&&m===v&&(h[re]=h[z],h[S]=h[Ee]),m===K&&c instanceof Error){const L=r.currentTask&&r.currentTask.data&&r.currentTask.data[W];L&&a(c,te,{configurable:!0,enumerable:!1,writable:!0,value:L})}for(let L=0;L<N.length;)Te(h,N[L++],N[L++],N[L++],N[L++]);if(0==N.length&&m==K){h[re]=_;let L=c;try{throw new Error("Uncaught (in promise): "+function d(h){return h&&h.toString===Object.prototype.toString?(h.constructor&&h.constructor.name||"")+": "+JSON.stringify(h):h?h.toString():Object.prototype.toString.call(h)}(c)+(c&&c.stack?"\n"+c.stack:""))}catch(I){L=I}D&&(L.throwOriginal=!0),L.rejection=c,L.promise=h,L.zone=r.current,L.task=r.currentTask,p.push(L),i.scheduleMicroTask()}}}return h}const se=k("rejectionHandledHandler");function Ce(h){if(h[re]===_){try{const m=r[se];m&&"function"==typeof m&&m.call(this,{rejection:h[S],promise:h})}catch{}h[re]=K;for(let m=0;m<p.length;m++)h===p[m].promise&&p.splice(m,1)}}function Te(h,m,c,E,C){Ce(h);const N=h[re],L=N?"function"==typeof E?E:q:"function"==typeof C?C:ce;m.scheduleMicroTask(ae,()=>{try{const I=h[S],Z=!!c&&b===c[b];Z&&(c[Ee]=I,c[z]=N);const A=m.run(L,void 0,Z&&L!==ce&&L!==q?[]:[I]);oe(c,!0,A)}catch(I){oe(c,!1,I)}},c)}const X=function(){},g=e.AggregateError;class u{static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(m){return oe(new this(null),v,m)}static reject(m){return oe(new this(null),K,m)}static any(m){if(!m||"function"!=typeof m[Symbol.iterator])return Promise.reject(new g([],"All promises were rejected"));const c=[];let E=0;try{for(let L of m)E++,c.push(u.resolve(L))}catch{return Promise.reject(new g([],"All promises were rejected"))}if(0===E)return Promise.reject(new g([],"All promises were rejected"));let C=!1;const N=[];return new u((L,I)=>{for(let Z=0;Z<c.length;Z++)c[Z].then(A=>{C||(C=!0,L(A))},A=>{N.push(A),E--,0===E&&(C=!0,I(new g(N,"All promises were rejected")))})})}static race(m){let c,E,C=new this((I,Z)=>{c=I,E=Z});function N(I){c(I)}function L(I){E(I)}for(let I of m)ie(I)||(I=this.resolve(I)),I.then(N,L);return C}static all(m){return u.allWithCallback(m)}static allSettled(m){return(this&&this.prototype instanceof u?this:u).allWithCallback(m,{thenCallback:E=>({status:"fulfilled",value:E}),errorCallback:E=>({status:"rejected",reason:E})})}static allWithCallback(m,c){let E,C,N=new this((A,Q)=>{E=A,C=Q}),L=2,I=0;const Z=[];for(let A of m){ie(A)||(A=this.resolve(A));const Q=I;try{A.then(J=>{Z[Q]=c?c.thenCallback(J):J,L--,0===L&&E(Z)},J=>{c?(Z[Q]=c.errorCallback(J),L--,0===L&&E(Z)):C(J)})}catch(J){C(J)}L++,I++}return L-=2,0===L&&E(Z),N}constructor(m){const c=this;if(!(c instanceof u))throw new Error("Must be an instanceof Promise.");c[re]=V,c[S]=[];try{const E=O();m&&m(E(B(c,v)),E(B(c,K)))}catch(E){oe(c,!1,E)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return u}then(m,c){let E=this.constructor?.[Symbol.species];(!E||"function"!=typeof E)&&(E=this.constructor||u);const C=new E(X),N=r.current;return this[re]==V?this[S].push(N,C,m,c):Te(this,N,C,m,c),C}catch(m){return this.then(null,m)}finally(m){let c=this.constructor?.[Symbol.species];(!c||"function"!=typeof c)&&(c=u);const E=new c(X);E[b]=b;const C=r.current;return this[re]==V?this[S].push(C,E,m,m):Te(this,C,E,m,m),E}}u.resolve=u.resolve,u.reject=u.reject,u.race=u.race,u.all=u.all;const t=e[P]=e.Promise;e.Promise=u;const y=k("thenPatched");function R(h){const m=h.prototype,c=s(m,"then");if(c&&(!1===c.writable||!c.configurable))return;const E=m.then;m[M]=E,h.prototype.then=function(C,N){return new u((I,Z)=>{E.call(this,I,Z)}).then(C,N)},h[y]=!0}return i.patchThen=R,t&&(R(t),Le(e,"fetch",h=>function G(h){return function(m,c){let E=h.apply(m,c);if(E instanceof u)return E;let C=E.constructor;return C[y]||R(C),E}}(h))),Promise[r.__symbol__("uncaughtPromiseErrors")]=p,u}),Zone.__load_patch("toString",e=>{const r=Function.prototype.toString,i=$("OriginalDelegate"),s=$("Promise"),a=$("Error"),d=function(){if("function"==typeof this){const P=this[i];if(P)return"function"==typeof P?r.call(P):Object.prototype.toString.call(P);if(this===Promise){const M=e[s];if(M)return r.call(M)}if(this===Error){const M=e[a];if(M)return r.call(M)}}return r.call(this)};d[i]=r,Function.prototype.toString=d;const k=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":k.call(this)}});let ye=!1;if(typeof window<"u")try{const e=Object.defineProperty({},"passive",{get:function(){ye=!0}});window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch{ye=!1}const Se={useG:!0},me={},we={},We=new RegExp("^"+qe+"(\\w+)(true|false)$"),Oe=$("propagationStopped");function Et(e,r){const i=(r?r(e):e)+Me,s=(r?r(e):e)+Pe,a=qe+i,d=qe+s;me[e]={},me[e][Me]=a,me[e][Pe]=d}function Tt(e,r,i,s){const a=s&&s.add||Ue,d=s&&s.rm||Ge,k=s&&s.listeners||"eventListeners",p=s&&s.rmAll||"removeAllListeners",D=$(a),P="."+a+":",M="prependListener",W="."+M+":",j=function(S,b,Ee){if(S.isRemoved)return;const z=S.callback;let ae;"object"==typeof z&&z.handleEvent&&(S.callback=v=>z.handleEvent(v),S.originalDelegate=z);try{S.invoke(S,b,[Ee])}catch(v){ae=v}const V=S.options;return V&&"object"==typeof V&&V.once&&b[d].call(b,Ee.type,S.originalDelegate?S.originalDelegate:S.callback,V),ae};function F(S,b,Ee){if(!(b=b||e.event))return;const z=S||b.target||e,ae=z[me[b.type][Ee?Pe:Me]];if(ae){const V=[];if(1===ae.length){const v=j(ae[0],z,b);v&&V.push(v)}else{const v=ae.slice();for(let K=0;K<v.length&&(!b||!0!==b[Oe]);K++){const _=j(v[K],z,b);_&&V.push(_)}}if(1===V.length)throw V[0];for(let v=0;v<V.length;v++){const K=V[v];r.nativeScheduleMicroTask(()=>{throw K})}}}const ie=function(S){return F(this,S,!1)},q=function(S){return F(this,S,!0)};function ce(S,b){if(!S)return!1;let Ee=!0;b&&void 0!==b.useG&&(Ee=b.useG);const z=b&&b.vh;let ae=!0;b&&void 0!==b.chkDup&&(ae=b.chkDup);let V=!1;b&&void 0!==b.rt&&(V=b.rt);let v=S;for(;v&&!v.hasOwnProperty(a);)v=De(v);if(!v&&S[a]&&(v=S),!v||v[D])return!1;const K=b&&b.eventNameToString,_={},B=v[D]=v[a],O=v[$(d)]=v[d],pe=v[$(k)]=v[k],te=v[$(p)]=v[p];let oe;b&&b.prepend&&(oe=v[$(b.prepend)]=v[b.prepend]);const u=Ee?function(c){if(!_.isExisting)return B.call(_.target,_.eventName,_.capture?q:ie,_.options)}:function(c){return B.call(_.target,_.eventName,c.invoke,_.options)},t=Ee?function(c){if(!c.isRemoved){const E=me[c.eventName];let C;E&&(C=E[c.capture?Pe:Me]);const N=C&&c.target[C];if(N)for(let L=0;L<N.length;L++)if(N[L]===c){N.splice(L,1),c.isRemoved=!0,0===N.length&&(c.allRemoved=!0,c.target[C]=null);break}}if(c.allRemoved)return O.call(c.target,c.eventName,c.capture?q:ie,c.options)}:function(c){return O.call(c.target,c.eventName,c.invoke,c.options)},R=b&&b.diff?b.diff:function(c,E){const C=typeof E;return"function"===C&&c.callback===E||"object"===C&&c.originalDelegate===E},G=Zone[$("UNPATCHED_EVENTS")],h=e[$("PASSIVE_EVENTS")],m=function(c,E,C,N,L=!1,I=!1){return function(){const Z=this||e;let A=arguments[0];b&&b.transferEventName&&(A=b.transferEventName(A));let Q=arguments[1];if(!Q)return c.apply(this,arguments);if(Ye&&"uncaughtException"===A)return c.apply(this,arguments);let J=!1;if("function"!=typeof Q){if(!Q.handleEvent)return c.apply(this,arguments);J=!0}if(z&&!z(c,Q,Z,arguments))return;const n=ye&&!!h&&-1!==h.indexOf(A),o=function se(c,E){return!ye&&"object"==typeof c&&c?!!c.capture:ye&&E?"boolean"==typeof c?{capture:c,passive:!0}:c?"object"==typeof c&&!1!==c.passive?{...c,passive:!0}:c:{passive:!0}:c}(arguments[2],n);if(G)for(let He=0;He<G.length;He++)if(A===G[He])return n?c.call(Z,A,Q,o):c.apply(this,arguments);const l=!!o&&("boolean"==typeof o||o.capture),f=!(!o||"object"!=typeof o)&&o.once,T=Zone.current;let w=me[A];w||(Et(A,K),w=me[A]);const H=w[l?Pe:Me];let ne,ee=Z[H],x=!1;if(ee){if(x=!0,ae)for(let He=0;He<ee.length;He++)if(R(ee[He],Q))return}else ee=Z[H]=[];const he=Z.constructor.name,ue=we[he];ue&&(ne=ue[A]),ne||(ne=he+E+(K?K(A):A)),_.options=o,f&&(_.options.once=!1),_.target=Z,_.capture=l,_.eventName=A,_.isExisting=x;const de=Ee?Se:void 0;de&&(de.taskData=_);const _e=T.scheduleEventTask(ne,Q,de,C,N);return _.target=null,de&&(de.taskData=null),f&&(o.once=!0),!ye&&"boolean"==typeof _e.options||(_e.options=o),_e.target=Z,_e.capture=l,_e.eventName=A,J&&(_e.originalDelegate=Q),I?ee.unshift(_e):ee.push(_e),L?Z:void 0}};return v[a]=m(B,P,u,t,V),oe&&(v[M]=m(oe,W,function(c){return oe.call(_.target,_.eventName,c.invoke,_.options)},t,V,!0)),v[d]=function(){const c=this||e;let E=arguments[0];b&&b.transferEventName&&(E=b.transferEventName(E));const C=arguments[2],N=!!C&&("boolean"==typeof C||C.capture),L=arguments[1];if(!L)return O.apply(this,arguments);if(z&&!z(O,L,c,arguments))return;const I=me[E];let Z;I&&(Z=I[N?Pe:Me]);const A=Z&&c[Z];if(A)for(let Q=0;Q<A.length;Q++){const J=A[Q];if(R(J,L))return A.splice(Q,1),J.isRemoved=!0,0===A.length&&(J.allRemoved=!0,c[Z]=null,"string"==typeof E)&&(c[qe+"ON_PROPERTY"+E]=null),J.zone.cancelTask(J),V?c:void 0}return O.apply(this,arguments)},v[k]=function(){const c=this||e;let E=arguments[0];b&&b.transferEventName&&(E=b.transferEventName(E));const C=[],N=ut(c,K?K(E):E);for(let L=0;L<N.length;L++){const I=N[L];C.push(I.originalDelegate?I.originalDelegate:I.callback)}return C},v[p]=function(){const c=this||e;let E=arguments[0];if(E){b&&b.transferEventName&&(E=b.transferEventName(E));const C=me[E];if(C){const I=c[C[Me]],Z=c[C[Pe]];if(I){const A=I.slice();for(let Q=0;Q<A.length;Q++){const J=A[Q];this[d].call(this,E,J.originalDelegate?J.originalDelegate:J.callback,J.options)}}if(Z){const A=Z.slice();for(let Q=0;Q<A.length;Q++){const J=A[Q];this[d].call(this,E,J.originalDelegate?J.originalDelegate:J.callback,J.options)}}}}else{const C=Object.keys(c);for(let N=0;N<C.length;N++){const I=We.exec(C[N]);let Z=I&&I[1];Z&&"removeListener"!==Z&&this[p].call(this,Z)}this[p].call(this,"removeListener")}if(V)return this},be(v[a],B),be(v[d],O),te&&be(v[p],te),pe&&be(v[k],pe),!0}let re=[];for(let S=0;S<i.length;S++)re[S]=ce(i[S],s);return re}function ut(e,r){if(!r){const d=[];for(let k in e){const p=We.exec(k);let D=p&&p[1];if(D&&(!r||D===r)){const P=e[k];if(P)for(let M=0;M<P.length;M++)d.push(P[M])}}return d}let i=me[r];i||(Et(r),i=me[r]);const s=e[i[Me]],a=e[i[Pe]];return s?a?s.concat(a):s.slice():a?a.slice():[]}function Je(e,r){const i=e.Event;i&&i.prototype&&r.patchMethod(i.prototype,"stopImmediatePropagation",s=>function(a,d){a[Oe]=!0,s&&s.apply(a,d)})}function pt(e,r,i,s,a){const d=Zone.__symbol__(s);if(r[d])return;const k=r[d]=r[s];r[s]=function(p,D,P){return D&&D.prototype&&a.forEach(function(M){const W=`${i}.${s}::`+M,j=D.prototype;try{if(j.hasOwnProperty(M)){const F=e.ObjectGetOwnPropertyDescriptor(j,M);F&&F.value?(F.value=e.wrapWithCurrentZone(F.value,W),e._redefineProperty(D.prototype,M,F)):j[M]&&(j[M]=e.wrapWithCurrentZone(j[M],W))}else j[M]&&(j[M]=e.wrapWithCurrentZone(j[M],W))}catch{}}),k.call(r,p,D,P)},e.attachOriginToPatched(r[s],k)}function Qe(e,r,i){if(!i||0===i.length)return r;const s=i.filter(d=>d.target===e);if(!s||0===s.length)return r;const a=s[0].ignoreProperties;return r.filter(d=>-1===a.indexOf(d))}function at(e,r,i,s){e&&Ke(e,Qe(e,r,i),s)}function Ae(e){return Object.getOwnPropertyNames(e).filter(r=>r.startsWith("on")&&r.length>2).map(r=>r.substring(2))}Zone.__load_patch("util",(e,r,i)=>{const s=Ae(e);i.patchOnProperties=Ke,i.patchMethod=Le,i.bindArguments=rt,i.patchMacroTask=ct;const a=r.__symbol__("BLACK_LISTED_EVENTS"),d=r.__symbol__("UNPATCHED_EVENTS");e[d]&&(e[a]=e[d]),e[a]&&(r[a]=r[d]=e[a]),i.patchEventPrototype=Je,i.patchEventTarget=Tt,i.isIEOrEdge=Re,i.ObjectDefineProperty=ve,i.ObjectGetOwnPropertyDescriptor=Y,i.ObjectCreate=xe,i.ArraySlice=ft,i.patchClass=je,i.wrapWithCurrentZone=nt,i.filterProperties=Qe,i.attachOriginToPatched=be,i._redefineProperty=Object.defineProperty,i.patchCallbacks=pt,i.getGlobalObjects=()=>({globalSources:we,zoneSymbolEventNames:me,eventNames:s,isBrowser:U,isMix:ge,isNode:Ye,TRUE_STR:Pe,FALSE_STR:Me,ZONE_SYMBOL_PREFIX:qe,ADD_EVENT_LISTENER_STR:Ue,REMOVE_EVENT_LISTENER_STR:Ge})});const Ve=$("zoneTask");function Ie(e,r,i,s){let a=null,d=null;i+=s;const k={};function p(P){const M=P.data;return M.args[0]=function(){return P.invoke.apply(this,arguments)},M.handleId=a.apply(e,M.args),P}function D(P){return d.call(e,P.data.handleId)}a=Le(e,r+=s,P=>function(M,W){if("function"==typeof W[0]){const j={isPeriodic:"Interval"===s,delay:"Timeout"===s||"Interval"===s?W[1]||0:void 0,args:W},F=W[0];W[0]=function(){try{return F.apply(this,arguments)}finally{j.isPeriodic||("number"==typeof j.handleId?delete k[j.handleId]:j.handleId&&(j.handleId[Ve]=null))}};const ie=Xe(r,W[0],j,p,D);if(!ie)return ie;const q=ie.data.handleId;return"number"==typeof q?k[q]=ie:q&&(q[Ve]=ie),q&&q.ref&&q.unref&&"function"==typeof q.ref&&"function"==typeof q.unref&&(ie.ref=q.ref.bind(q),ie.unref=q.unref.bind(q)),"number"==typeof q||q?q:ie}return P.apply(e,W)}),d=Le(e,i,P=>function(M,W){const j=W[0];let F;"number"==typeof j?F=k[j]:(F=j&&j[Ve],F||(F=j)),F&&"string"==typeof F.type?"notScheduled"!==F.state&&(F.cancelFn&&F.data.isPeriodic||0===F.runCount)&&("number"==typeof j?delete k[j]:j&&(j[Ve]=null),F.zone.cancelTask(F)):P.apply(e,W)})}Zone.__load_patch("legacy",e=>{const r=e[Zone.__symbol__("legacyPatch")];r&&r()}),Zone.__load_patch("timers",e=>{const r="set",i="clear";Ie(e,r,i,"Timeout"),Ie(e,r,i,"Interval"),Ie(e,r,i,"Immediate")}),Zone.__load_patch("requestAnimationFrame",e=>{Ie(e,"request","cancel","AnimationFrame"),Ie(e,"mozRequest","mozCancel","AnimationFrame"),Ie(e,"webkitRequest","webkitCancel","AnimationFrame")}),Zone.__load_patch("blocking",(e,r)=>{const i=["alert","prompt","confirm"];for(let s=0;s<i.length;s++)Le(e,i[s],(d,k,p)=>function(D,P){return r.current.run(d,e,P,p)})}),Zone.__load_patch("EventTarget",(e,r,i)=>{(function Be(e,r){r.patchEventPrototype(e,r)})(e,i),function vt(e,r){if(Zone[r.symbol("patchEventTarget")])return;const{eventNames:i,zoneSymbolEventNames:s,TRUE_STR:a,FALSE_STR:d,ZONE_SYMBOL_PREFIX:k}=r.getGlobalObjects();for(let D=0;D<i.length;D++){const P=i[D],j=k+(P+d),F=k+(P+a);s[P]={},s[P][d]=j,s[P][a]=F}const p=e.EventTarget;p&&p.prototype&&r.patchEventTarget(e,r,[p&&p.prototype])}(e,i);const s=e.XMLHttpRequestEventTarget;s&&s.prototype&&i.patchEventTarget(e,i,[s.prototype])}),Zone.__load_patch("MutationObserver",(e,r,i)=>{je("MutationObserver"),je("WebKitMutationObserver")}),Zone.__load_patch("IntersectionObserver",(e,r,i)=>{je("IntersectionObserver")}),Zone.__load_patch("FileReader",(e,r,i)=>{je("FileReader")}),Zone.__load_patch("on_property",(e,r,i)=>{!function _t(e,r){if(Ye&&!ge||Zone[e.symbol("patchEvents")])return;const i=r.__Zone_ignore_on_properties;let s=[];if(U){const a=window;s=s.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);const d=function mt(){try{const e=Ze.navigator.userAgent;if(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/"))return!0}catch{}return!1}()?[{target:a,ignoreProperties:["error"]}]:[];at(a,Ae(a),i&&i.concat(d),De(a))}s=s.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let a=0;a<s.length;a++){const d=r[s[a]];d&&d.prototype&&at(d.prototype,Ae(d.prototype),i)}}(i,e)}),Zone.__load_patch("customElements",(e,r,i)=>{!function yt(e,r){const{isBrowser:i,isMix:s}=r.getGlobalObjects();(i||s)&&e.customElements&&"customElements"in e&&r.patchCallbacks(r,e.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"])}(e,i)}),Zone.__load_patch("XHR",(e,r)=>{!function D(P){const M=P.XMLHttpRequest;if(!M)return;const W=M.prototype;let F=W[et],ie=W[tt];if(!F){const _=P.XMLHttpRequestEventTarget;if(_){const B=_.prototype;F=B[et],ie=B[tt]}}const q="readystatechange",ce="scheduled";function re(_){const B=_.data,O=B.target;O[d]=!1,O[p]=!1;const pe=O[a];F||(F=O[et],ie=O[tt]),pe&&ie.call(O,q,pe);const te=O[a]=()=>{if(O.readyState===O.DONE)if(!B.aborted&&O[d]&&_.state===ce){const se=O[r.__symbol__("loadfalse")];if(0!==O.status&&se&&se.length>0){const Ce=_.invoke;_.invoke=function(){const Te=O[r.__symbol__("loadfalse")];for(let le=0;le<Te.length;le++)Te[le]===_&&Te.splice(le,1);!B.aborted&&_.state===ce&&Ce.call(_)},se.push(_)}else _.invoke()}else!B.aborted&&!1===O[d]&&(O[p]=!0)};return F.call(O,q,te),O[i]||(O[i]=_),v.apply(O,B.args),O[d]=!0,_}function S(){}function b(_){const B=_.data;return B.aborted=!0,K.apply(B.target,B.args)}const Ee=Le(W,"open",()=>function(_,B){return _[s]=0==B[2],_[k]=B[1],Ee.apply(_,B)}),ae=$("fetchTaskAborting"),V=$("fetchTaskScheduling"),v=Le(W,"send",()=>function(_,B){if(!0===r.current[V]||_[s])return v.apply(_,B);{const O={target:_,url:_[k],isPeriodic:!1,args:B,aborted:!1},pe=Xe("XMLHttpRequest.send",S,O,re,b);_&&!0===_[p]&&!O.aborted&&pe.state===ce&&pe.invoke()}}),K=Le(W,"abort",()=>function(_,B){const O=function j(_){return _[i]}(_);if(O&&"string"==typeof O.type){if(null==O.cancelFn||O.data&&O.data.aborted)return;O.zone.cancelTask(O)}else if(!0===r.current[ae])return K.apply(_,B)})}(e);const i=$("xhrTask"),s=$("xhrSync"),a=$("xhrListener"),d=$("xhrScheduled"),k=$("xhrURL"),p=$("xhrErrorBeforeScheduled")}),Zone.__load_patch("geolocation",e=>{e.navigator&&e.navigator.geolocation&&function dt(e,r){const i=e.constructor.name;for(let s=0;s<r.length;s++){const a=r[s],d=e[a];if(d){if(!lt(Y(e,a)))continue;e[a]=(p=>{const D=function(){return p.apply(this,rt(arguments,i+"."+a))};return be(D,p),D})(d)}}}(e.navigator.geolocation,["getCurrentPosition","watchPosition"])}),Zone.__load_patch("PromiseRejectionEvent",(e,r)=>{function i(s){return function(a){ut(e,s).forEach(k=>{const p=e.PromiseRejectionEvent;if(p){const D=new p(s,{promise:a.promise,reason:a.rejection});k.invoke(D)}})}}e.PromiseRejectionEvent&&(r[$("unhandledPromiseRejectionHandler")]=i("unhandledrejection"),r[$("rejectionHandledHandler")]=i("rejectionhandled"))}),Zone.__load_patch("queueMicrotask",(e,r,i)=>{!function gt(e,r){r.patchMethod(e,"queueMicrotask",i=>function(s,a){Zone.current.scheduleMicroTask("queueMicrotask",a[0])})}(e,i)})}},Y=>{Y(Y.s=321)}]);
(self.webpackChunkAtomPluginWeb=self.webpackChunkAtomPluginWeb||[]).push([[179],{890:(Rs,Wi,En)=>{"use strict";function De(t){return"function"==typeof t}function er(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const Or=er(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Fr(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class St{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(De(r))try{r()}catch(s){e=s instanceof Or?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Pt(s)}catch(o){e=e??[],o instanceof Or?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Or(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Pt(e);else{if(e instanceof St){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Fr(n,e)}remove(e){const{_finalizers:n}=this;n&&Fr(n,e),e instanceof St&&e._removeParent(this)}}St.EMPTY=(()=>{const t=new St;return t.closed=!0,t})();const Lr=St.EMPTY;function Ns(t){return t instanceof St||t&&"closed"in t&&De(t.remove)&&De(t.add)&&De(t.unsubscribe)}function Pt(t){De(t)?t():t.unsubscribe()}const Vr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},jn={setTimeout(t,e,...n){const{delegate:r}=jn;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=jn;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ur(t){jn.setTimeout(()=>{const{onUnhandledError:e}=Vr;if(!e)throw t;e(t)})}function xd(){}const qw=Ma("C",void 0,void 0);function Ma(t,e,n){return{kind:t,value:e,error:n}}let Ps=null;function Gi(t){if(Vr.useDeprecatedSynchronousErrorHandling){const e=!Ps;if(e&&(Ps={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Ps;if(Ps=null,n)throw r}}else t()}class Ra extends St{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ns(e)&&e.add(this)):this.destination=H}static create(e,n,r){return new qi(e,n,r)}next(e){this.isStopped?G(function Qw(t){return Ma("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?G(function Kw(t){return Ma("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?G(qw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ul=Function.prototype.bind;function Dt(t,e){return ul.call(t,e)}class qe{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Na(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Na(r)}else Na(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Na(n)}}}class qi extends Ra{constructor(e,n,r){let i;if(super(),De(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Vr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Dt(e.next,s),error:e.error&&Dt(e.error,s),complete:e.complete&&Dt(e.complete,s)}):i=e}this.destination=new qe(i)}}function Na(t){Vr.useDeprecatedSynchronousErrorHandling?function Os(t){Vr.useDeprecatedSynchronousErrorHandling&&Ps&&(Ps.errorThrown=!0,Ps.error=t)}(t):Ur(t)}function G(t,e){const{onStoppedNotification:n}=Vr;n&&jn.setTimeout(()=>n(t,e))}const H={closed:!0,next:xd,error:function we(t){throw t},complete:xd},ce="function"==typeof Symbol&&Symbol.observable||"@@observable";function F(t){return t}function he(t){return 0===t.length?F:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let X=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function on(t){return t&&t instanceof Ra||function ht(t){return t&&De(t.next)&&De(t.error)&&De(t.complete)}(t)&&Ns(t)}(n)?n:new qi(n,r,i);return Gi(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=wt(r))((i,s)=>{const o=new qi({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[ce](){return this}pipe(...n){return he(n)(this)}toPromise(n){return new(n=wt(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function wt(t){var e;return null!==(e=t??Vr.Promise)&&void 0!==e?e:Promise}const Ki=er(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let bt=(()=>{class t extends X{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new So(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Ki}next(n){Gi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Gi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Gi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Lr:(this.currentObservers=null,s.push(n),new St(()=>{this.currentObservers=null,Fr(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new X;return n.source=this,n}}return t.create=(e,n)=>new So(e,n),t})();class So extends bt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:Lr}}class jt extends bt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function Fs(t){return De(t?.lift)}function Fe(t){return e=>{if(Fs(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Xe(t,e,n,r,i){return new Sd(t,e,n,r,i)}class Sd extends Ra{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function be(t,e){return Fe((n,r)=>{let i=0;n.subscribe(Xe(r,s=>{r.next(t.call(e,s,i++))}))})}function Jw(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function Do(t){return this instanceof Do?(this.v=t,this):new Do(t)}function RR(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function eb(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){!function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}(a,c,(o=t[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const NR=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function PR(t){return De(t?.then)}function OR(t){return De(t[ce])}function FR(t){return Symbol.asyncIterator&&De(t?.[Symbol.asyncIterator])}function LR(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const VR=function t7(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function UR(t){return De(t?.[VR])}function BR(t){return function MR(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(p,g){s.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{!function c(h){h.value instanceof Do?Promise.resolve(h.value.v).then(l,u):d(s[0][2],h)}(r[h](f))}catch(p){d(s[0][3],p)}}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield Do(n.read());if(i)return yield Do(void 0);yield yield Do(r)}}finally{n.releaseLock()}})}function $R(t){return De(t?.getReader)}function ai(t){if(t instanceof X)return t;if(null!=t){if(OR(t))return function n7(t){return new X(e=>{const n=t[ce]();if(De(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(NR(t))return function r7(t){return new X(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(PR(t))return function i7(t){return new X(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ur)})}(t);if(FR(t))return jR(t);if(UR(t))return function s7(t){return new X(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if($R(t))return function o7(t){return jR(BR(t))}(t)}throw LR(t)}function jR(t){return new X(e=>{(function a7(t,e){var n,r,i,s;return function AR(t,e,n,r){return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):function i(s){return s instanceof n?s:new n(function(o){o(s)})}(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=RR(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Ls(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Cn(t,e,n=1/0){return De(e)?Cn((r,i)=>be((s,o)=>e(r,s,i,o))(ai(t(r,i))),n):("number"==typeof e&&(n=e),Fe((r,i)=>function c7(t,e,n,r,i,s,o,a){const c=[];let l=0,u=0,d=!1;const h=()=>{d&&!c.length&&!l&&e.complete()},f=g=>l<r?p(g):c.push(g),p=g=>{s&&e.next(g),l++;let m=!1;ai(n(g,u++)).subscribe(Xe(e,v=>{i?.(v),s?f(v):e.next(v)},()=>{m=!0},void 0,()=>{if(m)try{for(l--;c.length&&l<r;){const v=c.shift();o?Ls(e,o,()=>p(v)):p(v)}h()}catch(v){e.error(v)}}))};return t.subscribe(Xe(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,i,t,n)))}function dl(t=1/0){return Cn(F,t)}const Qi=new X(t=>t.complete());function tb(t){return t[t.length-1]}function HR(t){return De(tb(t))?t.pop():void 0}function Dd(t){return function u7(t){return t&&De(t.schedule)}(tb(t))?t.pop():void 0}function ug(t,e=0){return Fe((n,r)=>{n.subscribe(Xe(r,i=>Ls(r,t,()=>r.next(i),e),()=>Ls(r,t,()=>r.complete(),e),i=>Ls(r,t,()=>r.error(i),e)))})}function dg(t,e=0){return Fe((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function zR(t,e){if(!t)throw new Error("Iterable cannot be null");return new X(n=>{Ls(n,e,()=>{const r=t[Symbol.asyncIterator]();Ls(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Ht(t,e){return e?function _7(t,e){if(null!=t){if(OR(t))return function h7(t,e){return ai(t).pipe(dg(e),ug(e))}(t,e);if(NR(t))return function p7(t,e){return new X(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(PR(t))return function f7(t,e){return ai(t).pipe(dg(e),ug(e))}(t,e);if(FR(t))return zR(t,e);if(UR(t))return function g7(t,e){return new X(n=>{let r;return Ls(n,e,()=>{r=t[VR](),Ls(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>De(r?.return)&&r.return()})}(t,e);if($R(t))return function m7(t,e){return zR(BR(t),e)}(t,e)}throw LR(t)}(t,e):ai(t)}function WR(...t){const e=Dd(t),n=function d7(t,e){return"number"==typeof tb(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?ai(r[0]):dl(n)(Ht(r,e)):Qi}function ee(...t){return Ht(t,Dd(t))}function GR(t={}){const{connector:e=(()=>new bt),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,c,l=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=c=void 0,u=d=!1},p=()=>{const g=o;f(),g?.unsubscribe()};return Fe((g,m)=>{l++,!d&&!u&&h();const v=c=c??e();m.add(()=>{l--,0===l&&!d&&!u&&(a=nb(p,i))}),v.subscribe(m),!o&&l>0&&(o=new qi({next:y=>v.next(y),error:y=>{d=!0,h(),a=nb(f,n,y),v.error(y)},complete:()=>{u=!0,h(),a=nb(f,r),v.complete()}}),ai(g).subscribe(o))})(s)}}function nb(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new qi({next:()=>{r.unsubscribe(),t()}});return ai(e(...n)).subscribe(r)}function ci(t,e){return Fe((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(Xe(r,c=>{i?.unsubscribe();let l=0;const u=s++;ai(t(c,u)).subscribe(i=Xe(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function v7(t,e){return t===e}function Ke(t){for(let e in t)if(t[e]===Ke)return e;throw Error("Could not find renamed property on target object.")}function hg(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Xt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Xt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function rb(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const w7=Ke({__forward_ref__:Ke});function it(t){return t.__forward_ref__=it,t.toString=function(){return Xt(this())},t}function oe(t){return ib(t)?t():t}function ib(t){return"function"==typeof t&&t.hasOwnProperty(w7)&&t.__forward_ref__===it}function sb(t){return t&&!!t.\u0275providers}const qR="https://g.co/ng/security#xss";class E extends Error{constructor(e,n){super(function fg(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function le(t){return"string"==typeof t?t:null==t?"":String(t)}function ob(t,e){throw new E(-201,!1)}function li(t,e){null==t&&function re(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function z(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function zt(t){return{providers:t.providers||[],imports:t.imports||[]}}function pg(t){return KR(t,mg)||KR(t,QR)}function KR(t,e){return t.hasOwnProperty(e)?t[e]:null}function gg(t){return t&&(t.hasOwnProperty(ab)||t.hasOwnProperty(D7))?t[ab]:null}const mg=Ke({\u0275prov:Ke}),ab=Ke({\u0275inj:Ke}),QR=Ke({ngInjectableDef:Ke}),D7=Ke({ngInjectorDef:Ke});var Ce=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Ce||{});let cb;function wr(t){const e=cb;return cb=t,e}function XR(t,e,n){const r=pg(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Ce.Optional?null:void 0!==e?e:void ob(Xt(t))}const tt=globalThis,Ad={},fb="__NG_DI_FLAG__",_g="ngTempTokenPath",M7=/\n/gm,ZR="__source";let hl;function Ao(t){const e=hl;return hl=t,e}function P7(t,e=Ce.Default){if(void 0===hl)throw new E(-203,!1);return null===hl?XR(t,void 0,e):hl.get(t,e&Ce.Optional?null:void 0,e)}function N(t,e=Ce.Default){return(function YR(){return cb}()||P7)(oe(t),e)}function j(t,e=Ce.Default){return N(t,yg(e))}function yg(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function pb(t){const e=[];for(let n=0;n<t.length;n++){const r=oe(t[n]);if(Array.isArray(r)){if(0===r.length)throw new E(900,!1);let i,s=Ce.Default;for(let o=0;o<r.length;o++){const a=r[o],c=O7(a);"number"==typeof c?-1===c?i=a.token:s|=c:i=a}e.push(N(i,s))}else e.push(N(r))}return e}function kd(t,e){return t[fb]=e,t.prototype[fb]=e,t}function O7(t){return t[fb]}function Vs(t){return{toString:t}.toString()}var vg=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(vg||{}),ui=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ui||{});const Yi={},Ue=[],wg=Ke({\u0275cmp:Ke}),gb=Ke({\u0275dir:Ke}),mb=Ke({\u0275pipe:Ke}),tN=Ke({\u0275mod:Ke}),Us=Ke({\u0275fac:Ke}),Md=Ke({__NG_ELEMENT_ID__:Ke}),nN=Ke({__NG_ENV_ID__:Ke});function rN(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function _b(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{const s=i,o=n[++r];sN(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function iN(t){return 3===t||4===t||6===t}function sN(t){return 64===t.charCodeAt(0)}function Rd(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||oN(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function oN(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}const aN="ng-template";function V7(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if("string"==typeof s&&i){const o=t[r++];if(n&&"class"===s&&-1!==rN(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<t.length&&"string"==typeof(s=t[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function cN(t){return 4===t.type&&t.value!==aN}function U7(t,e,n){return e===(4!==t.type||n?t.value:aN)}function B7(t,e,n){let r=4;const i=t.attrs||[],s=function H7(t){for(let e=0;e<t.length;e++)if(iN(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!U7(t,c,n)||""===c&&1===e.length){if(Ti(r))return!1;o=!0}}else{const l=8&r?c:e[++a];if(8&r&&null!==t.attrs){if(!V7(t.attrs,l,n)){if(Ti(r))return!1;o=!0}continue}const d=$7(8&r?"class":c,i,cN(t),n);if(-1===d){if(Ti(r))return!1;o=!0;continue}if(""!==l){let h;h=d>s?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==rN(f,l,0)||2&r&&l!==h){if(Ti(r))return!1;o=!0}}}}else{if(!o&&!Ti(r)&&!Ti(c))return!1;if(o&&Ti(c))continue;o=!1,r=c|1&r}}return Ti(r)||o}function Ti(t){return 0==(1&t)}function $7(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function z7(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function lN(t,e,n=!1){for(let r=0;r<e.length;r++)if(B7(t,e[r],n))return!0;return!1}function W7(t,e){e:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function uN(t,e){return t?":not("+e.trim()+")":e}function G7(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Ti(o)&&(e+=uN(s,i),i=""),r=o,s=s||!Ti(r);n++}return""!==i&&(e+=uN(s,i)),e}function Hn(t){return Vs(()=>{const e=hN(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===vg.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ui.Emulated,styles:t.styles||Ue,_:null,schemas:t.schemas||null,tView:null,id:""};fN(n);const r=t.dependencies;return n.directiveDefs=bg(r,!1),n.pipeDefs=bg(r,!0),n.id=function e9(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function Y7(t){return ke(t)||Tn(t)}function X7(t){return null!==t}function Jt(t){return Vs(()=>({type:t.type,bootstrap:t.bootstrap||Ue,declarations:t.declarations||Ue,imports:t.imports||Ue,exports:t.exports||Ue,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function dN(t,e){if(null==t)return Yi;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}function ae(t){return Vs(()=>{const e=hN(t);return fN(e),e})}function In(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function ke(t){return t[wg]||null}function Tn(t){return t[gb]||null}function tr(t){return t[mb]||null}function $r(t,e){const n=t[tN]||null;if(!n&&!0===e)throw new Error(`Type ${Xt(t)} does not have '\u0275mod' property.`);return n}function hN(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Yi,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Ue,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:dN(t.inputs,e),outputs:dN(t.outputs)}}function fN(t){t.features?.forEach(e=>e(t))}function bg(t,e){if(!t)return null;const n=e?tr:Y7;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(X7)}const Ot=0,$=1,fe=2,ft=3,xi=4,Nd=5,zn=6,pl=7,Ft=8,ko=9,gl=10,ue=11,Pd=12,pN=13,ml=14,Lt=15,Od=16,_l=17,Xi=18,Fd=19,gN=20,Mo=21,Bs=22,Eg=23,Cg=24,Se=25,yb=1,mN=2,Ji=7,yl=9,xn=11;function br(t){return Array.isArray(t)&&"object"==typeof t[yb]}function Er(t){return Array.isArray(t)&&!0===t[yb]}function vb(t){return 0!=(4&t.flags)}function Oa(t){return t.componentOffset>-1}function Tg(t){return 1==(1&t.flags)}function Si(t){return!!t.template}function wb(t){return 0!=(512&t[fe])}function Fa(t,e){return t.hasOwnProperty(Us)?t[Us]:null}let o9=tt.WeakRef??class s9{constructor(e){this.ref=e}deref(){return this.ref}},c9=0,Zi=null,xg=!1;function an(t){const e=Zi;return Zi=t,e}class bN{constructor(){this.id=c9++,this.ref=function a9(t){return new o9(t)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[e,n]of this.producers){const r=n.producerNode.deref();if(null!=r&&n.atTrackingVersion===this.trackingVersion){if(r.producerPollStatus(n.seenValueVersion))return!0}else this.producers.delete(e),r?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const e=xg;xg=!0;try{for(const[n,r]of this.consumers){const i=r.consumerNode.deref();null!=i&&i.trackingVersion===r.atTrackingVersion?i.onConsumerDependencyMayHaveChanged():(this.consumers.delete(n),i?.producers.delete(this.id))}}finally{xg=e}}producerAccessed(){if(xg)throw new Error("");if(null===Zi)return;let e=Zi.producers.get(this.id);void 0===e?(e={consumerNode:Zi.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:Zi.trackingVersion},Zi.producers.set(this.id,e),this.consumers.set(Zi.id,e)):(e.seenValueVersion=this.valueVersion,e.atTrackingVersion=Zi.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==Zi?.consumerAllowSignalWrites}producerPollStatus(e){return this.valueVersion!==e||(this.onProducerUpdateValueVersion(),this.valueVersion!==e)}}let EN=null;const IN=()=>{};class h9 extends bN{constructor(e,n,r){super(),this.watch=e,this.schedule=n,this.dirty=!1,this.cleanupFn=IN,this.registerOnCleanup=i=>{this.cleanupFn=i},this.consumerAllowSignalWrites=r}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const e=an(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=IN,this.watch(this.registerOnCleanup)}finally{an(e)}}cleanup(){this.cleanupFn()}}class TN{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function di(){return xN}function xN(t){return t.type.prototype.ngOnChanges&&(t.setInput=p9),f9}function f9(){const t=DN(this),e=t?.current;if(e){const n=t.previous;if(n===Yi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function p9(t,e,n,r){const i=this.declaredInputs[n],s=DN(t)||function g9(t,e){return t[SN]=e}(t,{previous:Yi,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[i];o[i]=new TN(c&&c.currentValue,e,a===Yi),t[r]=e}di.ngInherit=!0;const SN="__ngSimpleChanges__";function DN(t){return t[SN]||null}const es=function(t,e,n){},AN="svg";function st(t){for(;Array.isArray(t);)t=t[Ot];return t}function Ag(t,e){return st(e[t])}function Cr(t,e){return st(e[t.index])}function MN(t,e){return t.data[e]}function vl(t,e){return t[e]}function jr(t,e){const n=e[t];return br(n)?n:n[Ot]}function Ro(t,e){return null==e?null:t[e]}function RN(t){t[_l]=0}function E9(t){1024&t[fe]||(t[fe]|=1024,PN(t,1))}function NN(t){1024&t[fe]&&(t[fe]&=-1025,PN(t,-1))}function PN(t,e){let n=t[ft];if(null===n)return;n[Nd]+=e;let r=n;for(n=n[ft];null!==n&&(1===e&&1===r[Nd]||-1===e&&0===r[Nd]);)n[Nd]+=e,r=n,n=n[ft]}const ie={lFrame:WN(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function LN(){return ie.bindingsEnabled}function wl(){return null!==ie.skipHydrationRootTNode}function x(){return ie.lFrame.lView}function Me(){return ie.lFrame.tView}function Hr(t){return ie.lFrame.contextLView=t,t[Ft]}function zr(t){return ie.lFrame.contextLView=null,t}function Sn(){let t=VN();for(;null!==t&&64===t.type;)t=t.parent;return t}function VN(){return ie.lFrame.currentTNode}function ts(t,e){const n=ie.lFrame;n.currentTNode=t,n.isParent=e}function xb(){return ie.lFrame.isParent}function Sb(){ie.lFrame.isParent=!1}function nr(){const t=ie.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function bl(){return ie.lFrame.bindingIndex++}function js(t){const e=ie.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function P9(t,e){const n=ie.lFrame;n.bindingIndex=n.bindingRootIndex=t,Db(e)}function Db(t){ie.lFrame.currentDirectiveIndex=t}function jN(){return ie.lFrame.currentQueryIndex}function kb(t){ie.lFrame.currentQueryIndex=t}function F9(t){const e=t[$];return 2===e.type?e.declTNode:1===e.type?t[zn]:null}function HN(t,e,n){if(n&Ce.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&Ce.Host||(i=F9(s),null===i||(s=s[ml],10&i.type))););if(null===i)return!1;e=i,t=s}const r=ie.lFrame=zN();return r.currentTNode=e,r.lView=t,!0}function Mb(t){const e=zN(),n=t[$];ie.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function zN(){const t=ie.lFrame,e=null===t?null:t.child;return null===e?WN(t):e}function WN(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function GN(){const t=ie.lFrame;return ie.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const qN=GN;function Rb(){const t=GN();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function rr(){return ie.lFrame.selectedIndex}function La(t){ie.lFrame.selectedIndex=t}function Et(){const t=ie.lFrame;return MN(t.tView,t.selectedIndex)}function Hs(){ie.lFrame.currentNamespace=AN}function Va(){!function B9(){ie.lFrame.currentNamespace=null}()}let QN=!0;function kg(){return QN}function No(t){QN=t}function Mg(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),null!=u&&(t.destroyHooks??=[]).push(n,u)}}function Rg(t,e,n){YN(t,e,3,n)}function Ng(t,e,n,r){(3&t[fe])===n&&YN(t,e,n,r)}function Nb(t,e){let n=t[fe];(3&n)===e&&(n&=8191,n+=1,t[fe]=n)}function YN(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let c=void 0!==r?65535&t[_l]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(t[_l]+=65536),(a<s||-1==s)&&(j9(t,n,e,c),t[_l]=(4294901760&t[_l])+c+2),c++}function XN(t,e){es(4,t,e);const n=an(null);try{e.call(t)}finally{an(n),es(5,t,e)}}function j9(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];i?t[fe]>>13<t[_l]>>16&&(3&t[fe])===e&&(t[fe]+=8192,XN(a,s)):XN(a,s)}const El=-1;class Ud{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Ob(t){return t!==El}function Bd(t){return 32767&t}function $d(t,e){let n=function G9(t){return t>>16}(t),r=e;for(;n>0;)r=r[ml],n--;return r}let Fb=!0;function Pg(t){const e=Fb;return Fb=t,e}const JN=255,ZN=5;let q9=0;const ns={};function Og(t,e){const n=eP(t,e);if(-1!==n)return n;const r=e[$];r.firstCreatePass&&(t.injectorIndex=e.length,Lb(r.data,t),Lb(e,null),Lb(r.blueprint,null));const i=Fg(t,e),s=t.injectorIndex;if(Ob(i)){const o=Bd(i),a=$d(i,e),c=a[$].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function Lb(t,e){t.push(0,0,0,0,0,0,0,0,e)}function eP(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Fg(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=aP(i),null===r)return El;if(n++,i=i[ml],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return El}function Vb(t,e,n){!function K9(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Md)&&(r=n[Md]),null==r&&(r=n[Md]=q9++);const i=r&JN;e.data[t+(i>>ZN)]|=1<<i}(t,e,n)}function tP(t,e,n){if(n&Ce.Optional||void 0!==t)return t;ob()}function nP(t,e,n,r){if(n&Ce.Optional&&void 0===r&&(r=null),!(n&(Ce.Self|Ce.Host))){const i=t[ko],s=wr(void 0);try{return i?i.get(e,r,n&Ce.Optional):XR(e,r,n&Ce.Optional)}finally{wr(s)}}return tP(r,0,n)}function rP(t,e,n,r=Ce.Default,i){if(null!==t){if(2048&e[fe]&&!(r&Ce.Self)){const o=function eK(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[fe]&&!(512&o[fe]);){const a=iP(s,o,n,r|Ce.Self,ns);if(a!==ns)return a;let c=s.parent;if(!c){const l=o[gN];if(l){const u=l.get(n,ns,r);if(u!==ns)return u}c=aP(o),o=o[ml]}s=c}return i}(t,e,n,r,ns);if(o!==ns)return o}const s=iP(t,e,n,r,ns);if(s!==ns)return s}return nP(e,n,r,i)}function iP(t,e,n,r,i){const s=function X9(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Md)?t[Md]:void 0;return"number"==typeof e?e>=0?e&JN:Z9:e}(n);if("function"==typeof s){if(!HN(e,t,r))return r&Ce.Host?tP(i,0,r):nP(e,n,r,i);try{let o;if(o=s(r),null!=o||r&Ce.Optional)return o;ob()}finally{qN()}}else if("number"==typeof s){let o=null,a=eP(t,e),c=El,l=r&Ce.Host?e[Lt][zn]:null;for((-1===a||r&Ce.SkipSelf)&&(c=-1===a?Fg(t,e):e[a+8],c!==El&&oP(r,!1)?(o=e[$],a=Bd(c),e=$d(c,e)):a=-1);-1!==a;){const u=e[$];if(sP(s,a,u.data)){const d=Y9(a,e,n,o,r,l);if(d!==ns)return d}c=e[a+8],c!==El&&oP(r,e[$].data[a+8]===l)&&sP(s,a,e)?(o=u,a=Bd(c),e=$d(c,e)):a=-1}}return i}function Y9(t,e,n,r,i,s){const o=e[$],a=o.data[t+8],u=Lg(a,o,n,null==r?Oa(a)&&Fb:r!=o&&0!=(3&a.type),i&Ce.Host&&s===a);return null!==u?Ua(e,o,u,a):ns}function Lg(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,c=t.directiveStart,u=s>>20,h=i?a+u:t.directiveEnd;for(let f=r?a:a+u;f<h;f++){const p=o[f];if(f<c&&n===p||f>=c&&p.type===n)return f}if(i){const f=o[c];if(f&&Si(f)&&f.type===n)return c}return null}function Ua(t,e,n,r){let i=t[n];const s=e.data;if(function H9(t){return t instanceof Ud}(i)){const o=i;o.resolving&&function b7(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new E(-200,`Circular dependency in DI detected for ${t}${n}`)}(function We(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():le(t)}(s[n]));const a=Pg(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?wr(o.injectImpl):null;HN(t,r,Ce.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function $9(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=xN(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==l&&wr(l),Pg(a),o.resolving=!1,qN()}}return i}function sP(t,e,n){return!!(n[e+(t>>ZN)]&1<<t)}function oP(t,e){return!(t&Ce.Self||t&Ce.Host&&e)}class ir{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return rP(this._tNode,this._lView,e,yg(r),n)}}function Z9(){return new ir(Sn(),x())}function Dn(t){return Vs(()=>{const e=t.prototype.constructor,n=e[Us]||Ub(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const s=i[Us]||Ub(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Ub(t){return ib(t)?()=>{const e=Ub(oe(t));return e&&e()}:Fa(t)}function aP(t){const e=t[$],n=e.type;return 2===n?e.declTNode:1===n?t[zn]:null}const Il="__parameters__";function xl(t,e,n){return Vs(()=>{const r=function Bb(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(c,l,u){const d=c.hasOwnProperty(Il)?c[Il]:Object.defineProperty(c,Il,{value:[]})[Il];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function Dl(t,e){t.forEach(n=>Array.isArray(n)?Dl(n,e):e(n))}function lP(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ug(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function zd(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function Wr(t,e,n){let r=Al(t,e);return r>=0?t[1|r]=n:(r=~r,function aK(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function $b(t,e){const n=Al(t,e);if(n>=0)return t[1|n]}function Al(t,e){return function uP(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}(t,e,1)}const Ct=kd(xl("Optional"),8),$g=kd(xl("SkipSelf"),4);function Gg(t){return 128==(128&t.flags)}var Po=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Po||{});const DK=/^>|^->|<!--|-->|--!>|<!-$/g,AK=/(<|>)/,kK="\u200b$1\u200b";const Gb=new Map;let MK=0;const Kb="__ngContext__";function Wn(t,e){br(e)?(t[Kb]=e[Fd],function NK(t){Gb.set(t[Fd],t)}(e)):t[Kb]=e}let Qb;function Yb(t,e){return Qb(t,e)}function qd(t){const e=t[ft];return Er(e)?e[ft]:e}function kP(t){return RP(t[Pd])}function MP(t){return RP(t[xi])}function RP(t){for(;null!==t&&!Er(t);)t=t[xi];return t}function Rl(t,e,n,r,i){if(null!=r){let s,o=!1;Er(r)?s=r:br(r)&&(o=!0,r=r[Ot]);const a=st(r);0===t&&null!==n?null==i?FP(e,n,a):Ba(e,n,a,i||null,!0):1===t&&null!==n?Ba(e,n,a,i||null,!0):2===t?function Zg(t,e,n){const r=Xg(t,e);r&&function JK(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function tQ(t,e,n,r,i){const s=n[Ji];s!==st(n)&&Rl(e,t,r,s,i);for(let a=xn;a<n.length;a++){const c=n[a];Qd(c[$],c,t,e,r,s)}}(e,t,s,n,i)}}function Xb(t,e){return t.createComment(function EP(t){return t.replace(DK,e=>e.replace(AK,kK))}(e))}function Qg(t,e,n){return t.createElement(e,n)}function PP(t,e){const n=t[yl],r=n.indexOf(e);NN(e),n.splice(r,1)}function Yg(t,e){if(t.length<=xn)return;const n=xn+e,r=t[n];if(r){const i=r[Od];null!==i&&i!==t&&PP(i,r),e>0&&(t[n-1][xi]=r[xi]);const s=Ug(t,xn+e);!function zK(t,e){Qd(t,e,e[ue],2,null,null),e[Ot]=null,e[zn]=null}(r[$],r);const o=s[Xi];null!==o&&o.detachView(s[$]),r[ft]=null,r[xi]=null,r[fe]&=-129}return r}function Jb(t,e){if(!(256&e[fe])){const n=e[ue];e[Eg]?.destroy(),e[Cg]?.destroy(),n.destroyNode&&Qd(t,e,n,3,null,null),function qK(t){let e=t[Pd];if(!e)return Zb(t[$],t);for(;e;){let n=null;if(br(e))n=e[Pd];else{const r=e[xn];r&&(n=r)}if(!n){for(;e&&!e[xi]&&e!==t;)br(e)&&Zb(e[$],e),e=e[ft];null===e&&(e=t),br(e)&&Zb(e[$],e),n=e&&e[xi]}e=n}}(e)}}function Zb(t,e){if(!(256&e[fe])){e[fe]&=-129,e[fe]|=256,function XK(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Ud)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],c=s[o+1];es(4,a,c);try{c.call(a)}finally{es(5,a,c)}}else{es(4,i,s);try{s.call(i)}finally{es(5,i,s)}}}}}(t,e),function YK(t,e){const n=t.cleanup,r=e[pl];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[pl]=null);const i=e[Mo];if(null!==i){e[Mo]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(t,e),1===e[$].type&&e[ue].destroy();const n=e[Od];if(null!==n&&Er(e[ft])){n!==e[ft]&&PP(n,e);const r=e[Xi];null!==r&&r.detachView(t)}!function PK(t){Gb.delete(t[Fd])}(e)}}function e0(t,e,n){return function OP(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[Ot];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=t.data[r.directiveStart+i];if(s===ui.None||s===ui.Emulated)return null}return Cr(r,n)}}(t,e.parent,n)}function Ba(t,e,n,r,i){t.insertBefore(e,n,r,i)}function FP(t,e,n){t.appendChild(e,n)}function LP(t,e,n,r,i){null!==r?Ba(t,e,n,r,i):FP(t,e,n)}function Xg(t,e){return t.parentNode(e)}function VP(t,e,n){return BP(t,e,n)}let t0,em,o0,tm,BP=function UP(t,e,n){return 40&t.type?Cr(t,n):null};function Jg(t,e,n,r){const i=e0(t,r,e),s=e[ue],a=VP(r.parent||e[zn],r,e);if(null!=i)if(Array.isArray(n))for(let c=0;c<n.length;c++)LP(s,i,n[c],a,!1);else LP(s,i,n,a,!1);void 0!==t0&&t0(s,r,e,n,i)}function Kd(t,e){if(null!==e){const n=e.type;if(3&n)return Cr(e,t);if(4&n)return n0(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Kd(t,r);{const i=t[e.index];return Er(i)?n0(-1,i):st(i)}}if(32&n)return Yb(e,t)()||st(t[e.index]);{const r=jP(t,e);return null!==r?Array.isArray(r)?r[0]:Kd(qd(t[Lt]),r):Kd(t,e.next)}}return null}function jP(t,e){return null!==e?t[Lt][zn].projection[e.projection]:null}function n0(t,e){const n=xn+t+1;if(n<e.length){const r=e[n],i=r[$].firstChild;if(null!==i)return Kd(r,i)}return e[Ji]}function r0(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],c=n.type;if(o&&0===e&&(a&&Wn(st(a),r),n.flags|=2),32!=(32&n.flags))if(8&c)r0(t,e,n.child,r,i,s,!1),Rl(e,t,i,a,s);else if(32&c){const l=Yb(n,r);let u;for(;u=l();)Rl(e,t,i,u,s);Rl(e,t,i,a,s)}else 16&c?zP(t,e,r,n,i,s):Rl(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Qd(t,e,n,r,i,s){r0(n,r,t.firstChild,e,i,s,!1)}function zP(t,e,n,r,i,s){const o=n[Lt],c=o[zn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)Rl(e,t,i,c[l],s);else{let l=c;const u=o[ft];Gg(r)&&(l.flags|=128),r0(t,e,l,u,i,s,!0)}}function WP(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function GP(t,e,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&_b(t,e,r),null!==i&&WP(t,e,i),null!==s&&function rQ(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}function Nl(t){return function s0(){if(void 0===em&&(em=null,tt.trustedTypes))try{em=tt.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return em}()?.createHTML(t)||t}function Pl(){if(void 0!==o0)return o0;if(typeof document<"u")return document;throw new E(210,!1)}function qP(t){return function a0(){if(void 0===tm&&(tm=null,tt.trustedTypes))try{tm=tt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return tm}()?.createHTML(t)||t}class $a{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${qR})`}}class cQ extends $a{getTypeName(){return"HTML"}}class lQ extends $a{getTypeName(){return"Style"}}class uQ extends $a{getTypeName(){return"Script"}}class dQ extends $a{getTypeName(){return"URL"}}class hQ extends $a{getTypeName(){return"ResourceURL"}}function Gr(t){return t instanceof $a?t.changingThisBreaksApplicationSecurity:t}function rs(t,e){const n=function fQ(t){return t instanceof $a&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${qR})`)}return n===e}class vQ{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const n=(new window.DOMParser).parseFromString(Nl(e),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}}class wQ{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const n=this.inertDocument.createElement("template");return n.innerHTML=Nl(e),n}}const EQ=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function nm(t){return(t=String(t)).match(EQ)?t:"unsafe:"+t}function zs(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Yd(...t){const e={};for(const n of t)for(const r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}const XP=zs("area,br,col,hr,img,wbr"),JP=zs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ZP=zs("rp,rt"),c0=Yd(XP,Yd(JP,zs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Yd(ZP,zs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Yd(ZP,JP)),l0=zs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),eO=Yd(l0,zs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),zs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),CQ=zs("script,style,template");class IQ{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,r=!0;for(;n;)if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let i=this.checkClobberedElement(n,n.nextSibling);if(i){n=i;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")}startElement(e){const n=e.nodeName.toLowerCase();if(!c0.hasOwnProperty(n))return this.sanitizedSomething=!0,!CQ.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!eO.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;l0[a]&&(c=nm(c)),this.buf.push(" ",o,'="',tO(c),'"')}return this.buf.push(">"),!0}endElement(e){const n=e.nodeName.toLowerCase();c0.hasOwnProperty(n)&&!XP.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(tO(e))}checkClobberedElement(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return n}}const TQ=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,xQ=/([^\#-~ |!])/g;function tO(t){return t.replace(/&/g,"&amp;").replace(TQ,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(xQ,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let rm;function nO(t,e){let n=null;try{rm=rm||function YP(t){const e=new wQ(t);return function bQ(){try{return!!(new window.DOMParser).parseFromString(Nl(""),"text/html")}catch{return!1}}()?new vQ(e):e}(t);let r=e?String(e):"";n=rm.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=rm.getInertBodyElement(r)}while(r!==s);return Nl((new IQ).sanitizeChildren(u0(n)||n))}finally{if(n){const r=u0(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function u0(t){return"content"in t&&function SQ(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var fi=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(fi||{});function im(t){const e=Xd();return e?qP(e.sanitize(fi.HTML,t)||""):rs(t,"HTML")?qP(Gr(t)):nO(Pl(),le(t))}function sr(t){const e=Xd();return e?e.sanitize(fi.URL,t)||"":rs(t,"URL")?Gr(t):nm(le(t))}function Xd(){const t=x();return t&&t[gl].sanitizer}class U{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=z({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Jd=new U("ENVIRONMENT_INITIALIZER"),sO=new U("INJECTOR",-1),oO=new U("INJECTOR_DEF_TYPES");class d0{get(e,n=Ad){if(n===Ad){const r=new Error(`NullInjectorError: No provider for ${Xt(e)}!`);throw r.name="NullInjectorError",r}return n}}function NQ(...t){return{\u0275providers:aO(0,t),\u0275fromNgModule:!0}}function aO(t,...e){const n=[],r=new Set;let i;const s=o=>{n.push(o)};return Dl(e,o=>{const a=o;sm(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&cO(i,s),n}function cO(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];f0(i,s=>{e(s,r)})}}function sm(t,e,n,r){if(!(t=oe(t)))return!1;let i=null,s=gg(t);const o=!s&&ke(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const c=t.ngModule;if(s=gg(c),!s)return!1;i=c}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of c)sm(l,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;r.add(i);try{Dl(s.imports,u=>{sm(u,e,n,r)&&(l||=[],l.push(u))})}finally{}void 0!==l&&cO(l,e)}if(!a){const l=Fa(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ue},i),e({provide:oO,useValue:i,multi:!0},i),e({provide:Jd,useValue:()=>N(i),multi:!0},i)}const c=s.providers;if(null!=c&&!a){const l=t;f0(c,u=>{e(u,l)})}}}return i!==t&&void 0!==t.providers}function f0(t,e){for(let n of t)sb(n)&&(n=n.\u0275providers),Array.isArray(n)?f0(n,e):e(n)}const PQ=Ke({provide:String,useValue:Ke});function p0(t){return null!==t&&"object"==typeof t&&PQ in t}function ja(t){return"function"==typeof t}const g0=new U("Set Injector scope."),om={},FQ={};let m0;function am(){return void 0===m0&&(m0=new d0),m0}class qr{}class cm extends qr{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,y0(e,o=>this.processProvider(o)),this.records.set(sO,Ol(void 0,this)),i.has("environment")&&this.records.set(qr,Ol(void 0,this));const s=this.records.get(g0);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(oO.multi,Ue,Ce.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=Ao(this),r=wr(void 0);try{return e()}finally{Ao(n),wr(r)}}get(e,n=Ad,r=Ce.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(nN))return e[nN](this);r=yg(r);const s=Ao(this),o=wr(void 0);try{if(!(r&Ce.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function $Q(t){return"function"==typeof t||"object"==typeof t&&t instanceof U}(e)&&pg(e);c=l&&this.injectableDefInScope(l)?Ol(_0(e),om):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&Ce.Self?am():this.parent).get(e,n=r&Ce.Optional&&n===Ad?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[_g]=a[_g]||[]).unshift(Xt(e)),s)throw a;return function F7(t,e,n,r){const i=t[_g];throw e[ZR]&&i.unshift(e[ZR]),t.message=function L7(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=Xt(e);if(Array.isArray(e))i=e.map(Xt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Xt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(M7,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[_g]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{wr(o),Ao(s)}}resolveInjectorInitializers(){const e=Ao(this),n=wr(void 0);try{const i=this.get(Jd.multi,Ue,Ce.Self);for(const s of i)s()}finally{Ao(e),wr(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Xt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new E(205,!1)}processProvider(e){let n=ja(e=oe(e))?e:oe(e&&e.provide);const r=function VQ(t){return p0(t)?Ol(void 0,t.useValue):Ol(dO(t),om)}(e);if(ja(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Ol(void 0,om,!0),i.factory=()=>pb(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===om&&(n.value=FQ,n.value=n.factory()),"object"==typeof n.value&&n.value&&function BQ(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=oe(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function _0(t){const e=pg(t),n=null!==e?e.factory:Fa(t);if(null!==n)return n;if(t instanceof U)throw new E(204,!1);if(t instanceof Function)return function LQ(t){const e=t.length;if(e>0)throw zd(e,"?"),new E(204,!1);const n=function S7(t){return t&&(t[mg]||t[QR])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new E(204,!1)}function dO(t,e,n){let r;if(ja(t)){const i=oe(t);return Fa(i)||_0(i)}if(p0(t))r=()=>oe(t.useValue);else if(function uO(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...pb(t.deps||[]));else if(function lO(t){return!(!t||!t.useExisting)}(t))r=()=>N(oe(t.useExisting));else{const i=oe(t&&(t.useClass||t.provide));if(!function UQ(t){return!!t.deps}(t))return Fa(i)||_0(i);r=()=>new i(...pb(t.deps))}return r}function Ol(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function y0(t,e){for(const n of t)Array.isArray(n)?y0(n,e):n&&sb(n)?y0(n.\u0275providers,e):e(n)}const lm=new U("AppId",{providedIn:"root",factory:()=>jQ}),jQ="ng",hO=new U("Platform Initializer"),Ws=new U("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),fO=new U("AnimationModuleType"),pO=new U("CSP nonce",{providedIn:"root",factory:()=>Pl().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let mO=(t,e,n)=>null;function T0(t,e,n=!1){return mO(t,e,n)}class JQ{}class vO{}class eY{resolveComponentFactory(e){throw function ZQ(t){const e=Error(`No component factory found for ${Xt(t)}.`);return e.ngComponent=t,e}(e)}}let Ll=(()=>{class e{}return e.NULL=new eY,e})();function tY(){return Vl(Sn(),x())}function Vl(t,e){return new Gn(Cr(t,e))}let Gn=(()=>{class e{constructor(r){this.nativeElement=r}}return e.__NG_ELEMENT_ID__=tY,e})();function nY(t){return t instanceof Gn?t.nativeElement:t}class nh{}let Gs=(()=>{class e{constructor(){this.destroyNode=null}}return e.__NG_ELEMENT_ID__=()=>function rY(){const t=x(),n=jr(Sn().index,t);return(br(n)?n:t)[ue]}(),e})(),iY=(()=>{var t;class e{}return(t=e).\u0275prov=z({token:t,providedIn:"root",factory:()=>null}),e})();class Ha{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const bO=new Ha("16.2.1"),D0={};function TO(t,e=null,n=null,r){const i=xO(t,e,n,r);return i.resolveInjectorInitializers(),i}function xO(t,e=null,n=null,r,i=new Set){const s=[n||Ue,NQ(t)];return r=r||("object"==typeof t?void 0:Xt(t)),new cm(s,e||am(),r||null,i)}let Vt=(()=>{var t;class e{static create(r,i){if(Array.isArray(r))return TO({name:""},i,r,"");{const s=r.name??"";return TO({name:s},r.parent,r.providers,s)}}}return(t=e).THROW_IF_NOT_FOUND=Ad,t.NULL=new d0,t.\u0275prov=z({token:t,providedIn:"any",factory:()=>N(sO)}),t.__NG_ELEMENT_ID__=-1,e})();function SO(t){return t.ownerDocument.defaultView}function DO(t){return t.ownerDocument}function qs(t){return t instanceof Function?t():t}let M0=(()=>{var t;class e{constructor(){this.callbacks=new Set,this.deferredCallbacks=new Set,this.renderDepth=0,this.runningCallbacks=!1}begin(){if(this.runningCallbacks)throw new E(102,!1);this.renderDepth++}end(){if(this.renderDepth--,0===this.renderDepth)try{this.runningCallbacks=!0;for(const r of this.callbacks)r.invoke()}finally{this.runningCallbacks=!1;for(const r of this.deferredCallbacks)this.callbacks.add(r);this.deferredCallbacks.clear()}}register(r){(this.runningCallbacks?this.deferredCallbacks:this.callbacks).add(r)}unregister(r){this.callbacks.delete(r),this.deferredCallbacks.delete(r)}ngOnDestroy(){this.callbacks.clear(),this.deferredCallbacks.clear()}}return(t=e).\u0275prov=z({token:t,providedIn:"root",factory:()=>new t}),e})();function rh(t){for(;t;){t[fe]|=64;const e=qd(t);if(wb(t)&&!e)return t;t=e}return null}function R0(t){return t.ngOriginalError}class za{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&R0(e);for(;n&&R0(n);)n=R0(n);return n||null}}const NO=new U("",{providedIn:"root",factory:()=>!1});class LO extends bN{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(e){this._lView=e}onConsumerDependencyMayHaveChanged(){rh(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(e,n,r){const i=an(this);this.trackingVersion++;try{e(n,r)}finally{an(i)}}destroy(){this.trackingVersion++}}let mm=null;function VO(){return mm??=new LO,mm}function UO(t,e){return t[e]??VO()}function BO(t,e){const n=VO();n.hasReadASignal&&(t[e]=mm,n.lView=t,mm=new LO)}const pe={};function M(t){$O(Me(),x(),rr()+t,!1)}function $O(t,e,n,r){if(!r)if(3==(3&e[fe])){const s=t.preOrderCheckHooks;null!==s&&Rg(e,s,n)}else{const s=t.preOrderHooks;null!==s&&Ng(e,s,0,n)}La(n)}function T(t,e=Ce.Default){const n=x();return null===n?N(t,e):rP(Sn(),n,oe(t),e)}function _m(t,e,n,r,i,s,o,a,c,l,u){const d=e.blueprint.slice();return d[Ot]=i,d[fe]=140|r,(null!==l||t&&2048&t[fe])&&(d[fe]|=2048),RN(d),d[ft]=d[ml]=t,d[Ft]=n,d[gl]=o||t&&t[gl],d[ue]=a||t&&t[ue],d[ko]=c||t&&t[ko]||null,d[zn]=s,d[Fd]=function RK(){return MK++}(),d[Bs]=u,d[gN]=l,d[Lt]=2==e.type?t[Lt]:d,d}function $l(t,e,n,r,i){let s=t.data[e];if(null===s)s=function N0(t,e,n,r,i){const s=VN(),o=xb(),c=t.data[e]=function TY(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return wl()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(t,e,n,r,i),function N9(){return ie.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function Vd(){const t=ie.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return ts(s,!0),s}function ih(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function HO(t,e,n,r,i){const s=UO(e,Eg),o=rr(),a=2&r;try{if(La(-1),a&&e.length>Se&&$O(t,e,Se,!1),es(a?2:0,i),a)s.runInContext(n,r,i);else{const l=an(null);try{n(r,i)}finally{an(l)}}}finally{a&&null===e[Eg]&&BO(e,Eg),La(o),es(a?3:1,i)}}function P0(t,e,n){if(vb(e)){const r=an(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{an(r)}}}function O0(t,e,n){LN()&&(function RY(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;Oa(n)&&function UY(t,e,n){const r=Cr(e,t),i=zO(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=ym(t,_m(t,i,null,o,r,e,null,t[gl].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Og(n,e),Wn(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const c=t.data[a],l=Ua(e,t,a,n);Wn(l,e),null!==o&&BY(0,a-i,l,c,0,o),Si(c)&&(jr(n.index,e)[Ft]=Ua(e,t,a,n))}}(t,e,n,Cr(n,e)),64==(64&n.flags)&&QO(t,e,n))}function F0(t,e,n=Cr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function zO(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=L0(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function L0(t,e,n,r,i,s,o,a,c,l,u){const d=Se+r,h=d+i,f=function vY(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:pe);return n}(d,h),p="function"==typeof l?l():l;return f[$]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}let WO=t=>null;function GO(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const s=t[i];null===r?qO(n,e,i,s):r.hasOwnProperty(i)&&qO(n,e,r[i],s)}return n}function qO(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function Kr(t,e,n,r,i,s,o,a){const c=Cr(e,n);let u,l=e.inputs;!a&&null!=l&&(u=l[r])?(j0(t,n,u,r,i),Oa(e)&&function DY(t,e){const n=jr(e,t);16&n[fe]||(n[fe]|=64)}(n,e.index)):3&e.type&&(r=function SY(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(c,r,i))}function V0(t,e,n,r){if(LN()){const i=null===r?null:{"":-1},s=function PY(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(lN(e,o.selectors,!1))if(r||(r=[]),Si(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),U0(t,e,a.length)}else r.unshift(o),U0(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&KO(t,e,n,o,i,a),i&&function OY(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new E(-301,!1);r.push(e[i],s)}}}(n,r,i)}n.mergedAttrs=Rd(n.mergedAttrs,n.attrs)}function KO(t,e,n,r,i,s){for(let l=0;l<r.length;l++)Vb(Og(n,e),t,r[l].type);!function LY(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let l=0;l<r.length;l++){const u=r[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=ih(t,e,r.length,null);for(let l=0;l<r.length;l++){const u=r[l];n.mergedAttrs=Rd(n.mergedAttrs,u.hostAttrs),VY(t,n,e,c,u),FY(c,u,i),null!==u.contentQueries&&(n.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(n.flags|=64);const d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}!function xY(t,e,n){const i=e.directiveEnd,s=t.data,o=e.attrs,a=[];let c=null,l=null;for(let u=e.directiveStart;u<i;u++){const d=s[u],h=n?n.get(d):null,p=h?h.outputs:null;c=GO(d.inputs,u,c,h?h.inputs:null),l=GO(d.outputs,u,l,p);const g=null===c||null===o||cN(e)?null:$Y(c,u,o);a.push(g)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(t,n,s)}function QO(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function O9(){return ie.lFrame.currentDirectiveIndex}();try{La(s);for(let a=r;a<i;a++){const c=t.data[a],l=e[a];Db(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&NY(c,l)}}finally{La(-1),Db(o)}}function NY(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function U0(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function FY(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Si(e)&&(n[""]=t)}}function VY(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=Fa(i.type)),o=new Ud(s,Si(i),T);t.blueprint[r]=o,n[r]=o,function kY(t,e,n,r,i){const s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function MY(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(t,e,r,ih(t,n,i.hostVars,pe),i)}function is(t,e,n,r,i,s){const o=Cr(t,e);!function B0(t,e,n,r,i,s,o){if(null==s)t.removeAttribute(e,i,n);else{const a=null==o?le(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}(e[ue],o,s,t.value,n,r,i)}function BY(t,e,n,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)YO(r,n,o[a++],o[a++],o[a++])}function YO(t,e,n,r,i){const s=an(null);try{const o=t.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{an(s)}}function $Y(t,e,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===r&&(r=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function XO(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null,null]}function JO(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=t.data[s];kb(n[r]),o.contentQueries(2,e[s],s)}}}function ym(t,e){return t[Pd]?t[pN][xi]=e:t[Pd]=e,t[pN]=e,e}function $0(t,e,n){kb(0);const r=an(null);try{e(t,n)}finally{an(r)}}function ZO(t){return t[pl]||(t[pl]=[])}function eF(t){return t.cleanup||(t.cleanup=[])}function nF(t,e){const n=t[ko],r=n?n.get(za,null):null;r&&r.handleError(e)}function j0(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++];YO(t.data[o],e[o],r,a,i)}}function Ks(t,e,n){const r=Ag(e,t);!function NP(t,e,n){t.setValue(e,n)}(t[ue],r,n)}function jY(t,e){const n=jr(e,t),r=n[$];!function HY(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[Ot];null!==i&&null===n[Bs]&&(n[Bs]=T0(i,n[ko])),H0(r,n,n[Ft])}function H0(t,e,n){Mb(e);try{const r=t.viewQuery;null!==r&&$0(1,r,n);const i=t.template;null!==i&&HO(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&JO(t,e),t.staticViewQueries&&$0(2,t.viewQuery,n);const s=t.components;null!==s&&function zY(t,e){for(let n=0;n<e.length;n++)jY(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[fe]&=-5,Rb()}}let rF=(()=>{var t;class e{constructor(){this.all=new Set,this.queue=new Map}create(r,i,s){const o=typeof Zone>"u"?null:Zone.current,a=new h9(r,u=>{this.all.has(u)&&this.queue.set(u,o)},s);let c;this.all.add(a),a.notify();const l=()=>{a.cleanup(),c?.(),this.all.delete(a),this.queue.delete(a)};return c=i?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[r,i]of this.queue)this.queue.delete(r),i?i.run(()=>r.run()):r.run()}get isQueueEmpty(){return 0===this.queue.size}}return(t=e).\u0275prov=z({token:t,providedIn:"root",factory:()=>new t}),e})();function vm(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=rb(i,a):2==s&&(r=rb(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function sh(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(st(s)),Er(s)){for(let a=xn;a<s.length;a++){const c=s[a],l=c[$].firstChild;null!==l&&sh(c[$],c,l,r)}s[Ji]!==s[Ot]&&r.push(s[Ji])}const o=n.type;if(8&o)sh(t,e,n.child,r);else if(32&o){const a=Yb(n,e);let c;for(;c=a();)r.push(c)}else if(16&o){const a=jP(e,n);if(Array.isArray(a))r.push(...a);else{const c=qd(e[Lt]);sh(c[$],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function wm(t,e,n,r=!0){const i=e[gl],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{iF(t,e,t.template,n)}catch(c){throw r&&nF(e,c),c}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function iF(t,e,n,r){const i=e[fe];if(256!=(256&i)){e[gl].effectManager?.flush(),Mb(e);try{RN(e),function BN(t){return ie.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&HO(t,e,n,2,r);const o=3==(3&i);if(o){const l=t.preOrderCheckHooks;null!==l&&Rg(e,l,null)}else{const l=t.preOrderHooks;null!==l&&Ng(e,l,0,null),Nb(e,0)}if(function qY(t){for(let e=kP(t);null!==e;e=MP(e)){if(!e[mN])continue;const n=e[yl];for(let r=0;r<n.length;r++){E9(n[r])}}}(e),sF(e,2),null!==t.contentQueries&&JO(t,e),o){const l=t.contentCheckHooks;null!==l&&Rg(e,l)}else{const l=t.contentHooks;null!==l&&Ng(e,l,1),Nb(e,1)}!function yY(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const r=UO(e,Cg);try{for(let i=0;i<n.length;i++){const s=n[i];if(s<0)La(~s);else{const o=s,a=n[++i],c=n[++i];P9(a,o),r.runInContext(c,2,e[o])}}}finally{null===e[Cg]&&BO(e,Cg),La(-1)}}(t,e);const a=t.components;null!==a&&aF(e,a,0);const c=t.viewQuery;if(null!==c&&$0(2,c,r),o){const l=t.viewCheckHooks;null!==l&&Rg(e,l)}else{const l=t.viewHooks;null!==l&&Ng(e,l,2),Nb(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[fe]&=-73,NN(e)}finally{Rb()}}}function sF(t,e){for(let n=kP(t);null!==n;n=MP(n))for(let r=xn;r<n.length;r++)oF(n[r],e)}function KY(t,e,n){oF(jr(e,t),n)}function oF(t,e){if(!function w9(t){return 128==(128&t[fe])}(t))return;const n=t[$];if(80&t[fe]&&0===e||1024&t[fe]||2===e)iF(n,t,n.template,t[Ft]);else if(t[Nd]>0){sF(t,1);const i=t[$].components;null!==i&&aF(t,i,1)}}function aF(t,e,n){for(let r=0;r<e.length;r++)KY(t,e[r],n)}class oh{get rootNodes(){const e=this._lView,n=e[$];return sh(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ft]}set context(e){this._lView[Ft]=e}get destroyed(){return 256==(256&this._lView[fe])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[ft];if(Er(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Yg(e,r),Ug(n,r))}this._attachedToViewContainer=!1}Jb(this._lView[$],this._lView)}onDestroy(e){!function ON(t,e){if(256==(256&t[fe]))throw new E(911,!1);null===t[Mo]&&(t[Mo]=[]),t[Mo].push(e)}(this._lView,e)}markForCheck(){rh(this._cdRefInjectingView||this._lView)}detach(){this._lView[fe]&=-129}reattach(){this._lView[fe]|=128}detectChanges(){wm(this._lView[$],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new E(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function GK(t,e){Qd(t,e,e[ue],2,null,null)}(this._lView[$],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new E(902,!1);this._appRef=e}}class QY extends oh{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;wm(e[$],e,e[Ft],!1)}checkNoChanges(){}get context(){return null}}class cF extends Ll{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=ke(e);return new ah(n,this.ngModule)}}function lF(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class XY{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=yg(r);const i=this.injector.get(e,D0,r);return i!==D0||n===D0?i:this.parentInjector.get(e,n,r)}}class ah extends vO{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=lF(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return lF(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function q7(t){return t.map(G7).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof qr?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new XY(e,s):e,a=o.get(nh,null);if(null===a)throw new E(407,!1);const d={rendererFactory:a,sanitizer:o.get(iY,null),effectManager:o.get(rF,null),afterRenderEventManager:o.get(M0,null)},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=r?function wY(t,e,n,r){const s=r.get(NO,!1)||n===ui.ShadowDom,o=t.selectRootElement(e,s);return function bY(t){WO(t)}(o),o}(h,r,this.componentDef.encapsulation,o):Qg(h,f,function YY(t){const e=t.toLowerCase();return"svg"===e?AN:"math"===e?"math":null}(f)),v=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let y=null;null!==p&&(y=T0(p,o,!0));const C=L0(0,null,null,1,0,null,null,null,null,null,null),I=_m(null,C,null,v,null,null,d,h,o,null,y);let A,q;Mb(I);try{const Z=this.componentDef;let ze,Nt=null;Z.findHostDirectiveDefs?(ze=[],Nt=new Map,Z.findHostDirectiveDefs(Z,ze,Nt),ze.push(Z)):ze=[Z];const si=function ZY(t,e){const n=t[$],r=Se;return t[r]=e,$l(n,r,2,"#host",null)}(I,p),Ww=function eX(t,e,n,r,i,s,o){const a=i[$];!function tX(t,e,n,r){for(const i of t)e.mergedAttrs=Rd(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(vm(e,e.mergedAttrs,!0),null!==n&&GP(r,n,e))}(r,t,e,o);let c=null;null!==e&&(c=T0(e,i[ko]));const l=s.rendererFactory.createRenderer(e,n);let u=16;n.signals?u=4096:n.onPush&&(u=64);const d=_m(i,zO(n),null,u,i[t.index],t,s,l,null,null,c);return a.firstCreatePass&&U0(a,t,r.length-1),ym(i,d),i[t.index]=d}(si,p,Z,ze,I,d,h);q=MN(C,Se),p&&function rX(t,e,n,r){if(r)_b(t,n,["ng-version",bO.full]);else{const{attrs:i,classes:s}=function K7(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!Ti(i))break;i=s}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&_b(t,n,i),s&&s.length>0&&WP(t,n,s.join(" "))}}(h,Z,p,r),void 0!==n&&function iX(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(q,this.ngContentSelectors,n),A=function nX(t,e,n,r,i,s){const o=Sn(),a=i[$],c=Cr(o,i);KO(a,i,o,n,null,r);for(let u=0;u<n.length;u++)Wn(Ua(i,a,o.directiveStart+u,o),i);QO(a,i,o),c&&Wn(c,i);const l=Ua(i,a,o.directiveStart+o.componentOffset,o);if(t[Ft]=i[Ft]=l,null!==s)for(const u of s)u(l,e);return P0(a,o,t),l}(Ww,Z,ze,Nt,I,[sX]),H0(C,I,null)}finally{Rb()}return new JY(this.componentType,A,Vl(q,I),I,q)}}class JY extends JQ{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new QY(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;j0(s[$],s,i,e,n),this.previousInputValues.set(e,n),rh(jr(this._tNode.index,s))}}get injector(){return new ir(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function sX(){const t=Sn();Mg(x()[$],t)}function Qe(t){let e=function uF(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(Si(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new E(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const o=t;o.inputs=bm(t.inputs),o.inputTransforms=bm(t.inputTransforms),o.declaredInputs=bm(t.declaredInputs),o.outputs=bm(t.outputs);const a=i.hostBindings;a&&lX(t,a);const c=i.viewQuery,l=i.contentQueries;if(c&&aX(t,c),l&&cX(t,l),hg(t.inputs,i.inputs),hg(t.declaredInputs,i.declaredInputs),hg(t.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),hg(o.inputTransforms,i.inputTransforms)),Si(i)&&i.data.animation){const u=t.data;u.animation=(u.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(t),a===Qe&&(n=!1)}}e=Object.getPrototypeOf(e)}!function oX(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Rd(i.hostAttrs,n=Rd(n,i.hostAttrs))}}(r)}function bm(t){return t===Yi?{}:t===Ue?[]:t}function aX(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function cX(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,s)=>{e(r,i,s),n(r,i,s)}:e}function lX(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function Em(t){return!!z0(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function z0(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ss(t,e,n){return t[e]=n}function qn(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Wa(t,e,n,r){const i=qn(t,e,n);return qn(t,e+1,r)||i}function gi(t,e,n,r){const i=x();return qn(i,bl(),e)&&(Me(),is(Et(),i,t,e,n,r)),gi}function Hl(t,e,n,r){return qn(t,bl(),n)?e+le(n)+r:pe}function zl(t,e,n,r,i,s){const a=Wa(t,function $s(){return ie.lFrame.bindingIndex}(),n,i);return js(2),a?e+le(n)+r+le(i)+s:pe}function Ae(t,e,n,r,i,s,o,a){const c=x(),l=Me(),u=t+Se,d=l.firstCreatePass?function PX(t,e,n,r,i,s,o,a,c){const l=e.consts,u=$l(e,t,4,o||null,Ro(l,a));V0(e,n,u,Ro(l,c)),Mg(e,u);const d=u.tView=L0(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,l,c,e,n,r,i,s,o):l.data[u];ts(d,!1);const h=SF(l,c,d,t);kg()&&Jg(l,c,h,d),Wn(h,c),ym(c,c[u]=XO(h,c,h,d)),Tg(d)&&O0(l,c,d),null!=o&&F0(c,d,a)}let SF=function DF(t,e,n,r){return No(!0),e[ue].createComment("")};function L(t,e,n){const r=x();return qn(r,bl(),e)&&Kr(Me(),Et(),r,t,e,r[ue],n,!1),L}function Y0(t,e,n,r,i){const o=i?"class":"style";j0(t,n,e.inputs[o],o,r)}function k(t,e,n,r){const i=x(),s=Me(),o=Se+t,a=i[ue],c=s.firstCreatePass?function UX(t,e,n,r,i,s){const o=e.consts,c=$l(e,t,2,r,Ro(o,i));return V0(e,n,c,Ro(o,s)),null!==c.attrs&&vm(c,c.attrs,!1),null!==c.mergedAttrs&&vm(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,e,n,r):s.data[o],l=AF(s,i,c,a,e,t);i[o]=l;const u=Tg(c);return ts(c,!0),GP(a,l,c),32!=(32&c.flags)&&kg()&&Jg(s,i,l,c),0===function I9(){return ie.lFrame.elementDepthCount}()&&Wn(l,i),function T9(){ie.lFrame.elementDepthCount++}(),u&&(O0(s,i,c),P0(s,c,i)),null!==r&&F0(i,c),k}function B(){let t=Sn();xb()?Sb():(t=t.parent,ts(t,!1));const e=t;(function S9(t){return ie.skipHydrationRootTNode===t})(e)&&function M9(){ie.skipHydrationRootTNode=null}(),function x9(){ie.lFrame.elementDepthCount--}();const n=Me();return n.firstCreatePass&&(Mg(n,t),vb(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function z9(t){return 0!=(8&t.flags)}(e)&&Y0(n,e,x(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function W9(t){return 0!=(16&t.flags)}(e)&&Y0(n,e,x(),e.stylesWithoutHost,!1),B}function Y(t,e,n,r){return k(t,e,n,r),B(),Y}let AF=(t,e,n,r,i,s)=>(No(!0),Qg(r,i,function KN(){return ie.lFrame.currentNamespace}()));function Oo(t,e,n){const r=x(),i=Me(),s=t+Se,o=i.firstCreatePass?function jX(t,e,n,r,i){const s=e.consts,o=Ro(s,r),a=$l(e,t,8,"ng-container",o);return null!==o&&vm(a,o,!0),V0(e,n,a,Ro(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,n):i.data[s];ts(o,!0);const a=MF(i,r,o,t);return r[s]=a,kg()&&Jg(i,r,a,o),Wn(a,r),Tg(o)&&(O0(i,r,o),P0(i,o,r)),null!=n&&F0(r,o),Oo}function Fo(){let t=Sn();const e=Me();return xb()?Sb():(t=t.parent,ts(t,!1)),e.firstCreatePass&&(Mg(e,t),vb(t)&&e.queries.elementEnd(t)),Fo}let MF=(t,e,n,r)=>(No(!0),Xb(e[ue],""));function Ga(){return x()}function hh(t){return!!t&&"function"==typeof t.then}function RF(t){return!!t&&"function"==typeof t.subscribe}function Je(t,e,n,r){const i=x(),s=Me(),o=Sn();return function PF(t,e,n,r,i,s,o){const a=Tg(r),l=t.firstCreatePass&&eF(t),u=e[Ft],d=ZO(e);let h=!0;if(3&r.type||o){const g=Cr(r,e),m=o?o(g):g,v=d.length,y=o?I=>o(st(I[r.index])):r.index;let C=null;if(!o&&a&&(C=function WX(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[pl],c=i[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==C)(C.__ngLastListenerFn__||C).__ngNextListenerFn__=s,C.__ngLastListenerFn__=s,h=!1;else{s=FF(r,e,u,s,!1);const I=n.listen(m,i,s);d.push(s,I),l&&l.push(i,y,v,v+1)}}else s=FF(r,e,u,s,!1);const f=r.outputs;let p;if(h&&null!==f&&(p=f[i])){const g=p.length;if(g)for(let m=0;m<g;m+=2){const A=e[p[m]][p[m+1]].subscribe(s),q=d.length;d.push(s,A),l&&l.push(i,r.index,q,-(q+1))}}}(s,i,i[ue],o,t,e,r),Je}function OF(t,e,n,r){try{return es(6,e,n),!1!==n(r)}catch(i){return nF(t,i),!1}finally{es(7,e,n)}}function FF(t,e,n,r,i){return function s(o){if(o===Function)return r;rh(t.componentOffset>-1?jr(t.index,e):e);let c=OF(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)c=OF(e,n,l,o)&&c,l=l.__ngNextListenerFn__;return i&&!1===c&&o.preventDefault(),c}}function ge(t=1){return function L9(t){return(ie.lFrame.contextLView=function V9(t,e){for(;t>0;)e=e[ml],t--;return e}(t,ie.lFrame.contextLView))[Ft]}(t)}function GX(t,e){let n=null;const r=function j7(t){const e=t.attrs;if(null!=e){const n=e.indexOf(5);if(!(1&n))return e[n+1]}return null}(t);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?lN(t,s,!0):W7(r,s))return i}else n=i}return n}function fh(t,e,n){return Sm(t,"",e,"",n),fh}function Sm(t,e,n,r,i){const s=x(),o=Hl(s,e,n,r);return o!==pe&&Kr(Me(),Et(),s,t,o,s[ue],i,!1),Sm}function X0(t,e,n,r,i,s,o){const a=x(),c=zl(a,e,n,r,i,s);return c!==pe&&Kr(Me(),Et(),a,t,c,a[ue],o,!1),X0}function Dm(t,e){return t<<17|e<<2}function Lo(t){return t>>17&32767}function J0(t){return 2|t}function qa(t){return(131068&t)>>2}function Z0(t,e){return-131069&t|e<<2}function eE(t){return 1|t}function GF(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?Lo(s):qa(s),c=!1;for(;0!==a&&(!1===c||o);){const u=t[a+1];JX(t[a],e)&&(c=!0,t[a+1]=r?eE(u):J0(u)),a=r?Lo(u):qa(u)}c&&(t[n+1]=r?J0(s):eE(s))}function JX(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Al(t,e)>=0}const en={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function qF(t){return t.substring(en.key,en.keyEnd)}function ZX(t){return t.substring(en.value,en.valueEnd)}function KF(t,e){const n=en.textEnd;return n===e?-1:(e=en.keyEnd=function nJ(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,en.key=e,n),Xl(t,e,n))}function QF(t,e){const n=en.textEnd;let r=en.key=Xl(t,e,n);return n===r?-1:(r=en.keyEnd=function rJ(t,e,n){let r;for(;e<n&&(45===(r=t.charCodeAt(e))||95===r||(-33&r)>=65&&(-33&r)<=90||r>=48&&r<=57);)e++;return e}(t,r,n),r=XF(t,r,n),r=en.value=Xl(t,r,n),r=en.valueEnd=function iJ(t,e,n){let r=-1,i=-1,s=-1,o=e,a=o;for(;o<n;){const c=t.charCodeAt(o++);if(59===c)return a;34===c||39===c?a=o=JF(t,c,o,n):e===o-4&&85===s&&82===i&&76===r&&40===c?a=o=JF(t,41,o,n):c>32&&(a=o),s=i,i=r,r=-33&c}return a}(t,r,n),XF(t,r,n))}function YF(t){en.key=0,en.keyEnd=0,en.value=0,en.valueEnd=0,en.textEnd=t.length}function Xl(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function XF(t,e,n,r){return(e=Xl(t,e,n))<n&&e++,e}function JF(t,e,n,r){let i=-1,s=n;for(;s<r;){const o=t.charCodeAt(s++);if(o==e&&92!==i)return s;i=92==o&&92===i?0:o}throw new Error}function Vo(t,e){return function Di(t,e,n,r){const i=x(),s=Me(),o=js(2);s.firstUpdatePass&&n2(s,t,o,r),e!==pe&&qn(i,o,e)&&i2(s,s.data[rr()],i,i[ue],t,i[o+1]=function fJ(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Xt(Gr(t)))),t}(e,n),r,o)}(t,e,null,!0),Vo}function sJ(t,e){for(let n=function tJ(t){return YF(t),QF(t,Xl(t,0,en.textEnd))}(e);n>=0;n=QF(e,n))r2(t,qF(e),ZX(e))}function as(t,e){for(let n=function eJ(t){return YF(t),KF(t,Xl(t,0,en.textEnd))}(e);n>=0;n=KF(e,n))Wr(t,qF(e),!0)}function Ai(t,e,n,r){const i=Me(),s=js(2);i.firstUpdatePass&&n2(i,null,s,r);const o=x();if(n!==pe&&qn(o,s,n)){const a=i.data[rr()];if(o2(a,r)&&!t2(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(n=rb(c,n||"")),Y0(i,a,o,n,r)}else!function hJ(t,e,n,r,i,s,o,a){i===pe&&(i=Ue);let c=0,l=0,u=0<i.length?i[0]:null,d=0<s.length?s[0]:null;for(;null!==u||null!==d;){const h=c<i.length?i[c+1]:void 0,f=l<s.length?s[l+1]:void 0;let g,p=null;u===d?(c+=2,l+=2,h!==f&&(p=d,g=f)):null===d||null!==u&&u<d?(c+=2,p=u):(l+=2,p=d,g=f),null!==p&&i2(t,e,n,r,p,g,o,a),u=c<i.length?i[c]:null,d=l<s.length?s[l]:null}}(i,a,o,o[ue],o[s+1],o[s+1]=function uJ(t,e,n){if(null==n||""===n)return Ue;const r=[],i=Gr(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,s)}}function t2(t,e){return e>=t.expandoStartIndex}function n2(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[rr()],o=t2(t,n);o2(s,r)&&null===e&&!o&&(e=!1),e=function oJ(t,e,n,r){const i=function Ab(t){const e=ie.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=ph(n=tE(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=tE(i,t,e,n,r),null===s){let c=function aJ(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==qa(r))return t[Lo(r)]}(t,e,r);void 0!==c&&Array.isArray(c)&&(c=tE(null,t,e,c[1],r),c=ph(c,e.attrs,r),function cJ(t,e,n,r){t[Lo(n?e.classBindings:e.styleBindings)]=r}(t,e,r,c))}else s=function lJ(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=ph(r,t[s].hostAttrs,n);return ph(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function YX(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Lo(o),c=qa(o);t[r]=n;let u,l=!1;if(Array.isArray(n)?(u=n[1],(null===u||Al(n,u)>0)&&(l=!0)):u=n,i)if(0!==c){const h=Lo(t[a+1]);t[r+1]=Dm(h,a),0!==h&&(t[h+1]=Z0(t[h+1],r)),t[a+1]=function KX(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=Dm(a,0),0!==a&&(t[a+1]=Z0(t[a+1],r)),a=r;else t[r+1]=Dm(c,0),0===a?a=r:t[c+1]=Z0(t[c+1],r),c=r;l&&(t[r+1]=J0(t[r+1])),GF(t,u,r,!0),GF(t,u,r,!1),function XX(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&Al(s,e)>=0&&(n[r+1]=eE(n[r+1]))}(e,u,t,r,s),o=Dm(a,c),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}function tE(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=ph(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function ph(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Wr(t,o,!!n||e[++s]))}return void 0===t?null:t}function r2(t,e,n){Wr(t,e,Gr(n))}function dJ(t,e,n){const r=String(e);""!==r&&!r.includes(" ")&&Wr(t,r,n)}function i2(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const c=t.data,l=c[a+1],u=function QX(t){return 1==(1&t)}(l)?s2(c,e,n,i,qa(l),o):void 0;Am(u)||(Am(s)||function qX(t){return 2==(2&t)}(l)&&(s=s2(c,null,n,i,a,o)),function nQ(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=-1===r.indexOf("-")?void 0:Po.DashCase;null==i?t.removeStyle(n,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Po.Important),t.setStyle(n,r,i,s))}}(r,o,Ag(rr(),n),i,s))}function s2(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const c=t[i],l=Array.isArray(c),u=l?c[1]:c,d=null===u;let h=n[i+1];h===pe&&(h=d?Ue:void 0);let f=d?$b(h,r):u===r?h:void 0;if(l&&!Am(f)&&(f=$b(c,r)),Am(f)&&(a=f,o))return a;const p=t[i+1];i=o?Lo(p):qa(p)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=$b(c,r))}return a}function Am(t){return void 0!==t}function o2(t,e){return 0!=(t.flags&(e?8:16))}function $e(t,e=""){const n=x(),r=Me(),i=t+Se,s=r.firstCreatePass?$l(r,i,1,e,null):r.data[i],o=a2(r,n,s,e,t);n[i]=o,kg()&&Jg(r,n,o,s),ts(s,!1)}let a2=(t,e,n,r,i)=>(No(!0),function Kg(t,e){return t.createText(e)}(e[ue],r));function or(t){return cs("",t,""),or}function cs(t,e,n){const r=x(),i=Hl(r,t,e,n);return i!==pe&&Ks(r,rr(),i),cs}function nE(t,e,n,r,i){const s=x(),o=zl(s,t,e,n,r,i);return o!==pe&&Ks(s,rr(),o),nE}function g2(t,e,n){!function os(t){Ai(r2,sJ,t,!1)}(Hl(x(),t,e,n))}const Ka=void 0;var PJ=["en",[["a","p"],["AM","PM"],Ka],[["AM","PM"],Ka,Ka],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ka,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ka,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ka,"{1} 'at' {0}",Ka],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function NJ(t){const n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===r?1:5}];let Jl={};function ar(t){const e=function FJ(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=D2(e);if(n)return n;const r=e.split("-")[0];if(n=D2(r),n)return n;if("en"===r)return PJ;throw new E(701,!1)}function D2(t){return t in Jl||(Jl[t]=tt.ng&&tt.ng.common&&tt.ng.common.locales&&tt.ng.common.locales[t]),Jl[t]}var ot=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(ot||{});const Zl="en-US";let A2=Zl;function sE(t,e,n,r,i){if(t=oe(t),Array.isArray(t))for(let s=0;s<t.length;s++)sE(t[s],e,n,r,i);else{const s=Me(),o=x(),a=Sn();let c=ja(t)?t:oe(t.provide);const l=dO(t),u=1048575&a.providerIndexes,d=a.directiveStart,h=a.providerIndexes>>20;if(ja(t)||!t.multi){const f=new Ud(l,i,T),p=aE(c,e,i?u:u+h,d);-1===p?(Vb(Og(a,o),s,c),oE(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),o.push(f)):(n[p]=f,o[p]=f)}else{const f=aE(c,e,u+h,d),p=aE(c,e,u,u+h),m=p>=0&&n[p];if(i&&!m||!i&&!(f>=0&&n[f])){Vb(Og(a,o),s,c);const v=function PZ(t,e,n,r,i){const s=new Ud(t,n,T);return s.multi=[],s.index=e,s.componentProviders=0,eL(s,i,r&&!n),s}(i?NZ:RZ,n.length,i,r,l);!i&&m&&(n[p].providerFactory=v),oE(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(v),o.push(v)}else oE(s,t,f>-1?f:p,eL(n[i?p:f],l,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function oE(t,e,n,r){const i=ja(e),s=function OQ(t){return!!t.useClass}(e);if(i||s){const c=(s?oe(e.useClass):e).prototype.ngOnDestroy;if(c){const l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const u=l.indexOf(n);-1===u?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function eL(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function aE(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function RZ(t,e,n,r){return cE(this.multi,[])}function NZ(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Ua(n,n[$],this.providerFactory.index,r);s=a.slice(0,o),cE(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],cE(i,s);return s}function cE(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function pt(t,e=[]){return n=>{n.providersResolver=(r,i)=>function MZ(t,e,n){const r=Me();if(r.firstCreatePass){const i=Si(t);sE(n,r.data,r.blueprint,i,!0),sE(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}class Qa{}class tL{}class lE extends Qa{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new cF(this);const i=$r(e);this._bootstrapComponents=qs(i.bootstrap),this._r3Injector=xO(e,n,[{provide:Qa,useValue:this},{provide:Ll,useValue:this.componentFactoryResolver},...r],Xt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class uE extends tL{constructor(e){super(),this.moduleType=e}create(e){return new lE(this.moduleType,e,[])}}class nL extends Qa{constructor(e){super(),this.componentFactoryResolver=new cF(this),this.instance=null;const n=new cm([...e.providers,{provide:Qa,useValue:this},{provide:Ll,useValue:this.componentFactoryResolver}],e.parent||am(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function dE(t,e,n=null){return new nL({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let LZ=(()=>{var t;class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){const i=aO(0,r.type),s=i.length>0?dE([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(const r of this.cachedInjectors.values())null!==r&&r.destroy()}finally{this.cachedInjectors.clear()}}}return(t=e).\u0275prov=z({token:t,providedIn:"environment",factory:()=>new t(N(qr))}),e})();function rL(t){t.getStandaloneInjector=e=>e.get(LZ).getOrCreateStandaloneInjector(t)}function eu(t,e,n,r){return dL(x(),nr(),t,e,n,r)}function wh(t,e){const n=t[e];return n===pe?void 0:n}function dL(t,e,n,r,i,s){const o=e+n;return qn(t,o,i)?ss(t,o+1,s?r.call(s,i):r(i)):wh(t,o+1)}function hL(t,e,n,r,i,s,o){const a=e+n;return Wa(t,a,i,s)?ss(t,a+2,o?r.call(o,i,s):r(i,s)):wh(t,a+2)}function pL(t,e,n,r,i,s,o,a,c){const l=e+n;return function pi(t,e,n,r,i,s){const o=Wa(t,e,n,r);return Wa(t,e+2,i,s)||o}(t,l,i,s,o,a)?ss(t,l+4,c?r.call(c,i,s,o,a):r(i,s,o,a)):wh(t,l+4)}function Kn(t,e){const n=Me();let r;const i=t+Se;n.firstCreatePass?(r=function eee(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=Fa(r.type)),a=wr(T);try{const c=Pg(!1),l=s();return Pg(c),function LX(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,x(),i,l),l}finally{wr(a)}}function fE(t,e,n){const r=t+Se,i=x(),s=vl(i,r);return bh(i,r)?dL(i,nr(),e,s.transform,n,s):s.transform(n)}function Qr(t,e,n,r){const i=t+Se,s=x(),o=vl(s,i);return bh(s,i)?hL(s,nr(),e,o.transform,n,r,o):o.transform(n,r)}function bh(t,e){return t[$].data[e].pure}function pE(t){return e=>{setTimeout(t,void 0,e)}}const gt=class ree extends bt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=pE(s),i&&(i=pE(i)),o&&(o=pE(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof St&&e.add(a),a}};function iee(){return this._results[Symbol.iterator]()}class gE{get changes(){return this._changes||(this._changes=new gt)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=gE.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=iee)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){const r=this;r.dirty=!1;const i=function hi(t){return t.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function sK(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(r._results,i,n))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function oee(t,e,n,r=!0){const i=e[$];if(function KK(t,e,n,r){const i=xn+r,s=n.length;r>0&&(n[i-1][xi]=e),r<s-xn?(e[xi]=n[i],lP(n,xn+r,e)):(n.push(e),e[xi]=null),e[ft]=n;const o=e[Od];null!==o&&n!==o&&function QK(t,e){const n=t[yl];e[Lt]!==e[ft][ft][Lt]&&(t[mN]=!0),null===n?t[yl]=[e]:n.push(e)}(o,e);const a=e[Xi];null!==a&&a.insertView(t),e[fe]|=128}(i,e,t,n),r){const s=n0(n,t),o=e[ue],a=Xg(o,t[Ji]);null!==a&&function WK(t,e,n,r,i,s){r[Ot]=i,r[zn]=e,Qd(t,r,n,1,i,s)}(i,t[zn],o,e,a,s)}}let Qs=(()=>{class e{}return e.__NG_ELEMENT_ID__=lee,e})();const aee=Qs,cee=class extends aee{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function see(t,e,n,r){const i=e.tView,a=_m(t,i,n,4096&t[fe]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Od]=t[e.index];const l=t[Xi];return null!==l&&(a[Xi]=l.createEmbeddedView(i)),H0(i,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:r});return new oh(i)}};function lee(){return Pm(Sn(),x())}function Pm(t,e){return 4&t.type?new cee(e,t,Vl(t,e)):null}let ki=(()=>{class e{}return e.__NG_ELEMENT_ID__=gee,e})();function gee(){return CL(Sn(),x())}const mee=ki,bL=class extends mee{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Vl(this._hostTNode,this._hostLView)}get injector(){return new ir(this._hostTNode,this._hostLView)}get parentInjector(){const e=Fg(this._hostTNode,this._hostLView);if(Ob(e)){const n=$d(e,this._hostLView),r=Bd(e);return new ir(n[$].data[r+8],n)}return new ir(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=EL(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-xn}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,n,r,i,s){const o=e&&!function Hd(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const g=n||{};a=g.index,r=g.injector,i=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef}const c=o?e:new ah(ke(e)),l=r||this.parentInjector;if(!s&&null==c.ngModule){const m=(o?l:this.parentInjector).get(qr,null);m&&(s=m)}ke(c.componentType??{});const f=c.create(l,i,null,s);return this.insertImpl(f.hostView,a,false),f}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,r){const i=e._lView;if(function b9(t){return Er(t[ft])}(i)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const l=i[ft],u=new bL(l,l[zn],l[ft]);u.detach(u.indexOf(e))}}const o=this._adjustIndex(n),a=this._lContainer;return oee(a,i,o,!r),e.attachToViewContainerRef(),lP(mE(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=EL(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Yg(this._lContainer,n);r&&(Ug(mE(this._lContainer),n),Jb(r[$],r))}detach(e){const n=this._adjustIndex(e,-1),r=Yg(this._lContainer,n);return r&&null!=Ug(mE(this._lContainer),n)?new oh(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function EL(t){return t[8]}function mE(t){return t[8]||(t[8]=[])}function CL(t,e){let n;const r=e[t.index];return Er(r)?n=r:(n=XO(r,e,null,t),e[t.index]=n,ym(e,n)),IL(n,e,t,r),new bL(n,t,e)}let IL=function TL(t,e,n,r){if(t[Ji])return;let i;i=8&n.type?st(r):function _ee(t,e){const n=t[ue],r=n.createComment(""),i=Cr(e,t);return Ba(n,Xg(n,i),r,function ZK(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[Ji]=i};class _E{constructor(e){this.queryList=e,this.matches=null}clone(){return new _E(this.queryList)}setDirty(){this.queryList.setDirty()}}class yE{constructor(e=[]){this.queries=e}createEmbeddedView(e){const n=e.queries;if(null!==n){const r=null!==e.contentQueries?e.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){const o=n.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new yE(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)null!==ML(e,n).matches&&this.queries[n].setDirty()}}class xL{constructor(e,n,r=null){this.predicate=e,this.flags=n,this.read=r}}class vE{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){const i=null!==n?n.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==n?n.push(s):n=[s])}return null!==n?new vE(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class wE{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new wE(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,n,wee(n,s)),this.matchTNodeWithReadOption(e,n,Lg(n,e,s,!1,!1))}else r===Qs?4&n.type&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Lg(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Gn||i===ki||i===Qs&&4&n.type)this.addMatch(n.index,-2);else{const s=Lg(n,e,i,!1,!1);null!==s&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(e,n){null===this.matches?this.matches=[e,n]:this.matches.push(e,n)}}function wee(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Eee(t,e,n,r){return-1===n?function bee(t,e){return 11&t.type?Vl(t,e):4&t.type?Pm(t,e):null}(e,t):-2===n?function Cee(t,e,n){return n===Gn?Vl(e,t):n===Qs?Pm(e,t):n===ki?CL(e,t):void 0}(t,e,r):Ua(t,t[$],n,e)}function SL(t,e,n,r){const i=e[Xi].queries[r];if(null===i.matches){const s=t.data,o=n.matches,a=[];for(let c=0;c<o.length;c+=2){const l=o[c];a.push(l<0?null:Eee(e,s[l],o[c+1],n.metadata.read))}i.matches=a}return i.matches}function bE(t,e,n,r){const i=t.queries.getByIndex(n),s=i.matches;if(null!==s){const o=SL(t,e,i,n);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)r.push(o[a/2]);else{const l=s[a+1],u=e[-c];for(let d=xn;d<u.length;d++){const h=u[d];h[Od]===h[ft]&&bE(h[$],h,l,r)}if(null!==u[yl]){const d=u[yl];for(let h=0;h<d.length;h++){const f=d[h];bE(f[$],f,l,r)}}}}}return r}function Eh(t){const e=x(),n=Me(),r=jN();kb(r+1);const i=ML(n,r);if(t.dirty&&function v9(t){return 4==(4&t[fe])}(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const s=i.crossesNgTemplate?bE(n,e,r,[]):SL(n,e,i,r);t.reset(s,nY),t.notifyOnChanges()}return!0}return!1}function Fm(t,e,n){const r=Me();r.firstCreatePass&&(function kL(t,e,n){null===t.queries&&(t.queries=new vE),t.queries.track(new wE(e,n))}(r,new xL(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),function AL(t,e,n){const r=new gE(4==(4&n));(function IY(t,e,n,r){const i=ZO(e);i.push(n),t.firstCreatePass&&eF(t).push(r,i.length-1)})(t,e,r,r.destroy),null===e[Xi]&&(e[Xi]=new yE),e[Xi].queries.push(new _E(r))}(r,x(),e)}function Ch(){return function Iee(t,e){return t[Xi].queries[e].queryList}(x(),jN())}function ML(t,e){return t.queries.getByIndex(e)}const SE=new U("Application Initializer");let DE=(()=>{var t;class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=j(SE,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const r=[];for(const s of this.appInits){const o=s();if(hh(o))r.push(o);else if(RF(o)){const a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});r.push(a)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),0===r.length&&i(),this.initialized=!0}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),KL=(()=>{var t;class e{log(r){console.log(r)}warn(r){console.warn(r)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})();const ls=new U("LocaleId",{providedIn:"root",factory:()=>j(ls,Ce.Optional|Ce.SkipSelf)||function qee(){return typeof $localize<"u"&&$localize.locale||Zl}()});let Vm=(()=>{var t;class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new jt(!1)}add(){this.hasPendingTasks.next(!0);const r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class Yee{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let QL=(()=>{var t;class e{compileModuleSync(r){return new uE(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){const i=this.compileModuleSync(r),o=qs($r(r).declarations).reduce((a,c)=>{const l=ke(c);return l&&a.push(new ah(l)),a},[]);return new Yee(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function ZL(...t){}class Re{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new gt(!1),this.onMicrotaskEmpty=new gt(!1),this.onStable=new gt(!1),this.onError=new gt(!1),typeof Zone>"u")throw new E(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function mte(){const t="function"==typeof tt.requestAnimationFrame;let e=tt[t?"requestAnimationFrame":"setTimeout"],n=tt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function vte(t){const e=()=>{!function yte(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(tt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,RE(t),t.isCheckStableRunning=!0,ME(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),RE(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return eV(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),tV(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return eV(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),tV(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,RE(t),ME(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Re.isInAngularZone())throw new E(909,!1)}static assertNotInAngularZone(){if(Re.isInAngularZone())throw new E(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,_te,ZL,ZL);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const _te={};function ME(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function RE(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function eV(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function tV(t){t._nesting--,ME(t)}class wte{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new gt,this.onMicrotaskEmpty=new gt,this.onStable=new gt,this.onError=new gt}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const nV=new U("",{providedIn:"root",factory:rV});function rV(){const t=j(Re);let e=!0;return WR(new X(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),new X(i=>{let s;t.runOutsideAngular(()=>{s=t.onStable.subscribe(()=>{Re.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=t.onUnstable.subscribe(()=>{Re.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(GR()))}const iV=new U(""),Bm=new U("");let OE,NE=(()=>{var t;class e{constructor(r,i,s){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,OE||(function bte(t){OE=t}(s),s.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Re.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb(this._didWork)}this._didWork=!1});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(r)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,s){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),r(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:r,timeoutId:o,updateCb:s})}whenStable(r,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,s){return[]}}return(t=e).\u0275fac=function(r){return new(r||t)(N(Re),N(PE),N(Bm))},t.\u0275prov=z({token:t,factory:t.\u0275fac}),e})(),PE=(()=>{var t;class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return OE?.findTestabilityInTree(this,r,i)??null}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})(),Uo=null;const sV=new U("AllowMultipleToken"),FE=new U("PlatformDestroyListeners"),LE=new U("appBootstrapListener");class aV{constructor(e,n){this.name=e,this.token=n}}function lV(t,e,n=[]){const r=`Platform: ${e}`,i=new U(r);return(s=[])=>{let o=VE();if(!o||o.injector.get(sV,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function Ite(t){if(Uo&&!Uo.get(sV,!1))throw new E(400,!1);(function oV(){!function u9(t){EN=t}(()=>{throw new E(600,!1)})})(),Uo=t;const e=t.get(dV);(function cV(t){t.get(hO,null)?.forEach(n=>n())})(t)}(function uV(t=[],e){return Vt.create({name:e,providers:[{provide:g0,useValue:"platform"},{provide:FE,useValue:new Set([()=>Uo=null])},...t]})}(a,r))}return function xte(t){const e=VE();if(!e)throw new E(401,!1);return e}()}}function VE(){return Uo?.get(dV)??null}let dV=(()=>{var t;class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){const s=function Ste(t="zone.js",e){return"noop"===t?new wte:"zone.js"===t?new Re(e):t}(i?.ngZone,function hV(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return s.run(()=>{const o=function FZ(t,e,n){return new lE(t,e,n)}(r.moduleType,this.injector,function _V(t){return[{provide:Re,useFactory:t},{provide:Jd,multi:!0,useFactory:()=>{const e=j(Ate,{optional:!0});return()=>e.initialize()}},{provide:mV,useFactory:Dte},{provide:nV,useFactory:rV}]}(()=>s)),a=o.injector.get(za,null);return s.runOutsideAngular(()=>{const c=s.onError.subscribe({next:l=>{a.handleError(l)}});o.onDestroy(()=>{$m(this._modules,o),c.unsubscribe()})}),function fV(t,e,n){try{const r=n();return hh(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(a,s,()=>{const c=o.injector.get(DE);return c.runInitializers(),c.donePromise.then(()=>(function k2(t){li(t,"Expected localeId to be defined"),"string"==typeof t&&(A2=t.toLowerCase().replace(/_/g,"-"))}(o.injector.get(ls,Zl)||Zl),this._moduleDoBootstrap(o),o))})})}bootstrapModule(r,i=[]){const s=pV({},i);return function Ete(t,e,n){const r=new uE(n);return Promise.resolve(r)}(0,0,r).then(o=>this.bootstrapModuleFactory(o,s))}_moduleDoBootstrap(r){const i=r.injector.get(Bo);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(s=>i.bootstrap(s));else{if(!r.instance.ngDoBootstrap)throw new E(-403,!1);r.instance.ngDoBootstrap(i)}this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new E(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const r=this._injector.get(FE,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(t=e).\u0275fac=function(r){return new(r||t)(N(Vt))},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})();function pV(t,e){return Array.isArray(e)?e.reduce(pV,t):{...t,...e}}let Bo=(()=>{var t;class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=j(mV),this.zoneIsStable=j(nV),this.componentTypes=[],this.components=[],this.isStable=j(Vm).hasPendingTasks.pipe(ci(r=>r?ee(!1):this.zoneIsStable),function y7(t,e=F){return t=t??v7,Fe((n,r)=>{let i,s=!0;n.subscribe(Xe(r,o=>{const a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}(),GR()),this._injector=j(qr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){const s=r instanceof vO;if(!this._injector.get(DE).done)throw!s&&function fl(t){const e=ke(t)||Tn(t)||tr(t);return null!==e&&e.standalone}(r),new E(405,!1);let a;a=s?r:this._injector.get(Ll).resolveComponentFactory(r),this.componentTypes.push(a.componentType);const c=function Cte(t){return t.isBoundToModule}(a)?void 0:this._injector.get(Qa),u=a.create(Vt.NULL,[],i||a.selector,c),d=u.location.nativeElement,h=u.injector.get(iV,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),$m(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new E(101,!1);try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}attachView(r){const i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){const i=r;$m(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);const i=this._injector.get(LE,[]);i.push(...this._bootstrapListeners),i.forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>$m(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new E(406,!1);const r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function $m(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const mV=new U("",{providedIn:"root",factory:()=>j(za).handleError.bind(void 0)});function Dte(){const t=j(Re),e=j(za);return n=>t.runOutsideAngular(()=>e.handleError(n))}let Ate=(()=>{var t;class e{constructor(){this.zone=j(Re),this.applicationRef=j(Bo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();let ru=(()=>{class e{}return e.__NG_ELEMENT_ID__=Mte,e})();function Mte(t){return function Rte(t,e,n){if(Oa(t)&&!n){const r=jr(t.index,e);return new oh(r,r)}return 47&t.type?new oh(e[Lt],e):null}(Sn(),x(),16==(16&t))}class bV{constructor(){}supports(e){return Em(e)}create(e){return new Vte(e)}}const Lte=(t,e)=>e;class Vte{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Lte}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<CV(r,i,s)?n:r,a=CV(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const l=a-i,u=c-i;if(l!=u){for(let h=0;h<l;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;u<=p&&p<l&&(s[h]=f+1)}s[o.previousIndex]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!Em(e))throw new E(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function mX(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Ute(n,r),s,i),e}_verifyReinsertion(e,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new EV),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new EV),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Ute{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Bte{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class EV{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new Bte,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function CV(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class IV{constructor(){}supports(e){return e instanceof Map||z0(e)}create(){return new $te}}class $te{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let n;for(n=this._mapHead;null!==n;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}diff(e){if(e){if(!(e instanceof Map||z0(e)))throw new E(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const s=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){const r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,n);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new jte(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}}class jte{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function TV(){return new zm([new bV])}let zm=(()=>{var t;class e{constructor(r){this.factories=r}static create(r,i){if(null!=i){const s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||TV()),deps:[[e,new $g,new Ct]]}}find(r){const i=this.factories.find(s=>s.supports(r));if(null!=i)return i;throw new E(901,!1)}}return(t=e).\u0275prov=z({token:t,providedIn:"root",factory:TV}),e})();function xV(){return new xh([new IV])}let xh=(()=>{var t;class e{constructor(r){this.factories=r}static create(r,i){if(i){const s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||xV()),deps:[[e,new $g,new Ct]]}}find(r){const i=this.factories.find(s=>s.supports(r));if(i)return i;throw new E(901,!1)}}return(t=e).\u0275prov=z({token:t,providedIn:"root",factory:xV}),e})();const Wte=lV(null,"core",[]);let Gte=(()=>{var t;class e{constructor(r){}}return(t=e).\u0275fac=function(r){return new(r||t)(N(Bo))},t.\u0275mod=Jt({type:t}),t.\u0275inj=zt({}),e})();let zE=null;function $o(){return zE}class one{}const An=new U("DocumentToken");let WE=(()=>{var t;class e{historyGo(r){throw new Error("Not implemented")}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=z({token:t,factory:function(){return j(cne)},providedIn:"platform"}),e})();const ane=new U("Location Initialized");let cne=(()=>{var t;class e extends WE{constructor(){super(),this._doc=j(An),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return $o().getBaseHref(this._doc)}onPopState(r){const i=$o().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){const i=$o().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=z({token:t,factory:function(){return new t},providedIn:"platform"}),e})();function GE(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function PV(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Ys(t){return t&&"?"!==t[0]?"?"+t:t}let Xa=(()=>{var t;class e{historyGo(r){throw new Error("Not implemented")}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=z({token:t,factory:function(){return j(OV)},providedIn:"root"}),e})();const qE=new U("appBaseHref");let OV=(()=>{var t;class e extends Xa{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??j(An).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return GE(this._baseHref,r)}path(r=!1){const i=this._platformLocation.pathname+Ys(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){const a=this.prepareExternalUrl(s+Ys(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){const a=this.prepareExternalUrl(s+Ys(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}}return(t=e).\u0275fac=function(r){return new(r||t)(N(WE),N(qE,8))},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),lne=(()=>{var t;class e extends Xa{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(r){const i=GE(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Ys(o));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Ys(o));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}}return(t=e).\u0275fac=function(r){return new(r||t)(N(WE),N(qE,8))},t.\u0275prov=z({token:t,factory:t.\u0275fac}),e})(),KE=(()=>{var t;class e{constructor(r){this._subject=new gt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;const i=this._locationStrategy.getBaseHref();this._basePath=function hne(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(PV(FV(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Ys(i))}normalize(r){return e.stripTrailingSlash(function dne(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,FV(r)))}prepareExternalUrl(r){return r&&"/"!==r[0]&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ys(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ys(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}}return(t=e).normalizeQueryParams=Ys,t.joinWithSlash=GE,t.stripTrailingSlash=PV,t.\u0275fac=function(r){return new(r||t)(N(Xa))},t.\u0275prov=z({token:t,factory:function(){return function une(){return new KE(N(Xa))}()},providedIn:"root"}),e})();function FV(t){return t.replace(/\/index.html$/,"")}var lr=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(lr||{}),nt=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(nt||{}),Yr=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(Yr||{}),Ut=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t.Infinity=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}(Ut||{});function qm(t,e){return _i(ar(t)[ot.DateFormat],e)}function Km(t,e){return _i(ar(t)[ot.TimeFormat],e)}function Qm(t,e){return _i(ar(t)[ot.DateTimeFormat],e)}function mi(t,e){const n=ar(t),r=n[ot.NumberSymbols][e];if(typeof r>"u"){if(e===Ut.CurrencyDecimal)return n[ot.NumberSymbols][Ut.Decimal];if(e===Ut.CurrencyGroup)return n[ot.NumberSymbols][Ut.Group]}return r}function VV(t){if(!t[ot.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[ot.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function _i(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function YE(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const xne=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Sh={},Sne=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Xs=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(Xs||{}),je=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(je||{}),He=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(He||{});function Dne(t,e,n,r){let i=function Lne(t){if($V(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[i,s=1,o=1]=t.split("-").map(a=>+a);return Ym(i,s-1,o)}const n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(xne))return function Vne(t){const e=new Date(0);let n=0,r=0;const i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,c=Number(t[6]||0),l=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return s.call(e,o,a,c,l),e}(r)}const e=new Date(t);if(!$V(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=Js(n,e)||e;let a,o=[];for(;e;){if(a=Sne.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const u=o.pop();if(!u)break;e=u}}let c=i.getTimezoneOffset();r&&(c=BV(r,c),i=function Fne(t,e,n){const r=n?-1:1,i=t.getTimezoneOffset();return function One(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,r*(BV(e,i)-i))}(i,r,!0));let l="";return o.forEach(u=>{const d=function Pne(t){if(JE[t])return JE[t];let e;switch(t){case"G":case"GG":case"GGG":e=at(He.Eras,nt.Abbreviated);break;case"GGGG":e=at(He.Eras,nt.Wide);break;case"GGGGG":e=at(He.Eras,nt.Narrow);break;case"y":e=Wt(je.FullYear,1,0,!1,!0);break;case"yy":e=Wt(je.FullYear,2,0,!0,!0);break;case"yyy":e=Wt(je.FullYear,3,0,!1,!0);break;case"yyyy":e=Wt(je.FullYear,4,0,!1,!0);break;case"Y":e=e_(1);break;case"YY":e=e_(2,!0);break;case"YYY":e=e_(3);break;case"YYYY":e=e_(4);break;case"M":case"L":e=Wt(je.Month,1,1);break;case"MM":case"LL":e=Wt(je.Month,2,1);break;case"MMM":e=at(He.Months,nt.Abbreviated);break;case"MMMM":e=at(He.Months,nt.Wide);break;case"MMMMM":e=at(He.Months,nt.Narrow);break;case"LLL":e=at(He.Months,nt.Abbreviated,lr.Standalone);break;case"LLLL":e=at(He.Months,nt.Wide,lr.Standalone);break;case"LLLLL":e=at(He.Months,nt.Narrow,lr.Standalone);break;case"w":e=XE(1);break;case"ww":e=XE(2);break;case"W":e=XE(1,!0);break;case"d":e=Wt(je.Date,1);break;case"dd":e=Wt(je.Date,2);break;case"c":case"cc":e=Wt(je.Day,1);break;case"ccc":e=at(He.Days,nt.Abbreviated,lr.Standalone);break;case"cccc":e=at(He.Days,nt.Wide,lr.Standalone);break;case"ccccc":e=at(He.Days,nt.Narrow,lr.Standalone);break;case"cccccc":e=at(He.Days,nt.Short,lr.Standalone);break;case"E":case"EE":case"EEE":e=at(He.Days,nt.Abbreviated);break;case"EEEE":e=at(He.Days,nt.Wide);break;case"EEEEE":e=at(He.Days,nt.Narrow);break;case"EEEEEE":e=at(He.Days,nt.Short);break;case"a":case"aa":case"aaa":e=at(He.DayPeriods,nt.Abbreviated);break;case"aaaa":e=at(He.DayPeriods,nt.Wide);break;case"aaaaa":e=at(He.DayPeriods,nt.Narrow);break;case"b":case"bb":case"bbb":e=at(He.DayPeriods,nt.Abbreviated,lr.Standalone,!0);break;case"bbbb":e=at(He.DayPeriods,nt.Wide,lr.Standalone,!0);break;case"bbbbb":e=at(He.DayPeriods,nt.Narrow,lr.Standalone,!0);break;case"B":case"BB":case"BBB":e=at(He.DayPeriods,nt.Abbreviated,lr.Format,!0);break;case"BBBB":e=at(He.DayPeriods,nt.Wide,lr.Format,!0);break;case"BBBBB":e=at(He.DayPeriods,nt.Narrow,lr.Format,!0);break;case"h":e=Wt(je.Hours,1,-12);break;case"hh":e=Wt(je.Hours,2,-12);break;case"H":e=Wt(je.Hours,1);break;case"HH":e=Wt(je.Hours,2);break;case"m":e=Wt(je.Minutes,1);break;case"mm":e=Wt(je.Minutes,2);break;case"s":e=Wt(je.Seconds,1);break;case"ss":e=Wt(je.Seconds,2);break;case"S":e=Wt(je.FractionalSeconds,1);break;case"SS":e=Wt(je.FractionalSeconds,2);break;case"SSS":e=Wt(je.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Jm(Xs.Short);break;case"ZZZZZ":e=Jm(Xs.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Jm(Xs.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Jm(Xs.Long);break;default:return null}return JE[t]=e,e}(u);l+=d?d(i,n,c):"''"===u?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Ym(t,e,n){const r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Js(t,e){const n=function pne(t){return ar(t)[ot.LocaleId]}(t);if(Sh[n]=Sh[n]||{},Sh[n][e])return Sh[n][e];let r="";switch(e){case"shortDate":r=qm(t,Yr.Short);break;case"mediumDate":r=qm(t,Yr.Medium);break;case"longDate":r=qm(t,Yr.Long);break;case"fullDate":r=qm(t,Yr.Full);break;case"shortTime":r=Km(t,Yr.Short);break;case"mediumTime":r=Km(t,Yr.Medium);break;case"longTime":r=Km(t,Yr.Long);break;case"fullTime":r=Km(t,Yr.Full);break;case"short":const i=Js(t,"shortTime"),s=Js(t,"shortDate");r=Xm(Qm(t,Yr.Short),[i,s]);break;case"medium":const o=Js(t,"mediumTime"),a=Js(t,"mediumDate");r=Xm(Qm(t,Yr.Medium),[o,a]);break;case"long":const c=Js(t,"longTime"),l=Js(t,"longDate");r=Xm(Qm(t,Yr.Long),[c,l]);break;case"full":const u=Js(t,"fullTime"),d=Js(t,"fullDate");r=Xm(Qm(t,Yr.Full),[u,d])}return r&&(Sh[n][e]=r),r}function Xm(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return null!=e&&r in e?e[r]:n})),t}function Mi(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function Wt(t,e,n=0,r=!1,i=!1){return function(s,o){let a=function kne(t,e){switch(t){case je.FullYear:return e.getFullYear();case je.Month:return e.getMonth();case je.Date:return e.getDate();case je.Hours:return e.getHours();case je.Minutes:return e.getMinutes();case je.Seconds:return e.getSeconds();case je.FractionalSeconds:return e.getMilliseconds();case je.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,s);if((n>0||a>-n)&&(a+=n),t===je.Hours)0===a&&-12===n&&(a=12);else if(t===je.FractionalSeconds)return function Ane(t,e){return Mi(t,3).substring(0,e)}(a,e);const c=mi(o,Ut.MinusSign);return Mi(a,e,c,r,i)}}function at(t,e,n=lr.Format,r=!1){return function(i,s){return function Mne(t,e,n,r,i,s){switch(n){case He.Months:return function _ne(t,e,n){const r=ar(t),s=_i([r[ot.MonthsFormat],r[ot.MonthsStandalone]],e);return _i(s,n)}(e,i,r)[t.getMonth()];case He.Days:return function mne(t,e,n){const r=ar(t),s=_i([r[ot.DaysFormat],r[ot.DaysStandalone]],e);return _i(s,n)}(e,i,r)[t.getDay()];case He.DayPeriods:const o=t.getHours(),a=t.getMinutes();if(s){const l=function bne(t){const e=ar(t);return VV(e),(e[ot.ExtraData][2]||[]).map(r=>"string"==typeof r?YE(r):[YE(r[0]),YE(r[1])])}(e),u=function Ene(t,e,n){const r=ar(t);VV(r);const s=_i([r[ot.ExtraData][0],r[ot.ExtraData][1]],e)||[];return _i(s,n)||[]}(e,i,r),d=l.findIndex(h=>{if(Array.isArray(h)){const[f,p]=h,g=o>=f.hours&&a>=f.minutes,m=o<p.hours||o===p.hours&&a<p.minutes;if(f.hours<p.hours){if(g&&m)return!0}else if(g||m)return!0}else if(h.hours===o&&h.minutes===a)return!0;return!1});if(-1!==d)return u[d]}return function gne(t,e,n){const r=ar(t),s=_i([r[ot.DayPeriodsFormat],r[ot.DayPeriodsStandalone]],e);return _i(s,n)}(e,i,r)[o<12?0:1];case He.Eras:return function yne(t,e){return _i(ar(t)[ot.Eras],e)}(e,r)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(i,s,t,e,n,r)}}function Jm(t){return function(e,n,r){const i=-1*r,s=mi(n,Ut.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case Xs.Short:return(i>=0?"+":"")+Mi(o,2,s)+Mi(Math.abs(i%60),2,s);case Xs.ShortGMT:return"GMT"+(i>=0?"+":"")+Mi(o,1,s);case Xs.Long:return"GMT"+(i>=0?"+":"")+Mi(o,2,s)+":"+Mi(Math.abs(i%60),2,s);case Xs.Extended:return 0===r?"Z":(i>=0?"+":"")+Mi(o,2,s)+":"+Mi(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}const Rne=0,Zm=4;function UV(t){return Ym(t.getFullYear(),t.getMonth(),t.getDate()+(Zm-t.getDay()))}function XE(t,e=!1){return function(n,r){let i;if(e){const s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();i=1+Math.floor((o+s)/7)}else{const s=UV(n),o=function Nne(t){const e=Ym(t,Rne,1).getDay();return Ym(t,0,1+(e<=Zm?Zm:Zm+7)-e)}(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return Mi(i,t,mi(r,Ut.MinusSign))}}function e_(t,e=!1){return function(n,r){return Mi(UV(n).getFullYear(),t,mi(r,Ut.MinusSign),e)}}const JE={};function BV(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function $V(t){return t instanceof Date&&!isNaN(t.valueOf())}function n_(t,e,n){return function OJ(t,e,n){"string"!=typeof e&&(n=e,e=t[ot.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),Jl[e]=t,n&&(Jl[e][ot.ExtraData]=n)}(t,e,n)}function WV(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}const iC=/\s+/,GV=[];let Ja=(()=>{var t;class e{constructor(r,i,s,o){this._iterableDiffers=r,this._keyValueDiffers=i,this._ngEl=s,this._renderer=o,this.initialClasses=GV,this.stateMap=new Map}set klass(r){this.initialClasses=null!=r?r.trim().split(iC):GV}set ngClass(r){this.rawClass="string"==typeof r?r.trim().split(iC):r}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(const i of r)this._updateState(i,!0);else if(null!=r)for(const i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){const s=this.stateMap.get(r);void 0!==s?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const r of this.stateMap){const i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){(r=r.trim()).length>0&&r.split(iC).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}}return(t=e).\u0275fac=function(r){return new(r||t)(T(zm),T(xh),T(Gn),T(Gs))},t.\u0275dir=ae({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),e})();class Xne{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let r_=(()=>{var t;class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const r=this._ngForOf;!this._differ&&r&&(this._differ=this._differs.find(r).create(this.ngForTrackBy))}if(this._differ){const r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){const i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(null==s.previousIndex)i.createEmbeddedView(this._template,new Xne(s.item,this._ngForOf,-1,-1),null===a?void 0:a);else if(null==a)i.remove(null===o?void 0:o);else if(null!==o){const c=i.get(o);i.move(c,a),KV(c,s)}});for(let s=0,o=i.length;s<o;s++){const c=i.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{KV(i.get(s.currentIndex),s)})}static ngTemplateContextGuard(r,i){return!0}}return(t=e).\u0275fac=function(r){return new(r||t)(T(ki),T(Qs),T(zm))},t.\u0275dir=ae({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function KV(t,e){t.context.$implicit=e.item}let Ri=(()=>{var t;class e{constructor(r,i){this._viewContainer=r,this._context=new Jne,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){QV("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){QV("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}}return(t=e).\u0275fac=function(r){return new(r||t)(T(ki),T(Qs))},t.\u0275dir=ae({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class Jne{constructor(){this.$implicit=null,this.ngIf=null}}function QV(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Xt(e)}'.`)}class sC{constructor(e,n){this._viewContainerRef=e,this._templateRef=n,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let i_=(()=>{var t;class e{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(r){this._ngSwitch=r,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(r){this._defaultViews.push(r)}_matchCase(r){const i=r==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(r){if(this._defaultViews.length>0&&r!==this._defaultUsed){this._defaultUsed=r;for(const i of this._defaultViews)i.enforceState(r)}}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275dir=ae({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),e})(),YV=(()=>{var t;class e{constructor(r,i,s){this.ngSwitch=s,s._addCase(),this._view=new sC(r,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return(t=e).\u0275fac=function(r){return new(r||t)(T(ki),T(Qs),T(i_,9))},t.\u0275dir=ae({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),e})(),JV=(()=>{var t;class e{constructor(r,i,s){this._ngEl=r,this._differs=i,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(r){this._ngStyle=r,!this._differ&&r&&(this._differ=this._differs.find(r).create())}ngDoCheck(){if(this._differ){const r=this._differ.diff(this._ngStyle);r&&this._applyChanges(r)}}_setStyle(r,i){const[s,o]=r.split("."),a=-1===s.indexOf("-")?void 0:Po.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,s,o?`${i}${o}`:i,a):this._renderer.removeStyle(this._ngEl.nativeElement,s,a)}_applyChanges(r){r.forEachRemovedItem(i=>this._setStyle(i.key,null)),r.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),r.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return(t=e).\u0275fac=function(r){return new(r||t)(T(Gn),T(xh),T(Gs))},t.\u0275dir=ae({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),e})();function Ni(t,e){return new E(2100,!1)}let ZV=(()=>{var t;class e{transform(r){if(null==r)return null;if("string"!=typeof r)throw Ni();return r.toUpperCase()}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275pipe=In({name:"uppercase",type:t,pure:!0,standalone:!0}),e})();const ure=new U("DATE_PIPE_DEFAULT_TIMEZONE"),dre=new U("DATE_PIPE_DEFAULT_OPTIONS");let eU=(()=>{var t;class e{constructor(r,i,s){this.locale=r,this.defaultTimezone=i,this.defaultOptions=s}transform(r,i,s,o){if(null==r||""===r||r!=r)return null;try{return Dne(r,i??this.defaultOptions?.dateFormat??"mediumDate",o||this.locale,s??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(a){throw Ni()}}}return(t=e).\u0275fac=function(r){return new(r||t)(T(ls,16),T(ure,24),T(dre,24))},t.\u0275pipe=In({name:"date",type:t,pure:!0,standalone:!0}),e})(),nU=(()=>{var t;class e{transform(r,i,s){if(null==r)return null;if(!this.supports(r))throw Ni();return r.slice(i,s)}supports(r){return"string"==typeof r||Array.isArray(r)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275pipe=In({name:"slice",type:t,pure:!1,standalone:!0}),e})(),cC=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Jt({type:t}),t.\u0275inj=zt({}),e})();function iU(t){return"server"===t}let Ire=(()=>{var t;class e{}return(t=e).\u0275prov=z({token:t,providedIn:"root",factory:()=>new Tre(N(An),window)}),e})();class Tre{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function xre(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class sU{}class Qre extends one{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class dC extends Qre{static makeCurrent(){!function sne(t){zE||(zE=t)}(new dC)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function Yre(){return kh=kh||document.querySelector("base"),kh?kh.getAttribute("href"):null}();return null==n?null:function Xre(t){a_=a_||document.createElement("a"),a_.setAttribute("href",t);const e=a_.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){kh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return WV(document.cookie,e)}}let a_,kh=null,Zre=(()=>{var t;class e{build(){return new XMLHttpRequest}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac}),e})();const hC=new U("EventManagerPlugins");let uU=(()=>{var t;class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new E(5101,!1);return this._eventNameToPlugin.set(r,i),i}}return(t=e).\u0275fac=function(r){return new(r||t)(N(hC),N(Re))},t.\u0275prov=z({token:t,factory:t.\u0275fac}),e})();class dU{constructor(e){this._doc=e}}const fC="ng-app-id";let hU=(()=>{var t;class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=iU(o),this.resetHostNodes()}addStyles(r){for(const i of r)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(r){for(const i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(const i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(const i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){const i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){const r=this.doc.head?.querySelectorAll(`style[${fC}="${this.appId}"]`);if(r?.length){const i=new Map;return r.forEach(s=>{null!=s.textContent&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){const s=this.styleRef;if(s.has(r)){const o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){const s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(fC),o;{const a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(fC,this.appId),a}}addStyleToHost(r,i){const s=this.getStyleElement(r,i);r.appendChild(s);const o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){const r=this.hostNodes;r.clear(),r.add(this.doc.head)}}return(t=e).\u0275fac=function(r){return new(r||t)(N(An),N(lm),N(pO,8),N(Ws))},t.\u0275prov=z({token:t,factory:t.\u0275fac}),e})();const pC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},gC=/%COMP%/g,rie=new U("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function pU(t,e){return e.map(n=>n.replace(gC,t))}let mC=(()=>{var t;class e{constructor(r,i,s,o,a,c,l,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=iU(c),this.defaultRenderer=new _C(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===ui.ShadowDom&&(i={...i,encapsulation:ui.Emulated});const s=this.getOrCreateRenderer(r,i);return s instanceof mU?s.applyToHost(r):s instanceof yC&&s.applyStyles(),s}getOrCreateRenderer(r,i){const s=this.rendererByCompId;let o=s.get(i.id);if(!o){const a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case ui.Emulated:o=new mU(l,u,i,this.appId,d,a,c,h);break;case ui.ShadowDom:return new aie(l,u,r,i,a,c,this.nonce,h);default:o=new yC(l,u,i,d,a,c,h)}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}}return(t=e).\u0275fac=function(r){return new(r||t)(N(uU),N(hU),N(lm),N(rie),N(An),N(Ws),N(Re),N(pO))},t.\u0275prov=z({token:t,factory:t.\u0275fac}),e})();class _C{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(pC[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(gU(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(gU(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new E(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=pC[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=pC[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Po.DashCase|Po.Important)?e.style.setProperty(n,r,i&Po.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Po.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=$o().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function gU(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class aie extends _C{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=pU(i.id,i.styles);for(const u of l){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class yC extends _C{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?pU(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class mU extends yC{constructor(e,n,r,i,s,o,a,c){const l=i+"-"+r.id;super(e,n,r,s,o,a,c,l),this.contentAttr=function iie(t){return"_ngcontent-%COMP%".replace(gC,t)}(l),this.hostAttr=function sie(t){return"_nghost-%COMP%".replace(gC,t)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let cie=(()=>{var t;class e extends dU{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}}return(t=e).\u0275fac=function(r){return new(r||t)(N(An))},t.\u0275prov=z({token:t,factory:t.\u0275fac}),e})();const _U=["alt","control","meta","shift"],lie={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},uie={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let die=(()=>{var t;class e extends dU{constructor(r){super(r)}supports(r){return null!=e.parseEventName(r)}addEventListener(r,i,s){const o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>$o().onAndCancel(r,o.domEventName,a))}static parseEventName(r){const i=r.toLowerCase().split("."),s=i.shift();if(0===i.length||"keydown"!==s&&"keyup"!==s)return null;const o=e._normalizeKey(i.pop());let a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),_U.forEach(u=>{const d=i.indexOf(u);d>-1&&(i.splice(d,1),a+=u+".")}),a+=o,0!=i.length||0===o.length)return null;const l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=lie[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),_U.forEach(a=>{a!==s&&(0,uie[a])(r)&&(o+=a+".")}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return"esc"===r?"escape":r}}return(t=e).\u0275fac=function(r){return new(r||t)(N(An))},t.\u0275prov=z({token:t,factory:t.\u0275fac}),e})();const vU=[{provide:Ws,useValue:"browser"},{provide:hO,useValue:function hie(){dC.makeCurrent()},multi:!0},{provide:An,useFactory:function pie(){return function aQ(t){o0=t}(document),document},deps:[]}],gie=lV(Wte,"browser",vU),mie=new U(""),wU=[{provide:Bm,useClass:class Jre{addToWindow(e){tt.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new E(5103,!1);return s},tt.getAllAngularTestabilities=()=>e.getAllTestabilities(),tt.getAllAngularRootElements=()=>e.getAllRootElements(),tt.frameworkStabilizers||(tt.frameworkStabilizers=[]),tt.frameworkStabilizers.push(r=>{const i=tt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(c){o=o||c,s--,0==s&&r(o)};i.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?$o().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:iV,useClass:NE,deps:[Re,PE,Bm]},{provide:NE,useClass:NE,deps:[Re,PE,Bm]}],bU=[{provide:g0,useValue:"root"},{provide:za,useFactory:function fie(){return new za},deps:[]},{provide:hC,useClass:cie,multi:!0,deps:[An,Re,Ws]},{provide:hC,useClass:die,multi:!0,deps:[An]},mC,hU,uU,{provide:nh,useExisting:mC},{provide:sU,useClass:Zre,deps:[]},[]];let EU=(()=>{var t;class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:lm,useValue:r.appId}]}}}return(t=e).\u0275fac=function(r){return new(r||t)(N(mie,12))},t.\u0275mod=Jt({type:t}),t.\u0275inj=zt({providers:[...bU,...wU],imports:[cC,Gte]}),e})(),CU=(()=>{var t;class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}}return(t=e).\u0275fac=function(r){return new(r||t)(N(An))},t.\u0275prov=z({token:t,factory:function(r){let i=null;return i=r?new r:function yie(){return new CU(N(An))}(),i},providedIn:"root"}),e})();typeof window<"u"&&window;let xU=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=z({token:t,factory:function(r){let i=null;return i=r?new(r||t):N(SU),i},providedIn:"root"}),e})(),SU=(()=>{var t;class e extends xU{constructor(r){super(),this._doc=r}sanitize(r,i){if(null==i)return null;switch(r){case fi.NONE:return i;case fi.HTML:return rs(i,"HTML")?Gr(i):nO(this._doc,String(i)).toString();case fi.STYLE:return rs(i,"Style")?Gr(i):i;case fi.SCRIPT:if(rs(i,"Script"))return Gr(i);throw new E(5200,!1);case fi.URL:return rs(i,"URL")?Gr(i):nm(String(i));case fi.RESOURCE_URL:if(rs(i,"ResourceURL"))return Gr(i);throw new E(5201,!1);default:throw new E(5202,!1)}}bypassSecurityTrustHtml(r){return function pQ(t){return new cQ(t)}(r)}bypassSecurityTrustStyle(r){return function gQ(t){return new lQ(t)}(r)}bypassSecurityTrustScript(r){return function mQ(t){return new uQ(t)}(r)}bypassSecurityTrustUrl(r){return function _Q(t){return new dQ(t)}(r)}bypassSecurityTrustResourceUrl(r){return function yQ(t){return new hQ(t)}(r)}}return(t=e).\u0275fac=function(r){return new(r||t)(N(An))},t.\u0275prov=z({token:t,factory:function(r){let i=null;return i=r?new r:function Eie(t){return new SU(t.get(An))}(N(Vt)),i},providedIn:"root"}),e})();const{isArray:Iie}=Array,{getPrototypeOf:Tie,prototype:xie,keys:Sie}=Object;function AU(t){if(1===t.length){const e=t[0];if(Iie(e))return{args:e,keys:null};if(function Die(t){return t&&"object"==typeof t&&Tie(t)===xie}(e)){const n=Sie(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:Aie}=Array;function kU(t){return be(e=>function kie(t,e){return Aie(e)?t(...e):t(e)}(t,e))}function MU(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function wC(...t){const e=Dd(t),n=HR(t),{args:r,keys:i}=AU(t);if(0===r.length)return Ht([],e);const s=new X(function Mie(t,e,n=F){return r=>{RU(e,()=>{const{length:i}=t,s=new Array(i);let o=i,a=i;for(let c=0;c<i;c++)RU(e,()=>{const l=Ht(t[c],e);let u=!1;l.subscribe(Xe(r,d=>{s[c]=d,u||(u=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>MU(i,o):F));return n?s.pipe(kU(n)):s}function RU(t,e,n){t?Ls(n,t,e):e()}const c_=er(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function bC(...t){return function Rie(){return dl(1)}()(Ht(t,Dd(t)))}function NU(t){return new X(e=>{ai(t()).subscribe(e)})}function Mh(t,e){const n=De(t)?t:()=>t,r=i=>i.error(n());return new X(e?i=>e.schedule(r,0,i):r)}function EC(){return Fe((t,e)=>{let n=null;t._refCount++;const r=Xe(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class PU extends X{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Fs(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new St;const n=this.getSubject();e.add(this.source.subscribe(Xe(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=St.EMPTY)}return e}refCount(){return EC()(this)}}function ou(t){return t<=0?()=>Qi:Fe((e,n)=>{let r=0;e.subscribe(Xe(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function OU(...t){const e=Dd(t);return Fe((n,r)=>{(e?bC(t,n,e):bC(t,n)).subscribe(r)})}function Zs(t,e){return Fe((n,r)=>{let i=0;n.subscribe(Xe(r,s=>t.call(e,s,i++)&&r.next(s)))})}function l_(t){return Fe((e,n)=>{let r=!1;e.subscribe(Xe(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function FU(t=Nie){return Fe((e,n)=>{let r=!1;e.subscribe(Xe(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function Nie(){return new c_}function Za(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Zs((i,s)=>t(i,s,r)):F,ou(1),n?l_(e):FU(()=>new c_))}function au(t,e){return De(e)?Cn(t,e,1):Cn(t,1)}function cn(t,e,n){const r=De(t)||e||n?{next:t,error:e,complete:n}:t;return r?Fe((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Xe(s,c=>{var l;null===(l=r.next)||void 0===l||l.call(r,c),s.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),s.complete()},c=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,c),s.error(c)},()=>{var c,l;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):F}function Ho(t){return Fe((e,n)=>{let s,r=null,i=!1;r=e.subscribe(Xe(n,void 0,void 0,o=>{s=ai(t(o,Ho(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function CC(t){return t<=0?()=>Qi:Fe((e,n)=>{let r=[];e.subscribe(Xe(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Rh(t){return Fe((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const ye="primary",Nh=Symbol("RouteTitle");class Vie{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function cu(t){return new Vie(t)}function Uie(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function us(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!LU(t[i],e[i]))return!1;return!0}function LU(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}return t===e}function VU(t){return t.length>0?t[t.length-1]:null}function zo(t){return function Cie(t){return!!t&&(t instanceof X||De(t.lift)&&De(t.subscribe))}(t)?t:hh(t)?Ht(Promise.resolve(t)):ee(t)}const $ie={exact:function $U(t,e,n){if(!ec(t.segments,e.segments)||!u_(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!$U(t.children[r],e.children[r],n))return!1;return!0},subset:jU},UU={exact:function jie(t,e){return us(t,e)},subset:function Hie(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>LU(t[n],e[n]))},ignored:()=>!0};function BU(t,e,n){return $ie[n.paths](t.root,e.root,n.matrixParams)&&UU[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function jU(t,e,n){return HU(t,e,e.segments,n)}function HU(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!ec(i,n)||e.hasChildren()||!u_(i,n,r))}if(t.segments.length===n.length){if(!ec(t.segments,n)||!u_(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!jU(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(ec(t.segments,i)&&u_(t.segments,i,r)&&t.children[ye])&&HU(t.children[ye],e,s,r)}}function u_(t,e,n){return e.every((r,i)=>UU[n](t[i].parameters,r.parameters))}class lu{constructor(e=new Ye([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cu(this.queryParams)),this._queryParamMap}toString(){return Gie.serialize(this)}}class Ye{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return d_(this)}}class Ph{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=cu(this.parameters)),this._parameterMap}toString(){return GU(this)}}function ec(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let Oh=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=z({token:t,factory:function(){return new IC},providedIn:"root"}),e})();class IC{parse(e){const n=new rse(e);return new lu(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Fh(e.root,!0)}`,r=function Qie(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${h_(n)}=${h_(i)}`).join("&"):`${h_(n)}=${h_(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function qie(t){return encodeURI(t)}(e.fragment)}`:""}`}}const Gie=new IC;function d_(t){return t.segments.map(e=>GU(e)).join("/")}function Fh(t,e){if(!t.hasChildren())return d_(t);if(e){const n=t.children[ye]?Fh(t.children[ye],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==ye&&r.push(`${i}:${Fh(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function Wie(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ye&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ye&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===ye?[Fh(t.children[ye],!1)]:[`${i}:${Fh(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[ye]?`${d_(t)}/${n[0]}`:`${d_(t)}/(${n.join("//")})`}}function zU(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function h_(t){return zU(t).replace(/%3B/gi,";")}function TC(t){return zU(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function f_(t){return decodeURIComponent(t)}function WU(t){return f_(t.replace(/\+/g,"%20"))}function GU(t){return`${TC(t.path)}${function Kie(t){return Object.keys(t).map(e=>`;${TC(e)}=${TC(t[e])}`).join("")}(t.parameters)}`}const Yie=/^[^\/()?;#]+/;function xC(t){const e=t.match(Yie);return e?e[0]:""}const Xie=/^[^\/()?;=#]+/,Zie=/^[^=?&#]+/,tse=/^[^&#]+/;class rse{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ye([],{}):new Ye([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ye]=new Ye(e,n)),r}parseSegment(){const e=xC(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new E(4009,!1);return this.capture(e),new Ph(f_(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function Jie(t){const e=t.match(Xie);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=xC(this.remaining);i&&(r=i,this.capture(r))}e[f_(n)]=f_(r)}parseQueryParam(e){const n=function ese(t){const e=t.match(Zie);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function nse(t){const e=t.match(tse);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=WU(n),s=WU(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=xC(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new E(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ye);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[ye]:new Ye([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new E(4011,!1)}}function qU(t){return t.segments.length>0?new Ye([],{[ye]:t}):t}function KU(t){const e={};for(const r of Object.keys(t.children)){const s=KU(t.children[r]);if(r===ye&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function ise(t){if(1===t.numberOfChildren&&t.children[ye]){const e=t.children[ye];return new Ye(t.segments.concat(e.segments),e.children)}return t}(new Ye(t.segments,e))}function tc(t){return t instanceof lu}function QU(t){let e;const i=qU(function n(s){const o={};for(const c of s.children){const l=n(c);o[c.outlet]=l}const a=new Ye(s.url,o);return s===t&&(e=a),a}(t.root));return e??i}function YU(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return SC(i,i,i,n,r);const s=function ose(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new JU(!0,0,t);let e=0,n=!1;const r=t.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new JU(n,e,r)}(e);if(s.toRoot())return SC(i,i,new Ye([],{}),n,r);const o=function ase(t,e,n){if(t.isAbsolute)return new g_(e,!0,0);if(!n)return new g_(e,!1,NaN);if(null===n.parent)return new g_(n,!0,0);const r=p_(t.commands[0])?0:1;return function cse(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new E(4005,!1);i=r.segments.length}return new g_(r,!1,i-s)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(s,i,t),a=o.processChildren?Vh(o.segmentGroup,o.index,s.commands):ZU(o.segmentGroup,o.index,s.commands);return SC(i,o.segmentGroup,a,n,r)}function p_(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Lh(t){return"object"==typeof t&&null!=t&&t.outlets}function SC(t,e,n,r,i){let o,s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),o=t===e?n:XU(t,e,n);const a=qU(KU(o));return new lu(a,s,i)}function XU(t,e,n){const r={};return Object.entries(t.children).forEach(([i,s])=>{r[i]=s===e?n:XU(s,e,n)}),new Ye(t.segments,r)}class JU{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&p_(r[0]))throw new E(4003,!1);const i=r.find(Lh);if(i&&i!==VU(r))throw new E(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class g_{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function ZU(t,e,n){if(t||(t=new Ye([],{})),0===t.segments.length&&t.hasChildren())return Vh(t,e,n);const r=function use(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const o=t.segments[i],a=n[r];if(Lh(a))break;const c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!tB(c,l,o))return s;r+=2}else{if(!tB(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const s=new Ye(t.segments.slice(0,r.pathIndex),{});return s.children[ye]=new Ye(t.segments.slice(r.pathIndex),t.children),Vh(s,0,i)}return r.match&&0===i.length?new Ye(t.segments,{}):r.match&&!t.hasChildren()?DC(t,e,n):r.match?Vh(t,0,i):DC(t,e,n)}function Vh(t,e,n){if(0===n.length)return new Ye(t.segments,{});{const r=function lse(t){return Lh(t[0])?t[0].outlets:{[ye]:t}}(n),i={};if(Object.keys(r).some(s=>s!==ye)&&t.children[ye]&&1===t.numberOfChildren&&0===t.children[ye].segments.length){const s=Vh(t.children[ye],e,n);return new Ye(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=ZU(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Ye(t.segments,i)}}function DC(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(Lh(s)){const c=dse(s.outlets);return new Ye(r,c)}if(0===i&&p_(n[0])){r.push(new Ph(t.segments[e].path,eB(n[0]))),i++;continue}const o=Lh(s)?s.outlets[ye]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&p_(a)?(r.push(new Ph(o,eB(a))),i+=2):(r.push(new Ph(o,{})),i++)}return new Ye(r,{})}function dse(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=DC(new Ye([],{}),0,r))}),e}function eB(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function tB(t,e,n){return t==n.path&&us(e,n.parameters)}const Uh="imperative";class ds{constructor(e,n){this.id=e,this.url=n}}class AC extends ds{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class nc extends ds{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class m_ extends ds{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Bh extends ds{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}}class kC extends ds{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class hse extends ds{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fse extends ds{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pse extends ds{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class gse extends ds{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mse extends ds{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _se{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class yse{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class vse{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wse{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bse{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ese{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nB{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Cse{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new $h,this.attachRef=null}}let $h=(()=>{var t;class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){const s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){const i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Cse,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class rB{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=MC(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=MC(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=RC(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return RC(e,this._root).map(n=>n.value)}}function MC(t,e){if(t===e.value)return e;for(const n of e.children){const r=MC(t,n);if(r)return r}return null}function RC(t,e){if(t===e.value)return[e];for(const n of e.children){const r=RC(t,n);if(r.length)return r.unshift(e),r}return[]}class eo{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function uu(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class iB extends rB{constructor(e,n){super(e),this.snapshot=n,NC(this,e)}toString(){return this.snapshot.toString()}}function sB(t,e){const n=function Ise(t,e){const o=new __([],{},{},"",{},ye,e,null,{});return new aB("",new eo(o,[]))}(0,e),r=new jt([new Ph("",{})]),i=new jt({}),s=new jt({}),o=new jt({}),a=new jt(""),c=new rc(r,i,o,a,s,ye,e,n.root);return c.snapshot=n.root,new iB(new eo(c,[]),n)}class rc{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(be(l=>l[Nh]))??ee(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(be(e=>cu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(be(e=>cu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function oB(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function Tse(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class __{get title(){return this.data?.[Nh]}constructor(e,n,r,i,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=cu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class aB extends rB{constructor(e,n){super(n),this.url=e,NC(this,n)}toString(){return cB(this._root)}}function NC(t,e){e.value._routerState=t,e.children.forEach(n=>NC(t,n))}function cB(t){const e=t.children.length>0?` { ${t.children.map(cB).join(", ")} } `:"";return`${t.value}${e}`}function PC(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,us(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),us(e.params,n.params)||t.paramsSubject.next(n.params),function Bie(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!us(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),us(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function OC(t,e){const n=us(t.params,e.params)&&function zie(t,e){return ec(t,e)&&t.every((n,r)=>us(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||OC(t.parent,e.parent))}let lB=(()=>{var t;class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ye,this.activateEvents=new gt,this.deactivateEvents=new gt,this.attachEvents=new gt,this.detachEvents=new gt,this.parentContexts=j($h),this.location=j(ki),this.changeDetector=j(ru),this.environmentInjector=j(qr),this.inputBinder=j(y_,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){const{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new E(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new E(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new E(4012,!1);this.location.detach();const r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){const r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new E(4013,!1);this._activatedRoute=r;const s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new xse(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275dir=ae({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[di]}),e})();class xse{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===rc?this.route:e===$h?this.childContexts:this.parent.get(e,n)}}const y_=new U("");let uB=(()=>{var t;class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){const{activatedRoute:i}=r,s=wC([i.queryParams,i.params,i.data]).pipe(ci(([o,a,c],l)=>(c={...o,...a,...c},0===l?ee(c):Promise.resolve(c)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(r);const a=function ine(t){const e=ke(t);if(!e)return null;const n=new ah(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(i.component);if(a)for(const{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,o[c]);else this.unsubscribeFromRouteData(r)});this.outletDataSubscriptions.set(r,s)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac}),e})();function jh(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function Dse(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return jh(t,r,i);return jh(t,r)})}(t,e,n);return new eo(r,i)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>jh(t,a)),o}}const r=function Ase(t){return new rc(new jt(t.url),new jt(t.params),new jt(t.queryParams),new jt(t.fragment),new jt(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(s=>jh(t,s));return new eo(r,i)}}const FC="ngNavigationCancelingError";function dB(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=tc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=hB(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function hB(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[FC]=!0,r.cancellationCode=e,n&&(r.url=n),r}function fB(t){return pB(t)&&tc(t.url)}function pB(t){return t&&t[FC]}let gB=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Hn({type:t,selectors:[["ng-component"]],standalone:!0,features:[rL],decls:1,vars:0,template:function(r,i){1&r&&Y(0,"router-outlet")},dependencies:[lB],encapsulation:2}),e})();function LC(t){const e=t.children&&t.children.map(LC),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ye&&(n.component=gB),n}function Pi(t){return t.outlet||ye}function Hh(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class Fse{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),PC(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=uu(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=uu(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=uu(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=uu(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Ese(s.value.snapshot))}),e.children.length&&this.forwardEvent(new wse(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(PC(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),PC(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Hh(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class mB{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class v_{constructor(e,n){this.component=e,this.route=n}}function Lse(t,e,n){const r=t._root;return zh(r,e?e._root:null,n,[r.value])}function du(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function x7(t){return null!==pg(t)}(t)?e.get(t):t:r}function zh(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=uu(e);return t.children.forEach(o=>{(function Use(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function Bse(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!ec(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ec(t.url,e.url)||!us(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!OC(t,e)||!us(t.queryParams,e.queryParams);default:return!OC(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new mB(r)):(s.data=o.data,s._resolvedData=o._resolvedData),zh(t,e,s.component?a?a.children:null:n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new v_(a.outlet.component,o))}else o&&Wh(e,a,i),i.canActivateChecks.push(new mB(r)),zh(t,null,s.component?a?a.children:null:n,r,i)})(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Wh(a,n.getContext(o),i)),i}function Wh(t,e,n){const r=uu(t),i=t.value;Object.entries(r).forEach(([s,o])=>{Wh(o,i.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new v_(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Gh(t){return"function"==typeof t}function _B(t){return t instanceof c_||"EmptyError"===t?.name}const w_=Symbol("INITIAL_VALUE");function hu(){return ci(t=>wC(t.map(e=>e.pipe(ou(1),OU(w_)))).pipe(be(e=>{for(const n of e)if(!0!==n){if(n===w_)return w_;if(!1===n||n instanceof lu)return n}return!0}),Zs(e=>e!==w_),ou(1)))}function yB(t){return function _e(...t){return he(t)}(cn(e=>{if(tc(e))throw dB(0,e)}),be(e=>!0===e))}class b_{constructor(e){this.segmentGroup=e||null}}class vB{constructor(e){this.urlTree=e}}function fu(t){return Mh(new b_(t))}function wB(t){return Mh(new vB(t))}class ooe{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new E(4002,!1)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ee(r);if(i.numberOfChildren>1||!i.children[ye])return Mh(new E(4e3,!1));i=i.children[ye]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,i){const s=this.createSegmentGroup(e,n.root,r,i);return new lu(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){const s=this.createSegments(e,n.segments,r,i);let o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Ye(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new E(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const VC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function aoe(t,e,n,r,i){const s=UC(t,e,n);return s.matched?(r=function kse(t,e){return t.providers&&!t._injector&&(t._injector=dE(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function roe(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?ee(i.map(o=>{const a=du(o,t);return zo(function Gse(t){return t&&Gh(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(hu(),yB()):ee(!0)}(r,e,n).pipe(be(o=>!0===o?s:{...VC}))):ee(s)}function UC(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...VC}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Uie)(n,t,e);if(!i)return{...VC};const s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function bB(t,e,n,r){return n.length>0&&function uoe(t,e,n){return n.some(r=>E_(t,e,r)&&Pi(r)!==ye)}(t,n,r)?{segmentGroup:new Ye(e,loe(r,new Ye(n,t.children))),slicedSegments:[]}:0===n.length&&function doe(t,e,n){return n.some(r=>E_(t,e,r))}(t,n,r)?{segmentGroup:new Ye(t.segments,coe(t,0,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ye(t.segments,t.children),slicedSegments:n}}function coe(t,e,n,r,i){const s={};for(const o of r)if(E_(t,n,o)&&!i[Pi(o)]){const a=new Ye([],{});s[Pi(o)]=a}return{...i,...s}}function loe(t,e){const n={};n[ye]=e;for(const r of t)if(""===r.path&&Pi(r)!==ye){const i=new Ye([],{});n[Pi(r)]=i}return n}function E_(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class goe{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new ooe(this.urlSerializer,this.urlTree)}noMatchError(e){return new E(4002,!1)}recognize(){const e=bB(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,ye).pipe(Ho(n=>{if(n instanceof vB)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof b_?this.noMatchError(n):n}),be(n=>{const r=new __([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ye,this.rootComponentType,null,{}),i=new eo(r,n),s=new aB("",i),o=function sse(t,e,n=null,r=null){return YU(QU(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,ye).pipe(Ho(r=>{throw r instanceof b_?this.noMatchError(r):r}))}inheritParamsAndData(e){const n=e.value,r=oB(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0)}processChildren(e,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return Ht(i).pipe(au(s=>{const o=r.children[s],a=function Pse(t,e){const n=t.filter(r=>Pi(r)===e);return n.push(...t.filter(r=>Pi(r)!==e)),n}(n,s);return this.processSegmentGroup(e,a,o,s)}),function Oie(t,e){return Fe(function Pie(t,e,n,r,i){return(s,o)=>{let a=n,c=e,l=0;s.subscribe(Xe(o,u=>{const d=l++;c=a?t(c,u,d):(a=!0,u),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}(t,e,arguments.length>=2,!0))}((s,o)=>(s.push(...o),s)),l_(null),function Fie(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Zs((i,s)=>t(i,s,r)):F,CC(1),n?l_(e):FU(()=>new c_))}(),Cn(s=>{if(null===s)return fu(r);const o=EB(s);return function moe(t){t.sort((e,n)=>e.value.outlet===ye?-1:n.value.outlet===ye?1:e.value.outlet.localeCompare(n.value.outlet))}(o),ee(o)}))}processSegment(e,n,r,i,s,o){return Ht(n).pipe(au(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(Ho(c=>{if(c instanceof b_)return ee(null);throw c}))),Za(a=>!!a),Ho(a=>{if(_B(a))return function foe(t,e,n){return 0===e.length&&!t.children[n]}(r,i,s)?ee([]):fu(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return function hoe(t,e,n,r){return!!(Pi(t)===r||r!==ye&&E_(e,n,t))&&("**"===t.path||UC(e,t,n).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):fu(i):fu(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?wB(s):this.applyRedirects.lineralizeSegments(r,s).pipe(Cn(o=>{const a=new Ye(o,{});return this.processSegment(e,n,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){const{matched:a,consumedSegments:c,remainingSegments:l,positionalParamSegments:u}=UC(n,i,s);if(!a)return fu(n);const d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,u);return i.redirectTo.startsWith("/")?wB(d):this.applyRedirects.lineralizeSegments(i,d).pipe(Cn(h=>this.processSegment(e,r,n,h.concat(l),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a;if("**"===r.path){const c=i.length>0?VU(i).parameters:{};a=ee({snapshot:new __(i,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,CB(r),Pi(r),r.component??r._loadedComponent??null,r,IB(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else a=aoe(n,r,i,e).pipe(be(({matched:c,consumedSegments:l,remainingSegments:u,parameters:d})=>c?{snapshot:new __(l,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,CB(r),Pi(r),r.component??r._loadedComponent??null,r,IB(r)),consumedSegments:l,remainingSegments:u}:null));return a.pipe(ci(c=>null===c?fu(n):this.getChildConfig(e=r._injector??e,r,i).pipe(ci(({routes:l})=>{const u=r._loadedInjector??e,{snapshot:d,consumedSegments:h,remainingSegments:f}=c,{segmentGroup:p,slicedSegments:g}=bB(n,h,f,l);if(0===g.length&&p.hasChildren())return this.processChildren(u,l,p).pipe(be(v=>null===v?null:[new eo(d,v)]));if(0===l.length&&0===g.length)return ee([new eo(d,[])]);const m=Pi(r)===s;return this.processSegment(u,l,p,g,m?ye:s,!0).pipe(be(v=>[new eo(d,v)]))}))))}getChildConfig(e,n,r){return n.children?ee({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?ee({routes:n._loadedRoutes,injector:n._loadedInjector}):function noe(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?ee(!0):ee(i.map(o=>{const a=du(o,t);return zo(function jse(t){return t&&Gh(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(hu(),yB())}(e,n,r).pipe(Cn(i=>i?this.configLoader.loadChildren(e,n).pipe(cn(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function soe(t){return Mh(hB(!1,3))}())):ee({routes:[],injector:e})}}function _oe(t){const e=t.value.routeConfig;return e&&""===e.path}function EB(t){const e=[],n=new Set;for(const r of t){if(!_oe(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=EB(r.children);e.push(new eo(r.value,i))}return e.filter(r=>!n.has(r))}function CB(t){return t.data||{}}function IB(t){return t.resolve||{}}function TB(t){return"string"==typeof t.title||null===t.title}function BC(t){return ci(e=>{const n=t(e);return n?Ht(n).pipe(be(()=>e)):ee(e)})}const pu=new U("ROUTES");let $C=(()=>{var t;class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=j(QL)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ee(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);const i=zo(r.loadComponent()).pipe(be(xB),cn(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Rh(()=>{this.componentLoaders.delete(r)})),s=new PU(i,()=>new bt).pipe(EC());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ee({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const o=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe(be(c=>{this.onLoadEndListener&&this.onLoadEndListener(i);let l,u;return Array.isArray(c)?u=c:(l=c.create(r).injector,u=l.get(pu,[],Ce.Self|Ce.Optional).flat()),{routes:u.map(LC),injector:l}}),Rh(()=>{this.childrenLoaders.delete(i)})),a=new PU(o,()=>new bt).pipe(EC());return this.childrenLoaders.set(i,a),a}loadModuleFactoryOrRoutes(r){return zo(r()).pipe(be(xB),Cn(i=>i instanceof tL||Array.isArray(i)?ee(i):Ht(this.compiler.compileModuleAsync(i))))}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function xB(t){return function Ioe(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let C_=(()=>{var t;class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new bt,this.configLoader=j($C),this.environmentInjector=j(qr),this.urlSerializer=j(Oh),this.rootContexts=j($h),this.inputBindingEnabled=null!==j(y_,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ee(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new yse(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new _se(s))}complete(){this.transitions?.complete()}handleNavigationRequest(r){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...r,id:i})}setupNavigations(r){return this.transitions=new jt({id:0,currentUrlTree:r.currentUrlTree,currentRawUrl:r.currentUrlTree,extractedUrl:r.urlHandlingStrategy.extract(r.currentUrlTree),urlAfterRedirects:r.urlHandlingStrategy.extract(r.currentUrlTree),rawUrl:r.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Uh,restoredState:null,currentSnapshot:r.routerState.snapshot,targetSnapshot:null,currentRouterState:r.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Zs(i=>0!==i.id),be(i=>({...i,extractedUrl:r.urlHandlingStrategy.extract(i.rawUrl)})),ci(i=>{let s=!1,o=!1;return ee(i).pipe(cn(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ci(a=>{const c=r.browserUrlTree.toString(),l=!r.navigated||a.extractedUrl.toString()!==c||c!==r.currentUrlTree.toString();if(!l&&"reload"!==(a.extras.onSameUrlNavigation??r.onSameUrlNavigation)){const d="";return this.events.next(new Bh(a.id,r.serializeUrl(i.rawUrl),d,0)),r.rawUrlTree=a.rawUrl,a.resolve(null),Qi}if(r.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return SB(a.source)&&(r.browserUrlTree=a.extractedUrl),ee(a).pipe(ci(d=>{const h=this.transitions?.getValue();return this.events.next(new AC(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions?.getValue()?Qi:Promise.resolve(d)}),function yoe(t,e,n,r,i,s){return Cn(o=>function poe(t,e,n,r,i,s,o="emptyOnly"){return new goe(t,e,n,r,i,o,s).recognize()}(t,e,n,r,o.extractedUrl,i,s).pipe(be(({state:a,tree:c})=>({...o,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,r.paramsInheritanceStrategy),cn(d=>{if(i.targetSnapshot=d.targetSnapshot,i.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects},"eager"===r.urlUpdateStrategy){if(!d.extras.skipLocationChange){const f=r.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);r.setBrowserUrl(f,d)}r.browserUrlTree=d.urlAfterRedirects}const h=new hse(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(l&&r.urlHandlingStrategy.shouldProcessUrl(r.rawUrlTree)){const{id:d,extractedUrl:h,source:f,restoredState:p,extras:g}=a,m=new AC(d,this.urlSerializer.serialize(h),f,p);this.events.next(m);const v=sB(0,this.rootComponentType).snapshot;return ee(i={...a,targetSnapshot:v,urlAfterRedirects:h,extras:{...g,skipLocationChange:!1,replaceUrl:!1}})}{const d="";return this.events.next(new Bh(a.id,r.serializeUrl(i.extractedUrl),d,1)),r.rawUrlTree=a.rawUrl,a.resolve(null),Qi}}),cn(a=>{const c=new fse(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),be(a=>i={...a,guards:Lse(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function Kse(t,e){return Cn(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?ee({...n,guardsResult:!0}):function Qse(t,e,n,r){return Ht(t).pipe(Cn(i=>function toe(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?ee(s.map(a=>{const c=Hh(e)??i,l=du(a,c);return zo(function Wse(t){return t&&Gh(t.canDeactivate)}(l)?l.canDeactivate(t,e,n,r):c.runInContext(()=>l(t,e,n,r))).pipe(Za())})).pipe(hu()):ee(!0)}(i.component,i.route,n,e,r)),Za(i=>!0!==i,!0))}(o,r,i,t).pipe(Cn(a=>a&&function $se(t){return"boolean"==typeof t}(a)?function Yse(t,e,n,r){return Ht(e).pipe(au(i=>bC(function Jse(t,e){return null!==t&&e&&e(new vse(t)),ee(!0)}(i.route.parent,r),function Xse(t,e){return null!==t&&e&&e(new bse(t)),ee(!0)}(i.route,r),function eoe(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function Vse(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>NU(()=>ee(o.guards.map(c=>{const l=Hh(o.node)??n,u=du(c,l);return zo(function zse(t){return t&&Gh(t.canActivateChild)}(u)?u.canActivateChild(r,t):l.runInContext(()=>u(r,t))).pipe(Za())})).pipe(hu())));return ee(s).pipe(hu())}(t,i.path,n),function Zse(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ee(!0);const i=r.map(s=>NU(()=>{const o=Hh(e)??n,a=du(s,o);return zo(function Hse(t){return t&&Gh(t.canActivate)}(a)?a.canActivate(e,t):o.runInContext(()=>a(e,t))).pipe(Za())}));return ee(i).pipe(hu())}(t,i.route,n))),Za(i=>!0!==i,!0))}(r,s,t,e):ee(a)),be(a=>({...n,guardsResult:a})))})}(this.environmentInjector,a=>this.events.next(a)),cn(a=>{if(i.guardsResult=a.guardsResult,tc(a.guardsResult))throw dB(0,a.guardsResult);const c=new pse(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.events.next(c)}),Zs(a=>!!a.guardsResult||(r.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),BC(a=>{if(a.guards.canActivateChecks.length)return ee(a).pipe(cn(c=>{const l=new gse(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),ci(c=>{let l=!1;return ee(c).pipe(function voe(t,e){return Cn(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return ee(n);let s=0;return Ht(i).pipe(au(o=>function woe(t,e,n,r){const i=t.routeConfig,s=t._resolve;return void 0!==i?.title&&!TB(i)&&(s[Nh]=i.title),function boe(t,e,n,r){const i=function Eoe(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return ee({});const s={};return Ht(i).pipe(Cn(o=>function Coe(t,e,n,r){const i=Hh(e)??r,s=du(t,i);return zo(s.resolve?s.resolve(e,n):i.runInContext(()=>s(e,n)))}(t[o],e,n,r).pipe(Za(),cn(a=>{s[o]=a}))),CC(1),function Lie(t){return be(()=>t)}(s),Ho(o=>_B(o)?Qi:Mh(o)))}(s,t,e,r).pipe(be(o=>(t._resolvedData=o,t.data=oB(t,n).resolve,i&&TB(i)&&(t.data[Nh]=i.title),null)))}(o.route,r,t,e)),cn(()=>s++),CC(1),Cn(o=>s===i.length?ee(n):Qi))})}(r.paramsInheritanceStrategy,this.environmentInjector),cn({next:()=>l=!0,complete:()=>{l||(r.restoreHistory(c),this.cancelNavigationTransition(c,"",2))}}))}),cn(c=>{const l=new mse(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}))}),BC(a=>{const c=l=>{const u=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(l.routeConfig).pipe(cn(d=>{l.component=d}),be(()=>{})));for(const d of l.children)u.push(...c(d));return u};return wC(c(a.targetSnapshot.root)).pipe(l_(),ou(1))}),BC(()=>this.afterPreactivation()),be(a=>{const c=function Sse(t,e,n){const r=jh(t,e._root,n?n._root:void 0);return new iB(r,e)}(r.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return i={...a,targetRouterState:c}}),cn(a=>{r.currentUrlTree=a.urlAfterRedirects,r.rawUrlTree=r.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),r.routerState=a.targetRouterState,"deferred"===r.urlUpdateStrategy&&(a.extras.skipLocationChange||r.setBrowserUrl(r.rawUrlTree,a),r.browserUrlTree=a.urlAfterRedirects)}),((t,e,n,r)=>be(i=>(new Fse(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,r.routeReuseStrategy,a=>this.events.next(a),this.inputBindingEnabled),ou(1),cn({next:a=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,r.navigated=!0,this.events.next(new nc(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(r.currentUrlTree))),r.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)},complete:()=>{s=!0}}),Rh(()=>{s||o||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Ho(a=>{if(o=!0,pB(a)){fB(a)||(r.navigated=!0,r.restoreHistory(i,!0));const c=new m_(i.id,this.urlSerializer.serialize(i.extractedUrl),a.message,a.cancellationCode);if(this.events.next(c),fB(a)){const l=r.urlHandlingStrategy.merge(a.url,r.rawUrlTree),u={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===r.urlUpdateStrategy||SB(i.source)};r.scheduleNavigation(l,Uh,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{r.restoreHistory(i,!0);const c=new kC(i.id,this.urlSerializer.serialize(i.extractedUrl),a,i.targetSnapshot??void 0);this.events.next(c);try{i.resolve(r.errorHandler(a))}catch(l){i.reject(l)}}return Qi}))}))}cancelNavigationTransition(r,i,s){const o=new m_(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function SB(t){return t!==Uh}let DB=(()=>{var t;class e{buildTitle(r){let i,s=r.root;for(;void 0!==s;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===ye);return i}getResolvedTitleForRoute(r){return r.data[Nh]}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=z({token:t,factory:function(){return j(Toe)},providedIn:"root"}),e})(),Toe=(()=>{var t;class e extends DB{constructor(r){super(),this.title=r}updateTitle(r){const i=this.buildTitle(r);void 0!==i&&this.title.setTitle(i)}}return(t=e).\u0275fac=function(r){return new(r||t)(N(CU))},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),xoe=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=z({token:t,factory:function(){return j(Doe)},providedIn:"root"}),e})();class Soe{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let Doe=(()=>{var t;class e extends Soe{}return(t=e).\u0275fac=function(){let n;return function(i){return(n||(n=Dn(t)))(i||t)}}(),t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const I_=new U("",{providedIn:"root",factory:()=>({})});let Aoe=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=z({token:t,factory:function(){return j(koe)},providedIn:"root"}),e})(),koe=(()=>{var t;class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();var qh=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(qh||{});function AB(t,e){t.events.pipe(Zs(n=>n instanceof nc||n instanceof m_||n instanceof kC||n instanceof Bh),be(n=>n instanceof nc||n instanceof Bh?qh.COMPLETE:n instanceof m_&&(0===n.code||1===n.code)?qh.REDIRECTING:qh.FAILED),Zs(n=>n!==qh.REDIRECTING),ou(1)).subscribe(()=>{e()})}function Moe(t){throw t}function Roe(t,e,n){return e.parse("/")}const Noe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Poe={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let yi=(()=>{var t;class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=j(KL),this.isNgZoneEnabled=!1,this.options=j(I_,{optional:!0})||{},this.pendingTasks=j(Vm),this.errorHandler=this.options.errorHandler||Moe,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Roe,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=j(Aoe),this.routeReuseStrategy=j(xoe),this.titleStrategy=j(DB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=j(pu,{optional:!0})?.flat()??[],this.navigationTransitions=j(C_),this.urlSerializer=j(Oh),this.location=j(KE),this.componentInputBindingEnabled=!!j(y_,{optional:!0}),this.isNgZoneEnabled=j(Re)instanceof Re&&Re.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new lu,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=sB(0,null),this.navigationTransitions.setupNavigations(this).subscribe(r=>{this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId??0},r=>{this.console.warn(`Unhandled Navigation Error: ${r}`)})}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const r=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Uh,r)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(r=>{const i="popstate"===r.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(r.url,i,r.state)},0)}))}navigateToSyncWithBrowser(r,i,s){const o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){const l={...s};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(o.state=l)}const c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(LC),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(r,i={}){const{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:a;let h,d=null;switch(c){case"merge":d={...this.currentUrlTree.queryParams,...o};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}null!==d&&(d=this.removeEmptyProps(d));try{h=QU(s?s.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof r[0]||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return YU(h,r,d,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){const s=tc(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Uh,null,i)}navigate(r,i={skipLocationChange:!1}){return function Ooe(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new E(4008,!1)}(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){let i;try{i=this.urlSerializer.parse(r)}catch(s){i=this.malformedUriErrorHandler(s,this.urlSerializer,r)}return i}isActive(r,i){let s;if(s=!0===i?{...Noe}:!1===i?{...Poe}:i,tc(r))return BU(this.currentUrlTree,r,s);const o=this.parseUrl(r);return BU(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.keys(r).reduce((i,s)=>{const o=r[s];return null!=o&&(i[s]=o),i},{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((h,f)=>{c=h,l=f});const d=this.pendingTasks.add();return AB(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}setBrowserUrl(r,i){const s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){const a={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(s,"",a)}else{const o={...i.extras.state,...this.generateNgRouterState(i.id,(this.browserPageId??0)+1)};this.location.go(s,"",o)}}restoreHistory(r,i=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-(this.browserPageId??this.currentPageId);0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(r),this.browserUrlTree=r.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=r.currentRouterState,this.currentUrlTree=r.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return"computed"===this.canceledNavigationResolution?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class kB{}let Voe=(()=>{var t;class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Zs(r=>r instanceof nc),au(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){const s=[];for(const o of i){o.providers&&!o._injector&&(o._injector=dE(o.providers,r,`Route: ${o.path}`));const a=o._injector??r,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return Ht(s).pipe(dl())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;s=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(r,i):ee(null);const o=s.pipe(Cn(a=>null===a?ee(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));return i.loadComponent&&!i._loadedComponent?Ht([o,this.loader.loadComponent(i)]).pipe(dl()):o})}}return(t=e).\u0275fac=function(r){return new(r||t)(N(yi),N(QL),N(qr),N(kB),N($C))},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const HC=new U("");let MB=(()=>{var t;class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof AC?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof nc?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Bh&&0===r.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof nB&&(r.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(r.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new nB(r,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return(t=e).\u0275fac=function(r){!function jO(){throw new Error("invalid")}()},t.\u0275prov=z({token:t,factory:t.\u0275fac}),e})();function to(t,e){return{\u0275kind:t,\u0275providers:e}}function NB(){const t=j(Vt);return e=>{const n=t.get(Bo);if(e!==n.components[0])return;const r=t.get(yi),i=t.get(PB);1===t.get(zC)&&r.initialNavigation(),t.get(OB,null,Ce.Optional)?.setUpPreloading(),t.get(HC,null,Ce.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const PB=new U("",{factory:()=>new bt}),zC=new U("",{providedIn:"root",factory:()=>1}),OB=new U("");function joe(t){return to(0,[{provide:OB,useExisting:Voe},{provide:kB,useExisting:t}])}const FB=new U("ROUTER_FORROOT_GUARD"),zoe=[KE,{provide:Oh,useClass:IC},yi,$h,{provide:rc,useFactory:function RB(t){return t.routerState.root},deps:[yi]},$C,[]];function Woe(){return new aV("Router",yi)}let LB=(()=>{var t;class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[zoe,[],{provide:pu,multi:!0,useValue:r},{provide:FB,useFactory:Qoe,deps:[[yi,new Ct,new $g]]},{provide:I_,useValue:i||{}},i?.useHash?{provide:Xa,useClass:lne}:{provide:Xa,useClass:OV},{provide:HC,useFactory:()=>{const t=j(Ire),e=j(Re),n=j(I_),r=j(C_),i=j(Oh);return n.scrollOffset&&t.setOffset(n.scrollOffset),new MB(i,r,t,e,n)}},i?.preloadingStrategy?joe(i.preloadingStrategy).\u0275providers:[],{provide:aV,multi:!0,useFactory:Woe},i?.initialNavigation?Yoe(i):[],i?.bindToComponentInputs?to(8,[uB,{provide:y_,useExisting:uB}]).\u0275providers:[],[{provide:VB,useFactory:NB},{provide:LE,multi:!0,useExisting:VB}]]}}static forChild(r){return{ngModule:e,providers:[{provide:pu,multi:!0,useValue:r}]}}}return(t=e).\u0275fac=function(r){return new(r||t)(N(FB,8))},t.\u0275mod=Jt({type:t}),t.\u0275inj=zt({}),e})();function Qoe(t){return"guarded"}function Yoe(t){return["disabled"===t.initialNavigation?to(3,[{provide:SE,multi:!0,useFactory:()=>{const e=j(yi);return()=>{e.setUpLocationChangeListener()}}},{provide:zC,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?to(2,[{provide:zC,useValue:0},{provide:SE,multi:!0,deps:[Vt],useFactory:e=>{const n=e.get(ane,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(yi),s=e.get(PB);AB(i,()=>{r(!0)}),e.get(C_).afterPreactivation=()=>(r(!0),s.closed?ee(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const VB=new U(""),Joe=[];let Zoe=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Jt({type:t}),t.\u0275inj=zt({imports:[LB.forRoot(Joe,{}),LB]}),e})();function UB(t,e,n,r,i,s,o){try{var a=t[s](o),c=a.value}catch(l){return void n(l)}a.done?e(c):Promise.resolve(c).then(r,i)}function _(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(c){UB(s,r,i,o,a,"next",c)}function a(c){UB(s,r,i,o,a,"throw",c)}o(void 0)})}}const eae=["source_id","source_type","source_headline","source_url","source_body","utm_campaign","utm_content","utm_source","utm_medium","ad_id","adset_id","campaign_id","ad_name","adset_name","campaign_name","placement","site_source_name","hsa_acc","hsa_cam","hsa_grp","hsa_ad","hsa_src","hsa_net","hsa_ver"];let gu=(()=>{var t;class e{get(){return JSON.parse(localStorage.getItem("appStorage"))||{}}delete(){localStorage.removeItem("appStorage")}set(r){localStorage.setItem("appStorage",JSON.stringify(r))}getByKey(r){return JSON.parse(localStorage.getItem(r))}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();var T_,tae=new Uint8Array(16);function nae(){if(!T_&&!(T_=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return T_(tae)}const rae=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var kn=[],WC=0;WC<256;++WC)kn.push((WC+256).toString(16).substr(1));const aae=function oae(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(kn[t[e+0]]+kn[t[e+1]]+kn[t[e+2]]+kn[t[e+3]]+"-"+kn[t[e+4]]+kn[t[e+5]]+"-"+kn[t[e+6]]+kn[t[e+7]]+"-"+kn[t[e+8]]+kn[t[e+9]]+"-"+kn[t[e+10]]+kn[t[e+11]]+kn[t[e+12]]+kn[t[e+13]]+kn[t[e+14]]+kn[t[e+15]]).toLowerCase();if(!function iae(t){return"string"==typeof t&&rae.test(t)}(n))throw TypeError("Stringified UUID is invalid");return n},lae=function cae(t,e,n){var r=(t=t||{}).random||(t.rng||nae)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return aae(r)};class BB{static getObjectId(){return lae()}static transformToBold(e){const n=e.match(/\*(.*?)\*/);return n&&(e=e.replace(n[0],n[1].bold()),e=this.transformToBold(e)),e}}const O=function(t,e){if(!t)throw mu(e)},mu=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},$B=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},x_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0;let h=(15&a)<<2|l>>6,f=63&l;c||(f=64,o||(h=64)),r.push(n[s>>2],n[(3&s)<<4|a>>4],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($B(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const c=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(1023&c))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const l=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,null==s||null==a||null==l||null==d)throw Error();r.push(s<<2|a>>4),64!==l&&(r.push(a<<4&240|l>>2),64!==d&&r.push(l<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},jB=function(t){const e=$B(t);return x_.encodeByteArray(e,!0)},S_=function(t){return jB(t).replace(/\./g,"")},qC=function(t){try{return x_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function dae(t){return HB(void 0,t)}function HB(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!hae(n)||(t[n]=HB(t[n],e[n]));return t}function hae(t){return"__proto__"!==t}class _u{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(n):e(n,r))}}}function ln(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function D_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function A_(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function KC(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function zB(){const t=ln();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ic(){return"object"==typeof indexedDB}function Kh(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(n){e(n)}})}function QC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Oi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Oi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hs.prototype.create)}}class hs{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function _ae(t,e){return t.replace(yae,(n,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new Oi(i,`${this.serviceName}: ${o} (${i}).`,r)}}const yae=/\{\$([^}]+)}/g;function Qh(t){return JSON.parse(t)}function Mn(t){return JSON.stringify(t)}const k_=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Qh(qC(s[0])||""),n=Qh(qC(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};function ro(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function yu(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function YC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function M_(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Yh(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(WB(s)&&WB(o)){if(!Yh(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function WB(t){return null!==t&&"object"==typeof t}function Xh(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class bae{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if("string"==typeof e)for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=4294967295&(h<<1|h>>>31)}let l,u,i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(l=a^s&(o^a),u=1518500249):(l=s^o^a,u=1859775393):d<60?(l=s&o|a&(s|o),u=2400959708):(l=s^o^a,u=3395469782);const h=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=4294967295&(s<<30|s>>>2),s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(null==e)return;void 0===n&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(0===o)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&n,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}class Cae{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(void 0===e&&void 0===n&&void 0===r)throw new Error("Missing Observer.");i=function Iae(t,e){if("object"!=typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"==typeof t[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:n,complete:r},void 0===i.next&&(i.next=XC),void 0===i.error&&(i.error=XC),void 0===i.complete&&(i.complete=XC);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XC(){}const N_=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},xae=1e3,Sae=2,Dae=144e5,Aae=.5;function JC(t,e=xae,n=Sae){const r=e*Math.pow(n,t),i=Math.round(Aae*r*(Math.random()-.5)*2);return Math.min(Dae,r+i)}function Gt(t){return t&&t._delegate?t._delegate:t}class un{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const sc="[DEFAULT]";class Mae{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new _u;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(n=e?.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function Nae(t){return"EAGER"===t.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:sc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=sc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return _(function*(){const n=Array.from(e.instances.values());yield Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=sc){return this.instances.has(e)}getOptions(e=sc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(t=e,t===sc?void 0:t),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var t;return r||null}normalizeInstanceIdentifier(e=sc){return this.component?this.component.multipleInstances?e:sc:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Pae{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Mae(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const ZC=[];var Le=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(Le||{});const GB={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},Oae=Le.INFO,Fae={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},Lae=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=Fae[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class oc{constructor(e){this.name=e,this._logLevel=Oae,this._logHandler=Lae,this._userLogHandler=null,ZC.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?GB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const Vae=(t,e)=>e.some(n=>t instanceof n);let qB,KB;const QB=new WeakMap,eI=new WeakMap,YB=new WeakMap,tI=new WeakMap,nI=new WeakMap;let rI={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return eI.get(t);if("objectStoreNames"===e)return t.objectStoreNames||YB.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return io(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Wae(t){return"function"==typeof t?function zae(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Bae(){return KB||(KB=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(iI(this),e),io(QB.get(this))}:function(...e){return io(t.apply(iI(this),e))}:function(e,...n){const r=t.call(iI(this),e,...n);return YB.set(r,e.sort?e.sort():[e]),io(r)}}(t):(t instanceof IDBTransaction&&function jae(t){if(eI.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});eI.set(t,e)}(t),Vae(t,function Uae(){return qB||(qB=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,rI):t)}function io(t){if(t instanceof IDBRequest)return function $ae(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(io(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&QB.set(n,t)}).catch(()=>{}),nI.set(e,t),e}(t);if(tI.has(t))return tI.get(t);const e=Wae(t);return e!==t&&(tI.set(t,e),nI.set(e,t)),e}const iI=t=>nI.get(t);function P_(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=io(o);return r&&o.addEventListener("upgradeneeded",c=>{r(io(o.result),c.oldVersion,c.newVersion,io(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function sI(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",()=>e()),io(n).then(()=>{})}const Gae=["get","getKey","getAll","getAllKeys","count"],qae=["put","add","delete","clear"],oI=new Map;function XB(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(oI.get(e))return oI.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=qae.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Gae.includes(n))return;const s=function(){var o=_(function*(a,...c){const l=this.transaction(a,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(c.shift())),(yield Promise.all([u[n](...c),i&&l.done]))[0]});return function(c){return o.apply(this,arguments)}}();return oI.set(e,s),s}!function Hae(t){rI=t(rI)}(t=>({...t,get:(e,n,r)=>XB(e,n)||t.get(e,n,r),has:(e,n)=>!!XB(e,n)||t.has(e,n)}));class Kae{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function Qae(t){const e=t.getComponent();return"VERSION"===e?.type}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const aI="@firebase/app",cI=new oc("@firebase/app"),lI="[DEFAULT]",bce={[aI]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ac=new Map,O_=new Map;function Ece(t,e){try{t.container.addComponent(e)}catch(n){cI.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Rn(t){const e=t.name;if(O_.has(e))return cI.debug(`There were multiple attempts to register component ${e}.`),!1;O_.set(e,t);for(const n of ac.values())Ece(n,t);return!0}function Wo(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const Go=new hs("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Ice{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new un("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Go.create("app-deleted",{appName:this._name})}}const qo="9.9.0";function Tce(t,e={}){"object"!=typeof e&&(e={name:e});const n=Object.assign({name:lI,automaticDataCollectionEnabled:!1},e),r=n.name;if("string"!=typeof r||!r)throw Go.create("bad-app-name",{appName:String(r)});const i=ac.get(r);if(i){if(Yh(t,i.options)&&Yh(n,i.config))return i;throw Go.create("duplicate-app",{appName:r})}const s=new Pae(r);for(const a of O_.values())s.addComponent(a);const o=new Ice(t,n,s);return ac.set(r,o),o}function Jh(t=lI){const e=ac.get(t);if(!e)throw Go.create("no-app",{appName:t});return e}function ZB(){return Array.from(ac.values())}function Ze(t,e,n){var r;let i=null!==(r=bce[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void cI.warn(a.join(" "))}Rn(new un(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const xce="firebase-heartbeat-database",Sce=1,Zh="firebase-heartbeat-store";let dI=null;function e$(){return dI||(dI=P_(xce,Sce,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Zh)}}).catch(t=>{throw Go.create("storage-open",{originalErrorMessage:t.message})})),dI}function hI(){return(hI=_(function*(t){var e;try{return(yield e$()).transaction(Zh).objectStore(Zh).get(n$(t))}catch(n){throw Go.create("storage-get",{originalErrorMessage:null===(e=n)||void 0===e?void 0:e.message})}})).apply(this,arguments)}function t$(t,e){return fI.apply(this,arguments)}function fI(){return(fI=_(function*(t,e){var n;try{const i=(yield e$()).transaction(Zh,"readwrite");return yield i.objectStore(Zh).put(e,n$(t)),i.done}catch(r){throw Go.create("storage-set",{originalErrorMessage:null===(n=r)||void 0===n?void 0:n.message})}})).apply(this,arguments)}function n$(t){return`${t.name}!${t.options.appId}`}class Mce{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Nce(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return _(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=r$();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return _(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const n=r$(),{heartbeatsToSend:r,unsentEntries:i}=function Rce(t,e=1024){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),i$(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),i$(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=S_(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function r$(){return(new Date).toISOString().substring(0,10)}class Nce{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(function*(){return!!ic()&&Kh().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return _(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function Dce(t){return hI.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var n=this;return _(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return t$(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return _(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return t$(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function i$(t){return S_(JSON.stringify({version:2,heartbeats:t})).length}!function Pce(t){Rn(new un("platform-logger",e=>new Kae(e),"PRIVATE")),Rn(new un("heartbeat",e=>new Mce(e),"PRIVATE")),Ze(aI,"0.7.28",t),Ze(aI,"0.7.28","esm2017"),Ze("fire-js","")}(""),Ze("firebase","9.9.0","app");const s$="@firebase/installations",pI="0.5.12",o$=1e4,a$=`w:${pI}`,c$="FIS_v2",Lce="https://firebaseinstallations.googleapis.com/v1",Vce=36e5,so=new hs("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function l$(t){return t instanceof Oi&&t.code.includes("request-failed")}function gI({projectId:t}){return`${Lce}/projects/${t}/installations`}function u$(t){return{token:t.token,requestStatus:2,expiresIn:jce(t.expiresIn),creationTime:Date.now()}}function mI(t,e){return _I.apply(this,arguments)}function _I(){return(_I=_(function*(t,e){const r=(yield e.json()).error;return so.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function d$({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function yI(t){return vI.apply(this,arguments)}function vI(){return(vI=_(function*(t){const e=yield t();return e.status>=500&&e.status<600?t():e})).apply(this,arguments)}function jce(t){return Number(t.replace("s","000"))}function wI(){return(wI=_(function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=gI(t),i=d$(t),s=e.getImmediate({optional:!0});if(s){const l=yield s.getHeartbeatsHeader();l&&i.append("x-firebase-client",l)}const a={method:"POST",headers:i,body:JSON.stringify({fid:n,authVersion:c$,appId:t.appId,sdkVersion:a$})},c=yield yI(()=>fetch(r,a));if(c.ok){const l=yield c.json();return{fid:l.fid||n,registrationStatus:2,refreshToken:l.refreshToken,authToken:u$(l.authToken)}}throw yield mI("Create Installation",c)})).apply(this,arguments)}function f$(t){return new Promise(e=>{setTimeout(e,t)})}const Gce=/^[cdef][\w-]{21}$/,bI="";function qce(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=function Kce(t){return function Wce(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22)}(t);return Gce.test(n)?n:bI}catch{return bI}}function vu(t){return`${t.appName}!${t.appId}`}const wu=new Map;function p$(t,e){const n=vu(t);g$(n,e),function Xce(t,e){const n=function m$(){return!cc&&"BroadcastChannel"in self&&(cc=new BroadcastChannel("[Firebase] FID Change"),cc.onmessage=t=>{g$(t.data.key,t.data.fid)}),cc}();n&&n.postMessage({key:t,fid:e}),function _$(){0===wu.size&&cc&&(cc.close(),cc=null)}()}(n,e)}function g$(t,e){const n=wu.get(t);if(n)for(const r of n)r(e)}let cc=null;const Jce="firebase-installations-database",Zce=1,lc="firebase-installations-store";let EI=null;function CI(){return EI||(EI=P_(Jce,Zce,{upgrade:(t,e)=>{0===e&&t.createObjectStore(lc)}})),EI}function F_(t,e){return II.apply(this,arguments)}function II(){return(II=_(function*(t,e){const n=vu(t),i=(yield CI()).transaction(lc,"readwrite"),s=i.objectStore(lc),o=yield s.get(n);return yield s.put(e,n),yield i.done,(!o||o.fid!==e.fid)&&p$(t,e.fid),e})).apply(this,arguments)}function TI(t){return xI.apply(this,arguments)}function xI(){return(xI=_(function*(t){const e=vu(t),r=(yield CI()).transaction(lc,"readwrite");yield r.objectStore(lc).delete(e),yield r.done})).apply(this,arguments)}function ef(t,e){return SI.apply(this,arguments)}function SI(){return(SI=_(function*(t,e){const n=vu(t),i=(yield CI()).transaction(lc,"readwrite"),s=i.objectStore(lc),o=yield s.get(n),a=e(o);return void 0===a?yield s.delete(n):yield s.put(a,n),yield i.done,a&&(!o||o.fid!==a.fid)&&p$(t,a.fid),a})).apply(this,arguments)}function DI(t){return AI.apply(this,arguments)}function AI(){return AI=_(function*(t){let e;const n=yield ef(t.appConfig,r=>{const i=function ele(t){return v$(t||{fid:qce(),registrationStatus:0})}(r),s=function tle(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(so.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function nle(t,e){return kI.apply(this,arguments)}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:rle(t)}:{installationEntry:e}}(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===bI?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}}),AI.apply(this,arguments)}function kI(){return kI=_(function*(t,e){try{const n=yield function zce(t,e){return wI.apply(this,arguments)}(t,e);return F_(t.appConfig,n)}catch(n){throw l$(n)&&409===n.customData.serverCode?yield TI(t.appConfig):yield F_(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}),kI.apply(this,arguments)}function rle(t){return MI.apply(this,arguments)}function MI(){return(MI=_(function*(t){let e=yield y$(t.appConfig);for(;1===e.registrationStatus;)yield f$(100),e=yield y$(t.appConfig);if(0===e.registrationStatus){const{installationEntry:n,registrationPromise:r}=yield DI(t);return r||n}return e})).apply(this,arguments)}function y$(t){return ef(t,e=>{if(!e)throw so.create("installation-not-found");return v$(e)})}function v$(t){return function ile(t){return 1===t.registrationStatus&&t.registrationTime+o$<Date.now()}(t)?{fid:t.fid,registrationStatus:0}:t}function RI(){return(RI=_(function*({appConfig:t,heartbeatServiceProvider:e},n){const r=function ole(t,{fid:e}){return`${gI(t)}/${e}/authTokens:generate`}(t,n),i=function h$(t,{refreshToken:e}){const n=d$(t);return n.append("Authorization",function Hce(t){return`${c$} ${t}`}(e)),n}(t,n),s=e.getImmediate({optional:!0});if(s){const l=yield s.getHeartbeatsHeader();l&&i.append("x-firebase-client",l)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:a$,appId:t.appId}})},c=yield yI(()=>fetch(r,a));if(c.ok)return u$(yield c.json());throw yield mI("Generate Auth Token",c)})).apply(this,arguments)}function NI(t){return PI.apply(this,arguments)}function PI(){return PI=_(function*(t,e=!1){let n;const r=yield ef(t.appConfig,s=>{if(!b$(s))throw so.create("not-registered");const o=s.authToken;if(!e&&function lle(t){return 2===t.requestStatus&&!function ule(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Vce}(t)}(o))return s;if(1===o.requestStatus)return n=function ale(t,e){return OI.apply(this,arguments)}(t,e),s;{if(!navigator.onLine)throw so.create("app-offline");const a=function dle(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(s);return n=function cle(t,e){return FI.apply(this,arguments)}(t,a),a}});return n?yield n:r.authToken}),PI.apply(this,arguments)}function OI(){return(OI=_(function*(t,e){let n=yield w$(t.appConfig);for(;1===n.authToken.requestStatus;)yield f$(100),n=yield w$(t.appConfig);const r=n.authToken;return 0===r.requestStatus?NI(t,e):r})).apply(this,arguments)}function w$(t){return ef(t,e=>{if(!b$(e))throw so.create("not-registered");return function hle(t){return 1===t.requestStatus&&t.requestTime+o$<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function FI(){return FI=_(function*(t,e){try{const n=yield function sle(t,e){return RI.apply(this,arguments)}(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield F_(t.appConfig,r),n}catch(n){if(!l$(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield F_(t.appConfig,r)}else yield TI(t.appConfig);throw n}}),FI.apply(this,arguments)}function b$(t){return void 0!==t&&2===t.registrationStatus}function LI(){return(LI=_(function*(t){const e=t,{installationEntry:n,registrationPromise:r}=yield DI(e);return r?r.catch(console.error):NI(e).catch(console.error),n.fid})).apply(this,arguments)}function VI(){return VI=_(function*(t,e=!1){const n=t;return yield function gle(t){return UI.apply(this,arguments)}(n),(yield NI(n,e)).token}),VI.apply(this,arguments)}function UI(){return(UI=_(function*(t){const{registrationPromise:e}=yield DI(t);e&&(yield e)})).apply(this,arguments)}function jI(t){return so.create("missing-app-config-values",{valueName:t})}const E$="installations",wle=t=>{const e=t.getProvider("app").getImmediate(),n=function yle(t){if(!t||!t.options)throw jI("App Configuration");if(!t.name)throw jI("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw jI(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:Wo(e,"heartbeat"),_delete:()=>Promise.resolve()}},ble=t=>{const n=Wo(t.getProvider("app").getImmediate(),E$).getImmediate();return{getId:()=>function fle(t){return LI.apply(this,arguments)}(n),getToken:i=>function ple(t){return VI.apply(this,arguments)}(n,i)}};(function Ele(){Rn(new un(E$,wle,"PUBLIC")),Rn(new un("installations-internal",ble,"PRIVATE"))})(),Ze(s$,pI),Ze(s$,pI,"esm2017");const HI="@firebase/remote-config",Sr=new hs("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Nle{constructor(e,n,r,i){this.client=e,this.storage=n,this.storageCache=r,this.logger=i}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-n,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var n=this;return _(function*(){const[r,i]=yield Promise.all([n.storage.getLastSuccessfulFetchTimestampMillis(),n.storage.getLastSuccessfulFetchResponse()]);if(i&&n.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const s=yield n.client.fetch(e),o=[n.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(n.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function Ple(t=navigator){return t.languages&&t.languages[0]||t.language}class Ole{constructor(e,n,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){var n=this;return _(function*(){var r,i,s;const[o,a]=yield Promise.all([n.firebaseInstallations.getId(),n.firebaseInstallations.getToken()]),l=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${n.projectId}/namespaces/${n.namespace}:fetch?key=${n.apiKey}`,u={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},d={sdk_version:n.sdkVersion,app_instance_id:o,app_instance_id_token:a,app_id:n.appId,language_code:Ple()},h={method:"POST",headers:u,body:JSON.stringify(d)},f=fetch(l,h),p=new Promise((I,A)=>{e.signal.addEventListener(()=>{const q=new Error("The operation was aborted.");q.name="AbortError",A(q)})});let g;try{yield Promise.race([f,p]),g=yield f}catch(I){let A="fetch-client-network";throw"AbortError"===(null===(r=I)||void 0===r?void 0:r.name)&&(A="fetch-timeout"),Sr.create(A,{originalErrorMessage:null===(i=I)||void 0===i?void 0:i.message})}let m=g.status;const v=g.headers.get("ETag")||void 0;let y,C;if(200===g.status){let I;try{I=yield g.json()}catch(A){throw Sr.create("fetch-client-parse",{originalErrorMessage:null===(s=A)||void 0===s?void 0:s.message})}y=I.entries,C=I.state}if("INSTANCE_STATE_UNSPECIFIED"===C?m=500:"NO_CHANGE"===C?m=304:("NO_TEMPLATE"===C||"EMPTY_CONFIG"===C)&&(y={}),304!==m&&200!==m)throw Sr.create("fetch-status",{httpStatus:m});return{status:m,eTag:v,config:y}})()}}class Vle{constructor(e,n){this.client=e,this.storage=n}fetch(e){var n=this;return _(function*(){const r=(yield n.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return n.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:n,backoffCount:r}){var i=this;return _(function*(){yield function Fle(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Sr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,n);try{const s=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),s}catch(s){if(!function Lle(t){if(!(t instanceof Oi&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+JC(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(o),i.attemptFetch(e,o)}})()}}class $le{constructor(e,n,r,i,s){this.app=e,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function V_(t,e){var n;const r=t.target.error||void 0;return Sr.create(e,{originalErrorMessage:r&&(null===(n=r)||void 0===n?void 0:n.message)})}const uc="app_namespace_store";class Wle{constructor(e,n,r,i=function zle(){return new Promise((t,e)=>{var n;try{const r=indexedDB.open("firebase_remote_config",1);r.onerror=i=>{e(V_(i,"storage-open"))},r.onsuccess=i=>{t(i.target.result)},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(uc,{keyPath:"compositeKey"})}}catch(r){e(Sr.create("storage-open",{originalErrorMessage:null===(n=r)||void 0===n?void 0:n.message}))}})}()){this.appId=e,this.appName=n,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var n=this;return _(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{var o;const c=r.transaction([uc],"readonly").objectStore(uc),l=n.createCompositeKey(e);try{const u=c.get(l);u.onerror=d=>{s(V_(d,"storage-get"))},u.onsuccess=d=>{const h=d.target.result;i(h?h.value:void 0)}}catch(u){s(Sr.create("storage-get",{originalErrorMessage:null===(o=u)||void 0===o?void 0:o.message}))}})})()}set(e,n){var r=this;return _(function*(){const i=yield r.openDbPromise;return new Promise((s,o)=>{var a;const l=i.transaction([uc],"readwrite").objectStore(uc),u=r.createCompositeKey(e);try{const d=l.put({compositeKey:u,value:n});d.onerror=h=>{o(V_(h,"storage-set"))},d.onsuccess=()=>{s()}}catch(d){o(Sr.create("storage-set",{originalErrorMessage:null===(a=d)||void 0===a?void 0:a.message}))}})})()}delete(e){var n=this;return _(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{var o;const c=r.transaction([uc],"readwrite").objectStore(uc),l=n.createCompositeKey(e);try{const u=c.delete(l);u.onerror=d=>{s(V_(d,"storage-delete"))},u.onsuccess=()=>{i()}}catch(u){s(Sr.create("storage-delete",{originalErrorMessage:null===(o=u)||void 0===o?void 0:o.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class Gle{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return _(function*(){const n=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),s=yield n;s&&(e.lastFetchStatus=s);const o=yield r;o&&(e.lastSuccessfulFetchTimestampMillis=o);const a=yield i;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function Kle(){return KI.apply(this,arguments)}function KI(){return(KI=_(function*(){if(!ic())return!1;try{return yield Kh()}catch{return!1}})).apply(this,arguments)}!function qle(){Rn(new un("remote-config",function t(e,{instanceIdentifier:n}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Sr.create("registration-window");if(!ic())throw Sr.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw Sr.create("registration-project-id");if(!o)throw Sr.create("registration-api-key");if(!a)throw Sr.create("registration-app-id");const c=new Wle(a,r.name,n=n||"firebase"),l=new Gle(c),u=new oc(HI);u.logLevel=Le.ERROR;const d=new Ole(i,qo,n,s,o,a),h=new Vle(d,c),f=new Nle(h,c,l,u),p=new $le(r,f,l,c,u);return function kle(t){const e=Gt(t);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(p),p},"PUBLIC").setMultipleInstances(!0)),Ze(HI,"0.3.11"),Ze(HI,"0.3.11","esm2017")}();const Qle="/firebase-messaging-sw.js",Yle="/firebase-cloud-messaging-push-scope",x$="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Xle="https://fcmregistrations.googleapis.com/v1",S$="google.c.a.c_id",Jle="google.c.a.c_l",Zle="google.c.a.ts";var U_=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}(U_||{});function oo(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function nue(t){const n=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}const QI="fcm_token_details_db",rue=5,D$="fcm_token_object_Store";function YI(){return YI=_(function*(t){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(QI))return null;let e=null;return(yield P_(QI,rue,{upgrade:(r=_(function*(i,s,o,a){var c;if(s<2||!i.objectStoreNames.contains(D$))return;const l=a.objectStore(D$),u=yield l.index("fcmSenderId").get(t);if(yield l.clear(),u)if(2===s){const d=u;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:null!==(c=d.createTime)&&void 0!==c?c:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:"string"==typeof d.vapidKey?d.vapidKey:oo(d.vapidKey)}}}else if(3===s){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:oo(d.auth),p256dh:oo(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:oo(d.vapidKey)}}}else if(4===s){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:oo(d.auth),p256dh:oo(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:oo(d.vapidKey)}}}}),function(s,o,a,c){return r.apply(this,arguments)})})).close(),yield sI(QI),yield sI("fcm_vapid_details_db"),yield sI("undefined"),function sue(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),YI.apply(this,arguments)}const oue="firebase-messaging-database",aue=1,dc="firebase-messaging-store";let XI=null;function JI(){return XI||(XI=P_(oue,aue,{upgrade:(t,e)=>{0===e&&t.createObjectStore(dc)}})),XI}function A$(t){return ZI.apply(this,arguments)}function ZI(){return ZI=_(function*(t){const e=rT(t),r=yield(yield JI()).transaction(dc).objectStore(dc).get(e);if(r)return r;{const i=yield function iue(t){return YI.apply(this,arguments)}(t.appConfig.senderId);if(i)return yield eT(t,i),i}}),ZI.apply(this,arguments)}function eT(t,e){return tT.apply(this,arguments)}function tT(){return(tT=_(function*(t,e){const n=rT(t),i=(yield JI()).transaction(dc,"readwrite");return yield i.objectStore(dc).put(e,n),yield i.done,e})).apply(this,arguments)}function nT(){return(nT=_(function*(t){const e=rT(t),r=(yield JI()).transaction(dc,"readwrite");yield r.objectStore(dc).delete(e),yield r.done})).apply(this,arguments)}function rT({appConfig:t}){return t.appId}const Nn=new hs("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function uue(t,e){return iT.apply(this,arguments)}function iT(){return(iT=_(function*(t,e){var n;const r=yield cT(t),i=M$(e),s={method:"POST",headers:r,body:JSON.stringify(i)};let o;try{o=yield(yield fetch(aT(t.appConfig),s)).json()}catch(a){throw Nn.create("token-subscribe-failed",{errorInfo:null===(n=a)||void 0===n?void 0:n.toString()})}if(o.error)throw Nn.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw Nn.create("token-subscribe-no-token");return o.token})).apply(this,arguments)}function sT(){return(sT=_(function*(t,e){var n;const r=yield cT(t),i=M$(e.subscriptionOptions),s={method:"PATCH",headers:r,body:JSON.stringify(i)};let o;try{o=yield(yield fetch(`${aT(t.appConfig)}/${e.token}`,s)).json()}catch(a){throw Nn.create("token-update-failed",{errorInfo:null===(n=a)||void 0===n?void 0:n.toString()})}if(o.error)throw Nn.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw Nn.create("token-update-no-token");return o.token})).apply(this,arguments)}function k$(t,e){return oT.apply(this,arguments)}function oT(){return(oT=_(function*(t,e){var n;const i={method:"DELETE",headers:yield cT(t)};try{const o=yield(yield fetch(`${aT(t.appConfig)}/${e}`,i)).json();if(o.error)throw Nn.create("token-unsubscribe-failed",{errorInfo:o.error.message})}catch(s){throw Nn.create("token-unsubscribe-failed",{errorInfo:null===(n=s)||void 0===n?void 0:n.toString()})}})).apply(this,arguments)}function aT({projectId:t}){return`${Xle}/projects/${t}/registrations`}function cT(t){return lT.apply(this,arguments)}function lT(){return(lT=_(function*({appConfig:t,installations:e}){const n=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function M$({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==x$&&(i.web.applicationPubKey=r),i}const hue=6048e5;function uT(){return uT=_(function*(t){const e=yield function gue(t,e){return pT.apply(this,arguments)}(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:oo(e.getKey("auth")),p256dh:oo(e.getKey("p256dh"))},r=yield A$(t.firebaseDependencies);if(r){if(function mue(t,e){return e.vapidKey===t.vapidKey&&e.endpoint===t.endpoint&&e.auth===t.auth&&e.p256dh===t.p256dh}(r.subscriptionOptions,n))return Date.now()>=r.createTime+hue?function pue(t,e){return hT.apply(this,arguments)}(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield k$(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return N$(t.firebaseDependencies,n)}return N$(t.firebaseDependencies,n)}),uT.apply(this,arguments)}function dT(){return dT=_(function*(t){const e=yield A$(t.firebaseDependencies);e&&(yield k$(t.firebaseDependencies,e.token),yield function cue(t){return nT.apply(this,arguments)}(t.firebaseDependencies));const n=yield t.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}),dT.apply(this,arguments)}function hT(){return hT=_(function*(t,e){try{const n=yield function due(t,e){return sT.apply(this,arguments)}(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield eT(t.firebaseDependencies,r),n}catch(n){throw yield function R$(t){return dT.apply(this,arguments)}(t),n}}),hT.apply(this,arguments)}function N$(t,e){return fT.apply(this,arguments)}function fT(){return(fT=_(function*(t,e){const r={token:yield uue(t,e),createTime:Date.now(),subscriptionOptions:e};return yield eT(t,r),r.token})).apply(this,arguments)}function pT(){return(pT=_(function*(t,e){return(yield t.pushManager.getSubscription())||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:nue(e)})})).apply(this,arguments)}function P$(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return function _ue(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i)}(e,t),function yue(t,e){e.data&&(t.data=e.data)}(e,t),function vue(t,e){var n,r,i,s,o;if(!(e.fcmOptions||null!==(n=e.notification)&&void 0!==n&&n.click_action))return;t.fcmOptions={};const a=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=e.notification)||void 0===s?void 0:s.click_action;a&&(t.fcmOptions.link=a);const c=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;c&&(t.fcmOptions.analyticsLabel=c)}(e,t),e}function O$(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}function gT(t){return Nn.create("missing-app-config-values",{valueName:t})}O$("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),O$("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Eue{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function bue(t){if(!t||!t.options)throw gT("App Configuration Object");if(!t.name)throw gT("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw gT(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}function mT(){return(mT=_(function*(t){var e;try{t.swRegistration=yield navigator.serviceWorker.register(Qle,{scope:Yle}),t.swRegistration.update().catch(()=>{})}catch(n){throw Nn.create("failed-service-worker-registration",{browserErrorMessage:null===(e=n)||void 0===e?void 0:e.message})}})).apply(this,arguments)}function _T(){return(_T=_(function*(t,e){if(!e&&!t.swRegistration&&(yield function F$(t){return mT.apply(this,arguments)}(t)),e||!t.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Nn.create("invalid-sw-registration");t.swRegistration=e}})).apply(this,arguments)}function yT(){return(yT=_(function*(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=x$)})).apply(this,arguments)}function vT(){return vT=_(function*(t,e){if(!navigator)throw Nn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Nn.create("permission-blocked");return yield function Iue(t,e){return yT.apply(this,arguments)}(t,e?.vapidKey),yield function Cue(t,e){return _T.apply(this,arguments)}(t,e?.serviceWorkerRegistration),function fue(t){return uT.apply(this,arguments)}(t)}),vT.apply(this,arguments)}function wT(){return(wT=_(function*(t,e,n){const r=function xue(t){switch(t){case U_.NOTIFICATION_CLICKED:return"notification_open";case U_.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[S$],message_name:n[Jle],message_time:n[Zle],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function bT(){return bT=_(function*(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===U_.PUSH_RECEIVED&&("function"==typeof t.onMessageHandler?t.onMessageHandler(P$(n)):t.onMessageHandler.next(P$(n)));const r=n.data;(function wue(t){return"object"==typeof t&&!!t&&S$ in t})(r)&&"1"===r["google.c.a.e"]&&(yield function Tue(t,e,n){return wT.apply(this,arguments)}(t,n.messageType,r))}),bT.apply(this,arguments)}const V$="@firebase/messaging",Due=t=>{const e=new Eue(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>function Sue(t,e){return bT.apply(this,arguments)}(e,n)),e},Aue=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>function L$(t,e){return vT.apply(this,arguments)}(e,r)}};function B$(){return ET.apply(this,arguments)}function ET(){return(ET=_(function*(){try{yield Kh()}catch{return!1}return typeof window<"u"&&ic()&&QC()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function kue(){Rn(new un("messaging",Due,"PUBLIC")),Rn(new un("messaging-internal",Aue,"PRIVATE")),Ze(V$,"0.9.16"),Ze(V$,"0.9.16","esm2017")}();const B_="analytics",Nue="firebase_id",Pue="origin",Oue=6e4,Fue="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$$="https://www.googletagmanager.com/gtag/js",Pn=new oc("@firebase/analytics");function j$(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function TT(){return(TT=_(function*(t,e,n,r,i,s){const o=r[i];try{if(o)yield e[o];else{const c=(yield j$(n)).find(l=>l.measurementId===i);c&&(yield e[c.appId])}}catch(a){Pn.error(a)}t("config",i,s)})).apply(this,arguments)}function xT(){return(xT=_(function*(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=yield j$(n);for(const c of o){const l=a.find(d=>d.measurementId===c),u=l&&e[l.appId];if(!u){s=[];break}s.push(u)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),t("event",r,i||{})}catch(s){Pn.error(s)}})).apply(this,arguments)}const Xr=new hs("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Wue=30,H$=new class que{constructor(e={},n=1e3){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Kue(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function ST(){return(ST=_(function*(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:Kue(r)},s=Fue.replace("{app-id}",n),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let a="";try{const c=yield o.json();null!==(e=c.error)&&void 0!==e&&e.message&&(a=c.error.message)}catch{}throw Xr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})).apply(this,arguments)}function DT(){return(DT=_(function*(t,e=H$,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Xr.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Xr.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Zue;return setTimeout(_(function*(){a.abort()}),void 0!==n?n:Oue),z$({appId:r,apiKey:i,measurementId:s},o,a,e)})).apply(this,arguments)}function z$(t,e,n){return AT.apply(this,arguments)}function AT(){return AT=_(function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=H$){var s,o;const{appId:a,measurementId:c}=t;try{yield function Xue(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Xr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(l){if(c)return Pn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${null===(s=l)||void 0===s?void 0:s.message}]`),{appId:a,measurementId:c};throw l}try{const l=yield function Que(t){return ST.apply(this,arguments)}(t);return i.deleteThrottleMetadata(a),l}catch(l){const u=l;if(!function Jue(t){if(!(t instanceof Oi&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(u)){if(i.deleteThrottleMetadata(a),c)return Pn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:a,measurementId:c};throw l}const d=503===Number(null===(o=u?.customData)||void 0===o?void 0:o.httpStatus)?JC(n,i.intervalMillis,Wue):JC(n,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return i.setThrottleMetadata(a,h),Pn.debug(`Calling attemptFetch again in ${d} millis`),z$(t,h,r,i)}}),AT.apply(this,arguments)}class Zue{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let kT,FT;function MT(){return(MT=_(function*(t,e,n,r,i){if(i&&i.global)t("event",n,r);else{const s=yield e;t("event",n,Object.assign(Object.assign({},r),{send_to:s}))}})).apply(this,arguments)}function LT(){return(LT=_(function*(){var t;if(!ic())return Pn.warn(Xr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield Kh()}catch(e){return Pn.warn(Xr.create("indexeddb-unavailable",{errorInfo:null===(t=e)||void 0===t?void 0:t.toString()}).message),!1}return!0})).apply(this,arguments)}function VT(){return VT=_(function*(t,e,n,r,i,s,o){var a;const c=function Yue(t){return DT.apply(this,arguments)}(t);c.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&Pn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>Pn.error(f)),e.push(c);const l=function sde(){return LT.apply(this,arguments)}().then(f=>{if(f)return r.getId()}),[u,d]=yield Promise.all([c,l]);(function Hue(){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes($$))return e;return null})()||function Lue(t,e){const n=document.createElement("script");n.src=`${$$}?l=${t}&id=${e}`,n.async=!0,document.head.appendChild(n)}(s,u.measurementId),FT&&(i("consent","default",FT),function W$(t){FT=t}(void 0)),i("js",new Date);const h=null!==(a=o?.config)&&void 0!==a?a:{};return h[Pue]="firebase",h.update=!0,null!=d&&(h[Nue]=d),i("config",u.measurementId,h),kT&&(i("set",kT),function G$(t){kT=t}(void 0)),u.measurementId}),VT.apply(this,arguments)}class ade{constructor(e){this.app=e}_delete(){return delete ao[this.app.options.appId],Promise.resolve()}}let ao={},q$=[];const K$={};let Y$,co,$_="dataLayer",UT=!1;function lde(t,e,n){!function cde(){const t=[];if(A_()&&t.push("This is a browser extension environment."),QC()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Xr.create("invalid-analytics-context",{errorInfo:e});Pn.warn(n.message)}}();const r=t.options.appId;if(!r)throw Xr.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Xr.create("no-api-key");Pn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ao[r])throw Xr.create("already-exists",{id:r});if(!UT){!function Vue(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}($_);const{wrappedGtag:s,gtagCore:o}=function jue(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function $ue(t,e,n,r){function s(){return s=_(function*(o,a,c){try{"event"===o?yield function Bue(t,e,n,r,i){return xT.apply(this,arguments)}(t,e,n,a,c):"config"===o?yield function Uue(t,e,n,r,i,s){return TT.apply(this,arguments)}(t,e,n,r,a,c):"consent"===o?t("consent","update",c):t("set",a)}catch(l){Pn.error(l)}}),s.apply(this,arguments)}return function i(o,a,c){return s.apply(this,arguments)}}(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}(ao,q$,K$,$_,"gtag");co=s,Y$=o,UT=!0}return ao[r]=function ode(t,e,n,r,i,s,o){return VT.apply(this,arguments)}(t,q$,K$,e,Y$,$_,n),new ade(t)}function dde(){return BT.apply(this,arguments)}function BT(){return(BT=_(function*(){if(A_()||!QC()||!ic())return!1;try{return yield Kh()}catch{return!1}})).apply(this,arguments)}const X$="@firebase/analytics";!function fde(){Rn(new un(B_,(e,{options:n})=>lde(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n),"PUBLIC")),Rn(new un("analytics-internal",function t(e){try{const n=e.getProvider(B_).getImmediate();return{logEvent:(r,i,s)=>function hde(t,e,n,r){t=Gt(t),function ede(t,e,n,r,i){return MT.apply(this,arguments)}(co,ao[t.app.options.appId],e,n,r).catch(i=>Pn.error(i))}(n,r,i,s)}}catch(n){throw Xr.create("interop-component-reg-failed",{reason:n})}},"PRIVATE")),Ze(X$,"0.8.0"),Ze(X$,"0.8.0","esm2017")}();class pde extends St{constructor(e,n){super()}schedule(e,n=0){return this}}const j_={setInterval(t,e,...n){const{delegate:r}=j_;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=j_;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class Z$ extends pde{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return j_.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&j_.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Fr(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const $T={now:()=>($T.delegate||Date).now(),delegate:void 0};class tf{constructor(e,n=tf.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}tf.now=$T.now;class ej extends tf{constructor(e,n=tf.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const _de=new class mde extends ej{}(class gde extends Z${constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),yde=new ej(Z$),bu=new Ha("7.6.1"),jT="__angularfire_symbol__analyticsIsSupportedValue",HT="__angularfire_symbol__analyticsIsSupported",zT="__angularfire_symbol__remoteConfigIsSupportedValue",WT="__angularfire_symbol__remoteConfigIsSupported",GT="__angularfire_symbol__messagingIsSupportedValue",qT="__angularfire_symbol__messagingIsSupported";function nf(t,e,n){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===n);if(1===s.length)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}globalThis[HT]||(globalThis[HT]=dde().then(t=>globalThis[jT]=t).catch(()=>globalThis[jT]=!1)),globalThis[qT]||(globalThis[qT]=B$().then(t=>globalThis[GT]=t).catch(()=>globalThis[GT]=!1)),globalThis[WT]||(globalThis[WT]=Kle().then(t=>globalThis[zT]=t).catch(()=>globalThis[zT]=!1));const rf=(t,e)=>{const n=e?[e]:ZB(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};function Eu(){}class tj{constructor(e,n=_de){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},n,r)}}class vde{constructor(e){this.zone=e,this.task=null}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Eu,{},Eu,Eu)),n.pipe(cn({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let sf=(()=>{class t{constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new tj(Zone.current)),this.insideAngular=n.run(()=>new tj(Zone.current,yde)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return t.\u0275fac=function(n){return new(n||t)(N(Re))},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function hc(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function fc(t){return hc().ngZone.run(()=>t())}function bde(t){return hc(),function Ede(t){return function(n){return(n=n.lift(new vde(t.ngZone))).pipe(dg(t.outsideAngular),ug(t.insideAngular))}}(hc())(t)}const Cde=(t,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),fc(()=>t.apply(void 0,r))},On=(t,e)=>function(){let n;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(n||(n=fc(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Eu,{},Eu,Eu)))),r[s]=Cde(r[s],n));const i=function wde(t){return hc().ngZone.runOutsideAngular(()=>t())}(()=>t.apply(this,r));if(!e){if(i instanceof X){const s=hc();return i.pipe(dg(s.outsideAngular),ug(s.insideAngular))}return fc(()=>i)}return i instanceof X?i.pipe(bde):i instanceof Promise?fc(()=>new Promise((s,o)=>i.then(a=>fc(()=>s(a)),a=>fc(()=>o(a))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:fc(()=>i)};class Ko{constructor(e){return e}}class af{constructor(){return ZB()}}const QT=new U("angularfire2._apps"),Tde={provide:Ko,useFactory:function Ide(t){return t&&1===t.length?t[0]:new Ko(Jh())},deps:[[new Ct,QT]]},xde={provide:af,deps:[[new Ct,QT]]};function Sde(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new Ko(r)}}let Dde=(()=>{class t{constructor(n){Ze("angularfire",bu.full,"core"),Ze("angularfire",bu.full,"app"),Ze("angular",bO.full,n.toString())}}return t.\u0275fac=function(n){return new(n||t)(N(Ws))},t.\u0275mod=Jt({type:t}),t.\u0275inj=zt({providers:[Tde,xde]}),t})();function Ade(t,...e){return{ngModule:Dde,providers:[{provide:QT,useFactory:Sde(t),multi:!0,deps:[Re,Vt,sf,...e]}]}}const nj=On(Jh,!0),kde=On(Tce,!0),rj=new Map,Mde={activated:!1,tokenObservers:[]},Rde={initialized:!1,enabled:!1};function dn(t){return rj.get(t)||Mde}function Fi(t,e){rj.set(t,e)}function H_(){return Rde}const YT="https://content-firebaseappcheck.googleapis.com/v1",Ode="exchangeDebugToken",ij={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Lde{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var n=this;return _(function*(){n.stop();try{n.pending=new _u,yield function Vde(t){return new Promise(e=>{setTimeout(e,t)})}(n.getNextRun(e)),n.pending.resolve(),yield n.pending.promise,n.pending=new _u,yield n.operation(),n.pending.resolve(),yield n.pending.promise,n.process(!0).catch(()=>{})}catch(r){n.retryPolicy(r)?n.process(!1).catch(()=>{}):n.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}const ur=new hs("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function ZT(){return(ZT=_(function*({url:t,body:e},n){var r,i;const s={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){const f=yield o.getHeartbeatsHeader();f&&(s["X-Firebase-Client"]=f)}const a={method:"POST",body:JSON.stringify(e),headers:s};let c,l;try{c=yield fetch(t,a)}catch(f){throw ur.create("fetch-network-error",{originalErrorMessage:null===(r=f)||void 0===r?void 0:r.message})}if(200!==c.status)throw ur.create("fetch-status-error",{httpStatus:c.status});try{l=yield c.json()}catch(f){throw ur.create("fetch-parse-error",{originalErrorMessage:null===(i=f)||void 0===i?void 0:i.message})}const u=l.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw ur.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});const d=1e3*Number(u[1]),h=Date.now();return{token:l.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}})).apply(this,arguments)}const Hde="firebase-app-check-database",zde=1,cf="firebase-app-check-store";let G_=null;function ex(){return(ex=_(function*(t,e){const r=(yield function aj(){return G_||(G_=new Promise((t,e)=>{var n;try{const r=indexedDB.open(Hde,zde);r.onsuccess=i=>{t(i.target.result)},r.onerror=i=>{var s;e(ur.create("storage-open",{originalErrorMessage:null===(s=i.target.error)||void 0===s?void 0:s.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(cf,{keyPath:"compositeKey"})}}catch(r){e(ur.create("storage-open",{originalErrorMessage:null===(n=r)||void 0===n?void 0:n.message}))}}),G_)}()).transaction(cf,"readwrite"),s=r.objectStore(cf).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var l;a(ur.create("storage-set",{originalErrorMessage:null===(l=c.target.error)||void 0===l?void 0:l.message}))}})})).apply(this,arguments)}const lf=new oc("@firebase/app-check");function dj(t,e){return ic()?function Gde(t,e){return function cj(t,e){return ex.apply(this,arguments)}(function uj(t){return`${t.options.appId}-${t.name}`}(t),e)}(t,e).catch(n=>{lf.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function ix(){return(ix=_(function*(){const t=H_();if(t.enabled&&t.token)return t.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Jde={error:"UNKNOWN_ERROR"};function Zde(t){return x_.encodeString(JSON.stringify(t),!1)}function q_(t){return sx.apply(this,arguments)}function sx(){return(sx=_(function*(t,e=!1){const n=t.app;!function sj(t){if(!dn(t).activated)throw ur.create("use-before-activation",{appName:t.name})}(n);const r=dn(n);let s,i=r.token;if(!i){const c=yield r.cachedTokenPromise;c&&K_(c)&&(i=c)}if(!e&&i&&K_(i))return{token:i.token};let a,o=!1;if(function hj(){return H_().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=function JT(t,e){return ZT.apply(this,arguments)}(function jde(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${YT}/projects/${n}/apps/${r}:${Ode}?key=${i}`,body:{debug_token:e}}}(n,yield function fj(){return ix.apply(this,arguments)}()),t.heartbeatServiceProvider).then(l=>(r.exchangeTokenPromise=void 0,l)),o=!0);const c=yield r.exchangeTokenPromise;return yield dj(n,c),Fi(n,Object.assign(Object.assign({},r),{token:c})),{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(c=>(r.exchangeTokenPromise=void 0,c)),o=!0),i=yield r.exchangeTokenPromise}catch(c){"appCheck/throttled"===c.code?lf.warn(c.message):lf.error(c),s=c}return i?(a={token:i.token},Fi(n,Object.assign(Object.assign({},r),{token:i})),yield dj(n,i)):a=function the(t){return{token:Zde(Jde),error:t}}(s),o&&function gj(t,e){const n=dn(t).tokenObservers;for(const r of n)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(n,a),a})).apply(this,arguments)}function ax(t,e){const n=dn(t),r=n.tokenObservers.filter(i=>i.next!==e);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),Fi(t,Object.assign(Object.assign({},n),{tokenObservers:r}))}function pj(t){const{app:e}=t,n=dn(e);let r=n.tokenRefresher;r||(r=function ehe(t){const{app:e}=t;return new Lde(_(function*(){let r;if(r=dn(e).token?yield q_(t,!0):yield q_(t),r.error)throw r.error}),()=>!0,()=>{const n=dn(e);if(n.token){let r=n.token.issuedAtTimeMillis+.5*(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,n.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},ij.RETRIAL_MIN_WAIT,ij.RETRIAL_MAX_WAIT)}(t),Fi(e,Object.assign(Object.assign({},n),{tokenRefresher:r}))),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function K_(t){return t.expireTimeMillis-Date.now()>0}class nhe{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=dn(this.app);for(const n of e)ax(this.app,n.next);return Promise.resolve()}}const Cj="app-check-internal";!function mhe(){Rn(new un("app-check",t=>function rhe(t,e){return new nhe(t,e)}(t.getProvider("app").getImmediate(),t.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(Cj).initialize()})),Rn(new un(Cj,t=>function ihe(t){return{getToken:e=>q_(t,e),addTokenListener:e=>function ox(t,e,n,r){const{app:i}=t,s=dn(i),o={next:n,error:r,type:e};if(Fi(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,o]})),s.token&&K_(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),pj(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>pj(t))}(t,"INTERNAL",e),removeTokenListener:e=>ax(t.app,e)}}(t.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),Ze("@firebase/app-check","0.5.11")}();class uf{constructor(){return rf("app-check")}}typeof window<"u"&&window;const bhe=function Tj(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},xj=new hs("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Sj=new oc("@firebase/auth");function Y_(t,...e){Sj.logLevel<=Le.ERROR&&Sj.error(`Auth (${qo}): ${t}`,...e)}function Dr(t,...e){throw hx(t,...e)}function fs(t,...e){return hx(t,...e)}function hx(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return xj.create(t,...e)}function R(t,e,...n){if(!t)throw hx(e,...n)}function ps(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Y_(e),new Error(e)}function Qo(t,e){t||ps(e)}const Aj=new Map;function lo(t){Qo(t instanceof Function,"Expected a class definition");let e=Aj.get(t);return e?(Qo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Aj.set(t,e),e)}function df(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function kj(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class hf{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qo(n>e,"Short delay should be less than long delay!"),this.isMobile=D_()||KC()}get(){return function Ihe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function fx(){return"http:"===kj()||"https:"===kj()}()||A_()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function px(t,e){Qo(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Mj{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ps("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ps("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ps("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const xhe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},She=new hf(3e4,6e4);function hn(t,e,n,r){return gx.apply(this,arguments)}function gx(){return(gx=_(function*(t,e,n,r,i={}){return Rj(t,i,_(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=Xh(Object.assign({key:t.config.apiKey},o)).slice(1),c=yield t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),Mj.fetch()(Nj(t,t.config.apiHost,n,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))}))})).apply(this,arguments)}function Rj(t,e,n){return mx.apply(this,arguments)}function mx(){return(mx=_(function*(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},xhe),e);try{const i=new Dhe(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw ff(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===c)throw ff(t,"credential-already-in-use",o);if("EMAIL_EXISTS"===c)throw ff(t,"email-already-in-use",o);if("USER_DISABLED"===c)throw ff(t,"user-disabled",o);const u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw function Dj(t,e,n){const r=Object.assign(Object.assign({},bhe()),{[e]:n});return new hs("auth","Firebase",r).create(e,{appName:t.name})}(t,u,l);Dr(t,u)}}catch(i){if(i instanceof Oi)throw i;Dr(t,"network-request-failed")}})).apply(this,arguments)}function _x(){return(_x=_(function*(t,e,n,r,i={}){const s=yield hn(t,e,n,r,i);return"mfaPendingCredential"in s&&Dr(t,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function Nj(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?px(t.config,i):`${t.config.apiScheme}://${i}`}class Dhe{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(fs(this.auth,"network-request-failed")),She.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ff(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=fs(t,e,r);return i.customData._tokenResponse=n,i}function yx(){return(yx=_(function*(t,e){return hn(t,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function wx(){return(wx=_(function*(t,e){return hn(t,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function pf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function bx(){return(bx=_(function*(t,e=!1){const n=Gt(t),r=yield n.getIdToken(e),i=X_(r);R(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:pf(Ex(i.auth_time)),issuedAtTime:pf(Ex(i.iat)),expirationTime:pf(Ex(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function Ex(t){return 1e3*Number(t)}function X_(t){var e;const[n,r,i]=t.split(".");if(void 0===n||void 0===r||void 0===i)return Y_("JWT malformed, contained fewer than 3 sections"),null;try{const s=qC(r);return s?JSON.parse(s):(Y_("Failed to decode base64 JWT payload"),null)}catch(s){return Y_("Caught error parsing JWT payload as JSON",null===(e=s)||void 0===e?void 0:e.toString()),null}}function ho(t,e){return Cx.apply(this,arguments)}function Cx(){return(Cx=_(function*(t,e,n=!1){if(n)return e;try{return yield e}catch(r){throw r instanceof Oi&&function Phe({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})).apply(this,arguments)}class Ohe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var n=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(_(function*(){yield n.iteration()}),r)}iteration(){var e=this;return _(function*(){var n;try{yield e.user.getIdToken(!0)}catch(r){return void("auth/network-request-failed"===(null===(n=r)||void 0===n?void 0:n.code)&&e.schedule(!0))}e.schedule()})()}}class Pj{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=pf(this.lastLoginAt),this.creationTime=pf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function gf(t){return Ix.apply(this,arguments)}function Ix(){return Ix=_(function*(t){var e;const n=t.auth,r=yield t.getIdToken(),i=yield ho(t,function Mhe(t,e){return wx.apply(this,arguments)}(n,{idToken:r}));R(i?.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?function Vhe(t){return t.map(e=>{var{providerId:n}=e,r=Jw(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(s.providerUserInfo):[],a=function Lhe(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(t.providerData,o),u=!!t.isAnonymous&&!(t.email&&s.passwordHash||a?.length),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Pj(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}),Ix.apply(this,arguments)}function Tx(){return(Tx=_(function*(t){const e=Gt(t);yield gf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function xx(){return(xx=_(function*(t,e){const n=yield Rj(t,{},_(function*(){const r=Xh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Nj(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Mj.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class mf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){R(e.idToken,"internal-error"),R(typeof e.idToken<"u","internal-error"),R(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function Nhe(t){const e=X_(t);return R(e,"internal-error"),R(typeof e.exp<"u","internal-error"),R(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){var r=this;return _(function*(){return R(!r.accessToken||r.refreshToken,e,"user-token-expired"),n||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,n){var r=this;return _(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function Uhe(t,e){return xx.apply(this,arguments)}(e,n);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new mf;return r&&(R("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(R("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(R("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new mf,this.toJSON())}_performRefresh(){return ps("not implemented")}}function Yo(t,e){R("string"==typeof t||typeof t>"u","internal-error",{appName:e})}class pc{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Jw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ohe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Pj(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var n=this;return _(function*(){const r=yield ho(n,n.stsTokenManager.getToken(n.auth,e));return R(r,n.auth,"internal-error"),n.accessToken!==r&&(n.accessToken=r,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),r})()}getIdTokenResult(e){return function Rhe(t){return bx.apply(this,arguments)}(this,e)}reload(){return function Fhe(t){return Tx.apply(this,arguments)}(this)}_assign(e){this!==e&&(R(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new pc(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){R(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){var r=this;return _(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield gf(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return _(function*(){const n=yield e.getIdToken();return yield ho(e,function Ahe(t,e){return yx.apply(this,arguments)}(e.auth,{idToken:n})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,u;const d=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,f=null!==(s=n.phoneNumber)&&void 0!==s?s:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,g=null!==(a=n.tenantId)&&void 0!==a?a:void 0,m=null!==(c=n._redirectEventId)&&void 0!==c?c:void 0,v=null!==(l=n.createdAt)&&void 0!==l?l:void 0,y=null!==(u=n.lastLoginAt)&&void 0!==u?u:void 0,{uid:C,emailVerified:I,isAnonymous:A,providerData:q,stsTokenManager:Z}=n;R(C&&Z,e,"internal-error");const ze=mf.fromJSON(this.name,Z);R("string"==typeof C,e,"internal-error"),Yo(d,e.name),Yo(h,e.name),R("boolean"==typeof I,e,"internal-error"),R("boolean"==typeof A,e,"internal-error"),Yo(f,e.name),Yo(p,e.name),Yo(g,e.name),Yo(m,e.name),Yo(v,e.name),Yo(y,e.name);const Nt=new pc({uid:C,auth:e,email:h,emailVerified:I,displayName:d,isAnonymous:A,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:ze,createdAt:v,lastLoginAt:y});return q&&Array.isArray(q)&&(Nt.providerData=q.map(si=>Object.assign({},si))),m&&(Nt._redirectEventId=m),Nt}static _fromIdTokenResponse(e,n,r=!1){return _(function*(){const i=new mf;i.updateFromServerResponse(n);const s=new pc({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield gf(s),s})()}}const Oj=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(function*(){return!0})()}_set(n,r){var i=this;return _(function*(){i.storage[n]=r})()}_get(n){var r=this;return _(function*(){const i=r.storage[n];return void 0===i?null:i})()}_remove(n){var r=this;return _(function*(){delete r.storage[n]})()}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})();function J_(t,e,n){return`firebase:${t}:${e}:${n}`}class Iu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=J_(this.userKey,i.apiKey,s),this.fullPersistenceKey=J_("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return _(function*(){const n=yield e.persistence._get(e.fullUserKey);return n?pc._fromJSON(e.auth,n):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var n=this;return _(function*(){if(n.persistence===e)return;const r=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=e,r?n.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return _(function*(){if(!n.length)return new Iu(lo(Oj),e,r);const i=(yield Promise.all(n.map(function(){var l=_(function*(u){if(yield u._isAvailable())return u});return function(u){return l.apply(this,arguments)}}()))).filter(l=>l);let s=i[0]||lo(Oj);const o=J_(r,e.config.apiKey,e.name);let a=null;for(const l of n)try{const u=yield l._get(o);if(u){const d=pc._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}const c=i.filter(l=>l._shouldAllowMigration);return s._shouldAllowMigration&&c.length?(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(function(){var l=_(function*(u){if(u!==s)try{yield u._remove(o)}catch{}});return function(u){return l.apply(this,arguments)}}())),new Iu(s,e,r)):new Iu(s,e,r)})()}}function Fj(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Uj(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Lj(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($j(e))return"Blackberry";if(jj(e))return"Webos";if(Sx(e))return"Safari";if((e.includes("chrome/")||Vj(e))&&!e.includes("edge/"))return"Chrome";if(Bj(e))return"Android";{const r=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function Lj(t=ln()){return/firefox\//i.test(t)}function Sx(t=ln()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Vj(t=ln()){return/crios\//i.test(t)}function Uj(t=ln()){return/iemobile/i.test(t)}function Bj(t=ln()){return/android/i.test(t)}function $j(t=ln()){return/blackberry/i.test(t)}function jj(t=ln()){return/webos/i.test(t)}function Z_(t=ln()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Hj(t=ln()){return Z_(t)||Bj(t)||jj(t)||$j(t)||/windows phone/i.test(t)||Uj(t)}function zj(t,e=[]){let n;switch(t){case"Browser":n=Fj(ln());break;case"Worker":n=`${Fj(ln())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${qo}/${r}`}class Hhe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var n=this;return _(function*(){var r;if(n.auth.currentUser===e)return;const i=[];try{for(const s of n.queue)yield s(e),s.onAbort&&i.push(s.onAbort)}catch(s){i.reverse();for(const o of i)try{o()}catch{}throw n.auth._errorFactory.create("login-blocked",{originalMessage:null===(r=s)||void 0===r?void 0:r.message})}})()}}class zhe{constructor(e,n,r){this.app=e,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wj(this),this.idTokenSubscription=new Wj(this),this.beforeStateQueue=new Hhe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xj,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){var r=this;return n&&(this._popupRedirectResolver=lo(n)),this._initializationPromise=this.queue(_(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield Iu.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(n),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return _(function*(){if(e._deleted)return;const n=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||n){if(e.currentUser&&n&&e.currentUser.uid===n.uid)return e._currentUser._assign(n),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(n,!0)}})()}initializeCurrentUser(e){var n=this;return _(function*(){var r;const i=yield n.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const a=null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId,c=s?._redirectEventId,l=yield n.tryRedirectSignIn(e);(!a||a===c)&&l?.user&&(s=l.user,o=!0)}if(!s)return n.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield n.beforeStateQueue.runMiddleware(s)}catch(a){s=i,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(a))}return s?n.reloadAndSetCurrentUserOrClear(s):n.directlySetCurrentUser(null)}return R(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===s._redirectEventId?n.directlySetCurrentUser(s):n.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var n=this;return _(function*(){let r=null;try{r=yield n._popupRedirectResolver._completeRedirectFn(n,e,!0)}catch{yield n._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var n=this;return _(function*(){var r;try{yield gf(e)}catch(i){if("auth/network-request-failed"!==(null===(r=i)||void 0===r?void 0:r.code))return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function The(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}_delete(){var e=this;return _(function*(){e._deleted=!0})()}updateCurrentUser(e){var n=this;return _(function*(){const r=e?Gt(e):null;return r&&R(r.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(r&&r._clone(n))})()}_updateCurrentUser(e,n=!1){var r=this;return _(function*(){if(!r._deleted)return e&&R(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),n||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(_(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return _(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var n=this;return this.queue(_(function*(){yield n.assertedPersistence.setPersistence(lo(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new hs("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,n){var r=this;return _(function*(){const i=yield r.getOrInitRedirectPersistenceManager(n);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var n=this;return _(function*(){if(!n.redirectPersistenceManager){const r=e&&lo(e)||n._popupRedirectResolver;R(r,n,"argument-error"),n.redirectPersistenceManager=yield Iu.create(n,[lo(r._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(e){var n=this;return _(function*(){var r,i;return n._isInitialized&&(yield n.queue(_(function*(){}))),(null===(r=n._currentUser)||void 0===r?void 0:r._redirectEventId)===e?n._currentUser:(null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?n.redirectUser:null})()}_persistUserIfCurrent(e){var n=this;return _(function*(){if(e===n.currentUser)return n.queue(_(function*(){return n.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(n=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s="function"==typeof n?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return R(o,this,"internal-error"),o.then(()=>s(this.currentUser)),"function"==typeof n?e.addObserver(n,r,i):e.addObserver(n)}directlySetCurrentUser(e){var n=this;return _(function*(){n.currentUser&&n.currentUser!==e&&(n._currentUser._stopProactiveRefresh(),e&&n.isProactiveRefreshEnabled&&e._startProactiveRefresh()),n.currentUser=e,e?yield n.assertedPersistence.setCurrentUser(e):yield n.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return R(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zj(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return _(function*(){var n;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();return i&&(r["X-Firebase-Client"]=i),r})()}}function Ar(t){return Gt(t)}class Wj{constructor(e){this.auth=e,this.observer=null,this.addObserver=function Eae(t,e){const n=new Cae(t,e);return n.subscribe.bind(n)}(n=>this.observer=n)}get next(){return R(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class qhe{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ps("not implemented")}_getIdTokenResponse(e){return ps("not implemented")}_linkToIdToken(e,n){return ps("not implemented")}_getReauthenticationResolver(e){return ps("not implemented")}}function fo(t,e){return Bx.apply(this,arguments)}function Bx(){return(Bx=_(function*(t,e){return function uo(t,e,n,r){return _x.apply(this,arguments)}(t,"POST","/v1/accounts:signInWithIdp",function tn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}(t,e))})).apply(this,arguments)}class Xo{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ufe extends Xo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class vi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return _(function*(){const s=yield pc._fromIdTokenResponse(e,r,i),o=Jj(r);return new vi({user:s,providerId:o,_tokenResponse:r,operationType:n})})()}static _forOperation(e,n,r){return _(function*(){yield e._updateTokensIfNecessary(r,!0);const i=Jj(r);return new vi({user:e,providerId:i,_tokenResponse:r,operationType:n})})()}}function Jj(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class ry extends Oi{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ry.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new ry(e,n,r,i)}}function Zj(t,e,n,r){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?ry._fromErrorAndOperation(t,s,e,r):s})}function Yx(){return(Yx=_(function*(t,e,n=!1){const r=yield ho(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return vi._forOperation(t,"link",r)})).apply(this,arguments)}function Jx(){return(Jx=_(function*(t,e,n=!1){var r;const{auth:i}=t,s="reauthenticate";try{const o=yield ho(t,Zj(i,s,e,t),n);R(o.idToken,i,"internal-error");const a=X_(o.idToken);R(a,i,"internal-error");const{sub:c}=a;return R(t.uid===c,i,"user-mismatch"),vi._forOperation(t,s,o)}catch(o){throw"auth/user-not-found"===(null===(r=o)||void 0===r?void 0:r.code)&&Dr(i,"user-mismatch"),o}})).apply(this,arguments)}function Zx(){return(Zx=_(function*(t,e,n=!1){const r="signIn",i=yield Zj(t,r,e),s=yield vi._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})).apply(this,arguments)}const oy="__sak";class i3{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(oy,"1"),this.storage.removeItem(oy),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const kfe=(()=>{class t extends i3{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Sfe(){const t=ln();return Sx(t)||Z_(t)}()&&function jhe(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Hj(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key)return void this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});const i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(n.newValue!==a)null!==n.newValue?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}const s=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);!function $he(){return zB()&&10===document.documentMode}()||o===n.newValue||n.newValue===n.oldValue?s():setTimeout(s,10)}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(n,r){var i=()=>super._set,s=this;return _(function*(){yield i().call(s,n,r),s.localCache[n]=JSON.stringify(r)})()}_get(n){var r=()=>super._get,i=this;return _(function*(){const s=yield r().call(i,n);return i.localCache[n]=JSON.stringify(s),s})()}_remove(n){var r=()=>super._remove,i=this;return _(function*(){yield r().call(i,n),delete i.localCache[n]})()}}return t.type="LOCAL",t})(),s3=(()=>{class t extends i3{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})();let Rfe=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){const r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;const i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){var r=this;return _(function*(){const i=n,{eventId:s,eventType:o,data:a}=i.data,c=r.handlersMap[o];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const l=Array.from(c).map(function(){var d=_(function*(h){return h(i.origin,a)});return function(h){return d.apply(this,arguments)}}()),u=yield function Mfe(t){return Promise.all(t.map(function(){var e=_(function*(n){try{return{fulfilled:!0,value:yield n}}catch(r){return{fulfilled:!1,reason:r}}});return function(n){return e.apply(this,arguments)}}()))}(l);i.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:u})})()}_subscribe(n,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||0===this.handlersMap[n].size)&&delete this.handlersMap[n],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return t.receivers=[],t})();function DS(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(10*Math.random());return t+n}class Nfe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){var i=this;return _(function*(){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((c,l)=>{const u=DS("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(f.data.response);break;default:clearTimeout(d),clearTimeout(o),l(new Error("invalid_response"))}}},i.handlers.add(a),s.port1.addEventListener("message",a.onMessage),i.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{a&&i.removeMessageHandler(a)})})()}}function nn(){return window}function AS(){return typeof nn().WorkerGlobalScope<"u"&&"function"==typeof nn().importScripts}function kS(){return(kS=_(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const o3="firebaseLocalStorageDb",ay="firebaseLocalStorage",a3="fbase_key";class wf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function cy(t,e){return t.transaction([ay],e?"readwrite":"readonly").objectStore(ay)}function MS(){const t=indexedDB.open(o3,1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ay,{keyPath:a3})}catch(i){n(i)}}),t.addEventListener("success",_(function*(){const r=t.result;r.objectStoreNames.contains(ay)?e(r):(r.close(),yield function Ufe(){const t=indexedDB.deleteDatabase(o3);return new wf(t).toPromise()}(),e(yield MS()))}))})}function c3(t,e,n){return RS.apply(this,arguments)}function RS(){return(RS=_(function*(t,e,n){const r=cy(t,!0).put({[a3]:e,value:n});return new wf(r).toPromise()})).apply(this,arguments)}function NS(){return(NS=_(function*(t,e){const n=cy(t,!1).get(e),r=yield new wf(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function l3(t,e){const n=cy(t,!0).delete(e);return new wf(n).toPromise()}const Hfe=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var n=this;return _(function*(){return n.db||(n.db=yield MS()),n.db})()}_withRetries(n){var r=this;return _(function*(){let i=0;for(;;)try{const s=yield r._openDb();return yield n(s)}catch(s){if(i++>3)throw s;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var n=this;return _(function*(){return AS()?n.initializeReceiver():n.initializeSender()})()}initializeReceiver(){var n=this;return _(function*(){n.receiver=Rfe._getInstance(function Lfe(){return AS()?self:null}()),n.receiver._subscribe("keyChanged",function(){var r=_(function*(i,s){return{keyProcessed:(yield n._poll()).includes(s.key)}});return function(i,s){return r.apply(this,arguments)}}()),n.receiver._subscribe("ping",function(){var r=_(function*(i,s){return["keyChanged"]});return function(i,s){return r.apply(this,arguments)}}())})()}initializeSender(){var n=this;return _(function*(){var r,i;if(n.activeServiceWorker=yield function Ofe(){return kS.apply(this,arguments)}(),!n.activeServiceWorker)return;n.sender=new Nfe(n.activeServiceWorker);const s=yield n.sender._send("ping",{},800);s&&null!==(r=s[0])&&void 0!==r&&r.fulfilled&&null!==(i=s[0])&&void 0!==i&&i.value.includes("keyChanged")&&(n.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(n){var r=this;return _(function*(){if(r.sender&&r.activeServiceWorker&&function Ffe(){var t;return(null===(t=navigator?.serviceWorker)||void 0===t?void 0:t.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:n},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return _(function*(){try{if(!indexedDB)return!1;const n=yield MS();return yield c3(n,oy,"1"),yield l3(n,oy),!0}catch{}return!1})()}_withPendingWrite(n){var r=this;return _(function*(){r.pendingWrites++;try{yield n()}finally{r.pendingWrites--}})()}_set(n,r){var i=this;return _(function*(){return i._withPendingWrite(_(function*(){return yield i._withRetries(s=>c3(s,n,r)),i.localCache[n]=r,i.notifyServiceWorker(n)}))})()}_get(n){var r=this;return _(function*(){const i=yield r._withRetries(s=>function Bfe(t,e){return NS.apply(this,arguments)}(s,n));return r.localCache[n]=i,i})()}_remove(n){var r=this;return _(function*(){return r._withPendingWrite(_(function*(){return yield r._withRetries(i=>l3(i,n)),delete r.localCache[n],r.notifyServiceWorker(n)}))})()}_poll(){var n=this;return _(function*(){const r=yield n._withRetries(o=>{const a=cy(o,!1).getAll();return new wf(a).toPromise()});if(!r)return[];if(0!==n.pendingWrites)return[];const i=[],s=new Set;for(const{fbase_key:o,value:a}of r)s.add(o),JSON.stringify(n.localCache[o])!==JSON.stringify(a)&&(n.notifyListeners(o,a),i.push(o));for(const o of Object.keys(n.localCache))n.localCache[o]&&!s.has(o)&&(n.notifyListeners(o,null),i.push(o));return i})()}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const s of Array.from(i))s(r)}startPolling(){var n=this;this.stopPolling(),this.pollTimer=setInterval(_(function*(){return n._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return t.type="LOCAL",t})();function d3(t){return`__${t}${Math.floor(1e6*Math.random())}`}d3("rcb"),new hf(3e4,6e4);class HS extends qhe{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return fo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return fo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function ope(t){return function n3(t,e){return Zx.apply(this,arguments)}(t.auth,new HS(t),t.bypassAuthState)}function ape(t){const{auth:e,user:n}=t;return R(n,e,"internal-error"),function t3(t,e){return Jx.apply(this,arguments)}(n,new HS(t),t.bypassAuthState)}function cpe(t){return zS.apply(this,arguments)}function zS(){return(zS=_(function*(t){const{auth:e,user:n}=t;return R(n,e,"internal-error"),function Qx(t,e){return Yx.apply(this,arguments)}(n,new HS(t),t.bypassAuthState)})).apply(this,arguments)}class lpe{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){var e=this;return new Promise(function(){var n=_(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(r,i){return n.apply(this,arguments)}}())}onAuthEvent(e){var n=this;return _(function*(){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:a,type:c}=e;if(a)return void n.reject(a);const l={auth:n.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:n.user,bypassAuthState:n.bypassAuthState};try{n.resolve(yield n.getIdpTask(c)(l))}catch(u){n.reject(u)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ope;case"linkViaPopup":case"linkViaRedirect":return cpe;case"reauthViaPopup":case"reauthViaRedirect":return ape;default:Dr(this.auth,"internal-error")}}resolve(e){Qo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new hf(2e3,1e4);const upe="pendingRedirect",bf=new Map;class dpe extends lpe{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,n=this;return _(function*(){let r=bf.get(n.auth._key());if(!r){try{const s=(yield function hpe(t,e){return QS.apply(this,arguments)}(n.resolver,n.auth))?yield e().call(n):null;r=()=>Promise.resolve(s)}catch(i){r=()=>Promise.reject(i)}bf.set(n.auth._key(),r)}return n.bypassAuthState||bf.set(n.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var n=()=>super.onAuthEvent,r=this;return _(function*(){if("signInViaRedirect"===e.type)return n().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,n().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return _(function*(){})()}cleanUp(){}}function QS(){return(QS=_(function*(t,e){const n=function p3(t){return J_(upe,t.config.apiKey,t.name)}(e),r=function f3(t){return lo(t._redirectPersistence)}(t);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(n));return yield r._remove(n),i})).apply(this,arguments)}function fpe(t,e){bf.set(t._key(),e)}function g3(t,e){return nD.apply(this,arguments)}function nD(){return(nD=_(function*(t,e,n=!1){const r=Ar(t),i=function mc(t,e){return e?lo(e):(R(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}(r,e),o=yield new dpe(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})).apply(this,arguments)}class ype{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function vpe(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return y3(t);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!y3(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";n.onError(fs(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=null===n.eventId||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(_3(e))}saveEventToCache(e){this.cachedEventUids.add(_3(e)),this.lastProcessedEventTime=Date.now()}}function _3(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function y3({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===e?.code}function iD(){return(iD=_(function*(t,e={}){return hn(t,"GET","/v1/projects",e)})).apply(this,arguments)}const bpe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Epe=/^https?/;function sD(){return sD=_(function*(t){if(t.config.emulator)return;const{authorizedDomains:e}=yield function wpe(t){return iD.apply(this,arguments)}(t);for(const n of e)try{if(Ipe(n))return}catch{}Dr(t,"unauthorized-domain")}),sD.apply(this,arguments)}function Ipe(t){const e=df(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return""===o.hostname&&""===r?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&o.hostname===r}if(!Epe.test(n))return!1;if(bpe.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Tpe=new hf(3e4,6e4);function v3(){const t=nn().___jsl;if(t?.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}let uy=null;function Spe(t){return uy=uy||function xpe(t){return new Promise((e,n)=>{var r,i,s;function o(){v3(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{v3(),n(fs(t,"network-request-failed"))},timeout:Tpe.get()})}if(null!==(i=null===(r=nn().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(s=nn().gapi)||void 0===s||!s.load){const a=d3("iframefcb");return nn()[a]=()=>{gapi.load?o():n(fs(t,"network-request-failed"))},function u3(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=fs("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",function qfe(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)})}(`https://apis.google.com/js/api.js?onload=${a}`).catch(c=>n(c))}o()}}).catch(e=>{throw uy=null,e})}(t),uy}const Dpe=new hf(5e3,15e3),Ape="__/auth/iframe",kpe="emulator/auth/iframe",Mpe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Rpe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Npe(t){const e=t.config;R(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?px(e,kpe):`https://${t.config.authDomain}/${Ape}`,r={apiKey:e.apiKey,appName:t.name,v:qo},i=Rpe.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Xh(r).slice(1)}`}function oD(){return oD=_(function*(t){const e=yield Spe(t),n=nn().gapi;return R(n,t,"internal-error"),e.open({where:document.body,url:Npe(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Mpe,dontclear:!0},r=>new Promise(function(){var i=_(function*(s,o){yield r.restyle({setHideOnLeave:!1});const a=fs(t,"network-request-failed"),c=nn().setTimeout(()=>{o(a)},Dpe.get());function l(){nn().clearTimeout(c),s(r)}r.ping(l).then(l,()=>{o(a)})});return function(s,o){return i.apply(this,arguments)}}()))}),oD.apply(this,arguments)}const Ope={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class w3{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function b3(t,e,n,r,i,s){R(t.config.authDomain,t,"auth-domain-config-required"),R(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:qo,eventId:i};if(e instanceof Xo){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",YC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,l]of Object.entries(s||{}))o[c]=l}if(e instanceof ufe){const c=e.getScopes().filter(l=>""!==l);c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))void 0===a[c]&&delete a[c];return`${function zpe({config:t}){return t.emulator?px(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${Xh(a).slice(1)}`}const aD="webStorageSupport",Gpe=class Wpe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=s3,this._completeRedirectFn=g3,this._overrideRedirectResult=fpe}_openPopup(e,n,r,i){var s=this;return _(function*(){var o;Qo(null===(o=s.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");const a=b3(e,n,r,df(),i);return function Bpe(t,e,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},Ope),{width:r.toString(),height:i.toString(),top:s,left:o}),l=ln().toLowerCase();n&&(a=Vj(l)?"_blank":n),Lj(l)&&(e=e||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(function Bhe(t=ln()){var e;return Z_(t)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(l)&&"_self"!==a)return function $pe(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(e||"",a),new w3(null);const d=window.open(e||"",a,u);R(d,t,"popup-blocked");try{d.focus()}catch{}return new w3(d)}(e,a,DS())})()}_openRedirect(e,n,r,i){var s=this;return _(function*(){return yield s._originValidation(e),function Pfe(t){nn().location.href=t}(b3(e,n,r,df(),i)),new Promise(()=>{})})()}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Qo(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){var n=this;return _(function*(){const r=yield function Ppe(t){return oD.apply(this,arguments)}(e),i=new ype(e);return r.register("authEvent",s=>(R(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),n.eventManagers[e._key()]={manager:i},n.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(aD,{type:aD},i=>{var s;const o=null===(s=i?.[0])||void 0===s?void 0:s[aD];void 0!==o&&n(!!o),Dr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=function Cpe(t){return sD.apply(this,arguments)}(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Hj()||Sx()||Z_()}};var C3="@firebase/auth";class qpe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var n=this;return _(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{var i;e((null===(i=r)||void 0===i?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){R(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ype(t=Jh()){const e=Wo(t,"auth");return e.isInitialized()?e.getImmediate():function Ehe(t,e){const n=Wo(t,"auth");if(n.isInitialized()){const i=n.getImmediate();if(Yh(n.getOptions(),e??{}))return i;Dr(i,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:Gpe,persistence:[Hfe,kfe,s3]})}!function Qpe(t){Rn(new un("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=r.options;return((a,c)=>{R(s&&!s.includes(":"),"invalid-api-key",{appName:a.name}),R(!o?.includes(":"),"argument-error",{appName:a.name});const l={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zj(t)},u=new zhe(a,c,l);return function Che(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(lo);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}(u,n),u})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Rn(new un("auth-internal",e=>{const n=Ar(e.getProvider("auth").getImmediate());return new qpe(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ze(C3,"0.20.5",function Kpe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(t)),Ze(C3,"0.20.5","esm2017")}("Browser");class cD{constructor(e){return e}}class dy{constructor(){return rf("auth")}}const lD=new U("angularfire2.auth-instances");function Jpe(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new cD(r)}}const Zpe={provide:dy,deps:[[new Ct,lD]]},ege={provide:cD,useFactory:function Xpe(t,e){const n=nf("auth",t,e);return n&&new cD(n)},deps:[[new Ct,lD],Ko]};let tge=(()=>{class t{constructor(){Ze("angularfire",bu.full,"auth")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Jt({type:t}),t.\u0275inj=zt({providers:[ege,Zpe]}),t})();function nge(t,...e){return{ngModule:tge,providers:[{provide:lD,useFactory:Jpe(t),multi:!0,deps:[Re,Vt,sf,af,[new Ct,uf],...e]}]}}const rge=On(Ype,!0);var W,ige=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},po={},uD=uD||{},de=ige||self;function hy(){}function dD(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Ef(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var hD="closure_uid_"+(1e9*Math.random()>>>0),oge=0;function age(t,e,n){return t.call.apply(t.bind,arguments)}function cge(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Fn(t,e,n){return(Fn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?age:cge).apply(null,arguments)}function fy(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Ln(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Jo(){this.s=this.s,this.o=this.o}var uge={};Jo.prototype.s=!1,Jo.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function sge(t){return Object.prototype.hasOwnProperty.call(t,hD)&&t[hD]||(t[hD]=++oge)}(this);delete uge[t]}},Jo.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const x3=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},S3=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const r=t.length,i="string"==typeof t?t.split(""):t;for(let s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function D3(t){return Array.prototype.concat.apply([],arguments)}function fD(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function py(t){return/^[\s\xa0]*$/.test(t)}var hr,A3=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function dr(t,e){return-1!=t.indexOf(e)}function pD(t,e){return t<e?-1:t>e?1:0}e:{var k3=de.navigator;if(k3){var M3=k3.userAgent;if(M3){hr=M3;break e}}hr=""}function gD(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function R3(t){const e={};for(const n in t)e[n]=t[n];return e}var N3="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P3(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<N3.length;s++)n=N3[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function mD(t){return mD[" "](t),t}mD[" "]=hy;var gy,t,fge=dr(hr,"Opera"),Tu=dr(hr,"Trident")||dr(hr,"MSIE"),O3=dr(hr,"Edge"),_D=O3||Tu,F3=dr(hr,"Gecko")&&!(dr(hr.toLowerCase(),"webkit")&&!dr(hr,"Edge"))&&!(dr(hr,"Trident")||dr(hr,"MSIE"))&&!dr(hr,"Edge"),pge=dr(hr.toLowerCase(),"webkit")&&!dr(hr,"Edge");function L3(){var t=de.document;return t?t.documentMode:void 0}e:{var yD="",vD=(t=hr,F3?/rv:([^\);]+)(\)|;)/.exec(t):O3?/Edge\/([\d\.]+)/.exec(t):Tu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):pge?/WebKit\/(\S+)/.exec(t):fge?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(vD&&(yD=vD?vD[1]:""),Tu){var wD=L3();if(null!=wD&&wD>parseFloat(yD)){gy=String(wD);break e}}gy=yD}var gge={};var _ge=de.document&&Tu&&(L3()||parseInt(gy,10))||void 0,yge=function(){if(!de.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{de.addEventListener("test",hy,e),de.removeEventListener("test",hy,e)}catch{}return t}();function Qn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Cf(t,e){if(Qn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(F3){e:{try{mD(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:vge[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Cf.Z.h.call(this)}}Qn.prototype.h=function(){this.defaultPrevented=!0},Ln(Cf,Qn);var vge={2:"touch",3:"pen",4:"mouse"};Cf.prototype.h=function(){Cf.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var If="closure_listenable_"+(1e6*Math.random()|0),wge=0;function bge(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++wge,this.ca=this.fa=!1}function my(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function _y(t){this.src=t,this.g={},this.h=0}function ED(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=x3(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(my(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function CD(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==r)return i}return-1}_y.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=CD(t,e,r,i);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new bge(e,this.src,s,!!r,i)).fa=n,t.push(e)),e};var ID="closure_lm_"+(1e6*Math.random()|0),TD={};function U3(t,e,n,r,i){if(r&&r.once)return $3(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)U3(t,e[s],n,r,i);return null}return n=AD(n),t&&t[If]?t.N(e,n,Ef(r)?!!r.capture:!!r,i):B3(t,e,n,!1,r,i)}function B3(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Ef(i)?!!i.capture:!!i,a=SD(t);if(a||(t[ID]=a=new _y(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function Ege(){var e=Cge;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)yge||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(H3(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function $3(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)$3(t,e[s],n,r,i);return null}return n=AD(n),t&&t[If]?t.O(e,n,Ef(r)?!!r.capture:!!r,i):B3(t,e,n,!0,r,i)}function j3(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)j3(t,e[s],n,r,i);else r=Ef(r)?!!r.capture:!!r,n=AD(n),t&&t[If]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=CD(s=t.g[e],n,r,i))&&(my(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=SD(t))&&(e=t.g[e.toString()],t=-1,e&&(t=CD(e,n,r,i)),(n=-1<t?e[t]:null)&&xD(n))}function xD(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[If])ED(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(H3(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=SD(e))?(ED(n,t),0==n.h&&(n.src=null,e[ID]=null)):my(t)}}}function H3(t){return t in TD?TD[t]:TD[t]="on"+t}function Cge(t,e){if(t.ca)t=!0;else{e=new Cf(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&xD(t),t=n.call(r,e)}return t}function SD(t){return(t=t[ID])instanceof _y?t:null}var DD="__closure_events_fn_"+(1e9*Math.random()>>>0);function AD(t){return"function"==typeof t?t:(t[DD]||(t[DD]=function(e){return t.handleEvent(e)}),t[DD])}function fn(){Jo.call(this),this.i=new _y(this),this.P=this,this.I=null}function Vn(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new Qn(e,t);else if(e instanceof Qn)e.target=e.target||t;else{var i=e;P3(e=new Qn(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=yy(o,r,!0,e)&&i}if(i=yy(o=e.g=t,r,!0,e)&&i,i=yy(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=yy(o=e.g=n[s],r,!1,e)&&i}function yy(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,c=o.ia||o.src;o.fa&&ED(t.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}Ln(fn,Jo),fn.prototype[If]=!0,fn.prototype.removeEventListener=function(t,e,n,r){j3(this,t,e,n,r)},fn.prototype.M=function(){if(fn.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)my(n[r]);delete t.g[e],t.h--}}this.I=null},fn.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},fn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var kD=de.JSON.stringify;function Ige(){var t=W3;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var RD,z3=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new xge,t=>t.reset());class xge{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Sge(t){de.setTimeout(()=>{throw t},0)}function MD(t,e){RD||function Dge(){var t=de.Promise.resolve(void 0);RD=function(){t.then(Age)}}(),ND||(RD(),ND=!0),W3.add(t,e)}var ND=!1,W3=new class Tge{constructor(){this.h=this.g=null}add(e,n){const r=z3.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}};function Age(){for(var t;t=Ige();){try{t.h.call(t.g)}catch(n){Sge(n)}var e=z3;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ND=!1}function vy(t,e){fn.call(this),this.h=t||1,this.g=e||de,this.j=Fn(this.kb,this),this.l=Date.now()}function PD(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function OD(t,e,n){if("function"==typeof t)n&&(t=Fn(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Fn(t.handleEvent,t)}return 2147483647<Number(e)?-1:de.setTimeout(t,e||0)}function G3(t){t.g=OD(()=>{t.g=null,t.i&&(t.i=!1,G3(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}Ln(vy,fn),(W=vy.prototype).da=!1,W.S=null,W.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Vn(this,"tick"),this.da&&(PD(this),this.start()))}},W.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},W.M=function(){vy.Z.M.call(this),PD(this),delete this.g};class kge extends Jo{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:G3(this)}M(){super.M(),this.g&&(de.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tf(t){Jo.call(this),this.h=t,this.g={}}Ln(Tf,Jo);var q3=[];function K3(t,e,n,r){Array.isArray(n)||(n&&(q3[0]=n.toString()),n=q3);for(var i=0;i<n.length;i++){var s=U3(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Q3(t){gD(t.g,function(e,n){this.g.hasOwnProperty(n)&&xD(e)},t),t.g={}}function wy(){this.g=!0}function xu(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Pge(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return kD(n)}catch{return e}}(t,n)+(r?" "+r:"")})}Tf.prototype.M=function(){Tf.Z.M.call(this),Q3(this)},Tf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},wy.prototype.Aa=function(){this.g=!1},wy.prototype.info=function(){};var _c={},Y3=null;function by(){return Y3=Y3||new fn}function X3(t){Qn.call(this,_c.Ma,t)}function xf(t){const e=by();Vn(e,new X3(e,t))}function J3(t,e){Qn.call(this,_c.STAT_EVENT,t),this.stat=e}function fr(t){const e=by();Vn(e,new J3(e,t))}function Z3(t,e){Qn.call(this,_c.Na,t),this.size=e}function Sf(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return de.setTimeout(function(){t()},e)}_c.Ma="serverreachability",Ln(X3,Qn),_c.STAT_EVENT="statevent",Ln(J3,Qn),_c.Na="timingevent",Ln(Z3,Qn);var Ey={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},e4={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function FD(){}function n4(){}FD.prototype.h=null;var UD,Df={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function LD(){Qn.call(this,"d")}function VD(){Qn.call(this,"c")}function Cy(){}function Af(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Tf(this),this.P=Oge,this.W=new vy(t=_D?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new r4}function r4(){this.i=null,this.g="",this.h=!1}Ln(LD,Qn),Ln(VD,Qn),Ln(Cy,FD),Cy.prototype.g=function(){return new XMLHttpRequest},Cy.prototype.i=function(){return{}},UD=new Cy;var Oge=45e3,BD={},Iy={};function $D(t,e,n){t.K=1,t.v=Ay(go(e)),t.s=n,t.U=!0,i4(t,null)}function i4(t,e){t.F=Date.now(),kf(t),t.A=go(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),f4(n.h,"t",r),t.C=0,n=t.l.H,t.h=new r4,t.g=F4(t.l,n?e:null,!t.s),0<t.O&&(t.L=new kge(Fn(t.Ia,t,t.g),t.O)),K3(t.V,t.g,"readystatechange",t.gb),e=t.H?R3(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),xf(1),function Mge(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.X,t.s)}function s4(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function o4(t,e,n){let i,r=!0;for(;!t.I&&t.C<n.length;){if(i=Fge(t,n),i==Iy){4==e&&(t.o=4,fr(14),r=!1),xu(t.j,t.m,null,"[Incomplete Response]");break}if(i==BD){t.o=4,fr(15),xu(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}xu(t.j,t.m,i,null),jD(t,i)}s4(t)&&i!=Iy&&i!=BD&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,fr(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),ZD(e),e.L=!0,fr(11))):(xu(t.j,t.m,n,"[Invalid Chunked Response]"),yc(t),Mf(t))}function Fge(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Iy:(n=Number(e.substring(n,r)),isNaN(n)?BD:(r+=1)+n>e.length?Iy:(e=e.substr(r,n),t.C=r+n,e))}function kf(t){t.Y=Date.now()+t.P,a4(t,t.P)}function a4(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Sf(Fn(t.eb,t),e)}function Ty(t){t.B&&(de.clearTimeout(t.B),t.B=null)}function Mf(t){0==t.l.G||t.I||R4(t.l,t)}function yc(t){Ty(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,PD(t.W),Q3(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function jD(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||WD(n.i,t)))if(n.I=t.N,!t.J&&WD(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break e;Oy(n),Ny(n)}JD(n),fr(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Sf(Fn(n.ab,n),6e3));if(1>=m4(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else bc(n,11)}else if((t.J||n.g==t)&&Oy(n),!py(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.U=l[0],l=l[1],2==n.G)if("c"==l[0]){n.J=l[1],n.la=l[2];const u=l[3];null!=u&&(n.ma=u,n.h.info("VER="+n.ma));const d=l[4];null!=d&&(n.za=d,n.h.info("SVER="+n.za));const h=l[5];null!=h&&"number"==typeof h&&0<h&&(n.K=r=1.5*h,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;!s.g&&(dr(p,"spdy")||dr(p,"quic")||dr(p,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(GD(s,s.h),s.h=null))}if(r.D){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.sa=g,mt(r.F,r.D,g))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=t;if((r=n).oa=O4(r,r.H?r.la:null,r.W),o.J){_4(r.i,o);var a=o,c=r.K;c&&a.setTimeout(c),a.B&&(Ty(a),kf(a)),r.g=o}else k4(r);0<n.l.length&&Py(n)}else"stop"!=l[0]&&"close"!=l[0]||bc(n,7);else 3==n.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?bc(n,7):YD(n):"noop"!=l[0]&&n.j&&n.j.wa(l),n.A=0)}xf(4)}catch{}}function HD(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(dD(t)||"string"==typeof t)S3(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(dD(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=function Lge(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(dD(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function Su(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Su)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function zD(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];vc(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)vc(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function vc(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(W=Af.prototype).setTimeout=function(t){this.P=t},W.gb=function(t){t=t.target;const e=this.L;e&&3==mo(t)?e.l():this.Ia(t)},W.Ia=function(t){try{if(t==this.g)e:{const u=mo(this.g);var e=this.g.Da();const d=this.g.ba();if(!(3>u)&&(3!=u||_D||this.g&&(this.h.h||this.g.ga()||T4(this.g)))){this.I||4!=u||7==e||xf(8==e||0>=d?3:2),Ty(this);var n=this.g.ba();this.N=n;t:if(s4(this)){var r=T4(this.g);t="";var i=r.length,s=4==mo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){yc(this),Mf(this);var o="";break t}this.h.i=new de.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function Rge(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.X,u,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!py(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.o=3,fr(12),yc(this),Mf(this);break e}xu(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,jD(this,n)}this.U?(o4(this,u,o),_D&&this.i&&3==u&&(K3(this.V,this.W,"tick",this.fb),this.W.start())):(xu(this.j,this.m,o,null),jD(this,o)),4==u&&yc(this),this.i&&!this.I&&(4==u?R4(this.l,this):(this.i=!1,kf(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,fr(12)):(this.o=0,fr(13)),yc(this),Mf(this)}}}catch{}},W.fb=function(){if(this.g){var t=mo(this.g),e=this.g.ga();this.C<e.length&&(Ty(this),o4(this,t,e),this.i&&4!=t&&kf(this))}},W.cancel=function(){this.I=!0,yc(this)},W.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function Nge(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(xf(3),fr(17)),yc(this),this.o=2,Mf(this)):a4(this,this.Y-t)},(W=Su.prototype).R=function(){zD(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},W.T=function(){return zD(this),this.g.concat()},W.get=function(t,e){return vc(this.h,t)?this.h[t]:e},W.set=function(t,e){vc(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},W.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};var c4=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function wc(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof wc){this.g=void 0!==e?e:t.g,xy(this,t.j),this.s=t.s,Sy(this,t.i),Dy(this,t.m),this.l=t.l,e=t.h;var n=new Pf;n.i=e.i,e.g&&(n.g=new Su(e.g),n.h=e.h),l4(this,n),this.o=t.o}else t&&(n=String(t).match(c4))?(this.g=!!e,xy(this,n[1]||"",!0),this.s=Rf(n[2]||""),Sy(this,n[3]||"",!0),Dy(this,n[4]),this.l=Rf(n[5]||"",!0),l4(this,n[6]||"",!0),this.o=Rf(n[7]||"")):(this.g=!!e,this.h=new Pf(null,this.g))}function go(t){return new wc(t)}function xy(t,e,n){t.j=n?Rf(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Sy(t,e,n){t.i=n?Rf(e,!0):e}function Dy(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function l4(t,e,n){e instanceof Pf?(t.h=e,function Gge(t,e){e&&!t.j&&(Zo(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(d4(this,r),f4(this,i,n))},t)),t.j=e}(t.h,t.g)):(n||(e=Nf(e,zge)),t.h=new Pf(e,t.g))}function mt(t,e,n){t.h.set(e,n)}function Ay(t){return mt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Rf(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Nf(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,$ge),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function $ge(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}wc.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Nf(e,u4,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Nf(e,u4,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(Nf(n,"/"==n.charAt(0)?Hge:jge,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Nf(n,Wge)),t.join("")};var u4=/[#\/\?@]/g,jge=/[#\?:]/g,Hge=/[#\?]/g,zge=/[#\?@]/g,Wge=/#/g;function Pf(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Zo(t){t.g||(t.g=new Su,t.h=0,t.i&&function Vge(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function d4(t,e){Zo(t),e=Du(t,e),vc(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,vc((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&zD(t)))}function h4(t,e){return Zo(t),e=Du(t,e),vc(t.g.h,e)}function f4(t,e,n){d4(t,e),0<n.length&&(t.i=null,t.g.set(Du(t,e),fD(n)),t.h+=n.length)}function Du(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function p4(t){this.l=t||Kge,t=de.PerformanceNavigationTiming?0<(t=de.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(de.g&&de.g.Ea&&de.g.Ea()&&de.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(W=Pf.prototype).add=function(t,e){Zo(this),this.i=null,t=Du(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},W.forEach=function(t,e){Zo(this),this.g.forEach(function(n,r){S3(n,function(i){t.call(e,i,r,this)},this)},this)},W.T=function(){Zo(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n},W.R=function(t){Zo(this);var e=[];if("string"==typeof t)h4(this,t)&&(e=D3(e,this.g.get(Du(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=D3(e,t[n])}return e},W.set=function(t,e){return Zo(this),this.i=null,h4(this,t=Du(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},W.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},W.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.i=t.join("&")};var Kge=10;function g4(t){return!!t.h||!!t.g&&t.g.size>=t.j}function m4(t){return t.h?1:t.g?t.g.size:0}function WD(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function GD(t,e){t.g?t.g.add(e):t.h=e}function _4(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function y4(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return fD(t.i)}function qD(){}function Qge(){this.g=new qD}function Yge(t,e,n){const r=n||"";try{HD(t,function(i,s){let o=i;Ef(i)&&(o=kD(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ky(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Of(t){this.l=t.$b||null,this.j=t.ib||!1}function My(t,e){fn.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=KD,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}p4.prototype.cancel=function(){if(this.i=y4(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},qD.prototype.stringify=function(t){return de.JSON.stringify(t,void 0)},qD.prototype.parse=function(t){return de.JSON.parse(t,void 0)},Ln(Of,FD),Of.prototype.g=function(){return new My(this.l,this.j)},Of.prototype.i=function(t){return function(){return t}}({}),Ln(My,fn);var KD=0;function v4(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Ff(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Lf(t)}function Lf(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(W=My.prototype).open=function(t,e){if(this.readyState!=KD)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Lf(this)},W.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||de).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},W.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ff(this)),this.readyState=KD},W.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Lf(this)),this.g&&(this.readyState=3,Lf(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof de.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;v4(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},W.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ff(this):Lf(this),3==this.readyState&&v4(this)}},W.Ua=function(t){this.g&&(this.response=this.responseText=t,Ff(this))},W.Ta=function(t){this.g&&(this.response=t,Ff(this))},W.ha=function(){this.g&&Ff(this)},W.setRequestHeader=function(t,e){this.v.append(t,e)},W.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},W.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(My.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Jge=de.JSON.parse;function qt(t){fn.call(this),this.headers=new Su,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=w4,this.K=this.L=!1}Ln(qt,fn);var w4="",Zge=/^https?$/i,eme=["POST","PUT"];function nme(t){return"content-type"==t.toLowerCase()}function b4(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,E4(t),Ry(t)}function E4(t){t.D||(t.D=!0,Vn(t,"complete"),Vn(t,"error"))}function C4(t){if(t.h&&typeof uD<"u"&&(!t.C[1]||4!=mo(t)||2!=t.ba()))if(t.v&&4==mo(t))OD(t.Fa,0,t);else if(Vn(t,"readystatechange"),4==mo(t)){t.h=!1;try{const a=t.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===a){var i=String(t.H).match(c4)[1]||null;if(!i&&de.self&&de.self.location){var s=de.self.location.protocol;i=s.substr(0,s.length-1)}r=!Zge.test(i?i.toLowerCase():"")}n=r}if(n)Vn(t,"complete"),Vn(t,"success");else{t.m=6;try{var o=2<mo(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.ba()+"]",E4(t)}}finally{Ry(t)}}}function Ry(t,e){if(t.g){I4(t);const n=t.g,r=t.C[0]?hy:null;t.g=null,t.C=null,e||Vn(t,"ready");try{n.onreadystatechange=r}catch{}}}function I4(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(de.clearTimeout(t.A),t.A=null)}function mo(t){return t.g?t.g.readyState:0}function T4(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case w4:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function QD(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function rme(t){let e="";return gD(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):mt(t,e,n))}function Vf(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function x4(t){this.za=0,this.l=[],this.h=new wy,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Vf("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Vf("baseRetryDelayMs",5e3,t),this.$a=Vf("retryDelaySeedMs",1e4,t),this.Ya=Vf("forwardChannelMaxRetries",2,t),this.ra=Vf("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new p4(t&&t.concurrentRequestLimit),this.Ca=new Qge,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function YD(t){if(S4(t),3==t.G){var e=t.V++,n=go(t.F);mt(n,"SID",t.J),mt(n,"RID",e),mt(n,"TYPE","terminate"),Uf(t,n),(e=new Af(t,t.h,e,void 0)).K=2,e.v=Ay(go(n)),n=!1,de.navigator&&de.navigator.sendBeacon&&(n=de.navigator.sendBeacon(e.v.toString(),"")),!n&&de.Image&&((new Image).src=e.v,n=!0),n||(e.g=F4(e.l,null),e.g.ea(e.v)),e.F=Date.now(),kf(e)}P4(t)}function Ny(t){t.g&&(ZD(t),t.g.cancel(),t.g=null)}function S4(t){Ny(t),t.u&&(de.clearTimeout(t.u),t.u=null),Oy(t),t.i.cancel(),t.m&&("number"==typeof t.m&&de.clearTimeout(t.m),t.m=null)}function XD(t,e){t.l.push(new class{constructor(t,e){this.h=t,this.g=e}}(t.Za++,e)),3==t.G&&Py(t)}function Py(t){g4(t.i)||t.m||(t.m=!0,MD(t.Ha,t),t.C=0)}function D4(t,e){var n;n=e?e.m:t.V++;const r=go(t.F);mt(r,"SID",t.J),mt(r,"RID",n),mt(r,"AID",t.U),Uf(t,r),t.o&&t.s&&QD(r,t.o,t.s),n=new Af(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=A4(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),GD(t.i,n),$D(n,r,e)}function Uf(t,e){t.j&&HD({},function(n,r){mt(e,r,n)})}function A4(t,e,n){n=Math.min(t.l.length,n);var r=t.j?Fn(t.j.Oa,t.j,t):null;e:{var i=t.l;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let l=i[c].h;const u=i[c].g;if(l-=s,0>l)s=Math.max(0,i[c].h-100),a=!1;else try{Yge(u,o,"req"+l+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.l.splice(0,n),e.D=t,r}function k4(t){t.g||t.u||(t.Y=1,MD(t.Ga,t),t.A=0)}function JD(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=Sf(Fn(t.Ga,t),N4(t,t.A)),t.A++,0))}function ZD(t){null!=t.B&&(de.clearTimeout(t.B),t.B=null)}function M4(t){t.g=new Af(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=go(t.oa);mt(e,"RID","rpc"),mt(e,"SID",t.J),mt(e,"CI",t.N?"0":"1"),mt(e,"AID",t.U),Uf(t,e),mt(e,"TYPE","xmlhttp"),t.o&&t.s&&QD(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Ay(go(e)),n.s=null,n.U=!0,i4(n,t)}function Oy(t){null!=t.v&&(de.clearTimeout(t.v),t.v=null)}function R4(t,e){var n=null;if(t.g==e){Oy(t),ZD(t),t.g=null;var r=2}else{if(!WD(t.i,e))return;n=e.D,_4(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Vn(r=by(),new Z3(r,n,e,i)),Py(t)}else k4(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function ime(t,e){return!(m4(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Sf(Fn(t.Ha,t,e),N4(t,t.C)),t.C++,0)))}(t,e)||2==r&&JD(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:bc(t,5);break;case 4:bc(t,10);break;case 3:bc(t,6);break;default:bc(t,2)}}function N4(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function bc(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=Fn(t.jb,t);n||(n=new wc("//www.google.com/images/cleardot.gif"),de.location&&"http"==de.location.protocol||xy(n,"https"),Ay(n)),function Xge(t,e){const n=new wy;if(de.Image){const r=new Image;r.onload=fy(ky,n,r,"TestLoadImage: loaded",!0,e),r.onerror=fy(ky,n,r,"TestLoadImage: error",!1,e),r.onabort=fy(ky,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=fy(ky,n,r,"TestLoadImage: timeout",!1,e),de.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else fr(2);t.G=0,t.j&&t.j.va(e),P4(t),S4(t)}function P4(t){t.G=0,t.I=-1,t.j&&((0!=y4(t.i).length||0!=t.l.length)&&(t.i.i.length=0,fD(t.l),t.l.length=0),t.j.ua())}function O4(t,e,n){let r=function Uge(t){return t instanceof wc?go(t):new wc(t,void 0)}(n);if(""!=r.i)e&&Sy(r,e+"."+r.i),Dy(r,r.m);else{const i=de.location;r=function Bge(t,e,n,r){var i=new wc(null,void 0);return t&&xy(i,t),e&&Sy(i,e),n&&Dy(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&gD(t.aa,function(i,s){mt(r,s,i)}),n=t.sa,(e=t.D)&&n&&mt(r,e,n),mt(r,"VER",t.ma),Uf(t,r),r}function F4(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new qt(n&&t.Ba&&!t.qa?new Of({ib:!0}):t.qa)).L=t.H,e}function L4(){}function Fy(){if(Tu&&!(10<=Number(_ge)))throw Error("Environmental error: no available transport.")}function Jr(t,e){fn.call(this),this.g=new x4(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!py(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!py(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Au(this)}function V4(t){LD.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function U4(){VD.call(this),this.status=1}function Au(t){this.g=t}(W=qt.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():UD.g(),this.C=function t4(t){return t.h||(t.h=t.i())}(this.u?this.u:UD),this.g.onreadystatechange=Fn(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){return void b4(this,s)}t=n||"";const i=new Su(this.headers);r&&HD(r,function(s,o){i.set(o,s)}),r=function dge(t){e:{var e=nme;const n=t.length,r="string"==typeof t?t.split(""):t;for(let i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break e}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=de.FormData&&t instanceof de.FormData,!(0<=x3(eme,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,o){this.g.setRequestHeader(o,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{I4(this),0<this.B&&((this.K=function tme(t){return Tu&&function mge(){return function hge(t){var e=gge;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}(function(){let t=0;const e=A3(String(gy)).split("."),n=A3("9").split("."),r=Math.max(e.length,n.length);for(let o=0;0==t&&o<r;o++){var i=e[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;t=pD(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||pD(0==i[2].length,0==s[2].length)||pD(i[2],s[2]),i=i[3],s=s[3]}while(0==t)}return 0<=t})}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Fn(this.pa,this)):this.A=OD(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){b4(this,s)}},W.pa=function(){typeof uD<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Vn(this,"timeout"),this.abort(8))},W.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Vn(this,"complete"),Vn(this,"abort"),Ry(this))},W.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ry(this,!0)),qt.Z.M.call(this)},W.Fa=function(){this.s||(this.F||this.v||this.l?C4(this):this.cb())},W.cb=function(){C4(this)},W.ba=function(){try{return 2<mo(this)?this.g.status:-1}catch{return-1}},W.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},W.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Jge(e)}},W.Da=function(){return this.m},W.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(W=x4.prototype).ma=8,W.G=1,W.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch{}},W.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const i=new Af(this,this.h,t,void 0);let s=this.s;if(this.P&&(s?(s=R3(s),P3(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var e=0,n=0;n<this.l.length;n++){var r=this.l[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.l.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=A4(this,i,e),mt(n=go(this.F),"RID",t),mt(n,"CVER",22),this.D&&mt(n,"X-HTTP-Session-Id",this.D),Uf(this,n),this.o&&s&&QD(n,this.o,s),GD(this.i,i),this.Ra&&mt(n,"TYPE","init"),this.ja?(mt(n,"$req",e),mt(n,"SID","null"),i.$=!0,$D(i,n,null)):$D(i,n,e),this.G=2}}else 3==this.G&&(t?D4(this,t):0==this.l.length||g4(this.i)||D4(this))},W.Ga=function(){if(this.u=null,M4(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Sf(Fn(this.bb,this),t)}},W.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,fr(10),Ny(this),M4(this))},W.ab=function(){null!=this.v&&(this.v=null,Ny(this),JD(this),fr(19))},W.jb=function(t){t?(this.h.info("Successfully pinged google.com"),fr(2)):(this.h.info("Failed to ping google.com"),fr(1))},(W=L4.prototype).xa=function(){},W.wa=function(){},W.va=function(){},W.ua=function(){},W.Oa=function(){},Fy.prototype.g=function(t,e){return new Jr(t,e)},Ln(Jr,fn),Jr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),MD(Fn(t.hb,t,e))),fr(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=O4(t,null,t.W),Py(t)},Jr.prototype.close=function(){YD(this.g)},Jr.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,XD(this.g,e)}else this.v?((e={}).__data__=kD(t),XD(this.g,e)):XD(this.g,t)},Jr.prototype.M=function(){this.g.j=null,delete this.j,YD(this.g),delete this.g,Jr.Z.M.call(this)},Ln(V4,LD),Ln(U4,VD),Ln(Au,L4),Au.prototype.xa=function(){Vn(this.g,"a")},Au.prototype.wa=function(t){Vn(this.g,new V4(t))},Au.prototype.va=function(t){Vn(this.g,new U4(t))},Au.prototype.ua=function(){Vn(this.g,"b")},Fy.prototype.createWebChannel=Fy.prototype.g,Jr.prototype.send=Jr.prototype.u,Jr.prototype.open=Jr.prototype.m,Jr.prototype.close=Jr.prototype.close,Ey.NO_ERROR=0,Ey.TIMEOUT=8,Ey.HTTP_ERROR=6,e4.COMPLETE="complete",n4.EventType=Df,Df.OPEN="a",Df.CLOSE="b",Df.ERROR="c",Df.MESSAGE="d",fn.prototype.listen=fn.prototype.N,qt.prototype.listenOnce=qt.prototype.O,qt.prototype.getLastError=qt.prototype.La,qt.prototype.getLastErrorCode=qt.prototype.Da,qt.prototype.getStatus=qt.prototype.ba,qt.prototype.getResponseJson=qt.prototype.Qa,qt.prototype.getResponseText=qt.prototype.ga,qt.prototype.send=qt.prototype.ea;var sme=po.createWebChannelTransport=function(){return new Fy},ome=po.getStatEventTarget=function(){return by()},e1=po.ErrorCode=Ey,ame=po.EventType=e4,cme=po.Event=_c,B4=po.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},lme=po.FetchXmlHttpFactory=Of,Ly=po.WebChannel=n4,ume=po.XhrIo=qt;const $4="@firebase/firestore";class pn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pn.UNAUTHENTICATED=new pn(null),pn.GOOGLE_CREDENTIALS=new pn("google-credentials-uid"),pn.FIRST_PARTY=new pn("first-party-uid"),pn.MOCK_USER=new pn("mock-user");let ku="9.9.0";const ea=new oc("@firebase/firestore");function t1(){return ea.logLevel}function D(t,...e){if(ea.logLevel<=Le.DEBUG){const n=e.map(n1);ea.debug(`Firestore (${ku}): ${t}`,...n)}}function Kt(t,...e){if(ea.logLevel<=Le.ERROR){const n=e.map(n1);ea.error(`Firestore (${ku}): ${t}`,...n)}}function Vy(t,...e){if(ea.logLevel<=Le.WARN){const n=e.map(n1);ea.warn(`Firestore (${ku}): ${t}`,...n)}}function n1(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function K(t="Unexpected state"){const e=`FIRESTORE (${ku}) INTERNAL ASSERTION FAILED: `+t;throw Kt(e),new Error(e)}function se(t,e){t||K()}function V(t,e){return t}const b={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class S extends Oi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class gn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class j4{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dme{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(pn.UNAUTHENTICATED))}shutdown(){}}class fme{constructor(e){this.t=e,this.currentUser=pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let o=new gn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new gn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=o;e.enqueueRetryable(_(function*(){yield l.promise,yield s(r.currentUser)}))},c=l=>{D("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(D("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new gn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(D("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(se("string"==typeof r.accessToken),new j4(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return se(null===e||"string"==typeof e),new pn(e)}}class pme{constructor(e,n,r){this.type="FirstParty",this.user=pn.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class gme{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new pme(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(pn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class H4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mme{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,n){const r=s=>{null!=s.error&&D("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.p;return this.p=s.token,D("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{D("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?i(s):D("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(se("string"==typeof n.token),this.p=n.token,new H4(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function _me(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class z4{static I(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=_me(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function ve(t,e){return t<e?-1:t>e?1:0}function Mu(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}class _t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new S(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new S(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new S(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new S(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new _t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new te(e)}static min(){return new te(new _t(0,0))}static max(){return new te(new _t(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Bf{constructor(e,n,r){void 0===n?n=0:n>e.length&&K(),void 0===r?r=e.length-n:r>e.length-n&&K(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===Bf.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Bf?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ne extends Bf{construct(e,n,r){return new Ne(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new S(b.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ne(n)}static emptyPath(){return new Ne([])}}const yme=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends Bf{construct(e,n,r){return new Qt(e,n,r)}static isValidIdentifier(e){return yme.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Qt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new S(b.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new S(b.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new S(b.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new S(b.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(n)}static emptyPath(){return new Qt([])}}class P{constructor(e){this.path=e}static fromPath(e){return new P(Ne.fromString(e))}static fromName(e){return new P(Ne.fromString(e).popFirst(5))}static empty(){return new P(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ne.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new P(new Ne(e.slice()))}}function q4(t){return new Zr(t.readTime,t.key,-1)}class Zr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Zr(te.min(),P.empty(),-1)}static max(){return new Zr(te.max(),P.empty(),-1)}}function i1(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=P.comparator(t.documentKey,e.documentKey),0!==n?n:ve(t.largestBatchId,e.largestBatchId))}const K4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vme{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ta(t){return s1.apply(this,arguments)}function s1(){return s1=_(function*(t){if(t.code!==b.FAILED_PRECONDITION||t.message!==K4)throw t;D("LocalStore","Unexpectedly lost primary lease")}),s1.apply(this,arguments)}class w{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new w((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof w?n:w.resolve(n)}catch(n){return w.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):w.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):w.reject(n)}static resolve(e){return new w((n,r)=>{n(e)})}static reject(e){return new w((n,r)=>{r(e)})}static waitFor(e){return new w((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=w.resolve(!1);for(const r of e)n=n.next(i=>i?w.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new w((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const l=c;n(e[l]).next(u=>{o[l]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new w((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}function na(t){return"IndexedDbTransactionError"===t.name}class kr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.it(r),this.rt=r=>n.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function Y4(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ic(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function X4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}kr.ot=-1;class kt{constructor(e,n){this.comparator=e,this.root=n||Un.EMPTY}insert(e,n){return new kt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Un.BLACK,null,null))}remove(e){return new kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Un.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jy(this.root,e,this.comparator,!1)}getReverseIterator(){return new jy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jy(this.root,e,this.comparator,!0)}}class jy{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Un{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Un.RED,this.left=i??Un.EMPTY,this.right=s??Un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Un(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return Un.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();const e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}}Un.EMPTY=null,Un.RED=!0,Un.BLACK=!1,Un.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(t,e,n,r,i){return this}insert(t,e,n){return new Un(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class et{constructor(e){this.comparator=e,this.data=new kt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new J4(this.data.getIterator())}getIteratorFrom(e){return new J4(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new et(this.comparator);return n.data=e,n}}class J4{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ei{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new ei([])}unionWith(e){let n=new et(Qt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ei(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Mu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new rn(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new rn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const Ime=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ra(t){if(se(!!t),"string"==typeof t){let e=0;const n=Ime.exec(t);if(se(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Mt(t.seconds),nanos:Mt(t.nanos)}}function Mt(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Tc(t){return"string"==typeof t?rn.fromBase64String(t):rn.fromUint8Array(t)}function a1(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Z4(t){const e=t.mapValue.fields.__previous_value__;return a1(e)?Z4(e):e}function Hf(t){const e=ra(t.mapValue.fields.__local_write_time__.timestampValue);return new _t(e.seconds,e.nanos)}class Tme{constructor(e,n,r,i,s,o,a,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=c}}class ia{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ia("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ia&&e.projectId===this.projectId&&e.database===this.database}}function zf(t){return null==t}function Wf(t){return 0===t&&1/t==-1/0}const sa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function xc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?a1(t)?4:iH(t)?9007199254740991:10:K()}function gs(t,e){if(t===e)return!0;const n=xc(t);if(n!==xc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Hf(t).isEqual(Hf(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=ra(r.timestampValue),o=ra(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return i=e,Tc(t.bytesValue).isEqual(Tc(i.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Mt(r.geoPointValue.latitude)===Mt(i.geoPointValue.latitude)&&Mt(r.geoPointValue.longitude)===Mt(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Mt(r.integerValue)===Mt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Mt(r.doubleValue),o=Mt(i.doubleValue);return s===o?Wf(s)===Wf(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return Mu(t.arrayValue.values||[],e.arrayValue.values||[],gs);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(Y4(s)!==Y4(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(void 0===o[a]||!gs(s[a],o[a])))return!1;return!0}(t,e);default:return K()}var i}function Gf(t,e){return void 0!==(t.values||[]).find(n=>gs(n,e))}function oa(t,e){if(t===e)return 0;const n=xc(t),r=xc(e);if(n!==r)return ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ve(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=Mt(i.integerValue||i.doubleValue),a=Mt(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return tH(t.timestampValue,e.timestampValue);case 4:return tH(Hf(t),Hf(e));case 5:return ve(t.stringValue,e.stringValue);case 6:return function(i,s){const o=Tc(i),a=Tc(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let c=0;c<o.length&&c<a.length;c++){const l=ve(o[c],a[c]);if(0!==l)return l}return ve(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=ve(Mt(i.latitude),Mt(s.latitude));return 0!==o?o:ve(Mt(i.longitude),Mt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let c=0;c<o.length&&c<a.length;++c){const l=oa(o[c],a[c]);if(l)return l}return ve(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===sa.mapValue&&s===sa.mapValue)return 0;if(i===sa.mapValue)return 1;if(s===sa.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),c=s.fields||{},l=Object.keys(c);a.sort(),l.sort();for(let u=0;u<a.length&&u<l.length;++u){const d=ve(a[u],l[u]);if(0!==d)return d;const h=oa(o[a[u]],c[l[u]]);if(0!==h)return h}return ve(a.length,l.length)}(t.mapValue,e.mapValue);default:throw K()}}function tH(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ve(t,e);const n=ra(t),r=ra(e),i=ve(n.seconds,r.seconds);return 0!==i?i:ve(n.nanos,r.nanos)}function Nu(t){return c1(t)}function c1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=ra(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Tc(t.bytesValue).toBase64():"referenceValue"in t?P.fromName(t.referenceValue).toString():"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=c1(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${c1(r.fields[a])}`;return s+"}"}(t.mapValue):K();var e}function l1(t){return!!t&&"integerValue"in t}function qf(t){return!!t&&"arrayValue"in t}function nH(t){return!!t&&"nullValue"in t}function rH(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zy(t){return!!t&&"mapValue"in t}function Kf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ic(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Kf(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Kf(t.arrayValue.values[n]);return e}return Object.assign({},t)}function iH(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class Bn{constructor(e){this.value=e}static empty(){return new Bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!zy(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kf(n)}setAll(e){let n=Qt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Kf(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());zy(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return gs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];zy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ic(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Bn(Kf(this.value))}}function aH(t){const e=[];return Ic(t.fields,(n,r)=>{const i=new Qt([n]);if(zy(r)){const s=aH(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new ei(e)}class ct{constructor(e,n,r,i,s,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new ct(e,0,te.min(),te.min(),Bn.empty(),0)}static newFoundDocument(e,n,r){return new ct(e,1,n,te.min(),r,0)}static newNoDocument(e,n){return new ct(e,2,n,te.min(),Bn.empty(),0)}static newUnknownDocument(e,n){return new ct(e,3,n,te.min(),Bn.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ct(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Dme{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ut=null}}function cH(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Dme(t,e,n,r,i,s,o)}function Dc(t){const e=V(t);if(null===e.ut){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Nu(i.value);var i}).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),zf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Nu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Nu(r)).join(",")),e.ut=n}return e.ut}function Qf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<t.orderBy.length;i++)if(!Lme(t.orderBy[i],e.orderBy[i]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if((n=t.filters[i]).op!==(r=e.filters[i]).op||!n.field.isEqual(r.field)||!gs(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fH(t.startAt,e.startAt)&&fH(t.endAt,e.endAt)}function Wy(t){return P.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class $n extends class{}{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.ct(e,n,r):new kme(e,n,r):"array-contains"===n?new Nme(e,r):"in"===n?new Pme(e,r):"not-in"===n?new Ome(e,r):"array-contains-any"===n?new Fme(e,r):new $n(e,n,r)}static ct(e,n,r){return"in"===n?new Mme(e,r):new Rme(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.at(oa(n,this.value)):null!==n&&xc(this.value)===xc(n)&&this.at(oa(n,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return K()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class kme extends $n{constructor(e,n,r){super(e,n,r),this.key=P.fromName(r.referenceValue)}matches(e){const n=P.comparator(e.key,this.key);return this.at(n)}}class Mme extends $n{constructor(e,n){super(e,"in",n),this.keys=dH(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Rme extends $n{constructor(e,n){super(e,"not-in",n),this.keys=dH(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function dH(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>P.fromName(r.referenceValue))}class Nme extends $n{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return qf(n)&&Gf(n.arrayValue,this.value)}}class Pme extends $n{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Gf(this.value.arrayValue,n)}}class Ome extends $n{constructor(e,n){super(e,"not-in",n)}matches(e){if(Gf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Gf(this.value.arrayValue,n)}}class Fme extends $n{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!qf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Gf(this.value.arrayValue,r))}}class aa{constructor(e,n){this.position=e,this.inclusive=n}}class Pu{constructor(e,n="asc"){this.field=e,this.dir=n}}function Lme(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function hH(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?P.comparator(P.fromName(o.referenceValue),n.key):oa(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function fH(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!gs(t.position[n],e.position[n]))return!1;return!0}class _o{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.lt=null,this.ft=null}}function Ou(t){return new _o(t)}function u1(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function d1(t){for(const e of t.filters)if(e.ht())return e.field;return null}function Fu(t){const e=V(t);if(null===e.lt){e.lt=[];const n=d1(e),r=u1(e);if(null!==n&&null===r)n.isKeyField()||e.lt.push(new Pu(n)),e.lt.push(new Pu(Qt.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.lt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new Pu(Qt.keyField(),s))}}}return e.lt}function wi(t){const e=V(t);if(!e.ft)if("F"===e.limitType)e.ft=cH(e.path,e.collectionGroup,Fu(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of Fu(e))n.push(new Pu(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new aa(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new aa(e.startAt.position,e.startAt.inclusive):null;e.ft=cH(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e.ft}function Yf(t,e){return Qf(wi(t),wi(e))&&t.limitType===e.limitType}function mH(t){return`${Dc(wi(t))}|lt:${t.limitType}`}function f1(t){return`Query(target=${function Ame(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(r=n).field.canonicalString()} ${r.op} ${Nu(r.value)}`;var r}).join(", ")}]`),zf(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>{return`${(r=n).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>Nu(n)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>Nu(n)).join(",")),`Target(${e})`}(wi(t))}; limitType=${t.limitType})`}function p1(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return null!==n.collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):P.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of n.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&(r=e,!((n=t).startAt&&!function(i,s,o){const a=hH(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,Fu(n),r)||n.endAt&&!function(i,s,o){const a=hH(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,Fu(n),r)));var n,r}function yH(t){return(e,n)=>{let r=!1;for(const i of Fu(t)){const s=Ume(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function Ume(t,e,n){const r=t.field.isKeyField()?P.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),c=o.data.field(i);return null!==a&&null!==c?oa(a,c):K()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return K()}}function vH(t,e){if(t.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wf(e)?"-0":e}}function wH(t){return{integerValue:""+t}}function bH(t,e){return function eH(t){return"number"==typeof t&&Number.isInteger(t)&&!Wf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?wH(e):vH(t,e)}class qy{constructor(){this._=void 0}}function Bme(t,e,n){return t instanceof Lu?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof Ac?CH(t,e):t instanceof kc?IH(t,e):function(r,i){const s=EH(r,i),o=TH(s)+TH(r._t);return l1(s)&&l1(r._t)?wH(o):vH(r.wt,o)}(t,e)}function $me(t,e,n){return t instanceof Ac?CH(t,e):t instanceof kc?IH(t,e):n}function EH(t,e){return t instanceof Vu?l1(n=e)||(r=n)&&"doubleValue"in r?e:{integerValue:0}:null;var r,n}class Lu extends qy{}class Ac extends qy{constructor(e){super(),this.elements=e}}function CH(t,e){const n=xH(e);for(const r of t.elements)n.some(i=>gs(i,r))||n.push(r);return{arrayValue:{values:n}}}class kc extends qy{constructor(e){super(),this.elements=e}}function IH(t,e){let n=xH(e);for(const r of t.elements)n=n.filter(i=>!gs(i,r));return{arrayValue:{values:n}}}class Vu extends qy{constructor(e,n){super(),this.wt=e,this._t=n}}function TH(t){return Mt(t.integerValue||t.doubleValue)}function xH(t){return qf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Hme{constructor(e,n){this.version=e,this.transformResults=n}}class It{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new It}static exists(e){return new It(void 0,e)}static updateTime(e){return new It(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ky(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Qy{}function SH(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Bu(t.key,It.none()):new Uu(t.key,t.data,It.none());{const n=t.data,r=Bn.empty();let i=new et(Qt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new yo(t.key,r,new ei(i.toArray()),It.none())}}function zme(t,e,n){t instanceof Uu?function(r,i,s){const o=r.value.clone(),a=kH(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof yo?function(r,i,s){if(!Ky(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=kH(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(AH(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Jf(t,e,n,r){return t instanceof Uu?function(i,s,o,a){if(!Ky(i.precondition,s))return o;const c=i.value.clone(),l=MH(i.fieldTransforms,a,s);return c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof yo?function(i,s,o,a){if(!Ky(i.precondition,s))return o;const c=MH(i.fieldTransforms,a,s),l=s.data;return l.setAll(AH(i)),l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null===o?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(u=>u.field))}(t,e,n,r):(o=n,Ky(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function Wme(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=EH(r.transform,i||null);null!=s&&(null===n&&(n=Bn.empty()),n.set(r.field,s))}return n||null}function DH(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(n=t.fieldTransforms)&&void 0===r||n&&r&&Mu(n,r,(i,s)=>function jme(t,e){return t.field.isEqual(e.field)&&(r=e.transform,(n=t.transform)instanceof Ac&&r instanceof Ac||n instanceof kc&&r instanceof kc?Mu(n.elements,r.elements,gs):n instanceof Vu&&r instanceof Vu?gs(n._t,r._t):n instanceof Lu&&r instanceof Lu);var n,r}(i,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}class Uu extends Qy{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class yo extends Qy{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function AH(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function kH(t,e,n){const r=new Map;se(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,$me(o,a,n[i]))}return r}function MH(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Bme(s,o,e))}return r}class Bu extends Qy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class g1 extends Qy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Gme{constructor(e){this.count=e}}var Yt,Pe;function NH(t){if(void 0===t)return Kt("GRPC error has no .code"),b.UNKNOWN;switch(t){case Yt.OK:return b.OK;case Yt.CANCELLED:return b.CANCELLED;case Yt.UNKNOWN:return b.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return b.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return b.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return b.INTERNAL;case Yt.UNAVAILABLE:return b.UNAVAILABLE;case Yt.UNAUTHENTICATED:return b.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return b.INVALID_ARGUMENT;case Yt.NOT_FOUND:return b.NOT_FOUND;case Yt.ALREADY_EXISTS:return b.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return b.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return b.FAILED_PRECONDITION;case Yt.ABORTED:return b.ABORTED;case Yt.OUT_OF_RANGE:return b.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return b.UNIMPLEMENTED;case Yt.DATA_LOSS:return b.DATA_LOSS;default:return K()}}(Pe=Yt||(Yt={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";class ca{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ic(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return X4(this.inner)}size(){return this.innerSize}}const qme=new kt(P.comparator);function Mr(){return qme}const PH=new kt(P.comparator);function Zf(...t){let e=PH;for(const n of t)e=e.insert(n.key,n);return e}function OH(t){let e=PH;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ms(){return ep()}function FH(){return ep()}function ep(){return new ca(t=>t.toString(),(t,e)=>t.isEqual(e))}const Kme=new kt(P.comparator),Qme=new et(P.comparator);function Ee(...t){let e=Qme;for(const n of t)e=e.add(n);return e}const Yme=new et(ve);function Yy(){return Yme}class tp{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n){const r=new Map;return r.set(e,np.createSynthesizedTargetChangeForCurrentChange(e,n)),new tp(te.min(),r,Yy(),Mr(),Ee())}}class np{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n){return new np(rn.EMPTY_BYTE_STRING,n,Ee(),Ee(),Ee())}}class Xy{constructor(e,n,r,i){this.gt=e,this.removedTargetIds=n,this.key=r,this.yt=i}}class LH{constructor(e,n){this.targetId=e,this.It=n}}class VH{constructor(e,n,r=rn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class UH{constructor(){this.Tt=0,this.Et=$H(),this.At=rn.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Ee(),n=Ee(),r=Ee();return this.Et.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:K()}}),new np(this.At,this.Rt,e,n,r)}Dt(){this.bt=!1,this.Et=$H()}Ct(e,n){this.bt=!0,this.Et=this.Et.insert(e,n)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class Xme{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=Mr(),this.Bt=BH(),this.Lt=new et(ve)}Ut(e){for(const n of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(n,e.yt):this.Kt(n,e.key,e.yt);for(const n of e.removedTargetIds)this.Kt(n,e.key,e.yt)}Gt(e){this.forEachTarget(e,n=>{const r=this.Qt(n);switch(e.state){case 0:this.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(n);break;case 3:this.jt(n)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:this.jt(n)&&(this.Wt(n),r.Vt(e.resumeToken));break;default:K()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ft.forEach((r,i)=>{this.jt(i)&&n(i)})}zt(e){const n=e.targetId,r=e.It.count,i=this.Ht(n);if(i){const s=i.target;if(Wy(s))if(0===r){const o=new P(s.path);this.Kt(n,o,ct.newNoDocument(o,te.min()))}else se(1===r);else this.Jt(n)!==r&&(this.Wt(n),this.Lt=this.Lt.add(n))}}Yt(e){const n=new Map;this.Ft.forEach((s,o)=>{const a=this.Ht(o);if(a){if(s.current&&Wy(a.target)){const c=new P(a.target.path);null!==this.$t.get(c)||this.Xt(o,c)||this.Kt(o,c,ct.newNoDocument(c,e))}s.vt&&(n.set(o,s.St()),s.Dt())}});let r=Ee();this.Bt.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const l=this.Ht(c);return!l||2===l.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.$t.forEach((s,o)=>o.setReadTime(e));const i=new tp(e,n,this.Lt,this.$t,r);return this.$t=Mr(),this.Bt=BH(),this.Lt=new et(ve),i}qt(e,n){if(!this.jt(e))return;const r=this.Xt(e,n.key)?2:0;this.Qt(e).Ct(n.key,r),this.$t=this.$t.insert(n.key,n),this.Bt=this.Bt.insert(n.key,this.Zt(n.key).add(e))}Kt(e,n,r){if(!this.jt(e))return;const i=this.Qt(e);this.Xt(e,n)?i.Ct(n,1):i.xt(n),this.Bt=this.Bt.insert(n,this.Zt(n).delete(e)),r&&(this.$t=this.$t.insert(n,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const n=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let n=this.Ft.get(e);return n||(n=new UH,this.Ft.set(e,n)),n}Zt(e){let n=this.Bt.get(e);return n||(n=new et(ve),this.Bt=this.Bt.insert(e,n)),n}jt(e){const n=null!==this.Ht(e);return n||D("WatchChangeAggregator","Detected inactive target",e),n}Ht(e){const n=this.Ft.get(e);return n&&n.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new UH),this.Mt.getRemoteKeysForTarget(e).forEach(n=>{this.Kt(e,n,null)})}Xt(e,n){return this.Mt.getRemoteKeysForTarget(e).has(n)}}function BH(){return new kt(P.comparator)}function $H(){return new kt(P.comparator)}const Jme={asc:"ASCENDING",desc:"DESCENDING"},Zme={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class e_e{constructor(e,n){this.databaseId=e,this.dt=n}}function rp(t,e){return t.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jH(t,e){return t.dt?e.toBase64():e.toUint8Array()}function t_e(t,e){return rp(t,e.toTimestamp())}function mn(t){return se(!!t),te.fromTimestamp(function(e){const n=ra(e);return new _t(n.seconds,n.nanos)}(t))}function m1(t,e){return(n=t,new Ne(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function HH(t){const e=Ne.fromString(t);return se(JH(e)),e}function ip(t,e){return m1(t.databaseId,e.path)}function _s(t,e){const n=HH(e);if(n.get(1)!==t.databaseId.projectId)throw new S(b.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new S(b.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new P(WH(n))}function _1(t,e){return m1(t.databaseId,e)}function sp(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function WH(t){return se(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function GH(t,e,n){return{name:ip(t,e),fields:n.value.mapValue.fields}}function KH(t,e){return{documents:[_1(t,e.path)]}}function QH(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=_1(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=_1(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(c){if(0===c.length)return;const l=c.map(u=>function(d){if("=="===d.op){if(rH(d.value))return{unaryFilter:{field:$u(d.field),op:"IS_NAN"}};if(nH(d.value))return{unaryFilter:{field:$u(d.field),op:"IS_NULL"}}}else if("!="===d.op){if(rH(d.value))return{unaryFilter:{field:$u(d.field),op:"IS_NOT_NAN"}};if(nH(d.value))return{unaryFilter:{field:$u(d.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$u(d.field),op:a_e(d.op),value:d.value}}}(u));return 1===l.length?l[0]:{compositeFilter:{op:"AND",filters:l}}}(e.filters);i&&(n.structuredQuery.where=i);const s=function(c){if(0!==c.length)return c.map(l=>{return{field:$u((u=l).field),direction:o_e(u.dir)};var u})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=(l=e.limit,t.dt||zf(l)?l:{value:l});var l,a,c;return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt={before:!(c=e.endAt).inclusive,values:c.position}),n}function YH(t){let e=function zH(t){const e=HH(t);return 4===e.length?Ne.emptyPath():WH(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){se(1===r);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=XH(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(u=>{return new Pu(ju((d=u).field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction));var d}));let a=null;n.limit&&(a=function(u){let d;return d="object"==typeof u?u.value:u,zf(d)?null:d}(n.limit));let c=null;var u;n.startAt&&(c=new aa((u=n.startAt).values||[],!!u.before));let l=null;return n.endAt&&(l=function(u){return new aa(u.values||[],!u.before)}(n.endAt)),function pH(t,e,n,r,i,s,o,a){return new _o(t,e,n,r,i,s,o,a)}(e,i,o,s,a,"F",c,l)}function XH(t){return t?void 0!==t.unaryFilter?[l_e(t)]:void 0!==t.fieldFilter?[c_e(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(e=>XH(e)).reduce((e,n)=>e.concat(n)):K():[]}function o_e(t){return Jme[t]}function a_e(t){return Zme[t]}function $u(t){return{fieldPath:t.canonicalString()}}function ju(t){return Qt.fromServerFormat(t.fieldPath)}function c_e(t){return $n.create(ju(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(t.fieldFilter.op),t.fieldFilter.value)}function l_e(t){switch(t.unaryFilter.op){case"IS_NAN":const e=ju(t.unaryFilter.field);return $n.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=ju(t.unaryFilter.field);return $n.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ju(t.unaryFilter.field);return $n.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ju(t.unaryFilter.field);return $n.create(i,"!=",{nullValue:"NULL_VALUE"});default:return K()}}function u_e(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function JH(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class w1{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&zme(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Jf(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Jf(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=FH();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const c=SH(o,a);null!==c&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ee())}isEqual(e){return this.batchId===e.batchId&&Mu(this.mutations,e.mutations,(n,r)=>DH(n,r))&&Mu(this.baseMutations,e.baseMutations,(n,r)=>DH(n,r))}}class b1{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){se(e.mutations.length===r.length);let i=Kme;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new b1(e,n,r,i)}}class E1{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class la{constructor(e,n,r,i,s=te.min(),o=te.min(),a=rn.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new la(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new la(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new la(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class sz{constructor(e){this.ne=e}}function C1(t){const e=YH({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?function gH(t,e,n){return new _o(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}(e,e.limit,"L"):e}class Pc{constructor(){}re(e,n){this.oe(e,n),n.ue()}oe(e,n){if("nullValue"in e)this.ce(n,5);else if("booleanValue"in e)this.ce(n,10),n.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(n,15),n.ae(Mt(e.integerValue));else if("doubleValue"in e){const r=Mt(e.doubleValue);isNaN(r)?this.ce(n,13):(this.ce(n,15),Wf(r)?n.ae(0):n.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(n,20),"string"==typeof r?n.he(r):(n.he(`${r.seconds||""}`),n.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,n),this.fe(n);else if("bytesValue"in e)this.ce(n,30),n.de(Tc(e.bytesValue)),this.fe(n);else if("referenceValue"in e)this._e(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(n,45),n.ae(r.latitude||0),n.ae(r.longitude||0)}else"mapValue"in e?iH(e)?this.ce(n,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,n),this.fe(n)):"arrayValue"in e?(this.me(e.arrayValue,n),this.fe(n)):K()}le(e,n){this.ce(n,25),this.ge(e,n)}ge(e,n){n.he(e)}we(e,n){const r=e.fields||{};this.ce(n,55);for(const i of Object.keys(r))this.le(i,n),this.oe(r[i],n)}me(e,n){const r=e.values||[];this.ce(n,50);for(const i of r)this.oe(i,n)}_e(e,n){this.ce(n,37),P.fromName(e).path.forEach(r=>{this.ce(n,60),this.ge(r,n)})}ce(e,n){e.ae(n)}fe(e){e.ae(2)}}Pc.ye=new Pc;class F_e{constructor(){this.ze=new T1}addToCollectionParentIndex(e,n){return this.ze.add(n),w.resolve()}getCollectionParents(e,n){return w.resolve(this.ze.getEntries(n))}addFieldIndex(e,n){return w.resolve()}deleteFieldIndex(e,n){return w.resolve()}getDocumentsMatchingTarget(e,n){return w.resolve(null)}getIndexType(e,n){return w.resolve(0)}getFieldIndexes(e,n){return w.resolve([])}getNextCollectionGroupToUpdate(e){return w.resolve(null)}getMinOffset(e,n){return w.resolve(Zr.min())}getMinOffsetFromCollectionGroup(e,n){return w.resolve(Zr.min())}updateCollectionGroup(e,n,r){return w.resolve()}updateIndexEntries(e,n){return w.resolve()}}class T1{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new et(Ne.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new et(Ne.comparator)).toArray()}}new Uint8Array(0);class Rr{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Rr(e,Rr.DEFAULT_COLLECTION_PERCENTILE,Rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Rr.DEFAULT_COLLECTION_PERCENTILE=10,Rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rr.DEFAULT=new Rr(41943040,Rr.DEFAULT_COLLECTION_PERCENTILE,Rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rr.DISABLED=new Rr(-1,0,0);class Lc{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Lc(0)}static Rn(){return new Lc(-1)}}class H_e{constructor(){this.changes=new ca(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ct.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?w.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class G_e{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class xz{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.getBaseDocument(e,n,r))).next(i=>(null!==r&&Jf(r.mutation,i,ei.empty(),_t.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ee()){const i=ms();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Zf();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ms();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ee()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Mr();const o=ep(),a=ep();return n.forEach((c,l)=>{const u=r.get(l.key);i.has(l.key)&&(void 0===u||u.mutation instanceof yo)?s=s.insert(l.key,l):void 0!==u&&(o.set(l.key,u.mutation.getFieldMask()),Jf(u.mutation,l,u.mutation.getFieldMask(),_t.now()))}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),n.forEach((l,u)=>{var d;return a.set(l,new G_e(u,null!==(d=o.get(l))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ep();let i=new kt((o,a)=>o-a),s=Ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const l=n.get(c);if(null===l)return;let u=r.get(c)||ei.empty();u=a.applyToLocalView(l,u),r.set(c,u);const d=(i.get(a.batchId)||Ee()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,u=c.value,d=FH();u.forEach(h=>{if(!s.has(h)){const f=SH(n.get(h),r.get(h));null!==f&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return w.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return P.isDocumentKey((i=n).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):function h1(t){return null!==t.collectionGroup}(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r);var i}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):w.resolve(ms());let a=-1,c=s;return o.next(l=>w.forEach(l,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?w.resolve():this.getBaseDocument(e,u,d).next(h=>{c=c.insert(u,h)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,Ee())).next(u=>({batchId:a,changes:OH(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new P(n)).next(r=>{let i=Zf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=Zf();return this.indexManager.getCollectionParents(e,i).next(o=>w.forEach(o,a=>{const c=(l=n,u=a.child(i),new _o(u,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt));var l,u;return this.getDocumentsMatchingCollectionQuery(e,c,r).next(l=>{l.forEach((u,d)=>{s=s.insert(u,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,n.path,r).next(s=>(i=s,this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId))).next(s=>{s.forEach((a,c)=>{const l=c.getKey();null===i.get(l)&&(i=i.insert(l,ct.newInvalidDocument(l)))});let o=Zf();return i.forEach((a,c)=>{const l=s.get(a);void 0!==l&&Jf(l.mutation,c,ei.empty(),_t.now()),p1(n,c)&&(o=o.insert(a,c))}),o})}getBaseDocument(e,n,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,n):w.resolve(ct.newInvalidDocument(n))}}class q_e{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,n){return w.resolve(this.Jn.get(n))}saveBundleMetadata(e,n){var r;return this.Jn.set(n.id,{id:(r=n).id,version:r.version,createTime:mn(r.createTime)}),w.resolve()}getNamedQuery(e,n){return w.resolve(this.Yn.get(n))}saveNamedQuery(e,n){return this.Yn.set(n.name,{name:(r=n).name,query:C1(r.bundledQuery),readTime:mn(r.readTime)}),w.resolve();var r}}class K_e{constructor(){this.overlays=new kt(P.comparator),this.Xn=new Map}getOverlay(e,n){return w.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ms();return w.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ie(e,n,s)}),w.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Xn.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Xn.delete(r)),w.resolve()}getOverlaysForCollection(e,n,r){const i=ms(),s=n.length+1,o=new P(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return w.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new kt((l,u)=>l-u);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let u=s.get(l.largestBatchId);null===u&&(u=ms(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}const a=ms(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return w.resolve(a)}ie(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Xn.get(i.largestBatchId).delete(r.key);this.Xn.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new E1(n,r));let s=this.Xn.get(n);void 0===s&&(s=Ee(),this.Xn.set(n,s)),this.Xn.set(n,s.add(r.key))}}class x1{constructor(){this.Zn=new et(yn.ts),this.es=new et(yn.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,n){const r=new yn(e,n);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.rs(new yn(e,n))}os(e,n){e.forEach(r=>this.removeReference(r,n))}us(e){const n=new P(new Ne([])),r=new yn(n,e),i=new yn(n,e+1),s=[];return this.es.forEachInRange([r,i],o=>{this.rs(o),s.push(o.key)}),s}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const n=new P(new Ne([])),r=new yn(n,e),i=new yn(n,e+1);let s=Ee();return this.es.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new yn(e,0),r=this.Zn.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class yn{constructor(e,n){this.key=e,this.ls=n}static ts(e,n){return P.comparator(e.key,n.key)||ve(e.ls,n.ls)}static ns(e,n){return ve(e.ls,n.ls)||P.comparator(e.key,n.key)}}class Q_e{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new et(yn.ts)}checkEmpty(e){return w.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.fs;this.fs++;const o=new w1(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.ds=this.ds.add(new yn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return w.resolve(o)}lookupMutationBatch(e,n){return w.resolve(this._s(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.ws(n+1),s=i<0?0:i;return w.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return w.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return w.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new yn(n,0),i=new yn(n,Number.POSITIVE_INFINITY),s=[];return this.ds.forEachInRange([r,i],o=>{const a=this._s(o.ls);s.push(a)}),w.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new et(ve);return n.forEach(i=>{const s=new yn(i,0),o=new yn(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([s,o],a=>{r=r.add(a.ls)})}),w.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;P.isDocumentKey(s)||(s=s.child(""));const o=new yn(new P(s),0);let a=new et(ve);return this.ds.forEachWhile(c=>{const l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.ls)),!0)},o),w.resolve(this.gs(a))}gs(e){const n=[];return e.forEach(r=>{const i=this._s(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){se(0===this.ys(n.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return w.forEach(n.mutations,i=>{const s=new yn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,n){const r=new yn(n,0),i=this.ds.firstAfterOrEqual(r);return w.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return w.resolve()}ys(e,n){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const n=this.ws(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Y_e{constructor(e){this.ps=e,this.docs=new kt(P.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ps(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return w.resolve(r?r.document.mutableCopy():ct.newInvalidDocument(n))}getEntries(e,n){let r=Mr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ct.newInvalidDocument(i))}),w.resolve(r)}getAllFromCollection(e,n,r){let i=Mr();const s=new P(n.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:a,value:{document:c}}=o.getNext();if(!n.isPrefixOf(a.path))break;a.path.length>n.length+1||i1(q4(c),r)<=0||(i=i.insert(c.key,c.mutableCopy()))}return w.resolve(i)}getAllFromCollectionGroup(e,n,r,i){K()}Is(e,n){return w.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new X_e(this)}getSize(e){return w.resolve(this.size)}}class X_e extends H_e{constructor(e){super(),this.zn=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.zn.addEntry(e,i)):this.zn.removeEntry(r)}),w.waitFor(n)}getFromCache(e,n){return this.zn.getEntry(e,n)}getAllFromCache(e,n){return this.zn.getEntries(e,n)}}class J_e{constructor(e){this.persistence=e,this.Ts=new ca(n=>Dc(n),Qf),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Es=0,this.As=new x1,this.targetCount=0,this.Rs=Lc.An()}forEachTarget(e,n){return this.Ts.forEach((r,i)=>n(i)),w.resolve()}getLastRemoteSnapshotVersion(e){return w.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return w.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),w.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Es&&(this.Es=n),w.resolve()}vn(e){this.Ts.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Rs=new Lc(n),this.highestTargetId=n),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,n){return this.vn(n),this.targetCount+=1,w.resolve()}updateTargetData(e,n){return this.vn(n),w.resolve()}removeTargetData(e,n){return this.Ts.delete(n.target),this.As.us(n.targetId),this.targetCount-=1,w.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Ts.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Ts.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),w.waitFor(s).next(()=>i)}getTargetCount(e){return w.resolve(this.targetCount)}getTargetData(e,n){const r=this.Ts.get(n)||null;return w.resolve(r)}addMatchingKeys(e,n,r){return this.As.ss(n,r),w.resolve()}removeMatchingKeys(e,n,r){this.As.os(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),w.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.As.us(n),w.resolve()}getMatchingKeysForTargetId(e,n){const r=this.As.hs(n);return w.resolve(r)}containsKey(e,n){return w.resolve(this.As.containsKey(n))}}class Sz{constructor(e,n){this.bs={},this.overlays={},this.Ps=new kr(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new J_e(this),this.indexManager=new F_e,this.remoteDocumentCache=new Y_e(r=>this.referenceDelegate.Ss(r)),this.wt=new sz(n),this.Ds=new q_e(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new K_e,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.bs[e.toKey()];return r||(r=new Q_e(n,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,n,r){D("MemoryPersistence","Starting transaction:",e);const i=new Z_e(this.Ps.next());return this.referenceDelegate.Cs(),r(i).next(s=>this.referenceDelegate.xs(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ns(e,n){return w.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,n)))}}class Z_e extends vme{constructor(e){super(),this.currentSequenceNumber=e}}class ov{constructor(e){this.persistence=e,this.ks=new x1,this.Os=null}static Ms(e){return new ov(e)}get Fs(){if(this.Os)return this.Os;throw K()}addReference(e,n,r){return this.ks.addReference(r,n),this.Fs.delete(r.toString()),w.resolve()}removeReference(e,n,r){return this.ks.removeReference(r,n),this.Fs.add(r.toString()),w.resolve()}markPotentiallyOrphaned(e,n){return this.Fs.add(n.toString()),w.resolve()}removeTarget(e,n){this.ks.us(n.targetId).forEach(i=>this.Fs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Fs.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Cs(){this.Os=new Set}xs(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return w.forEach(this.Fs,r=>{const i=P.fromPath(r);return this.$s(e,i).next(s=>{s||n.removeEntry(i,te.min())})}).next(()=>(this.Os=null,n.apply(e)))}updateLimboDocument(e,n){return this.$s(e,n).next(r=>{r?this.Fs.delete(n.toString()):this.Fs.add(n.toString())})}Ss(e){return 0}$s(e,n){return w.or([()=>w.resolve(this.ks.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ns(e,n)])}}class k1{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Pi=r,this.vi=i}static Vi(e,n){let r=Ee(),i=Ee();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new k1(e,n.fromCache,r,i)}}class Az{constructor(){this.Si=!1}initialize(e,n){this.Di=e,this.indexManager=n,this.Si=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Ci(e,n).next(s=>s||this.xi(e,n,i,r)).next(s=>s||this.Ni(e,n))}Ci(e,n){return w.resolve(null)}xi(e,n,r,i){return function Vme(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(n)||i.isEqual(te.min())?this.Ni(e,n):this.Di.getDocuments(e,r).next(s=>{const o=this.ki(n,s);return this.Oi(n,o,r,i)?this.Ni(e,n):(t1()<=Le.DEBUG&&D("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),f1(n)),this.Mi(e,o,n,function G4(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=te.fromTimestamp(1e9===r?new _t(n+1,0):new _t(n,r));return new Zr(i,P.empty(),e)}(i,-1)))})}ki(e,n){let r=new et(yH(e));return n.forEach((i,s)=>{p1(e,s)&&(r=r.add(s))}),r}Oi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ni(e,n){return t1()<=Le.DEBUG&&D("QueryEngine","Using full collection scan to execute query:",f1(n)),this.Di.getDocumentsMatchingQuery(e,n,Zr.min())}Mi(e,n,r,i){return this.Di.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class tye{constructor(e,n,r,i){this.persistence=e,this.Fi=n,this.wt=i,this.$i=new kt(ve),this.Bi=new ca(s=>Dc(s),Qf),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xz(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.$i))}}function Mz(t,e){return M1.apply(this,arguments)}function M1(){return M1=_(function*(t,e){const n=V(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.qi(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let c=Ee();for(const l of i){o.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}for(const l of s){a.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(r,c).next(l=>({Ki:l,removedBatchIds:o,addedBatchIds:a}))})})}),M1.apply(this,arguments)}function Rz(t){const e=V(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Vs.getLastRemoteSnapshotVersion(n))}function iye(t,e){const n=V(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Gu(t,e,n){return R1.apply(this,arguments)}function R1(){return R1=_(function*(t,e,n){const r=V(t),i=r.$i.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!na(o))throw o;D("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.$i=r.$i.remove(e),r.Bi.delete(i.target)}),R1.apply(this,arguments)}function cv(t,e,n){const r=V(t);let i=te.min(),s=Ee();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,c,l){const u=V(a),d=u.Bi.get(l);return void 0!==d?w.resolve(u.$i.get(d)):u.Vs.getTargetData(c,l)}(r,o,wi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Fi.getDocumentsMatchingQuery(o,e,n?i:te.min(),n?s:Ee())).next(a=>(function Fz(t,e,n){let r=te.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Li.set(e,r)}(r,function _H(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),a),{documents:a,ji:s})))}class L1{constructor(){this.activeTargetIds=Yy()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Uz{constructor(){this.Fr=new L1,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,n,r){this.$r[e]=n}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new L1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class aye{Br(e){}shutdown(){}}class Bz{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){D("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){D("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const cye={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class lye{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class uye extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,n,r,i,s){const o=this.oo(e,n);D("RestConnection","Sending: ",o,r);const a={};return this.uo(a,i,s),this.co(e,o,a,r).then(c=>(D("RestConnection","Received: ",c),c),c=>{throw Vy("RestConnection",`${e} failed with error: `,c,"url: ",o,"request:",r),c})}ao(e,n,r,i,s,o){return this.ro(e,n,r,i,s)}uo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ku,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}oo(e,n){return`${this.so}/v1/${n}:${cye[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,n,r,i){return new Promise((s,o)=>{const a=new ume;a.listenOnce(ame.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case e1.NO_ERROR:const l=a.getResponseJson();D("Connection","XHR received:",JSON.stringify(l)),s(l);break;case e1.TIMEOUT:D("Connection",'RPC "'+e+'" timed out'),o(new S(b.DEADLINE_EXCEEDED,"Request time out"));break;case e1.HTTP_ERROR:const u=a.getStatus();if(D("Connection",'RPC "'+e+'" failed with status:',u,"response text:",a.getResponseText()),u>0){const d=a.getResponseJson().error;if(d&&d.status&&d.message){const h=function(f){const p=f.toLowerCase().replace(/_/g,"-");return Object.values(b).indexOf(p)>=0?p:b.UNKNOWN}(d.status);o(new S(h,d.message))}else o(new S(b.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new S(b.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{D("Connection",'RPC "'+e+'" completed.')}});const c=JSON.stringify(i);a.send(n,"POST",c,r,15)})}ho(e,n,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=sme(),o=ome(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new lme({})),this.uo(a.initMessageHeaders,n,r),D_()||KC()||function pae(){return ln().indexOf("Electron/")>=0}()||zB()||function gae(){return ln().indexOf("MSAppHost/")>=0}()||A_()||(a.httpHeadersOverwriteParam="$httpHeaders");const c=i.join("");D("Connection","Creating WebChannel: "+c,a);const l=s.createWebChannel(c,a);let u=!1,d=!1;const h=new lye({jr:p=>{d?D("Connection","Not sending because WebChannel is closed:",p):(u||(D("Connection","Opening WebChannel transport."),l.open(),u=!0),D("Connection","WebChannel sending:",p),l.send(p))},Wr:()=>l.close()}),f=(p,g,m)=>{p.listen(g,v=>{try{m(v)}catch(y){setTimeout(()=>{throw y},0)}})};return f(l,Ly.EventType.OPEN,()=>{d||D("Connection","WebChannel transport opened.")}),f(l,Ly.EventType.CLOSE,()=>{d||(d=!0,D("Connection","WebChannel transport closed"),h.eo())}),f(l,Ly.EventType.ERROR,p=>{d||(d=!0,Vy("Connection","WebChannel transport errored:",p),h.eo(new S(b.UNAVAILABLE,"The operation could not be completed")))}),f(l,Ly.EventType.MESSAGE,p=>{var g;if(!d){const m=p.data[0];se(!!m);const y=m.error||(null===(g=m[0])||void 0===g?void 0:g.error);if(y){D("Connection","WebChannel received error:",y);const C=y.status;let I=function(q){const Z=Yt[q];if(void 0!==Z)return NH(Z)}(C),A=y.message;void 0===I&&(I=b.INTERNAL,A="Unknown error status: "+C+" with message "+y.message),d=!0,h.eo(new S(I,A)),l.close()}else D("Connection","WebChannel received:",m),h.no(m)}}),f(o,cme.STAT_EVENT,p=>{p.stat===B4.PROXY?D("Connection","Detected buffering proxy"):p.stat===B4.NOPROXY&&D("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.Zr()},0),h}}function dv(){return typeof document<"u"?document:null}function gp(t){return new e_e(t,!0)}class U1{constructor(e,n,r=1e3,i=1.5,s=6e4){this.js=e,this.timerId=n,this.lo=r,this.fo=i,this._o=s,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&D("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class jz{constructor(e,n,r,i,s,o,a,c){this.js=e,this.Ao=r,this.Ro=i,this.bo=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new U1(e,n)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return _(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return _(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,n){var r=this;return _(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():n&&n.code===b.RESOURCE_EXHAUSTED?(Kt(n.toString()),Kt("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):n&&n.code===b.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(n)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===n&&this.Uo(r,i)},r=>{e(()=>{const i=new S(b.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,n){const r=this.Lo(this.Po);this.stream=this.Ko(e,n),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io(_(function*(){e.state=0,e.start()}))}qo(e){return D("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return n=>{this.js.enqueueAndForget(()=>this.Po===e?n():(D("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dye extends jz{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.wt=s}Ko(e,n){return this.bo.ho("Listen",e,n)}onMessage(e){this.So.reset();const n=function r_e(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:K(),i=e.targetChange.targetIds||[],s=function(c,l){return c.dt?(se(void 0===l||"string"==typeof l),rn.fromBase64String(l||"")):(se(void 0===l||l instanceof Uint8Array),rn.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const l=void 0===c.code?b.UNKNOWN:NH(c.code);return new S(l,c.message||"")}(o);n=new VH(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=_s(t,r.document.name),s=mn(r.document.updateTime),o=new Bn({mapValue:{fields:r.document.fields}}),a=ct.newFoundDocument(i,s,o);n=new Xy(r.targetIds||[],r.removedTargetIds||[],a.key,a)}else if("documentDelete"in e){const r=e.documentDelete,i=_s(t,r.document),s=r.readTime?mn(r.readTime):te.min(),o=ct.newNoDocument(i,s);n=new Xy([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=_s(t,r.document);n=new Xy([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return K();{const r=e.filter,s=new Gme(r.count||0);n=new LH(r.targetId,s)}}var c;return n}(this.wt,e),r=function(i){if(!("targetChange"in i))return te.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?te.min():s.readTime?mn(s.readTime):te.min()}(e);return this.listener.Go(n,r)}Qo(e){const n={};n.database=sp(this.wt),n.addTarget=function(i,s){let o;const a=s.target;return o=Wy(a)?{documents:KH(i,a)}:{query:QH(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=jH(i,s.resumeToken):s.snapshotVersion.compareTo(te.min())>0&&(o.readTime=rp(i,s.snapshotVersion.toTimestamp())),o}(this.wt,e);const r=function s_e(t,e){const n=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return K()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.Mo(n)}jo(e){const n={};n.database=sp(this.wt),n.removeTarget=e,this.Mo(n)}}class hye extends jz{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.wt=s,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,n){return this.bo.ho("Write",e,n)}onMessage(e){if(se(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const n=function i_e(t,e){return t&&t.length>0?(se(void 0!==e),t.map(n=>function(r,i){let s=mn(r.updateTime?r.updateTime:i);return s.isEqual(te.min())&&(s=mn(i)),new Hme(s,r.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=mn(e.commitTime);return this.listener.Jo(r,n)}return se(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=sp(this.wt),this.Mo(e)}Ho(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>function op(t,e){let n;if(e instanceof Uu)n={update:GH(t,e.key,e.value)};else if(e instanceof Bu)n={delete:ip(t,e.key)};else if(e instanceof yo)n={update:GH(t,e.key,e.data),updateMask:u_e(e.fieldMask)};else{if(!(e instanceof g1))return K();n={verify:ip(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof Lu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Ac)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof kc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Vu)return{fieldPath:s.field.canonicalString(),increment:o._t};throw K()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:t_e(t,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:K()),n;var i}(this.wt,r))};this.Mo(n)}}class fye extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.bo=r,this.wt=i,this.Zo=!1}tu(){if(this.Zo)throw new S(b.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,n,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.bo.ro(e,n,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new S(b.UNKNOWN,i.toString())})}ao(e,n,r,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.bo.ao(e,n,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new S(b.UNKNOWN,s.toString())})}terminate(){this.Zo=!0}}class pye{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Kt(n),this.su=!1):D("OnlineStateTracker",n)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class gye{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=s,this.du.Br(a=>{r.enqueueAndForget(_(function*(){var c;ha(o)&&(D("RemoteStore","Restarting streams for network reachability change."),yield(c=_(function*(l){const u=V(l);u.lu.add(4),yield qu(u),u._u.set("Unknown"),u.lu.delete(4),yield mp(u)}),function(l){return c.apply(this,arguments)})(o))}))}),this._u=new pye(r,i)}}function mp(t){return B1.apply(this,arguments)}function B1(){return B1=_(function*(t){if(ha(t))for(const e of t.fu)yield e(!0)}),B1.apply(this,arguments)}function qu(t){return $1.apply(this,arguments)}function $1(){return $1=_(function*(t){for(const e of t.fu)yield e(!1)}),$1.apply(this,arguments)}function hv(t,e){const n=V(t);n.hu.has(e.targetId)||(n.hu.set(e.targetId,e),z1(n)?H1(n):Qu(n).Co()&&j1(n,e))}function _p(t,e){const n=V(t),r=Qu(n);n.hu.delete(e),r.Co()&&Hz(n,e),0===n.hu.size&&(r.Co()?r.ko():ha(n)&&n._u.set("Unknown"))}function j1(t,e){t.wu.Nt(e.targetId),Qu(t).Qo(e)}function Hz(t,e){t.wu.Nt(e),Qu(t).jo(e)}function H1(t){t.wu=new Xme({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),te:e=>t.hu.get(e)||null}),Qu(t).start(),t._u.iu()}function z1(t){return ha(t)&&!Qu(t).Do()&&t.hu.size>0}function ha(t){return 0===V(t).lu.size}function zz(t){t.wu=void 0}function mye(t){return W1.apply(this,arguments)}function W1(){return W1=_(function*(t){t.hu.forEach((e,n)=>{j1(t,e)})}),W1.apply(this,arguments)}function _ye(t,e){return G1.apply(this,arguments)}function G1(){return G1=_(function*(t,e){zz(t),z1(t)?(t._u.uu(e),H1(t)):t._u.set("Unknown")}),G1.apply(this,arguments)}function yye(t,e,n){return q1.apply(this,arguments)}function q1(){return q1=_(function*(t,e,n){if(t._u.set("Online"),e instanceof VH&&2===e.state&&e.cause)try{yield(r=_(function*(i,s){const o=s.cause;for(const a of s.targetIds)i.hu.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.hu.delete(a),i.wu.removeTarget(a))}),function(i,s){return r.apply(this,arguments)})(t,e)}catch(r){D("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield fv(t,r)}else if(e instanceof Xy?t.wu.Ut(e):e instanceof LH?t.wu.zt(e):t.wu.Gt(e),!n.isEqual(te.min()))try{const r=yield Rz(t.localStore);n.compareTo(r)>=0&&(yield function(i,s){const o=i.wu.Yt(s);return o.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const l=i.hu.get(c);l&&i.hu.set(c,l.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const c=i.hu.get(a);if(!c)return;i.hu.set(a,c.withResumeToken(rn.EMPTY_BYTE_STRING,c.snapshotVersion)),Hz(i,a);const l=new la(c.target,a,1,c.sequenceNumber);j1(i,l)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n))}catch(r){D("RemoteStore","Failed to raise snapshot:",r),yield fv(t,r)}var r}),q1.apply(this,arguments)}function fv(t,e,n){return K1.apply(this,arguments)}function K1(){return K1=_(function*(t,e,n){if(!na(e))throw e;t.lu.add(1),yield qu(t),t._u.set("Offline"),n||(n=()=>Rz(t.localStore)),t.asyncQueue.enqueueRetryable(_(function*(){D("RemoteStore","Retrying IndexedDB access"),yield n(),t.lu.delete(1),yield mp(t)}))}),K1.apply(this,arguments)}function Wz(t,e){return e().catch(n=>fv(t,n,e))}function Ku(t){return Q1.apply(this,arguments)}function Q1(){return Q1=_(function*(t){const e=V(t),n=fa(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;vye(e);)try{const i=yield iye(e.localStore,r);if(null===i){0===e.au.length&&n.ko();break}r=i.batchId,wye(e,i)}catch(i){yield fv(e,i)}Gz(e)&&qz(e)}),Q1.apply(this,arguments)}function vye(t){return ha(t)&&t.au.length<10}function wye(t,e){t.au.push(e);const n=fa(t);n.Co()&&n.zo&&n.Ho(e.mutations)}function Gz(t){return ha(t)&&!fa(t).Do()&&t.au.length>0}function qz(t){fa(t).start()}function bye(t){return Y1.apply(this,arguments)}function Y1(){return Y1=_(function*(t){fa(t).Xo()}),Y1.apply(this,arguments)}function Eye(t){return X1.apply(this,arguments)}function X1(){return X1=_(function*(t){const e=fa(t);for(const n of t.au)e.Ho(n.mutations)}),X1.apply(this,arguments)}function Cye(t,e,n){return J1.apply(this,arguments)}function J1(){return J1=_(function*(t,e,n){const r=t.au.shift(),i=b1.from(r,e,n);yield Wz(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Ku(t)}),J1.apply(this,arguments)}function Iye(t,e){return Z1.apply(this,arguments)}function Z1(){return Z1=_(function*(t,e){var n;e&&fa(t).zo&&(yield(n=_(function*(r,i){if(function RH(t){switch(t){default:return K();case b.CANCELLED:case b.UNKNOWN:case b.DEADLINE_EXCEEDED:case b.RESOURCE_EXHAUSTED:case b.INTERNAL:case b.UNAVAILABLE:case b.UNAUTHENTICATED:return!1;case b.INVALID_ARGUMENT:case b.NOT_FOUND:case b.ALREADY_EXISTS:case b.PERMISSION_DENIED:case b.FAILED_PRECONDITION:case b.ABORTED:case b.OUT_OF_RANGE:case b.UNIMPLEMENTED:case b.DATA_LOSS:return!0}}(s=i.code)&&s!==b.ABORTED){const o=r.au.shift();fa(r).No(),yield Wz(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Ku(r)}var s}),function(r,i){return n.apply(this,arguments)})(t,e)),Gz(t)&&qz(t)}),Z1.apply(this,arguments)}function Kz(t,e){return eA.apply(this,arguments)}function eA(){return eA=_(function*(t,e){const n=V(t);n.asyncQueue.verifyOperationInProgress(),D("RemoteStore","RemoteStore received new credentials");const r=ha(n);n.lu.add(3),yield qu(n),r&&n._u.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.lu.delete(3),yield mp(n)}),eA.apply(this,arguments)}function nA(){return nA=_(function*(t,e){const n=V(t);e?(n.lu.delete(2),yield mp(n)):e||(n.lu.add(2),yield qu(n),n._u.set("Unknown"))}),nA.apply(this,arguments)}function Qu(t){return t.mu||(t.mu=function(e,n,r){const i=V(e);return i.tu(),new dye(n,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(t.datastore,t.asyncQueue,{zr:mye.bind(null,t),Jr:_ye.bind(null,t),Go:yye.bind(null,t)}),t.fu.push(function(){var e=_(function*(n){n?(t.mu.No(),z1(t)?H1(t):t._u.set("Unknown")):(yield t.mu.stop(),zz(t))});return function(n){return e.apply(this,arguments)}}())),t.mu}function fa(t){return t.gu||(t.gu=function(e,n,r){const i=V(e);return i.tu(),new hye(n,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(t.datastore,t.asyncQueue,{zr:bye.bind(null,t),Jr:Iye.bind(null,t),Yo:Eye.bind(null,t),Jo:Cye.bind(null,t)}),t.fu.push(function(){var e=_(function*(n){n?(t.gu.No(),yield Ku(t)):(yield t.gu.stop(),t.au.length>0&&(D("RemoteStore",`Stopping write stream with ${t.au.length} pending writes`),t.au=[]))});return function(n){return e.apply(this,arguments)}}())),t.gu}class rA{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new gn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new rA(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new S(b.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yu(t,e){if(Kt("AsyncQueue",`${e}: ${t}`),na(t))return new S(b.UNAVAILABLE,`${e}: ${t}`);throw t}class Xu{constructor(e){this.comparator=e?(n,r)=>e(n,r)||P.comparator(n.key,r.key):(n,r)=>P.comparator(n.key,r.key),this.keyedMap=Zf(),this.sortedSet=new kt(this.comparator)}static emptySet(e){return new Xu(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Xu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new Xu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class Qz{constructor(){this.yu=new kt(P.comparator)}track(e){const n=e.doc.key,r=this.yu.get(n);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(n,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(n):1===e.type&&2===r.type?this.yu=this.yu.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(n,{type:2,doc:e.doc}):K():this.yu=this.yu.insert(n,e)}pu(){const e=[];return this.yu.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ju{constructor(e,n,r,i,s,o,a,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c}static fromInitialDocuments(e,n,r,i){const s=[];return n.forEach(o=>{s.push({type:0,doc:o})}),new Ju(e,n,Xu.emptySet(n),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class Tye{constructor(){this.Iu=void 0,this.listeners=[]}}class xye{constructor(){this.queries=new ca(e=>mH(e),Yf),this.onlineState="Unknown",this.Tu=new Set}}function iA(t,e){return sA.apply(this,arguments)}function sA(){return sA=_(function*(t,e){const n=V(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Tye),i)try{s.Iu=yield n.onListen(r)}catch(o){const a=Yu(o,`Initialization of query '${f1(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Eu(n.onlineState),s.Iu&&e.Au(s.Iu)&&cA(n)}),sA.apply(this,arguments)}function oA(t,e){return aA.apply(this,arguments)}function aA(){return aA=_(function*(t,e){const n=V(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),aA.apply(this,arguments)}function Sye(t,e){const n=V(t);let r=!1;for(const i of e){const o=n.queries.get(i.query);if(o){for(const a of o.listeners)a.Au(i)&&(r=!0);o.Iu=i}}r&&cA(n)}function Dye(t,e,n){const r=V(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function cA(t){t.Tu.forEach(e=>{e.next()})}class lA{constructor(e,n,r){this.query=e,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Ju(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),n=!0):this.Vu(e,this.onlineState)&&(this.Su(e),n=!0),this.Pu=e,n}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let n=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),n=!0),n}Vu(e,n){return!e.fromCache||!(this.options.Du&&"Offline"!==n||e.docs.isEmpty()&&"Offline"!==n)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Ju.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class Jz{constructor(e){this.key=e}}class Zz{constructor(e){this.key=e}}class e6{constructor(e,n){this.query=e,this.Fu=n,this.$u=null,this.current=!1,this.Bu=Ee(),this.mutatedKeys=Ee(),this.Lu=yH(e),this.Uu=new Xu(this.Lu)}get qu(){return this.Fu}Ku(e,n){const r=n?n.Gu:new Qz,i=n?n.Uu:this.Uu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const h=i.get(u),f=p1(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let m=!1;h&&f?h.data.isEqual(f.data)?p!==g&&(r.track({type:3,doc:f}),m=!0):this.Qu(h,f)||(r.track({type:2,doc:f}),m=!0,(c&&this.Lu(f,c)>0||l&&this.Lu(f,l)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),m=!0):h&&!f&&(r.track({type:1,doc:h}),m=!0,(c||l)&&(a=!0)),m&&(f?(o=o.add(f),s=g?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const u="F"===this.query.limitType?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Uu:o,Gu:r,Oi:a,mutatedKeys:s}}Qu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const s=e.Gu.pu();s.sort((l,u)=>function(d,h){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return f(d)-f(h)}(l.type,u.type)||this.Lu(l.doc,u.doc)),this.ju(r);const o=n?this.Wu():[],a=0===this.Bu.size&&this.current?1:0,c=a!==this.$u;return this.$u=a,0!==s.length||c?{snapshot:new Ju(this.query,e.Uu,i,s,e.mutatedKeys,0===a,c,!1),zu:o}:{zu:o}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new Qz,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(n=>this.Fu=this.Fu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Fu=this.Fu.delete(n)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Ee(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const n=[];return e.forEach(r=>{this.Bu.has(r)||n.push(new Zz(r))}),this.Bu.forEach(r=>{e.has(r)||n.push(new Jz(r))}),n}Ju(e){this.Fu=e.ji,this.Bu=Ee();const n=this.Ku(e.documents);return this.applyChanges(n,!0)}Yu(){return Ju.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class Mye{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Rye{constructor(e){this.key=e,this.Xu=!1}}class Nye{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new ca(a=>mH(a),Yf),this.ec=new Map,this.nc=new Set,this.sc=new kt(P.comparator),this.ic=new Map,this.rc=new x1,this.oc={},this.uc=new Map,this.cc=Lc.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function Pye(t,e){return uA.apply(this,arguments)}function uA(){return uA=_(function*(t,e){const n=function NA(t){const e=V(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=t6.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hye.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Lye.bind(null,e),e.Zu.Go=Sye.bind(null,e.eventManager),e.Zu.lc=Dye.bind(null,e.eventManager),e}(t);let r,i;const s=n.tc.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Yu();else{const o=yield function Wu(t,e){const n=V(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Vs.getTargetData(r,e).next(s=>s?(i=s,w.resolve(i)):n.Vs.allocateTargetId(r).next(o=>(i=new la(e,o,0,r.currentSequenceNumber),n.Vs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.$i.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.$i=n.$i.insert(r.targetId,r),n.Bi.set(e,r.targetId)),r})}(n.localStore,wi(e));n.isPrimaryClient&&hv(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield function dA(t,e,n,r){return hA.apply(this,arguments)}(n,e,r,"current"===a)}return i}),uA.apply(this,arguments)}function hA(){return hA=_(function*(t,e,n,r){t.hc=(u,d,h)=>{return(f=_(function*(p,g,m,v){let y=g.view.Ku(m);y.Oi&&(y=yield cv(p.localStore,g.query,!1).then(({documents:A})=>g.view.Ku(A,y)));const C=v&&v.targetChanges.get(g.targetId),I=g.view.applyChanges(y,p.isPrimaryClient,C);return EA(p,g.targetId,I.zu),I.snapshot}),function(p,g,m,v){return f.apply(this,arguments)})(t,u,d,h);var f};const i=yield cv(t.localStore,e,!0),s=new e6(e,i.ji),o=s.Ku(i.documents),a=np.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),c=s.applyChanges(o,t.isPrimaryClient,a);EA(t,n,c.zu);const l=new Mye(e,n,s);return t.tc.set(e,l),t.ec.has(n)?t.ec.get(n).push(e):t.ec.set(n,[e]),c.snapshot}),hA.apply(this,arguments)}function Oye(t,e){return fA.apply(this,arguments)}function fA(){return fA=_(function*(t,e){const n=V(t),r=n.tc.get(e),i=n.ec.get(r.targetId);if(i.length>1)return n.ec.set(r.targetId,i.filter(s=>!Yf(s,e))),void n.tc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Gu(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),_p(n.remoteStore,r.targetId),Zu(n,r.targetId)}).catch(ta))):(Zu(n,r.targetId),yield Gu(n.localStore,r.targetId,!0))}),fA.apply(this,arguments)}function pA(){return pA=_(function*(t,e,n){const r=function PA(t){const e=V(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Vye.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Uye.bind(null,e),e}(t);try{const i=yield function(s,o){const a=V(s),c=_t.now(),l=o.reduce((h,f)=>h.add(f.key),Ee());let u,d;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>{let f=Mr(),p=Ee();return a.Ui.getEntries(h,l).next(g=>{f=g,f.forEach((m,v)=>{v.isValidDocument()||(p=p.add(m))})}).next(()=>a.localDocuments.getOverlayedDocuments(h,f)).next(g=>{u=g;const m=[];for(const v of o){const y=Wme(v,u.get(v.key).overlayedDocument);null!=y&&m.push(new yo(v.key,y,aH(y.value.mapValue),It.exists(!0)))}return a.mutationQueue.addMutationBatch(h,c,m,o)}).next(g=>{d=g;const m=g.applyToLocalDocumentSet(u,p);return a.documentOverlayCache.saveOverlays(h,g.batchId,m)})}).then(()=>({batchId:d.batchId,changes:OH(u)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let c=s.oc[s.currentUser.toKey()];c||(c=new kt(ve)),c=c.insert(o,a),s.oc[s.currentUser.toKey()]=c}(r,i.batchId,n),yield vo(r,i.changes),yield Ku(r.remoteStore)}catch(i){const s=Yu(i,"Failed to persist write");n.reject(s)}}),pA.apply(this,arguments)}function t6(t,e){return gA.apply(this,arguments)}function gA(){return gA=_(function*(t,e){const n=V(t);try{const r=yield function rye(t,e){const n=V(t),r=e.snapshotVersion;let i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;const a=[];e.targetChanges.forEach((u,d)=>{const h=i.get(d);if(!h)return;a.push(n.Vs.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.Vs.addMatchingKeys(s,u.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);var p,g,m;e.targetMismatches.has(d)?f=f.withResumeToken(rn.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(d,f),g=f,m=u,(0===(p=h).resumeToken.approximateByteSize()||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8||m.addedDocuments.size+m.modifiedDocuments.size+m.removedDocuments.size>0)&&a.push(n.Vs.updateTargetData(s,f))});let c=Mr(),l=Ee();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(function Nz(t,e,n){let r=Ee(),i=Ee();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Mr();return n.forEach((a,c)=>{const l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(te.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||0===c.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):D("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Gi:o,Qi:i}})}(s,o,e.documentUpdates).next(u=>{c=u.Gi,l=u.Qi})),!r.isEqual(te.min())){const u=n.Vs.getLastRemoteSnapshotVersion(s).next(d=>n.Vs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return w.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.$i=i,s))}(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.ic.get(s);o&&(se(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Xu=!0:i.modifiedDocuments.size>0?se(o.Xu):i.removedDocuments.size>0&&(se(o.Xu),o.Xu=!1))}),yield vo(n,r,e)}catch(r){yield ta(r)}}),gA.apply(this,arguments)}function n6(t,e,n){const r=V(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.tc.forEach((s,o)=>{const a=o.view.Eu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=V(s);a.onlineState=o;let c=!1;a.queries.forEach((l,u)=>{for(const d of u.listeners)d.Eu(o)&&(c=!0)}),c&&cA(a)}(r.eventManager,e),i.length&&r.Zu.Go(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Lye(t,e,n){return mA.apply(this,arguments)}function mA(){return mA=_(function*(t,e,n){const r=V(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ic.get(e),s=i&&i.key;if(s){let o=new kt(P.comparator);o=o.insert(s,ct.newNoDocument(s,te.min()));const a=Ee().add(s),c=new tp(te.min(),new Map,new et(ve),o,a);yield t6(r,c),r.sc=r.sc.remove(s),r.ic.delete(e),CA(r)}else yield Gu(r.localStore,e,!1).then(()=>Zu(r,e,n)).catch(ta)}),mA.apply(this,arguments)}function Vye(t,e){return _A.apply(this,arguments)}function _A(){return _A=_(function*(t,e){const n=V(t),r=e.batch.batchId;try{const i=yield function nye(t,e){const n=V(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ui.newChangeBuffer({trackRemovals:!0});return function(o,a,c,l){const u=c.batch,d=u.keys();let h=w.resolve();return d.forEach(f=>{h=h.next(()=>l.getEntry(a,f)).next(p=>{const g=c.docVersions.get(f);se(null!==g),p.version.compareTo(g)<0&&(u.applyToRemoteDocument(p,c),p.isValidDocument()&&(p.setReadTime(c.commitVersion),l.addEntry(p)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(a,u))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=Ee();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(a=a.add(o.batch.mutations[c].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);bA(n,r,null),wA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield vo(n,i)}catch(i){yield ta(i)}}),_A.apply(this,arguments)}function Uye(t,e,n){return yA.apply(this,arguments)}function yA(){return yA=_(function*(t,e,n){const r=V(t);try{const i=yield function(s,o){const a=V(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let l;return a.mutationQueue.lookupMutationBatch(c,o).next(u=>(se(null!==u),l=u.keys(),a.mutationQueue.removeMutationBatch(c,u))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,l,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,l)).next(()=>a.localDocuments.getDocuments(c,l))})}(r.localStore,e);bA(r,e,n),wA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield vo(r,i)}catch(i){yield ta(i)}}),yA.apply(this,arguments)}function wA(t,e){(t.uc.get(e)||[]).forEach(n=>{n.resolve()}),t.uc.delete(e)}function bA(t,e,n){const r=V(t);let i=r.oc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.oc[r.currentUser.toKey()]=i}}function Zu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.ec.get(e))t.tc.delete(r),n&&t.Zu.lc(r,n);t.ec.delete(e),t.isPrimaryClient&&t.rc.us(e).forEach(r=>{t.rc.containsKey(r)||r6(t,r)})}function r6(t,e){t.nc.delete(e.path.canonicalString());const n=t.sc.get(e);null!==n&&(_p(t.remoteStore,n),t.sc=t.sc.remove(e),t.ic.delete(n),CA(t))}function EA(t,e,n){for(const r of n)r instanceof Jz?(t.rc.addReference(r.key,e),$ye(t,r)):r instanceof Zz?(D("SyncEngine","Document no longer in limbo: "+r.key),t.rc.removeReference(r.key,e),t.rc.containsKey(r.key)||r6(t,r.key)):K()}function $ye(t,e){const n=e.key,r=n.path.canonicalString();t.sc.get(n)||t.nc.has(r)||(D("SyncEngine","New document in limbo: "+n),t.nc.add(r),CA(t))}function CA(t){for(;t.nc.size>0&&t.sc.size<t.maxConcurrentLimboResolutions;){const e=t.nc.values().next().value;t.nc.delete(e);const n=new P(Ne.fromString(e)),r=t.cc.next();t.ic.set(r,new Rye(n)),t.sc=t.sc.insert(n,r),hv(t.remoteStore,new la(wi(Ou(n.path)),r,2,kr.ot))}}function vo(t,e,n){return IA.apply(this,arguments)}function IA(){return IA=_(function*(t,e,n){const r=V(t),i=[],s=[],o=[];var a;r.tc.isEmpty()||(r.tc.forEach((a,c)=>{o.push(r.hc(c,e,n).then(l=>{if(l){r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l.fromCache?"not-current":"current"),i.push(l);const u=k1.Vi(c.targetId,l);s.push(u)}}))}),yield Promise.all(o),r.Zu.Go(i),yield(a=_(function*(c,l){const u=V(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>w.forEach(l,h=>w.forEach(h.Pi,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>w.forEach(h.vi,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!na(d))throw d;D("LocalStore","Failed to update sequence numbers: "+d)}for(const d of l){const h=d.targetId;if(!d.fromCache){const f=u.$i.get(h),g=f.withLastLimboFreeSnapshotVersion(f.snapshotVersion);u.$i=u.$i.insert(h,g)}}}),function(c,l){return a.apply(this,arguments)})(r.localStore,s))}),IA.apply(this,arguments)}function jye(t,e){return TA.apply(this,arguments)}function TA(){return TA=_(function*(t,e){const n=V(t);if(!n.currentUser.isEqual(e)){D("SyncEngine","User change. New user:",e.toKey());const r=yield Mz(n.localStore,e);n.currentUser=e,(i=n).uc.forEach(o=>{o.forEach(a=>{a.reject(new S(b.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.uc.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield vo(n,r.Ki)}var i}),TA.apply(this,arguments)}function Hye(t,e){const n=V(t),r=n.ic.get(e);if(r&&r.Xu)return Ee().add(r.key);{let i=Ee();const s=n.ec.get(e);if(!s)return i;for(const o of s){const a=n.tc.get(o);i=i.unionWith(a.view.qu)}return i}}class Jye{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return _(function*(){n.wt=gp(e.databaseInfo.databaseId),n.sharedClientState=n.dc(e),n.persistence=n._c(e),yield n.persistence.start(),n.localStore=n.wc(e),n.gcScheduler=n.mc(e,n.localStore),n.indexBackfillerScheduler=n.gc(e,n.localStore)})()}mc(e,n){return null}gc(e,n){return null}wc(e){return function kz(t,e,n,r){return new tye(t,e,n,r)}(this.persistence,new Az,e.initialUser,this.wt)}_c(e){return new Sz(ov.Ms,this.wt)}dc(e){return new Uz}terminate(){var e=this;return _(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class OA{initialize(e,n){var r=this;return _(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>n6(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=jye.bind(null,r.syncEngine),yield function tA(t,e){return nA.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new xye}createDatastore(e){const n=gp(e.databaseInfo.databaseId),r=new uye(e.databaseInfo);return new fye(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>n6(this.syncEngine,a,0),o=Bz.V()?new Bz:new aye,new gye(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,c,l){const u=new Nye(r,i,s,o,a,c);return l&&(u.ac=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=_(function*(n){const r=V(n);D("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield qu(r),r.du.shutdown(),r._u.set("Unknown")}),function(n){return e.apply(this,arguments)})(this.remoteStore);var e}}class pv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class ive{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=pn.UNAUTHENTICATED,this.clientId=z4.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=_(function*(a){D("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(D("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return _(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new S(b.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new gn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(_(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=Yu(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function FA(){return FA=_(function*(t,e){t.asyncQueue.verifyOperationInProgress(),D("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=_(function*(s){r.isEqual(s)||(yield Mz(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}),FA.apply(this,arguments)}function LA(){return LA=_(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield function VA(t){return UA.apply(this,arguments)}(t);D("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>Kz(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>Kz(e.remoteStore,s)),t.onlineComponents=e}),LA.apply(this,arguments)}function UA(){return UA=_(function*(t){return t.offlineComponents||(D("FirestoreClient","Using default OfflineComponentProvider"),yield function a6(t,e){return FA.apply(this,arguments)}(t,new Jye)),t.offlineComponents}),UA.apply(this,arguments)}function gv(t){return BA.apply(this,arguments)}function BA(){return BA=_(function*(t){return t.onlineComponents||(D("FirestoreClient","Using default OnlineComponentProvider"),yield function c6(t,e){return LA.apply(this,arguments)}(t,new OA)),t.onlineComponents}),BA.apply(this,arguments)}function ed(t){return HA.apply(this,arguments)}function HA(){return HA=_(function*(t){const e=yield gv(t),n=e.eventManager;return n.onListen=Pye.bind(null,e.syncEngine),n.onUnlisten=Oye.bind(null,e.syncEngine),n}),HA.apply(this,arguments)}const f6=new Map;function zA(t,e,n){if(!n)throw new S(b.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function p6(t){if(!P.isDocumentKey(t))throw new S(b.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function g6(t){if(P.isDocumentKey(t))throw new S(b.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function mv(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(n=t).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof t?"a function":K()}function Oe(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new S(b.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=mv(t);throw new S(b.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class _6{constructor(e){var n;if(void 0===e.host){if(void 0!==e.ssl)throw new S(b.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new S(b.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function fve(t,e,n,r){if(!0===e&&!0===r)throw new S(b.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yp{constructor(e,n,r){this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _6({}),this._settingsFrozen=!1,e instanceof ia?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new S(b.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ia(i.options.projectId)}(e))}get app(){if(!this._app)throw new S(b.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new S(b.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _6(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new dme;switch(n.type){case"gapi":const r=n.client;return se(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new gme(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new S(b.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=f6.get(e);n&&(D("ComponentProvider","Removing Datastore"),f6.delete(e),n.terminate())}(this),Promise.resolve()}}class Bt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bt(this.firestore,e,this._key)}}class Yn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Yn(this.firestore,e,this._query)}}class vs extends Yn{constructor(e,n,r){super(e,n,Ou(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new P(e))}withConverter(e){return new vs(this.firestore,e,this._path)}}function pve(t,e,...n){if(t=Gt(t),zA("collection","path",e),t instanceof yp){const r=Ne.fromString(e,...n);return g6(r),new vs(t,null,r)}{if(!(t instanceof Bt||t instanceof vs))throw new S(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return g6(r),new vs(t.firestore,null,r)}}function y6(t,e,...n){if(t=Gt(t),1===arguments.length&&(e=z4.I()),zA("doc","path",e),t instanceof yp){const r=Ne.fromString(e,...n);return p6(r),new Bt(t,null,new P(r))}{if(!(t instanceof Bt||t instanceof vs))throw new S(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return p6(r),new Bt(t.firestore,t instanceof vs?t.converter:null,new P(r))}}class mve{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new U1(this,"async_queue_retry"),this.Kc=()=>{const n=dv();n&&D("AsyncQueue","Visibility state changed to "+n.visibilityState),this.So.Eo()};const e=dv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const n=dv();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const n=new gn;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return _(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(n){if(!na(n))throw n;D("AsyncQueue","Operation failed with retryable error: "+n)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const n=this.Oc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,Kt("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Oc=n,n}enqueueAfterDelay(e,n,r){this.Gc(),this.qc.indexOf(e)>-1&&(n=0);const i=rA.createAndSchedule(this,e,n,r,s=>this.Wc(s));return this.$c.push(i),i}Gc(){this.Bc&&K()}verifyOperationInProgress(){}zc(){var e=this;return _(function*(){let n;do{n=e.Oc,yield n}while(n!==e.Oc)})()}Hc(e){for(const n of this.$c)if(n.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.$c)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const n=this.$c.indexOf(e);this.$c.splice(n,1)}}function WA(t){return function(e,n){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(t)}class yt extends yp{constructor(e,n,r){super(e,n,r),this.type="firestore",this._queue=new mve,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||v6(this),this._firestoreClient.terminate()}}function yve(t,e){const n=Wo(t,"firestore");if(n.isInitialized()){const r=n.getImmediate();if(Yh(n.getOptions(),e))return r;throw new S(b.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==e.cacheSizeBytes&&-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new S(b.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e})}function sn(t){return t._firestoreClient||v6(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function v6(t){var e;const n=t._freezeSettings(),r=(s=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new Tme(t._databaseId,s,t._persistenceKey,(a=n).host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams));var s,a;t._firestoreClient=new ive(t._authCredentials,t._appCheckCredentials,t._queue,r)}class td{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new S(b.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Uc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Uc(rn.fromBase64String(e))}catch(n){throw new S(b.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Uc(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class GA{constructor(e){this._methodName=e}}class qA{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new S(b.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new S(b.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}}const vve=/^__.*__$/;class E6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new yo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function C6(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}class _v{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Xc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new _v(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.ta({path:r,na:!1});return i.sa(e),i}ia(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.ta({path:r,na:!1});return i.Xc(),i}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return vv(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(C6(this.Zc)&&vve.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class bve{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.wt=r||gp(e)}aa(e,n,r,i=!1){return new _v({Zc:e,methodName:n,ca:r,path:Qt.emptyPath(),na:!1,ua:i},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}class vp extends GA{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vp}}function Bc(t,e){if(A6(t=Gt(t)))return YA("Unsupported field value:",e,t),function D6(t,e){const n={};return X4(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ic(t,(r,i)=>{const s=Bc(i,e.ea(r));null!=s&&(n[r]=s)}),{mapValue:{fields:n}}}(t,e);if(t instanceof GA)return function(n,r){if(!C6(r.Zc))throw r.oa(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=Bc(o,r.ra(s));null==a&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if(null===(n=Gt(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return bH(r.wt,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const i=_t.fromDate(n);return{timestampValue:rp(r.wt,i)}}if(n instanceof _t){const i=new _t(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:rp(r.wt,i)}}if(n instanceof qA)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Uc)return{bytesValue:jH(r.wt,n._byteString)};if(n instanceof Bt){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r.oa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:m1(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.oa(`Unsupported field value: ${mv(n)}`)}(t,e)}function A6(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof _t||t instanceof qA||t instanceof Uc||t instanceof Bt||t instanceof GA)}function YA(t,e,n){if(!A6(n)||"object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=mv(n);throw e.oa("an object"===r?t+" a custom object":t+" "+r)}var r}function XA(t,e,n){if((e=Gt(e))instanceof td)return e._internalPath;if("string"==typeof e)return yv(t,e);throw vv("Field path arguments must be of type string or ",t,!1,void 0,n)}const Tve=new RegExp("[~\\*/\\[\\]]");function yv(t,e,n){if(e.search(Tve)>=0)throw vv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new td(...e.split("."))._internalPath}catch{throw vv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function vv(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new S(b.INVALID_ARGUMENT,a+t+c)}function k6(t,e){return t.some(n=>n.isEqual(e))}class JA{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new xve(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(wv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class xve extends JA{data(){return super.data()}}function wv(t,e){return"string"==typeof e?yv(t,e):e instanceof td?e._internalPath:e._delegate._internalPath}class $c{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rd extends JA{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(wv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class bv extends rd{data(e={}){return super.data(e)}}class id{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new $c(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new bv(this._firestore,this._userDataWriter,r.key,r,new $c(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new S(b.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new bv(r._firestore,r._userDataWriter,o.doc.key,o.doc,new $c(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||3!==o.type).map(o=>{const a=new bv(r._firestore,r._userDataWriter,o.doc.key,o.doc,new $c(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,l=-1;return 0!==o.type&&(c=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),l=s.indexOf(o.doc.key)),{type:Sve(o.type),doc:a,oldIndex:c,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Sve(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}class Dve{}function Ave(t,...e){for(const n of e)t=n._apply(t);return t}class Mve extends Dve{constructor(e,n){super(),this.fa=e,this.wa=n,this.type="orderBy"}_apply(e){const n=function(r,i,s){if(null!==r.startAt)throw new S(b.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new S(b.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new Pu(i,s);return function(a,c){if(null===u1(a)){const l=d1(a);null!==l&&function V6(t,e,n){if(!n.isEqual(e))throw new S(b.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}(0,l,c.field)}}(r,o),o}(e._query,this.fa,this.wa);return new Yn(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new _o(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function Rve(t,e="asc"){const n=e,r=wv("orderBy",t);return new Mve(r,n)}class Pve{convertValue(e,n="none"){switch(xc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Tc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw K()}}convertObject(e,n){const r={};return Ic(e.fields,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new qA(Mt(e.latitude),Mt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Z4(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Hf(e));default:return null}}convertTimestamp(e){const n=ra(e);return new _t(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ne.fromString(e);se(JH(r));const i=new ia(r.get(1),r.get(3)),s=new P(r.popFirst(5));return i.isEqual(n)||Kt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}function Fve(t){t=Oe(t,Bt);const e=Oe(t.firestore,yt);return function d6(t,e,n={}){const r=new gn;return t.asyncQueue.enqueueAndForget(_(function*(){return function(i,s,o,a,c){const l=new pv({next:d=>{s.enqueueAndForget(()=>oA(i,u));const h=d.docs.has(o);!h&&d.fromCache?c.reject(new S(b.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&a&&"server"===a.source?c.reject(new S(b.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(d)},error:d=>c.reject(d)}),u=new lA(Ou(o.path),l,{includeMetadataChanges:!0,Du:!0});return iA(i,u)}(yield ed(t),t.asyncQueue,e,n,r)})),r.promise}(sn(e),t._key).then(n=>ek(e,t,n))}class jc extends Pve{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,n)}}function Lve(t,e,n,...r){t=Oe(t,Bt);const i=Oe(t.firestore,yt),s=function nd(t){const e=t._freezeSettings(),n=gp(t._databaseId);return new bve(t._databaseId,!!e.ignoreUndefinedProperties,n)}(i);let o;return o="string"==typeof(e=Gt(e))||e instanceof td?function x6(t,e,n,r,i,s){const o=t.aa(1,e,n),a=[XA(e,r,n)],c=[i];if(s.length%2!=0)throw new S(b.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(XA(e,s[h])),c.push(s[h+1]);const l=[],u=Bn.empty();for(let h=a.length-1;h>=0;--h)if(!k6(l,a[h])){const f=a[h];let p=c[h];p=Gt(p);const g=o.ia(f);if(p instanceof vp)l.push(f);else{const m=Bc(p,g);null!=m&&(l.push(f),u.set(f,m))}}const d=new ei(l);return new E6(u,d,o.fieldTransforms)}(s,"updateDoc",t._key,e,n,r):function T6(t,e,n,r){const i=t.aa(1,e,n);YA("Data must be an object, but it was:",i,r);const s=[],o=Bn.empty();Ic(r,(c,l)=>{const u=yv(e,c,n);l=Gt(l);const d=i.ia(u);if(l instanceof vp)s.push(u);else{const h=Bc(l,d);null!=h&&(s.push(u),o.set(u,h))}});const a=new ei(s);return new E6(o,a,i.fieldTransforms)}(s,"updateDoc",t._key,e),function wp(t,e){return function(n,r){const i=new gn;return n.asyncQueue.enqueueAndForget(_(function*(){return function Fye(t,e,n){return pA.apply(this,arguments)}(yield function jA(t){return gv(t).then(e=>e.syncEngine)}(n),r,i)})),i.promise}(sn(t),e)}(i,[o.toMutation(t._key,It.exists(!0))])}function ek(t,e,n){const r=n.docs.get(e._key),i=new jc(t);return new rd(t,i,e._key,r,new $c(n.hasPendingWrites,n.fromCache),e.converter)}!function(t,e=!0){ku=qo,Rn(new un("firestore",(n,{options:r})=>{const i=n.getProvider("app").getImmediate(),s=new yt(i,new fme(n.getProvider("auth-internal")),new mme(n.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s},"PUBLIC")),Ze($4,"3.4.12",t),Ze($4,"3.4.12","esm2017")}();var Bve={includeMetadataChanges:!1};function tk(t,e){return void 0===e&&(e=Bve),new X(function(n){var r=function Vve(t,...e){var n,r,i;t=Gt(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||WA(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(WA(e[o])){const d=e[o];e[o]=null===(n=d.next)||void 0===n?void 0:n.bind(d),e[o+1]=null===(r=d.error)||void 0===r?void 0:r.bind(d),e[o+2]=null===(i=d.complete)||void 0===i?void 0:i.bind(d)}let c,l,u;if(t instanceof Bt)l=Oe(t.firestore,yt),u=Ou(t._key.path),c={next:d=>{e[o]&&e[o](ek(l,t,d))},error:e[o+1],complete:e[o+2]};else{const d=Oe(t,Yn);l=Oe(d.firestore,yt),u=d._query;const h=new jc(l);c={next:f=>{e[o]&&e[o](new id(l,h,d,f))},error:e[o+1],complete:e[o+2]},function M6(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new S(b.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query)}return function(d,h,f,p){const g=new pv(p),m=new lA(h,g,f);return d.asyncQueue.enqueueAndForget(_(function*(){return iA(yield ed(d),m)})),()=>{g.Tc(),d.asyncQueue.enqueueAndForget(_(function*(){return oA(yield ed(d),m)}))}}(sn(l),u,a,c)}(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function jve(t,e){return void 0===e&&(e={}),function $ve(t){return tk(t,{includeMetadataChanges:!0})}(t).pipe(be(function(n){return B6(n,e)}))}function B6(t,e){void 0===e&&(e={});var n=t.data();return!t.exists()||"object"!=typeof n||null===n||e.idField&&(n[e.idField]=t.id),n}function Kve(t,e){return void 0===e&&(e={}),function qve(t){return tk(t,{includeMetadataChanges:!0}).pipe(be(function(e){return e.docs}))}(t).pipe(be(function(n){return n.map(function(r){return B6(r,e)})}))}class Cv{constructor(e){return e}}const z6="firestore",ik=new U("angularfire2.firestore-instances");function Xve(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new Cv(r)}}const Jve={provide:class Qve{constructor(){return rf(z6)}},deps:[[new Ct,ik]]},Zve={provide:Cv,useFactory:function Yve(t,e){const n=nf(z6,t,e);return n&&new Cv(n)},deps:[[new Ct,ik],Ko]};let ewe=(()=>{class t{constructor(){Ze("angularfire",bu.full,"fst")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Jt({type:t}),t.\u0275inj=zt({providers:[Zve,Jve]}),t})();function twe(t,...e){return{ngModule:ewe,providers:[{provide:ik,useFactory:Xve(t),multi:!0,deps:[Re,Vt,sf,af,[new Ct,dy],[new Ct,uf],...e]}]}}const nwe=On(Kve,!0),rwe=On(jve,!0),iwe=On(pve,!0),Iv=On(y6,!0),W6=On(Fve,!0),swe=On(yve,!0),owe=On(Rve,!0),awe=On(Ave,!0),cwe=On(Lve,!0);class Tv{}class xv{}class ws{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(n=>{const r=n.indexOf(":");if(r>0){const i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof ws?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new ws;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof ws?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,n);const i=("a"===e.op?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(n);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}else this.headers.delete(n),this.normalizedNames.delete(n)}}setHeaderEntries(e,n){const r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class lwe{encodeKey(e){return G6(e)}encodeValue(e){return G6(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const dwe=/%(\d[a-f0-9])/gi,hwe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function G6(t){return encodeURIComponent(t).replace(dwe,(e,n)=>hwe[n]??e)}function Sv(t){return`${t}`}class pa{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new lwe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function uwe(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=n.get(o)||[];c.push(a),n.set(o,c)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const r=e.fromObject[n],i=Array.isArray(r)?r.map(Sv):[Sv(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{n.push({param:r,value:s,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new pa({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(Sv(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Sv(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class fwe{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function q6(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function K6(t){return typeof Blob<"u"&&t instanceof Blob}function Q6(t){return typeof FormData<"u"&&t instanceof FormData}class bp{constructor(e,n,r,i){let s;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function pwe(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new ws),this.context||(this.context=new fwe),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+o}}else this.params=new pa,this.urlWithParams=n}serializeBody(){return null===this.body?null:q6(this.body)||K6(this.body)||Q6(this.body)||function gwe(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof pa?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Q6(this.body)?null:K6(this.body)?this.body.type||null:q6(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof pa?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,l=e.params||this.params;const u=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),l)),new bp(n,r,s,{params:l,headers:c,context:u,reportProgress:a,responseType:i,withCredentials:o})}}var sd=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(sd||{});class sk{constructor(e,n=200,r="OK"){this.headers=e.headers||new ws,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class ok extends sk{constructor(e={}){super(e),this.type=sd.ResponseHeader}clone(e={}){return new ok({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class od extends sk{constructor(e={}){super(e),this.type=sd.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new od({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Y6 extends sk{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function ak(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let X6=(()=>{var t;class e{constructor(r){this.handler=r}request(r,i,s={}){let o;if(r instanceof bp)o=r;else{let l,u;l=s.headers instanceof ws?s.headers:new ws(s.headers),s.params&&(u=s.params instanceof pa?s.params:new pa({fromObject:s.params})),o=new bp(r,i,void 0!==s.body?s.body:null,{headers:l,context:s.context,params:u,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const a=ee(o).pipe(au(l=>this.handler.handle(l)));if(r instanceof bp||"events"===s.observe)return a;const c=a.pipe(Zs(l=>l instanceof od));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(be(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(be(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(be(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return c.pipe(be(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:(new pa).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,ak(s,i))}post(r,i,s={}){return this.request("POST",r,ak(s,i))}put(r,i,s={}){return this.request("PUT",r,ak(s,i))}}return(t=e).\u0275fac=function(r){return new(r||t)(N(Tv))},t.\u0275prov=z({token:t,factory:t.\u0275fac}),e})();function e8(t,e){return e(t)}function _we(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}const vwe=new U(""),Ep=new U(""),t8=new U("");function wwe(){let t=null;return(e,n)=>{null===t&&(t=(j(vwe,{optional:!0})??[]).reduceRight(_we,e8));const r=j(Vm),i=r.add();return t(e,n).pipe(Rh(()=>r.remove(i)))}}let n8=(()=>{var t;class e extends Tv{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=j(Vm)}handle(r){if(null===this.chain){const s=Array.from(new Set([...this.injector.get(Ep),...this.injector.get(t8,[])]));this.chain=s.reduceRight((o,a)=>function ywe(t,e,n){return(r,i)=>n.runInContext(()=>e(r,s=>t(s,i)))}(o,a,this.injector),e8)}const i=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe(Rh(()=>this.pendingTasks.remove(i)))}}return(t=e).\u0275fac=function(r){return new(r||t)(N(xv),N(qr))},t.\u0275prov=z({token:t,factory:t.\u0275fac}),e})();const Iwe=/^\)\]\}',?\n/;let i8=(()=>{var t;class e{constructor(r){this.xhrFactory=r}handle(r){if("JSONP"===r.method)throw new E(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?Ht(i.\u0275loadImpl()):ee(null)).pipe(ci(()=>new X(o=>{const a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((m,v)=>a.setRequestHeader(m,v.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){const m=r.detectContentTypeHeader();null!==m&&a.setRequestHeader("Content-Type",m)}if(r.responseType){const m=r.responseType.toLowerCase();a.responseType="json"!==m?m:"text"}const c=r.serializeBody();let l=null;const u=()=>{if(null!==l)return l;const m=a.statusText||"OK",v=new ws(a.getAllResponseHeaders()),y=function Twe(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(a)||r.url;return l=new ok({headers:v,status:a.status,statusText:m,url:y}),l},d=()=>{let{headers:m,status:v,statusText:y,url:C}=u(),I=null;204!==v&&(I=typeof a.response>"u"?a.responseText:a.response),0===v&&(v=I?200:0);let A=v>=200&&v<300;if("json"===r.responseType&&"string"==typeof I){const q=I;I=I.replace(Iwe,"");try{I=""!==I?JSON.parse(I):null}catch(Z){I=q,A&&(A=!1,I={error:Z,text:I})}}A?(o.next(new od({body:I,headers:m,status:v,statusText:y,url:C||void 0})),o.complete()):o.error(new Y6({error:I,headers:m,status:v,statusText:y,url:C||void 0}))},h=m=>{const{url:v}=u(),y=new Y6({error:m,status:a.status||0,statusText:a.statusText||"Unknown Error",url:v||void 0});o.error(y)};let f=!1;const p=m=>{f||(o.next(u()),f=!0);let v={type:sd.DownloadProgress,loaded:m.loaded};m.lengthComputable&&(v.total=m.total),"text"===r.responseType&&a.responseText&&(v.partialText=a.responseText),o.next(v)},g=m=>{let v={type:sd.UploadProgress,loaded:m.loaded};m.lengthComputable&&(v.total=m.total),o.next(v)};return a.addEventListener("load",d),a.addEventListener("error",h),a.addEventListener("timeout",h),a.addEventListener("abort",h),r.reportProgress&&(a.addEventListener("progress",p),null!==c&&a.upload&&a.upload.addEventListener("progress",g)),a.send(c),o.next({type:sd.Sent}),()=>{a.removeEventListener("error",h),a.removeEventListener("abort",h),a.removeEventListener("load",d),a.removeEventListener("timeout",h),r.reportProgress&&(a.removeEventListener("progress",p),null!==c&&a.upload&&a.upload.removeEventListener("progress",g)),a.readyState!==a.DONE&&a.abort()}})))}}return(t=e).\u0275fac=function(r){return new(r||t)(N(sU))},t.\u0275prov=z({token:t,factory:t.\u0275fac}),e})();const ck=new U("XSRF_ENABLED"),s8=new U("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),o8=new U("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class a8{}let Dwe=(()=>{var t;class e{constructor(r,i,s){this.doc=r,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=WV(r,this.cookieName),this.lastCookieString=r),this.lastToken}}return(t=e).\u0275fac=function(r){return new(r||t)(N(An),N(Ws),N(s8))},t.\u0275prov=z({token:t,factory:t.\u0275fac}),e})();function Awe(t,e){const n=t.url.toLowerCase();if(!j(ck)||"GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e(t);const r=j(a8).getToken(),i=j(o8);return null!=r&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var ga=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(ga||{});function Hc(t,e){return{\u0275kind:t,\u0275providers:e}}function kwe(...t){const e=[X6,i8,n8,{provide:Tv,useExisting:n8},{provide:xv,useExisting:i8},{provide:Ep,useValue:Awe,multi:!0},{provide:ck,useValue:!0},{provide:a8,useClass:Dwe}];for(const n of t)e.push(...n.\u0275providers);return function h0(t){return{\u0275providers:t}}(e)}const c8=new U("LEGACY_INTERCEPTOR_FN");let Rwe=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Jt({type:t}),t.\u0275inj=zt({providers:[kwe(Hc(ga.LegacyInterceptors,[{provide:c8,useFactory:wwe},{provide:Ep,useExisting:c8,multi:!0}]))]}),e})(),lk=(()=>{var t;class e{constructor(r,i,s,o){var a=this;this.environment=r,this.httpClient=i,this.firestore=s,this.localStorageService=o,this.getById=function(){var c=_(function*(l,u){try{if(l&&u){const d=yield W6(Iv(a.firestore,`companies/${l}/plugins_web/${u}`));return d.exists?d.data():null}}catch(d){console.error(`PluginsWebService => getById => ${JSON.stringify(d)}`)}return null});return function(l,u){return c.apply(this,arguments)}}(),this.sendMessage=(c,l="client",u)=>this.send({message:c,type:l,update:u}),this.send=function(){var c=_(function*(l){let{message:u,type:d,update:h,messageStatus:f}=l,p={appId:a.localStorageService.get().pluginWeb.id,userId:a.localStorageService.get().userId};if(u){if("greetingMessage"===d&&a.localStorageService.getByKey("userData")){const{id:m,name:v,companyId:y,email:C,rol:I}=a.localStorageService.getByKey("userData"),A=yield a.getCompanyById(y);h={...h,client:{name:v,id:m,companyId:y,optionals:{companyName:A.data().name,role:I},email:C}}}p={...p,message:u,type:d,update:h}}else f&&(p={...p,messageStatus:f});const g=yield a.httpClient.post(a.environment.cloudFunctionUrl+"/plugin-web",p,{}).toPromise();if("client"===d&&g.conversation.id!==a.localStorageService.get().conversationId){const m=a.localStorageService.get();m.conversationId=g.conversation.id,a.localStorageService.set(m)}return g});return function(l){return c.apply(this,arguments)}}(),this.getMessages=_(function*(){if(a.localStorageService.get().conversationId){const c=awe(iwe(a.firestore,"companies",a.localStorageService.get().companyId,"conversations",a.localStorageService.get().conversationId,"messages"),owe("createdAt","asc"));return nwe(c).pipe(OU([]))}return null}),this.getUserId=_(function*(){const c=yield a.localStorageService.get();return c.userId||(c.userId=BB.getObjectId(),yield a.localStorageService.set(c)),c.userId})}sendStatus(r){var i=this;return _(function*(){return i.send({messageStatus:r})})()}getCompanyById(r){const i=Iv(this.firestore,`companies/${r}`);return W6(i)}closeChat(r){var i=this;return _(function*(){const s=i.localStorageService.get().pluginWeb;yield cwe(Iv(i.firestore,`companies/${s.companyId}/plugins_web/${s.id}`),{isChatShow:r}),i.localStorageService.set({...i.localStorageService.get(),pluginWeb:{...s,isChatShow:r}})})()}fetchPluginWeb(){const r=this.localStorageService.get().pluginWeb;if(!r||!r.companyId||!r.id)throw new Error("Datos necesarios no est\xe1n disponibles en localStorage");const s=Iv(this.firestore,`companies/${r.companyId}/plugins_web/${r.id}`);return rwe(s)}}return(t=e).\u0275fac=function(r){return new(r||t)(N("environment"),N(X6),N(Cv),N(gu))},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();var l8=function(t){return t.es="es",t.en="en",t}(l8||{}),Av=function(t){return t.sent="sent",t.pending="pending",t.read="read",t.delivered="delivered",t.failed="failed",t.deleted="deleted",t}(Av||{});let Vi=(()=>{var t;class e{constructor(r,i){var s=this;this.localStorageService=r,this.pluginWebService=i,this.messages=[],this.gotMessages=!1,this.clientSentMessage=!1,this.updatingGreeting=!1,this.messagesChangesSource=new bt,this.messagesChanges=this.messagesChangesSource.asObservable(),this.toReadMessages=new jt([]),this.unreadMessagesSource=new jt(0),this.unreadMessages$=this.unreadMessagesSource.asObservable(),this.sendGreetingMessage=_(function*(){if(s.firstResponse=yield s.pluginWebService.sendMessage(s.greetingMessage,"greetingMessage"),!s.firstResponse)return;const{firstBotResponses:o}=s.firstResponse;s.messages=[...s.messages,s.greetingMessage,...o],s.messages.map(a=>{a.createdAt?._seconds&&(a.date=new Date(1e3*a.createdAt._seconds))}),s.unreadMessagesSource.next(o.length)}),this.sendMessage=function(){var o=_(function*(a){if(s.messages=[...s.messages,a],s.messagesChangesSource.next(),s.clientSentMessage)yield s.pluginWebService.sendMessage(a);else{s.clientSentMessage=!0,setTimeout(()=>{s.gotMessages||(s.updatingGreeting=!0)},1200);const c=s.localStorageService.get();yield s.pluginWebService.sendMessage(a,"client",{conversation:{...s.firstResponse.conversation,referral:c.referral||{}},messagesToUpdate:s.messages.slice(0,-1),client:s.firstResponse.client})}yield s.getMessages()});return function(a){return o.apply(this,arguments)}}(),this.getUnReadMessages=o=>{const a=o.map(c=>c.isClient).lastIndexOf(!0);return o.slice(a+1)},this.getMessages=_(function*(){const o=s.localStorageService.get();!s.gotMessages&&o.companyId&&o.conversationId&&(s.gotMessages=!0,s.updatingGreeting=!1,(yield s.pluginWebService.getMessages()).pipe(be(c=>({toreadMessages:c.filter(d=>d.status!==Av.read&&!d.isClient),data:c.filter(d=>"log"!==d.type&&!d.isNote).map(d=>({...d,date:d.createdAt.toDate()}))})),Ho(c=>(console.error("Error al cargar mensajes:",c),s.gotMessages=!1,ee({toreadMessages:[],data:[]})))).subscribe(c=>{s.toReadMessages.next(c.toreadMessages),s.unreadMessagesSource.next(s.getUnReadMessages(c.data).length),s.messages=c.data,s.initialDate=s.messages[0]?.createdAt.toDate()||new Date,s.messagesChangesSource.next(),console.log("LOS MENSAJES QUE HAN PASADO",s.messages)}))}),this.updateUnreadMessages=o=>{this.unreadMessagesSource.next(o)},this.formatText=o=>o?.replace(/\n/g,"<br>")||"",this.pluginWeb=this.localStorageService.get().pluginWeb,this.greetingMessage={text:this.pluginWeb.greetingMessage,type:"text",isClient:!0}}get currentDate(){return _t.now().toDate()}urlify(r){return r.replace(/(https?:\/\/[^\s<]+)/g,s=>`<span class="break-down" >\n                    <a href="${s}" target= "_blank">${s}\n                    </a>\n                  </span>`)}validateTextUrl(r){return this.urlify(r)}}return(t=e).\u0275fac=function(r){return new(r||t)(N(gu),N(lk))},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const gr={es:{placeholder:"Escribe tu mensaje...",sendButtonText:"Enviar",typing:"escribiendo...",locale:"es-US",format:"EEEE d MMMM y, hh:mm a",yesterday:"Ayer",description:"a las",today:"Hoy",lastWeek:"La semana pasada",other:"A las",dateChat:"DD/MM/YYYY",shareLocation:"Compartir ubicaci\xf3n",uploadDocument:"Adjuntar documento",uploadPhoto:"Adjuntar imagen"},en:{placeholder:"Write your message...",sendButtonText:"Send",typing:"typing...",locale:"en",format:"EEEE, MMMM d y, h:mm a",yesterday:"Yesterday",description:"at",today:"Today",lastWeek:"Last week",other:"At",dateChat:"MM/DD/YYYY",shareLocation:"Share location",uploadDocument:"Attach document",uploadPhoto:"Attach image"},fr:{placeholder:"\xc9crivez votre message ...",sendButtonText:"Envoyer",typing:"en \xe9crivant...",locale:"fr",format:"EEEE, MMMM d y, h:mm a",yesterday:"Hier",description:"\xe0",today:"Aujourd'hui",lastWeek:"La semaine derni\xe8re",other:"\xc0",dateChat:"dd/MM/yyyy",shareLocation:"Emplacement partag\xe9",uploadDocument:"Joints",uploadPhoto:"Attacher l'image"},pt:{placeholder:"Escreva sua mensagem ...",sendButtonText:"Enviar",typing:"escrita...",locale:"pt",format:"EEEE, MMMM d y, h:mm a",yesterday:"Ontem",description:"no",today:"Hoje",lastWeek:"A semana passada",other:"No",dateChat:"DD/MM/YYYY",shareLocation:"Compartilhar localiza\xe7\xe3o",uploadDocument:"Anexe o documento",uploadPhoto:"Anexe a imagem"}};let u8=(()=>{var t;class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}}return(t=e).\u0275fac=function(r){return new(r||t)(T(Gs),T(Gn))},t.\u0275dir=ae({type:t}),e})(),zc=(()=>{var t;class e extends u8{}return(t=e).\u0275fac=function(){let n;return function(i){return(n||(n=Dn(t)))(i||t)}}(),t.\u0275dir=ae({type:t,features:[Qe]}),e})();const bs=new U("NgValueAccessor"),Bwe={provide:bs,useExisting:it(()=>kv),multi:!0},jwe=new U("CompositionEventMode");let kv=(()=>{var t;class e extends u8{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function $we(){const t=$o()?$o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(r){this.setProperty("value",r??"")}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}}return(t=e).\u0275fac=function(r){return new(r||t)(T(Gs),T(Gn),T(jwe,8))},t.\u0275dir=ae({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Je("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[pt([Bwe]),Qe]}),e})();const Xn=new U("NgValidators"),_a=new U("NgAsyncValidators");function b8(t){return null!=t}function E8(t){return hh(t)?Ht(t):t}function C8(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function I8(t,e){return e.map(n=>n(t))}function T8(t){return t.map(e=>function zwe(t){return!t.validate}(e)?e:n=>e.validate(n))}function uk(t){return null!=t?function x8(t){if(!t)return null;const e=t.filter(b8);return 0==e.length?null:function(n){return C8(I8(n,e))}}(T8(t)):null}function dk(t){return null!=t?function S8(t){if(!t)return null;const e=t.filter(b8);return 0==e.length?null:function(n){return function Vwe(...t){const e=HR(t),{args:n,keys:r}=AU(t),i=new X(s=>{const{length:o}=n;if(!o)return void s.complete();const a=new Array(o);let c=o,l=o;for(let u=0;u<o;u++){let d=!1;ai(n[u]).subscribe(Xe(s,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||s.next(r?MU(r,a):a),s.complete())}))}});return e?i.pipe(kU(e)):i}(I8(n,e).map(E8)).pipe(be(C8))}}(T8(t)):null}function D8(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function hk(t){return t?Array.isArray(t)?t:[t]:[]}function Rv(t,e){return Array.isArray(t)?t.includes(e):t===e}function M8(t,e){const n=hk(e);return hk(t).forEach(i=>{Rv(n,i)||n.push(i)}),n}function R8(t,e){return hk(e).filter(n=>!Rv(t,n))}class N8{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=uk(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=dk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class mr extends N8{get formDirective(){return null}get path(){return null}}class ya extends N8{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class P8{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let O8=(()=>{var t;class e extends P8{constructor(r){super(r)}}return(t=e).\u0275fac=function(r){return new(r||t)(T(ya,2))},t.\u0275dir=ae({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Vo("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Qe]}),e})(),fk=(()=>{var t;class e extends P8{constructor(r){super(r)}}return(t=e).\u0275fac=function(r){return new(r||t)(T(mr,10))},t.\u0275dir=ae({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&Vo("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Qe]}),e})();const Cp="VALID",Pv="INVALID",ad="PENDING",Ip="DISABLED";function mk(t){return(Ov(t)?t.validators:t)||null}function _k(t,e){return(Ov(e)?e.asyncValidators:t)||null}function Ov(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class U8{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Cp}get invalid(){return this.status===Pv}get pending(){return this.status==ad}get disabled(){return this.status===Ip}get enabled(){return this.status!==Ip}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(M8(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(M8(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(R8(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(R8(e,this._rawAsyncValidators))}hasValidator(e){return Rv(this._rawValidators,e)}hasAsyncValidator(e){return Rv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ad,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Ip,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Cp,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Cp||this.status===ad)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ip:Cp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ad,this._hasOwnPendingAsyncValidator=!0;const n=E8(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new gt,this.statusChanges=new gt}_calculateStatus(){return this._allControlsDisabled()?Ip:this.errors?Pv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ad)?ad:this._anyControlsHaveStatus(Pv)?Pv:Cp}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ov(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Kwe(t){return Array.isArray(t)?uk(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Qwe(t){return Array.isArray(t)?dk(t):t||null}(this._rawAsyncValidators)}}class yk extends U8{constructor(e,n,r){super(mk(n),_k(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){(function V8(t,e,n){t._forEachChild((r,i)=>{if(void 0===n[i])throw new E(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function L8(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new E(1e3,"");if(!r[n])throw new E(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const cd=new U("CallSetDisabledState",{providedIn:"root",factory:()=>Fv}),Fv="always";function Tp(t,e,n=Fv){vk(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function Jwe(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&B8(t,e)})}(t,e),function ebe(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function Zwe(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&B8(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function Xwe(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Uv(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function vk(t,e){const n=function A8(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(D8(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function k8(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(D8(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();Uv(e._rawValidators,i),Uv(e._rawAsyncValidators,i)}function B8(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const sbe={provide:mr,useExisting:it(()=>Sp)},xp=(()=>Promise.resolve())();let Sp=(()=>{var t;class e extends mr{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new gt,this.form=new yk({},uk(r),dk(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){xp.then(()=>{const i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),Tp(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){xp.then(()=>{const i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){xp.then(()=>{const i=this._findContainer(r.path),s=new yk({});(function $8(t,e){vk(t,e)})(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){xp.then(()=>{const i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){xp.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,function j8(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(r),"dialog"===r?.target?.method}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}}return(t=e).\u0275fac=function(r){return new(r||t)(T(Xn,10),T(_a,10),T(cd,8))},t.\u0275dir=ae({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&Je("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[pt([sbe]),Qe]}),e})();function H8(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function z8(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const W8=class extends U8{constructor(e=null,n,r){super(mk(n),_k(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ov(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=z8(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){H8(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){H8(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){z8(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},cbe={provide:ya,useExisting:it(()=>Ck)},K8=(()=>Promise.resolve())();let Ck=(()=>{var t;class e extends ya{constructor(r,i,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new W8,this._registered=!1,this.name="",this.update=new gt,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=function Ek(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===kv?n=s:function rbe(t){return Object.getPrototypeOf(t.constructor)===zc}(s)?r=s:i=s}),i||r||n||null}(0,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){const i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),function bk(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Tp(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(r){K8.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){const i=r.isDisabled.currentValue,s=0!==i&&function iu(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}(i);K8.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?function Lv(t,e){return[...e.path,t]}(r,this._parent):[r]}}return(t=e).\u0275fac=function(r){return new(r||t)(T(mr,9),T(Xn,10),T(_a,10),T(bs,10),T(ru,8),T(cd,8))},t.\u0275dir=ae({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[pt([cbe]),Qe,di]}),e})(),Ik=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275dir=ae({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})(),Y8=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Jt({type:t}),t.\u0275inj=zt({}),e})(),Rbe=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Jt({type:t}),t.\u0275inj=zt({imports:[Y8]}),e})(),Pbe=(()=>{var t;class e{static withConfig(r){return{ngModule:e,providers:[{provide:cd,useValue:r.callSetDisabledState??Fv}]}}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Jt({type:t}),t.\u0275inj=zt({imports:[Rbe]}),e})();var wo=En(304),Obe=En(616),Fbe=En(77);wo.extend(Fbe);let Lbe=(()=>{var t;class e{constructor(r,i){this.cdRef=r,this.ngZone=i,e.initTimer(i),e.refs++,this.midnightSub=e.midnight.subscribe(()=>{this.ngZone.run(()=>this.cdRef.markForCheck())})}transform(r,...i){let s=null,o=null;for(let a=0,c=i.length;a<c;a++)null!==i[a]&&("object"!=typeof i[a]||wo.isMoment(i[a])?o=wo(i[a]):s=i[a]);return wo(r).calendar(o,s)}ngOnDestroy(){e.refs>0&&e.refs--,0===e.refs&&e.removeTimer(),this.midnightSub.unsubscribe()}static initTimer(r){if(!e.midnight&&(e.midnight=new gt,typeof window<"u")){const i=e._getMillisecondsUntilUpdate();e.timer=r.runOutsideAngular(()=>window.setTimeout(()=>{e.midnight.emit(new Date),e.removeTimer(),e.initTimer(r)},i))}}static removeTimer(){e.timer&&(window.clearTimeout(e.timer),e.timer=null,e.midnight=null)}static _getMillisecondsUntilUpdate(){const r=wo();return wo().startOf("day").add(1,"days").valueOf()-r.valueOf()+1e3}}return(t=e).refs=0,t.timer=null,t.midnight=null,t.\u0275fac=function(r){return new(r||t)(T(ru,16),T(Re,16))},t.\u0275pipe=In({name:"amCalendar",type:t,pure:!1}),e})(),Vbe=(()=>{var t;class e{transform(r,i){return wo(r).locale(i)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275pipe=In({name:"amLocale",type:t,pure:!0}),e})();const Ube=function(t){return{sameDay:t}};function Bbe(t,e){if(1&t&&(k(0,"span"),$e(1),Kn(2,"amCalendar"),Kn(3,"amLocale"),B()),2&t){const n=ge();M(1),or(Qr(2,1,Qr(3,4,n.date,n.locale),eu(7,Ube,n.time)))}}const $be=function(t){return{lastDay:t}};function jbe(t,e){if(1&t&&(k(0,"span"),$e(1),Kn(2,"amCalendar"),Kn(3,"amLocale"),B()),2&t){const n=ge();M(1),or(Qr(2,1,Qr(3,4,n.date,n.locale),eu(7,$be,n.time)))}}const Hbe=function(t){return{lastWeek:t}};function zbe(t,e){if(1&t&&(k(0,"span"),$e(1),Kn(2,"amCalendar"),Kn(3,"amLocale"),B()),2&t){const n=ge();M(1),or(Qr(2,1,Qr(3,4,n.date,n.locale),eu(7,Hbe,n.time)))}}const Wbe=function(t){return{sameElse:t}};function Gbe(t,e){if(1&t&&(k(0,"span"),$e(1),Kn(2,"amCalendar"),Kn(3,"amLocale"),B()),2&t){const n=ge();M(1),or(Qr(2,1,Qr(3,4,n.date,n.locale),eu(7,Wbe,n.time)))}}wo.extend(Obe);let $v=(()=>{var t;class e{constructor(r){this.language="",this.locale="",this.description="",this.time="",this.language=r.pluginWeb.language||"es",this.locale=gr[this.language].locale,this.description=gr[this.language].description+"] hh:mm a"}whenItWas(r){let i="Other";return wo(r).calendar(null,{sameDay:()=>(i="Today",this.time="["+gr[this.language].today+" "+this.description,""),lastDay:()=>(i="Yesterday",this.time="["+gr[this.language].yesterday+" "+this.description,""),lastWeek:()=>(i="LastWeek",this.time="["+gr[this.language].lastWeek+" "+this.description,""),sameElse:()=>(i="Other",this.description=gr[this.language].dateChat,this.time=this.description+" ["+gr[this.language].description+"] hh:mm a","")}),i}}return(t=e).\u0275fac=function(r){return new(r||t)(T(Vi))},t.\u0275cmp=Hn({type:t,selectors:[["app-date-format"]],inputs:{date:"date"},decls:5,vars:5,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(r,i){1&r&&(Oo(0,0),Ae(1,Bbe,4,9,"span",1),Ae(2,jbe,4,9,"span",1),Ae(3,zbe,4,9,"span",1),Ae(4,Gbe,4,9,"span",1),Fo()),2&r&&(L("ngSwitch",i.whenItWas(i.date)),M(1),L("ngSwitchCase","Today"),M(1),L("ngSwitchCase","Yesterday"),M(1),L("ngSwitchCase","LastWeek"),M(1),L("ngSwitchCase","Other"))},dependencies:[i_,YV,Lbe,Vbe]}),e})(),Mk=(()=>{var t;class e{constructor(r){this.sanitizer=r}transform(r,i){switch(i){case"html":return r=BB.transformToBold(r),this.sanitizer.bypassSecurityTrustHtml(r);case"style":return this.sanitizer.bypassSecurityTrustStyle(r);case"script":return this.sanitizer.bypassSecurityTrustScript(r);case"url":return this.sanitizer.bypassSecurityTrustUrl(r);case"resourceUrl":return this.sanitizer.bypassSecurityTrustResourceUrl(r);default:throw new Error(`Invalid safe type specified: ${i}`)}}}return(t=e).\u0275fac=function(r){return new(r||t)(T(xU,16))},t.\u0275pipe=In({name:"safe",type:t,pure:!0}),e})();function qbe(t,e){if(1&t&&(k(0,"div",12),Y(1,"img",13),B()),2&t){const n=ge();let r;M(1),L("src",null!==(r=null==n.chatService||null==n.chatService.pluginWeb?null:n.chatService.pluginWeb.iconUrl)&&void 0!==r?r:"https://www.gravatar.com/avatar/00000000000000000000000000000000.png?s=200&d=mm",sr)}}function Kbe(t,e){1&t&&function VF(t,e=0,n){const r=x(),i=Me(),s=$l(i,Se+t,16,null,n||null);null===s.projection&&(s.projection=e),Sb(),(!r[Bs]||wl())&&32!=(32&s.flags)&&function eQ(t,e,n){zP(e[ue],0,e,n,e0(t,n,e),VP(n.parent||e[zn],n,e))}(i,r,s)}(0,0,["*ngIf","message.type === 'quickReply' && message.quickReply?.length === 1"])}const Qbe=["*"];let Rk=(()=>{var t;class e{constructor(r){this.chatService=r}}return(t=e).\u0275fac=function(r){return new(r||t)(T(Vi))},t.\u0275cmp=Hn({type:t,selectors:[["app-text-message"]],inputs:{message:"message"},ngContentSelectors:Qbe,decls:18,vars:8,consts:[[3,"ngClass"],[1,"from"],[1,"msg-wrapper"],["class","msg-avatar",4,"ngIf"],["data-tip","8:27 AM","data-for","tooltip-5f884e4c2d536f000c2a4f19","data-iscapture","true","currentitem","true",1,"msg"],[1,"message-item","message-text","last-item","container-message"],[3,"innerHTML"],[4,"ngIf"],[1,"hour-text"],[3,"date"],["id","tooltip-5f884e4c2d536f000c2a4f19","data-id","tooltip",1,"__react_component_tooltip","place-top","type-dark"],[1,"clear"],[1,"msg-avatar"],["alt","'s avatar",3,"src"]],template:function(r,i){1&r&&(function LF(t){const e=x()[Lt][zn];if(!e.projection){const r=e.projection=zd(t?t.length:1,null),i=r.slice();let s=e.child;for(;null!==s;){const o=t?GX(s,t):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s),s=s.next}}}(),k(0,"div",0),Y(1,"div",1),k(2,"div",2),Ae(3,qbe,2,1,"div",3),k(4,"div",4)(5,"div")(6,"div")(7,"span",5)(8,"span"),Y(9,"span",6),Kn(10,"safe"),Y(11,"br"),B()(),Ae(12,Kbe,1,0,"ng-content",7),k(13,"div",8),Y(14,"app-date-format",9),B()()()(),k(15,"div",10),$e(16," 8:27 AM "),B()(),Y(17,"div",11),B()),2&r&&(L("ngClass",i.message.isClient?"row right-row row-current-user-first":"row left-row row-other-user-first"),M(3),L("ngIf",!i.message.isClient),M(6),L("innerHTML",Qr(10,5,i.chatService.validateTextUrl(i.chatService.formatText(i.message.text)),"html"),im),M(3),L("ngIf","quickReply"===i.message.type&&1===(null==i.message.quickReply?null:i.message.quickReply.length)),M(2),L("date",i.message.date))},dependencies:[Ja,Ri,$v,Mk],styles:['.bubble[_ngcontent-%COMP%]{color:#091e42de!important;font-size:13px;padding:6px 12px;word-wrap:break-all;overflow-wrap:break-all;word-break:break-all;background-color:#f1f0f0;color:#000;margin-top:3px;box-shadow:0 1px #0000001f;transition:opacity .15s;opacity:0;transform:scale(0)}.bubble-width[_ngcontent-%COMP%]{max-width:50%}.bubble-width-full[_ngcontent-%COMP%]{width:100%}.right[_ngcontent-%COMP%]{clear:both;float:right;border-radius:20px 2px 20px 20px;margin-right:10px;background:white}.right.inserted[_ngcontent-%COMP%]{transform-origin:right top;transition:all .2s;opacity:1;transform:scale(1);transition:all .2s,height .2s 1s,padding .2s 1s}.right[_ngcontent-%COMP%]:after, .right[_ngcontent-%COMP%]:before{clear:both;content:""}.left[_ngcontent-%COMP%]:after, .left[_ngcontent-%COMP%]:before{clear:both;content:""}.left[_ngcontent-%COMP%]{clear:both;float:left;background-color:#c6e5f8;border-radius:2px 20px 20px;margin-left:10px}.left.inserted[_ngcontent-%COMP%]{transform-origin:left bottom;transition:all .2s;opacity:1;transform:scale(1);transition:all .2s,height .2s 1s,padding .2s 1s}.log[_ngcontent-%COMP%]{box-shadow:0 0;float:unset;background:transparent;margin-top:-3px}.log[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%]{width:0;width:100%!important}.test[_ngcontent-%COMP%]{display:flex;min-width:2px!important;max-width:2px!important;background:orangered;margin:0 0 0 12px}.tmp-bubble[_ngcontent-%COMP%]{color:#091e42de!important;font-size:14px;word-wrap:break-all;overflow-wrap:break-all;word-break:break-all;background-color:#f1f0f0;color:#000;padding:5px 12px;max-width:50%;margin-top:3px;box-shadow:0 1px #0000001f;transition:opacity .15s;opacity:0;transform:scale(0)}.tmp-bubble.right[_ngcontent-%COMP%]{clear:both;float:right;border-radius:20px 2px 20px 20px;margin-right:20px;background:white}.tmp-bubble.right.inserted[_ngcontent-%COMP%]{transform-origin:right top;transition:all .2s;opacity:1;transform:scale(1);transition:all .2s,height .2s 1s,padding .2s 1s}.tmp-bubble.left[_ngcontent-%COMP%]:after, .tmp-bubble.left[_ngcontent-%COMP%]:before{clear:both;content:""}.tmp-bubble.right[_ngcontent-%COMP%]:after, .tmp-bubble.right[_ngcontent-%COMP%]:before{clear:both;content:""}.tmp-bubble.left[_ngcontent-%COMP%]{clear:both;float:left;background-color:#c6e5f8;border-radius:2px 20px 20px;margin-left:10px}.tmp-bubble.left.inserted[_ngcontent-%COMP%]{transform-origin:left bottom;transition:all .2s;opacity:1;transform:scale(1);transition:all .2s,height .2s 1s,padding .2s 1s}.tmp-bubble.log[_ngcontent-%COMP%]{box-shadow:0 0;float:unset;background:transparent;margin-left:auto;margin-right:auto;text-align:center;margin-top:-3px}.mat-icon[_ngcontent-%COMP%]{font-size:16px!important}.imageFile[_ngcontent-%COMP%]{max-width:250px;max-height:290px;margin:10px 0;cursor:auto}.inside-log[_ngcontent-%COMP%]{border-radius:10px;float:unset;background:rgba(0,0,0,.0784313725);padding:3px 6px}agm-map[_ngcontent-%COMP%]{height:300px;width:400px}.card-contact[_ngcontent-%COMP%]{display:flex}.avatar-contact[_ngcontent-%COMP%]{margin-right:5px;background-image:url(/assets/images/user.png);background-size:cover}.value-contact[_ngcontent-%COMP%]{width:90%;margin:auto}.copy-contact[_ngcontent-%COMP%]{margin:auto;text-align:center;height:100%}.text-message[_ngcontent-%COMP%]{white-space:pre-line}.bold-font[_ngcontent-%COMP%]{font-weight:400}.r[_ngcontent-%COMP%]{clear:both;float:right;justify-content:flex-end}.l[_ngcontent-%COMP%]{clear:both;float:left;justify-content:flex-start}.first-el[_ngcontent-%COMP%]{padding:5px 5px 2px 12px}.not-first-el[_ngcontent-%COMP%]{padding:2px 12px}.r-order-avatar[_ngcontent-%COMP%]{order:2}.l-order-avatar[_ngcontent-%COMP%], .r-order-bubble[_ngcontent-%COMP%]{order:1}.l-order-bubble[_ngcontent-%COMP%]{order:2}.round-image[_ngcontent-%COMP%]{width:25px;height:27px;overflow:hidden;border-radius:50%}.round-image[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{width:100%;height:auto}.avatar-size[_ngcontent-%COMP%]{width:30px;height:30px}.icon-log-section[_ngcontent-%COMP%]{align-self:center;margin-right:10px;border-right:1px solid rgba(169,169,169,.5490196078);display:flex;padding-right:10px;margin-left:5px}.text-log[_ngcontent-%COMP%]{color:gray;font-size:12px;margin-left:5px}']}),e})();function Ybe(t,e){if(1&t&&(k(0,"div",14),Y(1,"img",15),B()),2&t){const n=ge();let r;M(1),L("src",null!==(r=null==n.chatService||null==n.chatService.pluginWeb?null:n.chatService.pluginWeb.iconUrl)&&void 0!==r?r:"https://www.gravatar.com/avatar/00000000000000000000000000000000.png?s=200&d=mm",sr)}}let Xbe=(()=>{var t;class e{constructor(r){this.chatService=r}}return(t=e).\u0275fac=function(r){return new(r||t)(T(Vi))},t.\u0275cmp=Hn({type:t,selectors:[["app-image-message"]],inputs:{message:"message"},decls:17,vars:6,consts:[[3,"ngClass"],[1,"msg-wrapper"],["class","msg-avatar",4,"ngIf"],["data-tip","4:41 PM","data-for","tooltip-5f949f927f1cc5000c922841","data-iscapture","true","currentitem","true",1,"msg","msg-image"],[1,"image-content-dv"],[1,"image-container",2,"height","100%","width","100%","cursor","pointer"],[1,"imageloader","loaded","tall"],["target","_blank",1,"link",3,"href"],["alt","Uploaded image",3,"src"],[2,"text-align","right","font-size","13px","color","#5b616b"],[1,"hour-text",2,"color","#5b616b"],[3,"date"],["id","tooltip-5f949f927f1cc5000c922841","data-id","tooltip",1,"__react_component_tooltip","place-top","type-dark",2,"left","234px","top","220px"],[1,"clear"],[1,"msg-avatar"],["alt","'s avatar",3,"src"]],template:function(r,i){1&r&&(k(0,"div",0)(1,"div",1),Ae(2,Ybe,2,1,"div",2),k(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"a",7),Y(8,"img",8),B()()(),k(9,"div",9),$e(10),B(),k(11,"div")(12,"div",10),Y(13,"app-date-format",11),B()()()(),k(14,"div",12),$e(15," 4:41 PM "),B()(),Y(16,"div",13),B()),2&r&&(L("ngClass",i.message.isClient?"row right-row row-current-user-first":"row left-row row-other-user-first"),M(2),L("ngIf",!i.message.isClient),M(5),L("href",i.message.mediaUrl,sr),M(1),L("src",i.message.mediaUrl,sr),M(2),or(i.message.text),M(3),L("date",i.message.date))},dependencies:[Ja,Ri,$v],styles:[".image-content-dv[_ngcontent-%COMP%]{padding:6px 12px;word-break:break-all;margin-top:3px;background-color:#fff}"]}),e})();function Jbe(t,e){if(1&t&&(k(0,"div",16),Y(1,"img",17),B()),2&t){const n=ge();let r;M(1),L("src",null!==(r=null==n.chatService||null==n.chatService.pluginWeb?null:n.chatService.pluginWeb.iconUrl)&&void 0!==r?r:"https://www.gravatar.com/avatar/00000000000000000000000000000000.png?s=200&d=mm",sr)}}let Zbe=(()=>{var t;class e{constructor(r){this.chatService=r,this.openFile=i=>{window.open(`${this.message.mediaUrl}`,"new_window")},this.getFillColor=()=>this.message.isClient?"#FFFFFF":"#000000"}}return(t=e).\u0275fac=function(r){return new(r||t)(T(Vi))},t.\u0275cmp=Hn({type:t,selectors:[["app-file-message"]],inputs:{message:"message"},decls:21,vars:7,consts:[[3,"ngClass"],[1,"msg-wrapper"],["class","msg-avatar",4,"ngIf"],["data-tip","7:45 PM","data-for","tooltip-0.05951695585593364","data-iscapture","true","currentitem","true",1,"msg"],[1,"message-item","message-text","last-item",2,"display","flex","align-items","center","justify-content","center","height","60px","max-width","210px","cursor","pointer","min-width","200px",3,"click"],[2,"margin-right","8px","padding","5px 2px 2px","max-width","34px","width","34px","min-width","18px","flex-grow","1","height","auto"],["version","1.1","id","Layer_1","x","0px","y","0px","viewBox","0 0 28 25",0,"xml","space","preserve"],["d","M24.8,3.2C23.4,1.8,21.4,1,19.4,1c-2,0-4,0.8-5.4,2.2L7.3,9.8l-4.6,4.6c-2.2,2.2-2.3,5.8-0.1,8C3.7,23.5,5.1,24,6.6,24c1.5,0,3-0.6,4.1-1.7l8.4-8.3c0,0,0,0,0,0l2.9-2.9c0.8-0.7,1.2-1.7,1.2-2.8c0-1.1-0.4-2.1-1.1-2.8C20.5,4,18,4,16.4,5.6L6.2,15.6c-0.3,0.3-0.3,0.8,0,1.1C6.4,16.9,6.6,17,6.8,17s0.4-0.1,0.6-0.2L17.5,6.6c1-1,2.5-1,3.4-0.1c0.4,0.4,0.7,1,0.7,1.7c0,0.6-0.3,1.3-0.7,1.7l-3,3c0,0,0,0,0,0l-8.3,8.2c-1.6,1.6-4.3,1.7-5.8,0.1c-1.6-1.6-1.5-4.2,0.1-5.8L4.3,15c0,0,0,0,0,0L15.1,4.3c1.1-1.1,2.7-1.8,4.3-1.8c1.6,0,3.1,0.6,4.3,1.7c2.4,2.3,2.3,6.2-0.1,8.5l-8.8,8.8c-0.3,0.3-0.3,0.8,0,1.1c0.2,0.2,0.4,0.2,0.6,0.2c0.2,0,0.4-0.1,0.6-0.2l8.8-8.8C27.7,10.9,27.8,6.1,24.8,3.2z"],[2,"flex-grow","2","user-select","none"],[1,"file-name",2,"display","flex"],[2,"font-size","14px","font-weight","500","white-space","nowrap","margin","0px","max-width","62px","overflow","hidden","text-overflow","ellipsis"],[2,"font-size","12px","white-space","nowrap","line-height","1"],[1,"hour-text",2,"margin-top","6px"],[3,"date"],["id","tooltip-0.05951695585593364","data-id","tooltip",1,"__react_component_tooltip","place-top","type-dark",2,"left","294px","top","336px"],[1,"clear"],[1,"msg-avatar"],["alt","'s avatar",3,"src"]],template:function(r,i){1&r&&(k(0,"div",0)(1,"div",1),Ae(2,Jbe,2,1,"div",2),k(3,"div",3)(4,"div")(5,"div",4),Je("click",function(o){return i.openFile(o)}),k(6,"div",5),Hs(),k(7,"svg",6)(8,"g"),Y(9,"path",7),B()()(),Va(),k(10,"div",8)(11,"div",9)(12,"p",10),$e(13),B()(),k(14,"div",11),$e(15),B(),k(16,"div",12),Y(17,"app-date-format",13),B()()()()(),k(18,"div",14),$e(19,"7:45 PM "),B()(),Y(20,"div",15),B()),2&r&&(L("ngClass",i.message.isClient?"row right-row row-current-user-first":"row left-row row-other-user-first"),M(2),L("ngIf",!i.message.isClient),M(5),gi("fill",i.getFillColor()),M(4),gi("data-content-end",i.message.fileName.slice(-5)),M(2),cs(" ",i.message.fileName,""),M(2),or(i.message.text),M(2),L("date",i.message.date))},dependencies:[Ja,Ri,$v]}),e})(),e0e=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Hn({type:t,selectors:[["app-geo-message"]],inputs:{message:"message"},decls:18,vars:7,consts:[[1,"row","right-row","row-current-user-first","row-current-user-last"],[1,"msg-wrapper"],["data-for","tooltip-5f93261a0fd04c000c93fc8c","data-iscapture","true","currentitem","true",1,"msg",2,"border-left-color","rgb(0, 153, 255)"],[1,"message-item","message-text","last-item"],["target","_blank",1,"link",3,"href"],[1,"hour-text"],[3,"date"],[1,"clear"]],template:function(r,i){1&r&&(k(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div")(5,"span",3)(6,"span")(7,"span"),$e(8,"Location shared:"),B(),Y(9,"br"),B(),k(10,"span")(11,"span")(12,"a",4),$e(13),B()(),Y(14,"br"),B()()(),k(15,"div",5),Y(16,"app-date-format",6),B()()()(),Y(17,"div",7),B()),2&r&&(Vo("last-item",i.message.isLastItem),M(12),X0("href","https://maps.google.com/maps?q=",i.message.location.latitud,",",i.message.location.longitud,"",sr),M(1),nE("https://maps.google.com/maps?q=",i.message.location.latitud," ,",i.message.location.longitud,""),M(3),L("date",i.message.date))},dependencies:[$v]}),e})();function t0e(t,e){if(1&t){const n=Ga();k(0,"button",4),Je("click",function(){Hr(n);const i=ge().$implicit;return zr(ge().selected(i))}),k(1,"span"),$e(2),B()()}if(2&t){const n=ge().$implicit;M(2),or(n.text)}}function n0e(t,e){if(1&t&&(Oo(0),Ae(1,t0e,3,1,"button",3),Fo()),2&t){const n=e.$implicit;M(1),L("ngIf",n.text.trim().length>0)}}let r0e=(()=>{var t;class e{constructor(r){var i=this;this.chatService=r,this.hidden=!1,this.selected=function(){var s=_(function*(o){let a="";o.commands&&o.commands.forEach(d=>{const h={...d,from:"pluginWeb"};window.postMessage(h,window.location.origin)});const c=window.location.href,l=/#page\.url/gm;l.test(o.payload)&&(o.payload=o.payload.replace(l,`${encodeURIComponent(c)}`)),"url"===o.type?(window.open(`${o.payload}`,"new_window"),a=o.text):a=o.payload,i.hidden=!0;const u={type:"text",text:a,isClient:!0};"url"!=o.type&&(yield i.chatService.sendMessage(u))});return function(o){return s.apply(this,arguments)}}()}}return(t=e).\u0275fac=function(r){return new(r||t)(T(Vi))},t.\u0275cmp=Hn({type:t,selectors:[["app-reply-message"]],inputs:{message:"message",hidden:"hidden"},decls:3,vars:3,consts:[[3,"message"],[1,"reply-container",3,"hidden"],[4,"ngFor","ngForOf"],["class","btn btn-reply-action","style","background-color: rgb(229, 245, 255); border-color: rgb(0, 153, 255); color: rgb(0, 153, 255);",3,"click",4,"ngIf"],[1,"btn","btn-reply-action",2,"background-color","rgb(229, 245, 255)","border-color","rgb(0, 153, 255)","color","rgb(0, 153, 255)",3,"click"]],template:function(r,i){1&r&&(Y(0,"app-text-message",0),k(1,"div",1),Ae(2,n0e,2,1,"ng-container",2),B()),2&r&&(L("message",i.message),M(1),L("hidden",i.hidden),M(1),L("ngForOf",i.message.quickReply))},dependencies:[r_,Ri,Rk]}),e})();function i0e(t,e){if(1&t&&(k(0,"div",11),Y(1,"img",12),B()),2&t){const n=ge();let r;M(1),L("src",null!==(r=null==n.chatService||null==n.chatService.pluginWeb?null:n.chatService.pluginWeb.iconUrl)&&void 0!==r?r:"https://www.gravatar.com/avatar/00000000000000000000000000000000.png?s=200&d=mm",sr)}}let s0e=(()=>{var t;class e{constructor(r){this.chatService=r}}return(t=e).\u0275fac=function(r){return new(r||t)(T(Vi))},t.\u0275cmp=Hn({type:t,selectors:[["app-audio-message"]],inputs:{message:"message"},decls:17,vars:7,consts:[[3,"ngClass"],[1,"from"],[1,"msg-wrapper"],["class","msg-avatar",4,"ngIf"],["data-tip","8:27 AM","data-for","tooltip-5f884e4c2d536f000c2a4f19","data-iscapture","true","currentitem","true",1,"msg"],[1,"message-item","message-text","last-item"],["controls",""],[3,"src"],[3,"innerHTML"],["id","tooltip-5f884e4c2d536f000c2a4f19","data-id","tooltip",1,"__react_component_tooltip","place-top","type-dark"],[1,"clear"],[1,"msg-avatar"],["alt","'s avatar",3,"src"]],template:function(r,i){1&r&&(k(0,"div",0),Y(1,"div",1),k(2,"div",2),Ae(3,i0e,2,1,"div",3),k(4,"div",4)(5,"div")(6,"div")(7,"span",5)(8,"audio",6),Y(9,"source",7),$e(10," Tu navegador no soporta este elemento de audio. "),B(),Y(11,"br")(12,"span",8),Kn(13,"safe"),B()()()(),k(14,"div",9),$e(15,"8:27 AM "),B()(),Y(16,"div",10),B()),2&r&&(L("ngClass",i.message.isClient?"row right-row row-current-user-first":"row left-row row-other-user-first"),M(3),L("ngIf",!i.message.isClient),M(6),fh("src",i.message.mediaUrl,sr),M(3),L("innerHTML",Qr(13,4,i.message.text,"html"),im))},dependencies:[Ja,Ri,Mk]}),e})();function o0e(t,e){if(1&t&&(k(0,"div",11),Y(1,"img",12),B()),2&t){const n=ge();let r;M(1),L("src",null!==(r=null==n.chatService||null==n.chatService.pluginWeb?null:n.chatService.pluginWeb.iconUrl)&&void 0!==r?r:"https://www.gravatar.com/avatar/00000000000000000000000000000000.png?s=200&d=mm",sr)}}let a0e=(()=>{var t;class e{constructor(r){this.chatService=r}}return(t=e).\u0275fac=function(r){return new(r||t)(T(Vi))},t.\u0275cmp=Hn({type:t,selectors:[["app-video-message"]],inputs:{message:"message"},decls:16,vars:7,consts:[[3,"ngClass"],[1,"from"],[1,"msg-wrapper"],["class","msg-avatar",4,"ngIf"],["data-tip","8:27 AM","data-for","tooltip-5f884e4c2d536f000c2a4f19","data-iscapture","true","currentitem","true",1,"msg"],[1,"message-item","message-text","last-item"],["controls",""],["type","video/mp4",3,"src"],[3,"innerHTML"],["id","tooltip-5f884e4c2d536f000c2a4f19","data-id","tooltip",1,"__react_component_tooltip","place-top","type-dark"],[1,"clear"],[1,"msg-avatar"],["alt","'s avatar",3,"src"]],template:function(r,i){1&r&&(k(0,"div",0),Y(1,"div",1),k(2,"div",2),Ae(3,o0e,2,1,"div",3),k(4,"div",4)(5,"div")(6,"div")(7,"span",5)(8,"video",6),Y(9,"source",7),$e(10," Tu navegador no soporta reproducci\xf3n de video o el formato del video no es soportado. "),B(),Y(11,"span",8),Kn(12,"safe"),B()()()(),k(13,"div",9),$e(14,"8:27 AM "),B()(),Y(15,"div",10),B()),2&r&&(L("ngClass",i.message.isClient?"row right-row row-current-user-first":"row left-row row-other-user-first"),M(3),L("ngIf",!i.message.isClient),M(6),fh("src",i.message.mediaUrl,sr),M(2),L("innerHTML",Qr(12,4,i.message.text,"html"),im))},dependencies:[Ja,Ri,Mk],styles:["video[_ngcontent-%COMP%]{width:100%;height:auto}"]}),e})(),c0e=(()=>{var t;class e{constructor(r){this.localStorageService=r}ngOnInit(){if(!this.message.commands||!this.message.id)return;const r=this.localStorageService.get();let i=r.commandHistory;i?.find(s=>s.messageId===this.message.id)||(i=[...i||[],{messageId:this.message.id,names:this.message.commands.map(s=>s.name)}],r.commandHistory=i,this.localStorageService.set(r),this.message.commands.forEach(s=>{const o={...s,from:"pluginWeb"};window.postMessage(o,window.location.origin)}))}}return(t=e).\u0275fac=function(r){return new(r||t)(T(gu))},t.\u0275cmp=Hn({type:t,selectors:[["app-commands-message"]],inputs:{message:"message"},decls:0,vars:0,template:function(r,i){}}),e})();function l0e(t,e){if(1&t){const n=Ga();k(0,"button",4),Je("click",function(){Hr(n);const i=ge().$implicit;return zr(ge().selected(i))}),k(1,"span"),$e(2),B()()}if(2&t){const n=ge().$implicit;M(2),or(n.text)}}function u0e(t,e){if(1&t&&(Oo(0),Ae(1,l0e,3,1,"button",3),Fo()),2&t){const n=e.$implicit;M(1),L("ngIf",n.text.trim().length>0)}}let d0e=(()=>{var t;class e{constructor(r){var i=this;this.chatService=r,this.selected=function(){var s=_(function*(o){let a="";o.commands&&o.commands.forEach(d=>{const h={...d,from:"pluginWeb"};window.postMessage(h,window.location.origin)});const c=window.location.href,l=/#page\.url/gm;l.test(o.payload)&&(o.payload=o.payload.replace(l,`${encodeURIComponent(c)}`)),"url"===o.type?(window.open(`${o.payload}`,"new_window"),a=o.text):a=o.payload;const u={type:"text",text:a,isClient:!0};"url"!=o.type&&(yield i.chatService.sendMessage(u))});return function(o){return s.apply(this,arguments)}}()}}return(t=e).\u0275fac=function(r){return new(r||t)(T(Vi))},t.\u0275cmp=Hn({type:t,selectors:[["app-reply-link-message"]],inputs:{message:"message"},decls:3,vars:2,consts:[[3,"message"],[1,"reply-link-container"],[4,"ngFor","ngForOf"],["class","btn reply-link-container__button__link",3,"click",4,"ngIf"],[1,"btn","reply-link-container__button__link",3,"click"]],template:function(r,i){1&r&&(k(0,"app-text-message",0)(1,"div",1),Ae(2,u0e,2,1,"ng-container",2),B()()),2&r&&(L("message",i.message),M(2),L("ngForOf",i.message.quickReply))},dependencies:[r_,Ri,Rk]}),e})();const h0e=["scroll"];function f0e(t,e){1&t&&Y(0,"app-text-message",9),2&t&&L("message",ge().$implicit)}function p0e(t,e){1&t&&Y(0,"app-image-message",9),2&t&&L("message",ge().$implicit)}function g0e(t,e){1&t&&Y(0,"app-file-message",9),2&t&&L("message",ge().$implicit)}function m0e(t,e){1&t&&Y(0,"app-audio-message",9),2&t&&L("message",ge().$implicit)}function _0e(t,e){1&t&&Y(0,"app-video-message",9),2&t&&L("message",ge().$implicit)}function y0e(t,e){1&t&&Y(0,"app-geo-message",9),2&t&&L("message",ge().$implicit)}function v0e(t,e){if(1&t&&Y(0,"app-reply-message",10),2&t){const n=ge(),r=n.$implicit,i=n.index,s=ge();L("message",r)("hidden",i!==s.chatService.messages.length-2)}}function w0e(t,e){1&t&&Y(0,"app-reply-link-message",9),2&t&&L("message",ge().$implicit)}function b0e(t,e){1&t&&Y(0,"app-commands-message",9),2&t&&L("message",ge().$implicit)}function E0e(t,e){if(1&t&&(k(0,"section",6),Ae(1,f0e,1,1,"app-text-message",7),Ae(2,p0e,1,1,"app-image-message",7),Ae(3,g0e,1,1,"app-file-message",7),Ae(4,m0e,1,1,"app-audio-message",7),Ae(5,_0e,1,1,"app-video-message",7),Ae(6,y0e,1,1,"app-geo-message",7),Ae(7,v0e,1,2,"app-reply-message",8),Ae(8,w0e,1,1,"app-reply-link-message",7),Ae(9,b0e,1,1,"app-commands-message",7),B()),2&t){const n=e.$implicit;Sm("id","message",e.index,""),M(1),L("ngIf","text"===n.type),M(1),L("ngIf","file"===n.type&&"image"===n.mediaType),M(1),L("ngIf","file"===n.type&&"file"===n.mediaType),M(1),L("ngIf","file"===n.type&&"audio"===n.mediaType),M(1),L("ngIf","file"===n.type&&"video"===n.mediaType),M(1),L("ngIf","geopoint"===n.type),M(1),L("ngIf","quickReply"===n.type&&(null==n.quickReply?null:n.quickReply.length)>1),M(1),L("ngIf","quickReply"===n.type&&1===(null==n.quickReply?null:n.quickReply.length)),M(1),L("ngIf","commands"===n.type)}}function C0e(t,e){if(1&t&&(k(0,"section",11)(1,"div",12),Y(2,"img",13),B(),k(3,"span"),$e(4),B()()),2&t){const n=ge();let r;M(2),L("src",null!==(r=null==n.chatService||null==n.chatService.pluginWeb?null:n.chatService.pluginWeb.iconUrl)&&void 0!==r?r:"https://www.gravatar.com/avatar/00000000000000000000000000000000.png?s=200&d=mm",sr),M(2),or(n.typing)}}let I0e=(()=>{var t;class e{constructor(r){this.chatService=r,this.plusModalHidden=!0,this.language=this.chatService.pluginWeb.language||"es",this.messageToSend="",this.typing="",this.locale="",this.format=""}ngOnInit(){this.subscription=this.chatService.messagesChanges.subscribe(()=>{this.scrollBottom()}),this.typing=gr[this.language].typing,this.format=gr[this.language].format,this.locale=gr[this.language].locale}ngAfterViewInit(){this.scrollBottom()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}scrollBottom(){const r=this.scroll.nativeElement;r.scrollTop=r.scrollHeight}}return(t=e).\u0275fac=function(r){return new(r||t)(T(Vi))},t.\u0275cmp=Hn({type:t,selectors:[["app-messages"]],viewQuery:function(r,i){if(1&r&&Fm(h0e,5,Gn),2&r){let s;Eh(s=Ch())&&(i.scroll=s.first)}},decls:10,vars:11,consts:[[1,"messages-container",2,"max-height","100%","overflow-y","auto"],["scroll",""],["id","messages",1,"messages"],[1,"conversation-timestamp-header"],[3,"id",4,"ngFor","ngForOf"],["class","writing-wrapper",4,"ngIf"],[3,"id"],[3,"message",4,"ngIf"],[3,"message","hidden",4,"ngIf"],[3,"message"],[3,"message","hidden"],[1,"writing-wrapper"],[1,"msg-avatar"],["alt","'s avatar",3,"src"]],template:function(r,i){1&r&&(k(0,"div")(1,"div",0,1)(3,"div",2)(4,"div",3),$e(5),Kn(6,"date"),B(),Ae(7,E0e,10,10,"section",4),Kn(8,"slice"),Ae(9,C0e,5,2,"section",5),B()()()),2&r&&(M(5),cs(" ",function mL(t,e,n,r,i,s){const o=t+Se,a=x(),c=vl(a,o);return bh(a,o)?pL(a,nr(),e,c.transform,n,r,i,s,c):c.transform(n,r,i,s)}(6,3,i.chatService.initialDate,i.format,i.locale,i.locale)," "),M(2),L("ngForOf",Qr(8,8,i.chatService.messages,1)),M(2),L("ngIf",i.chatService.updatingGreeting))},dependencies:[r_,Ri,Rk,Xbe,Zbe,e0e,r0e,s0e,a0e,c0e,d0e,nU,eU],styles:[".main-card-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;background-color:#12447f;color:#fff}.main-card-header[_ngcontent-%COMP%]   .client-name[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;align-items:center;text-align:center}.intro-pane[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:18px 18px 22px;border-bottom:1px solid #e6e6e6;min-height:90px;-webkit-transform:translateZ(0)}.intro-pane[_ngcontent-%COMP%]   .app-icon[_ngcontent-%COMP%]{float:left;width:50px;height:50px;border-radius:50%}.intro-pane[_ngcontent-%COMP%]   .app-name[_ngcontent-%COMP%]{margin-left:68px;color:#464646;font-size:18px;font-weight:700}.intro-pane[_ngcontent-%COMP%]   .intro-text[_ngcontent-%COMP%]{margin-left:68px;color:#787f8c;font-size:13px;line-height:1.3;margin-top:8px}"]}),e})();const Dp={production:!0,cloudFunctionUrl:"https://us-central1-atomchat-io.cloudfunctions.net/api/webhook",firebase:{apiKey:"AIzaSyD1RgoVeua9agDOpsCAS0hhxaP4DXYPQJM",authDomain:"atomchat-io.firebaseapp.com",databaseURL:"https://atomchat-io.firebaseio.com",projectId:"atomchat-io",storageBucket:"atomchat-io.appspot.com",messagingSenderId:"15674592808",appId:"1:15674592808:web:aa9baa07c124b6fd84af1d"},ipistack:{key:"a1c76168b4b479ada608df39ac4c86b9",baseUrl:"https://api.ipstack.com"}};let T0e=(()=>{var t;class e{constructor(){this.getIPData=_(function*(){try{return yield(yield fetch(`${Dp.ipistack.baseUrl}/check?access_key=${Dp.ipistack.key}`,{method:"GET"})).json()}catch(r){return void console.error("getIPStack- No se pudo obtener el ip",r)}})}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const p5="firebasestorage.googleapis.com",g5="storageBucket";class Rt extends Oi{constructor(e,n){super(Nk(e),`Firebase Storage: ${n} (${Nk(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Rt.prototype)}_codeEquals(e){return Nk(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Nk(t){return"storage/"+t}function Pk(){return new Rt("unknown","An unknown error occurred, please check the error payload for server response.")}function m5(){return new Rt("canceled","User canceled the upload/download.")}function _5(){return new Rt("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Ok(t){return new Rt("invalid-argument",t)}function y5(){return new Rt("app-deleted","The Firebase app was deleted.")}function Ap(t,e){return new Rt("invalid-format","String does not match format '"+t+"': "+e)}function kp(t){throw new Rt("internal-error","Internal error: "+t)}class _r{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=_r.makeFromUrl(e,n)}catch{return new _r(e,"")}if(""===r.path)return r;throw function O0e(t){return new Rt("invalid-default-bucket","Invalid default bucket '"+t+"'.")}(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function l(I){I.path_=decodeURIComponent(I.path)}const d=n.replace(/[.]/g,"\\."),C=[{regex:a,indices:{bucket:1,path:3},postModify:function s(I){"/"===I.path.charAt(I.path.length-1)&&(I.path_=I.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${d}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:l},{regex:new RegExp(`^https?://${n===p5?"(?:storage.googleapis.com|storage.cloud.google.com)":n}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:l}];for(let I=0;I<C.length;I++){const A=C[I],q=A.regex.exec(e);if(q){let ze=q[A.indices.path];ze||(ze=""),r=new _r(q[A.indices.bucket],ze),A.postModify(r);break}}if(null==r)throw function P0e(t){return new Rt("invalid-url","Invalid URL '"+t+"'.")}(e);return r}}class B0e{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function jv(t){return"string"==typeof t||t instanceof String}function v5(t){return Fk()&&t instanceof Blob}function Fk(){return typeof Blob<"u"}function Lk(t,e,n,r){if(r<e)throw Ok(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Ok(`Invalid value for '${t}'. Expected ${n} or less.`)}function bo(t,e,n){let r=e;return null==n&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function w5(t){const e=encodeURIComponent;let n="?";for(const r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n=n.slice(0,-1),n}var ld=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(ld||{});class G0e{constructor(e,n,r,i,s,o,a,c,l,u,d){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,f)=>{this.resolve_=h,this.reject_=f,this.start_()})}start_(){const n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());!function H0e(t){return void 0!==t}(c)?s():s(c)}catch(c){o(c)}else if(null!==a){const c=Pk();c.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,c):c)}else o(i.canceled?this.appDelete_?y5():m5():function N0e(){return new Rt("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?n(0,new Hv(!1,null,!0)):this.backoffId_=function $0e(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return 2===a}let l=!1;function u(...m){l||(l=!0,e.apply(null,m))}function d(m){i=setTimeout(()=>{i=null,t(f,c())},m)}function h(){s&&clearTimeout(s)}function f(m,...v){if(l)return void h();if(m)return h(),void u.call(null,m,...v);if(c()||o)return h(),void u.call(null,m,...v);let C;r<64&&(r*=2),1===a?(a=2,C=0):C=1e3*(r+Math.random()),d(C)}let p=!1;function g(m){p||(p=!0,h(),!l&&(null!==i?(m||(a=2),clearTimeout(i),d(0)):m||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,g(!0)},n),g}((r,i)=>{if(i)return void r(!1,new Hv(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===ld.NO_ERROR,c=s.getStatus();if(!a||this.isRetryStatusCode_(c)){const u=s.getErrorCode()===ld.ABORT;return void r(!1,new Hv(!1,null,u))}const l=-1!==this.successCodes_.indexOf(c);r(!0,new Hv(l,s))})},n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function j0e(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const n=e>=500&&e<600,i=-1!==[408,429].indexOf(e),s=-1!==this.additionalRetryCodes_.indexOf(e);return n||i||s}}class Hv{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Z0e(...t){const e=function J0e(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}if(Fk())return new Blob(t);throw new Rt("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Ui={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Vk{constructor(e,n){this.data=e,this.contentType=n||null}}function E5(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function C5(t,e){switch(t){case Ui.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw Ap(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ui.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw Ap(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=function tEe(t){return atob(t)}(e)}catch{throw Ap(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class I5{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(null===n)throw Ap(Ui.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;null!=r&&(this.base64=function sEe(t,e){return t.length>=e.length&&t.substring(t.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Eo{constructor(e,n){let r=0,i="";v5(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(v5(this.data_)){const i=function eEe(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===i?null:new Eo(i)}{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Eo(r,!0)}}static getBlob(...e){if(Fk()){const n=e.map(r=>r instanceof Eo?r.data_:r);return new Eo(Z0e.apply(null,n))}{const n=e.map(o=>jv(o)?function b5(t,e){switch(t){case Ui.RAW:return new Vk(E5(e));case Ui.BASE64:case Ui.BASE64URL:return new Vk(C5(t,e));case Ui.DATA_URL:return new Vk(function rEe(t){const e=new I5(t);return e.base64?C5(Ui.BASE64,e.rest):function nEe(t){let e;try{e=decodeURIComponent(t)}catch{throw Ap(Ui.DATA_URL,"Malformed data URL.")}return E5(e)}(e.rest)}(e),function iEe(t){return new I5(t).contentType}(e))}throw Pk()}(Ui.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Eo(i,!0)}}uploadData(){return this.data_}}function Uk(t){let e;try{e=JSON.parse(t)}catch{return null}return function W0e(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}function T5(t){const e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function cEe(t,e){return e}class yr{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||cEe}}let zv=null;function Mp(){if(zv)return zv;const t=[];t.push(new yr("bucket")),t.push(new yr("generation")),t.push(new yr("metageneration")),t.push(new yr("name","fullPath",!0));const n=new yr("name");n.xform=function e(s,o){return function lEe(t){return!jv(t)||t.length<2?t:T5(t)}(o)},t.push(n);const i=new yr("size");return i.xform=function r(s,o){return void 0!==o?Number(o):o},t.push(i),t.push(new yr("timeCreated")),t.push(new yr("updated")),t.push(new yr("md5Hash",null,!0)),t.push(new yr("cacheControl",null,!0)),t.push(new yr("contentDisposition",null,!0)),t.push(new yr("contentEncoding",null,!0)),t.push(new yr("contentLanguage",null,!0)),t.push(new yr("contentType",null,!0)),t.push(new yr("metadata","customMetadata",!0)),zv=t,zv}function x5(t,e,n){const r=Uk(e);return null===r?null:function dEe(t,e,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return function uEe(t,e){Object.defineProperty(t,"ref",{get:function n(){const s=new _r(t.bucket,t.fullPath);return e._makeStorageReference(s)}})}(r,t),r}(t,r,n)}function Bk(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class Es{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Cs(t){if(!t)throw Pk()}function Wv(t,e){return function n(r,i){const s=x5(t,i,e);return Cs(null!==s),s}}function ud(t){return function e(n,r){let i;return i=401===n.getStatus()?n.getErrorText().includes("Firebase App Check token is invalid")?function M0e(){return new Rt("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function k0e(){return new Rt("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===n.getStatus()?function A0e(t){return new Rt("quota-exceeded","Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(t.bucket):403===n.getStatus()?function R0e(t){return new Rt("unauthorized","User does not have permission to access '"+t+"'.")}(t.path):r,i.serverResponse=r.serverResponse,i}}function Rp(t){const e=ud(t);return function n(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function D0e(t){return new Rt("object-not-found","Object '"+t+"' does not exist.")}(t.path)),s.serverResponse=i.serverResponse,s}}function M5(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function bEe(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class Gv{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function $k(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Cs(!1)}return Cs(!!n&&-1!==(e||["active"]).indexOf(n)),n}function jk(t){switch(t){case"running":case"pausing":case"canceling":return"running";case"paused":return"paused";case"success":return"success";case"canceled":return"canceled";default:return"error"}}class TEe{constructor(e,n,r){if(function z0e(t){return"function"==typeof t}(e)||null!=n||null!=r)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function dd(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}let P5=null;class xEe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ld.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ld.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ld.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw kp("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw kp("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw kp("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw kp("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw kp("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class SEe extends xEe{initXhr(){this.xhr_.responseType="text"}}function Bi(){return P5?P5():new SEe}class REe{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Mp(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,n)=>{const r=function EEe(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=M5(e,r,i),a={name:o.fullPath},c=bo(s,t.host,t._protocol),u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},d=Bk(o,n),p=new Es(c,"POST",function f(g){let m;$k(g);try{m=g.getResponseHeader("X-Goog-Upload-URL")}catch{Cs(!1)}return Cs(jv(m)),m},t.maxUploadRetryTime);return p.urlParams=a,p.headers=u,p.body=d,p.errorHandler=ud(e),p}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Bi,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=function CEe(t,e,n,r){const c=new Es(n,"POST",function s(l){const u=$k(l,["active","final"]);let d=null;try{d=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Cs(!1)}d||Cs(!1);const h=Number(d);return Cs(!isNaN(h)),new Gv(h,r.size(),"final"===u)},t.maxUploadRetryTime);return c.headers={"X-Goog-Upload-Command":"query"},c.errorHandler=ud(e),c}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Bi,n,r);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,n=new Gv(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=function IEe(t,e,n,r,i,s,o,a){const c=new Gv(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw function L0e(){return new Rt("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const l=c.total-c.current;let u=l;i>0&&(u=Math.min(u,i));const d=c.current,p={"X-Goog-Upload-Command":u===l?"upload, finalize":"upload","X-Goog-Upload-Offset":`${c.current}`},g=r.slice(d,d+u);if(null===g)throw _5();const C=new Es(n,"POST",function m(I,A){const q=$k(I,["active","final"]),Z=c.current+u,ze=r.size();let Nt;return Nt="final"===q?Wv(e,s)(I,A):null,new Gv(Z,ze,"final"===q,Nt)},e.maxUploadRetryTime);return C.headers=p,C.body=g.uploadData(),C.progressCallback=a||null,C.errorHandler=ud(t),C}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(c){return this._error=c,void this._transition("error")}const a=this._ref.storage._makeRequest(o,Bi,i,s);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=function A5(t,e,n){const i=bo(e.fullServerUrl(),t.host,t._protocol),o=t.maxOperationRetryTime,a=new Es(i,"GET",Wv(t,n),o);return a.errorHandler=Rp(e),a}(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Bi,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=function R5(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},c=function a(){let C="";for(let I=0;I<2;I++)C+=Math.random().toString().slice(2);return C}();o["Content-Type"]="multipart/related; boundary="+c;const l=M5(e,r,i),u=Bk(l,n),f=Eo.getBlob("--"+c+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+u+"\r\n--"+c+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",r,"\r\n--"+c+"--");if(null===f)throw _5();const p={name:l.fullPath},g=bo(s,t.host,t._protocol),v=t.maxUploadRetryTime,y=new Es(g,"POST",Wv(t,n),v);return y.urlParams=p,y.headers=o,y.body=f.uploadData(),y.errorHandler=ud(e),y}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Bi,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const n="paused"===this._state;this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=m5(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=jk(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new TEe(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);-1!==n&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(jk(this._state)){case"success":dd(this._resolve.bind(null,this.snapshot))();break;case"canceled":case"error":dd(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(jk(this._state)){case"running":case"paused":e.next&&dd(e.next.bind(e,this.snapshot))();break;case"success":e.complete&&dd(e.complete.bind(e))();break;default:e.error&&dd(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Gc{constructor(e,n){this._service=e,this._location=n instanceof _r?n:_r.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Gc(e,n)}get root(){const e=new _r(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return T5(this._location.path)}get storage(){return this._service}get parent(){const e=function oEe(t){if(0===t.length)return null;const e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;const n=new _r(this._location.bucket,e);return new Gc(this._service,n)}_throwIfRoot(e){if(""===this._location.path)throw function U0e(t){return new Rt("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function BEe(t){t._throwIfRoot("getDownloadURL");const e=function yEe(t,e,n){const i=bo(e.fullServerUrl(),t.host,t._protocol),o=t.maxOperationRetryTime,a=new Es(i,"GET",function mEe(t,e){return function n(r,i){const s=x5(t,i,e);return Cs(null!==s),function hEe(t,e,n,r){const i=Uk(e);if(null===i||!jv(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const d=t.fullPath;return bo("/b/"+o(t.bucket)+"/o/"+o(d),n,r)+w5({alt:"media",token:l})})[0]}(s,i,t.host,t._protocol)}}(t,n),o);return a.errorHandler=Rp(e),a}(t.storage,t._location,Mp());return t.storage.makeRequestWithTokens(e,Bi).then(n=>{if(null===n)throw function V0e(){return new Rt("no-download-url","The given file does not have any download URLs.")}();return n})}function U5(t,e){if(t instanceof zk){const n=t;if(null==n._bucket)throw function F0e(){return new Rt("no-default-bucket","No default bucket found. Did you set the '"+g5+"' property when initializing the app?")}();const r=new Gc(n,n._bucket);return null!=e?U5(r,e):r}return void 0!==e?function V5(t,e){const n=function aEe(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new _r(t._location.bucket,n);return new Gc(t.storage,r)}(t,e):t}function B5(t,e){const n=e?.[g5];return null==n?null:_r.makeFromBucketSpec(n,t)}class zk{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=p5,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?_r.makeFromBucketSpec(i,this._host):B5(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?_r.makeFromBucketSpec(this._url,e):B5(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Lk("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Lk("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return _(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const n=e._authProvider.getImmediate({optional:!0});if(n){const r=yield n.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return _(function*(){const n=e._appCheckProvider.getImmediate({optional:!0});return n?(yield n.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Gc(this,e)}_makeRequest(e,n,r,i){if(this._deleted)return new B0e(y5());{const s=function X0e(t,e,n,r,i,s){const o=w5(t.urlParams),a=t.url+o,c=Object.assign({},t.headers);return function Q0e(t,e){e&&(t["X-Firebase-GMPID"]=e)}(c,e),function q0e(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(c,n),function K0e(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(c,s),function Y0e(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(c,r),new G0e(a,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(e,this._appId,r,i,n,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,n){var r=this;return _(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,n,i,s).getPromise()})()}}const $5="@firebase/storage",H5="storage";function GEe(t,e,n){return function OEe(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new REe(t,new Eo(e),n)}(t=Gt(t),e,n)}function qEe(t){return BEe(t=Gt(t))}function KEe(t,e){return function zEe(t,e){if(e&&function jEe(t){return/^[A-Za-z]+:\/\//.test(t)}(e)){if(t instanceof zk)return function HEe(t,e){return new Gc(t,e)}(t,e);throw Ok("To use ref(service, url), the first argument must be a Storage instance.")}return U5(t,e)}(t=Gt(t),e)}function QEe(t=Jh(),e){return Wo(t=Gt(t),H5).getImmediate({identifier:e})}function YEe(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new zk(n,r,i,e,qo)}!function XEe(){Rn(new un(H5,YEe,"PUBLIC").setMultipleInstances(!0)),Ze($5,"0.9.9",""),Ze($5,"0.9.9","esm2017")}();class qv{constructor(e){return e}}const z5="storage",Wk=new U("angularfire2.storage-instances");function eCe(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new qv(r)}}const tCe={provide:class JEe{constructor(){return rf(z5)}},deps:[[new Ct,Wk]]},nCe={provide:qv,useFactory:function ZEe(t,e){const n=nf(z5,t,e);return n&&new qv(n)},deps:[[new Ct,Wk],Ko]};let rCe=(()=>{class t{constructor(){Ze("angularfire",bu.full,"gcs")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Jt({type:t}),t.\u0275inj=zt({providers:[nCe,tCe]}),t})();function iCe(t,...e){return{ngModule:rCe,providers:[{provide:Wk,useFactory:eCe(t),multi:!0,deps:[Re,Vt,sf,af,[new Ct,dy],[new Ct,uf],...e]}]}}const sCe=On(qEe,!0),oCe=On(QEe,!0),aCe=On(KEe,!0),cCe=On(GEe,!0);let lCe=(()=>{var t;class e{constructor(r){this.storage=r,this.percentChanges$=new bt,this.uploadFileAndGetMetadata=(i,s,o)=>{const a=`${(new Date).getTime()}_${o.name}`.replace(/[, ]+/g,"_").replace(/[/:]+/g,""),c=`/companies/${i}/conversations_plugins_web/${s}/${a}`,l=cCe(aCe(this.storage,c),o);return this.percentChanges$=new bt,{uploadProgress$:this.percentChanges$,downloadUrl$:Ht(this.uploadTaskEvent(l)),imageName:a,path:c}}}uploadTaskEvent(r){var i=this;return new Promise(s=>{r.on("state_changed",o=>{const a=o.bytesTransferred/o.totalBytes*100;console.log("Upload is "+a+"% done"),this.percentChanges$.next(a)},o=>{console.log("Error uploading file: ",o),this.percentChanges$.next(void 0),s(null)},_(function*(){console.log("File uploaded successfully"),i.percentChanges$.next(void 0);const o=yield sCe(r.snapshot.ref);s(o)}))})}}return(t=e).\u0275fac=function(r){return new(r||t)(N(qv))},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const uCe=["imgUpload"],dCe=["fileUpload"];let hCe=(()=>{var t;class e{constructor(r,i,s,o){var a=this;this.storageService=r,this.ipService=i,this.localStorageService=s,this.chatService=o,this.plusModalHiddenChange=new gt,this.fileToUpload=null,this.getSize=()=>this.fileToUpload.size<1024?this.fileToUpload.size+" bytes":this.fileToUpload.size>=1024&&this.fileToUpload.size<1048576?Math.trunc(this.fileToUpload.size/1024)+" kb":Math.trunc(this.fileToUpload.size/1048576)+" mb",this.uploadImage=l=>{this.message={mediaType:"image"},this.imgUpload.nativeElement.click()},this.uploadFile=l=>{this.message={mediaType:"file"},this.fileUpload.nativeElement.click()},this.getCoordinates=function(){var l=_(function*(u){const d=yield a.ipService.getIPData();a.message={type:"geopoint",isClient:!0,location:{latitud:d.latitude,longitud:d.longitude}},a.plusModalHiddenChange.emit(),a.chatService.sendMessage(a.message)});return function(u){return l.apply(this,arguments)}}();const c=this.chatService.pluginWeb.language||"es";this.shareLocation=gr[c].shareLocation,this.uploadDocument=gr[c].uploadDocument,this.uploadPhoto=gr[c].uploadPhoto}handleFileInput(r){var i=this;return _(function*(){i.plusModalHiddenChange.emit(),i.fileToUpload=r.item(0);const s=i.localStorageService.get(),{downloadUrl$:o}=yield i.storageService.uploadFileAndGetMetadata(s.companyId,s.conversationId,i.fileToUpload);i.message.text=i.getSize(),i.message.fileName=i.fileToUpload.name,i.message.type="file",i.message.isClient=!0,i.message.mediaUrl=yield o.toPromise(),i.chatService.sendMessage(i.message)})()}}return(t=e).\u0275fac=function(r){return new(r||t)(T(lCe),T(T0e),T(gu),T(Vi))},t.\u0275cmp=Hn({type:t,selectors:[["app-plus-modal"]],viewQuery:function(r,i){if(1&r&&(Fm(uCe,7,Gn),Fm(dCe,7,Gn)),2&r){let s;Eh(s=Ch())&&(i.imgUpload=s.first),Eh(s=Ch())&&(i.fileUpload=s.first)}},outputs:{plusModalHiddenChange:"plusModalHiddenChange"},decls:26,vars:3,consts:[[1,"upload-enter-done"],[1,"upload-container",2,"position","absolute","bottom","58px","left","7px","border-radius","6px","box-shadow","rgba(51, 51, 51, 0.3) 0px 0px 10px","z-index","2","opacity","100"],[2,"border-radius","6px","overflow","hidden"],[2,"display","flex","align-items","center","justify-content","flex-start","height","45px","max-height","45px","cursor","pointer","font-size","14px","padding","4px 15px","user-select","none","background-color","rgb(255, 255, 255)","border-bottom","1px solid rgb(234, 234, 234)",3,"click"],[2,"margin","5px 9px 4px -1px","padding","5px 2px 2px"],["version","1.1","width","15px","viewBox","0 0 182 182"],["fill","#333333"],["d","M152.3,0H29.7C13.3,0,0,13.3,0,29.7v122.7C0,168.7,13.3,182,29.7,182h122.7c16.4,0,29.7-13.3,29.7-29.7V29.7C182,13.3,168.7,0,152.3,0z M29.7,11h122.7c10.3,0,18.7,8.4,18.7,18.7v101.7c-0.4,0-0.8,0-1.2,0c-3.7,0-7.8,0-10.7,0l-12.1-23.8c-0.9-1.7-2.6-2.9-4.5-3c-1.9-0.1-3.8,0.8-4.9,2.4l-6.2,9l-16.6-26.8c-0.9-1.5-2.6-2.5-4.3-2.6c-1.8-0.1-3.5,0.6-4.6,2l-34.8,43H11V29.7C11,19.4,19.4,11,29.7,11z M152.3,171H29.7c-10.3,0-18.7-8.4-18.7-18.7v-9.8h62.5c1.7,0,3.2-0.7,4.3-2l31.6-39.1l16.9,27.4c1,1.6,2.7,2.6,4.5,2.6c1.8,0,3.6-0.9,4.7-2.4l5.8-8.4l9.5,18.6c1,1.9,2.9,3.1,5.1,3c2.1-0.1,8.9,0,13.9,0c0.4,0,0.9,0,1.3,0v10C171,162.6,162.6,171,152.3,171z"],["d","M61.5,89C76.1,89,88,77.1,88,62.5S76.1,36,61.5,36S35,47.9,35,62.5S46.9,89,61.5,89z M61.5,47C70,47,77,54,77,62.5S70,78,61.5,78S46,71,46,62.5S53,47,61.5,47z"],[2,"margin-left","-1px","margin-right","9px","padding","4px 2px 1px"],["version","1.1","width","15px","viewBox","0 0 182.1 221"],["d","M182.1,68.9c0-0.3,0-0.6-0.1-1c0,0,0-0.1,0-0.1c-0.1-0.3-0.1-0.6-0.2-0.8c0-0.1-0.1-0.2-0.1-0.3 c-0.1-0.2-0.2-0.4-0.3-0.6c0-0.1-0.1-0.2-0.1-0.2c-0.2-0.3-0.4-0.5-0.6-0.8L118.4,1.7c-0.2-0.2-0.5-0.4-0.8-0.6 c-0.1-0.1-0.2-0.1-0.2-0.2c-0.2-0.1-0.4-0.3-0.7-0.4c-0.1,0-0.2-0.1-0.2-0.1c-0.3-0.1-0.6-0.2-0.9-0.3c0,0,0,0-0.1,0 C115.2,0,114.9,0,114.6,0c0,0-0.1,0-0.1,0H29.7C13.3,0,0,13.3,0,29.7v161.6C0,207.6,13.3,221,29.7,221h122.6 c16.3,0,29.7-13.3,29.8-29.6L182.1,68.9C182.1,69,182.1,69,182.1,68.9z M120,19l43.5,44.5h-29.4c-7.8,0-14.2-6.4-14.2-14.2V19z M152.3,210H29.7c-10.3,0-18.7-8.4-18.7-18.7V29.7C11,19.4,19.4,11,29.7,11H109v38.4c0,13.9,11.3,25.2,25.2,25.2h36.9v116.8 C171,201.6,162.6,210,152.3,210z",1,"st0"],[2,"display","flex","align-items","center","justify-content","flex-start","height","45px","max-height","45px","cursor","pointer","font-size","14px","padding","4px 15px","user-select","none","background-color","rgb(255, 255, 255)","border-bottom","0px",3,"click"],[2,"margin-left","-1px","margin-right","9px","padding","5px 2px 2px"],["version","1.1","x","0px","y","0px","width","15px","viewBox","0 0 150.5 182.5"],["fill","#333333","d","M74.6,182.5c-5,0-9.9-2-13.5-5.5c-12.8-13-28.9-30.1-41.1-48C6.6,108.9,0,91.2,0,74.8C0,33.5,33.8,0,75.2,0 s75.2,33.5,75.2,74.8c0.2,34-31.8,68.9-57.6,97c-1.4,1.5-2.8,3-4.2,4.5c-3.6,3.9-8.4,6.1-13.7,6.2C74.9,182.5,74.8,182.5,74.6,182.5 z M75.2,11C39.8,11,11,39.6,11,74.8c0,31.3,29.3,65.3,58,94.5c1.5,1.5,3.6,2.4,5.8,2.3c2.2,0,4.3-1,5.8-2.6c1.4-1.5,2.8-3,4.2-4.5 c24.5-26.6,54.9-59.8,54.7-89.5C139.5,39.6,110.7,11,75.2,11z M75.2,107.6c-19.1,0-34.6-15.4-34.6-34.3S56.2,39,75.2,39 c19.1,0,34.6,15.4,34.6,34.3S94.3,107.6,75.2,107.6z M75.2,50c-13,0-23.6,10.5-23.6,23.3s10.6,23.3,23.6,23.3 c13,0,23.6-10.5,23.6-23.3S88.2,50,75.2,50z",1,"st0"],["type","file","id","file-upload","accept","*/*",2,"display","none",3,"change"],["fileUpload",""],["type","file","id","img-upload","accept","image/*",2,"display","none",3,"change"],["imgUpload",""]],template:function(r,i){1&r&&(k(0,"div")(1,"form",0)(2,"div",1)(3,"div",2)(4,"div",3),Je("click",function(o){return i.uploadImage(o)}),k(5,"div",4),Hs(),k(6,"svg",5)(7,"g",6),Y(8,"path",7)(9,"path",8),B()()(),$e(10),B(),Va(),k(11,"div",3),Je("click",function(o){return i.uploadFile(o)}),k(12,"div",9),Hs(),k(13,"svg",10)(14,"g",6),Y(15,"path",11),B()()(),$e(16),B(),Va(),k(17,"div",12),Je("click",function(o){return i.getCoordinates(o)}),k(18,"div",13),Hs(),k(19,"svg",14),Y(20,"path",15),B()(),$e(21),B()()(),Va(),k(22,"input",16,17),Je("change",function(o){return i.handleFileInput(o.target.files)}),B(),k(24,"input",18,19),Je("change",function(o){return i.handleFileInput(o.target.files)}),B()()()),2&r&&(M(10),cs(" ",i.uploadPhoto," "),M(6),cs(" ",i.uploadDocument," "),M(5),cs(" ",i.shareLocation," "))},dependencies:[Ik,fk,Sp]}),e})();function fCe(t,e){if(1&t){const n=Ga();Hs(),Va(),k(0,"button",33),Je("click",function(){return Hr(n),zr(ge(5).closeChat())}),Hs(),k(1,"svg",34),Y(2,"path",35),B()()}}const pCe=function(t){return{"background-color":t}};function gCe(t,e){if(1&t){const n=Ga();k(0,"div",26)(1,"span",27),$e(2),Kn(3,"uppercase"),B(),k(4,"div",28)(5,"button",29),Je("click",function(){return Hr(n),zr(ge(4).isChatHidden())}),Hs(),k(6,"svg",30),Y(7,"path",31),B()(),Ae(8,fCe,3,0,"button",32),B()()}if(2&t){const n=ge(4);L("ngStyle",eu(5,pCe,null==n.pluginWeb?null:n.pluginWeb.color)),M(2),or(fE(3,3,null==n.pluginWeb?null:n.pluginWeb.name)),M(6),L("ngIf",null==n.pluginWeb?null:n.pluginWeb.isIconCloseShow)}}const mCe=function(t,e){return{appear:t,"button-display":e}};function _Ce(t,e){if(1&t){const n=Ga();k(0,"div",5)(1,"div",6),Ae(2,gCe,9,7,"div",7),Y(3,"div",8)(4,"div"),k(5,"div",9),Y(6,"img",10),k(7,"div",11)(8,"div",12),$e(9),B(),k(10,"div",13),$e(11),B()()(),Y(12,"app-messages",14),k(13,"div",15)(14,"div",16),Je("click",function(){return Hr(n),zr(ge(3).isPlusModalHidden())}),k(15,"label",17),Hs(),k(16,"svg",18),Y(17,"defs"),k(18,"g",19),Y(19,"path",20),B()()()(),Va(),k(20,"form",21)(21,"div",22)(22,"textarea",23),Je("focus",function(){return Hr(n),zr(ge(3).onFocusEvent(!0))})("focusout",function(){return Hr(n),zr(ge(3).onFocusEvent(!1))})("keydown.enter",function(){return Hr(n),zr(ge(3).sendTextMessage())})("ngModelChange",function(i){return Hr(n),zr(ge(3).messageToSend=i)}),$e(23,"                                "),B()()(),k(24,"a",24),Je("click",function(){return Hr(n),zr(ge(3).sendTextMessage())}),$e(25),B()(),k(26,"app-plus-modal",25),Je("plusModalHiddenChange",function(){return Hr(n),zr(ge(3).isPlusModalHidden())}),B(),Y(27,"div"),B()()}if(2&t){const n=ge(3);Vo("close",n.chatHidden),L("ngClass",function uL(t,e,n,r,i){return hL(x(),nr(),t,e,n,r,i)}(14,mCe,!0,!n.pluginWebService.modeApp)),M(2),L("ngIf",!n.pluginWebService.modeApp),M(4),L("src",null==n.pluginWeb?null:n.pluginWeb.iconUrl,sr),M(3),cs(" ",null!=n.pluginWeb&&n.pluginWeb.nameCompany?null==n.pluginWeb?null:n.pluginWeb.nameCompany:null==n.pluginWeb?null:n.pluginWeb.name," "),M(2),or(null==n.pluginWeb?null:n.pluginWeb.description),M(11),L("title",n.sendButtonText)("placeholder",n.placeholder)("ngModel",n.messageToSend),M(2),Vo("active",(null==n.messageToSend?null:n.messageToSend.length)>0),M(1),cs(" ",n.sendButtonText," "),M(1),L("hidden",n.plusModalHidden)}}function yCe(t,e){if(1&t&&(k(0,"div",40),$e(1),B()),2&t){const n=ge(5);M(1),or(n.unreadMessages)}}function vCe(t,e){if(1&t&&(k(0,"div"),Ae(1,yCe,2,1,"div",39),B()),2&t){const n=ge(4);M(1),L("ngIf",n.unreadMessages>0)}}function wCe(t,e){if(1&t){const n=Ga();k(0,"div",36),Je("click",function(){return Hr(n),zr(ge(3).isChatHidden())}),k(1,"div",37),Y(2,"img",38),k(3,"span"),$e(4),Kn(5,"uppercase"),B()(),Ae(6,vCe,2,1,"div",0),B()}if(2&t){const n=ge(3);Vo("messenger-button-shown",n.chatHidden)("messenger-button-vibrate",(null==n.pluginWeb?null:n.pluginWeb.motion)&&n.unreadMessages>0)("messenger-button-hidden",!n.chatHidden),M(2),fh("alt",null==n.pluginWeb?null:n.pluginWeb.name),L("src",null==n.pluginWeb?null:n.pluginWeb.iconUrl,sr),M(1),g2("position:fixed;color:",null==n.pluginWeb?null:n.pluginWeb.color,";font-size:12px;font-weight:700;text-align: center;width: 100%;margin: 65px auto;left: 50%;right: 0;transform: translate(-50%,-0%);white-space: inherit;"),M(1),or(fE(5,13,null==n.pluginWeb?null:n.pluginWeb.name)),M(2),L("ngIf",!(null!=n.pluginWeb&&n.pluginWeb.hideNotifications))}}function bCe(t,e){if(1&t&&(k(0,"div",2)(1,"div"),Ae(2,_Ce,28,17,"div",3),Ae(3,wCe,7,15,"div",4),B()()),2&t){const n=ge(2);M(1),function e2(t){Ai(dJ,as,t,!0)}(n.sizeClass),M(1),L("ngIf",!n.firstTimeChat),M(1),L("ngIf",!n.pluginWebService.modeApp)}}function ECe(t,e){if(1&t&&(Oo(0),Ae(1,bCe,4,5,"div",1),Fo()),2&t){const n=ge();M(1),L("ngIf",n.ready)}}let CCe=(()=>{var t;class e{constructor(r,i,s){var o=this;this.localStorageService=r,this.pluginWebService=i,this.chatService=s,this.unreadMessages=0,this.sizeClass="widget-lg",this.placeholder="",this.messageToSend="",this.sendButtonText="",this.ready=!1,this.chatHidden=!0,this.isChatShow=!0,this.firstTimeChat=!0,this.plusModalHidden=!0,this.sendTextMessage=_(function*(){const a=o.messageToSend;setTimeout(()=>{o.messageToSend=""},20);try{if(a.trim().length>0){const c={text:a,read:!1,type:"text",isClient:!0};yield o.chatService.sendMessage(c)}}catch(c){console.error(c)}}),this.isPlusModalHidden=()=>{this.plusModalHidden=!this.plusModalHidden},this.isChatHidden=()=>{this.chatHidden=!this.chatHidden,this.chatHidden&&this.chatService.updateUnreadMessages(0),this.firstTimeChat=!1},this.detectScreenSize=()=>{if(this.pluginWebService.modeApp)return this.sizeClass="widget-xs";const a=window.innerWidth;this.sizeClass=a<768?"widget-xs":a>=768&&a<992?"widget-sm":a>=992&&a<1200?"widget-md":"widget-lg"}}ngOnInit(){var r=this;return _(function*(){r.pluginWeb=r.localStorageService.get().pluginWeb;const i=r.pluginWeb.language||l8.es;r.placeholder=gr[i].placeholder,r.sendButtonText=gr[i].sendButtonText,r.chatService.messages=[],r.localStorageService.get().conversationId?(r.chatService.clientSentMessage=!0,yield r.chatService.getMessages(),r.chatService.unreadMessages$.subscribe(s=>{r.unreadMessages=s,console.log("UNREAD MESSAGES:",r.unreadMessages)})):yield r.chatService.sendGreetingMessage(),r.chatService.initialDate=r.chatService.currentDate,r.ready=!0,r.pluginWebService.modeApp&&r.isChatHidden(),r.pluginWeb.executionTime&&setTimeout(()=>{r.firstTimeChat&&(r.isChatHidden(),r.firstTimeChat=!1)},1e3*r.pluginWeb.executionTime),window.addEventListener("message",s=>{if(window.location.origin!==s.origin)return;const o=s.data;"clientPage"===o.from&&("sendMessage"===o.name?(r.chatHidden&&r.isChatHidden(),r.chatService.sendMessage({text:o.message,type:"text",isClient:!0})):console.log("DEFAULT -> COMMAND NAME:",o.name))}),r.pluginWebService.fetchPluginWeb().subscribe(s=>{r.isChatShow=s.isChatShow})})()}messageToBeRead(r){var i=this;return _(function*(){const s=r.map(o=>({messageId:o.id,status:Av.read}));s.length>0&&i.pluginWebService.sendStatus(s)})()}messageToBeDelivered(r){var i=this;return _(function*(){const s=r.map(o=>({messageId:o.id,status:Av.delivered}));s.length>0&&i.pluginWebService.sendStatus(s)})()}onFocusEvent(r){r?(this.canSendMessageStatusDelivered&&this.canSendMessageStatusDelivered.unsubscribe(),this.canSendMessageStatus=this.chatService.toReadMessages.pipe(cn(i=>{this.messageToBeRead(i)})).subscribe()):(this.canSendMessageStatus&&this.canSendMessageStatus.unsubscribe(),this.canSendMessageStatusDelivered=this.chatService.toReadMessages.pipe(cn(i=>{this.messageToBeDelivered(i)})).subscribe())}closeChat(){var r=this;return _(function*(){r.isChatShow=!1,r.pluginWebService.closeChat(r.isChatShow)})()}handleKeyboardEvent(r){"Escape"===r.key&&!this.chatHidden&&this.isChatHidden()}onResize(){this.detectScreenSize()}ngAfterViewInit(){this.detectScreenSize()}}return(t=e).\u0275fac=function(r){return new(r||t)(T(gu),T(lk),T(Vi))},t.\u0275cmp=Hn({type:t,selectors:[["app-chat"]],hostBindings:function(r,i){1&r&&Je("keydown",function(o){return i.handleKeyboardEvent(o)},0,DO)("resize",function(o){return i.onResize(o)},!1,SO)},decls:1,vars:1,consts:[[4,"ngIf"],["id","mount",4,"ngIf"],["id","mount"],["id","container",3,"close","ngClass",4,"ngIf"],["id","messenger-button","class","messenger-button","style","width: 100px; height: 58px",3,"messenger-button-shown","messenger-button-vibrate","messenger-button-hidden","click",4,"ngIf"],["id","container",3,"ngClass"],["id","wrapper",1,"branding-color-dark","accent-color-dark","link-color-dark"],["id","header","class","header-wrapper fixed-intro",3,"ngStyle",4,"ngIf"],[1,"notification-container"],[1,"intro-pane","fixed"],["alt","App icon",1,"app-icon",3,"src"],[1,"intro-pane__content"],[1,"app-name"],[1,"intro-text"],["id","conversation",1,"no-intro"],["id","footer",2,"transition-duration","0.3s","transition-timing-function","ease-out","transition-property","color, background-color, border-color, opacity","overflow-y","hidden"],[2,"flex","0 1 34px",3,"click"],[1,"btn","btn-link","image-upload",2,"transition","opacity 0.3s ease-out 0s"],["width","22px","height","22px","viewBox","0 0 26 26","version","1.1"],["id","Graphics-/-Custom-Icons-/-iMessage-/-Close","stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["d","M18.1647143,16.2277143 C18.7032857,16.7662857 18.707,17.6298571 18.1684286,18.1702857 C17.6354286,18.7032857 16.7681429,18.707 16.2277143,18.1665714 L12.9981429,14.9388571 L9.77042857,18.1665714 C9.23,18.7032857 8.36828571,18.707 7.82971429,18.1702857 C7.29485714,17.6335714 7.293,16.77 7.83342857,16.2277143 L11.0611429,13 L7.83342857,9.77228571 C7.29857143,9.23557143 7.293,8.372 7.82971429,7.83157143 C8.36457143,7.29485714 9.22814286,7.293 9.77042857,7.83157143 L12.9981429,11.0592857 L16.2277143,7.83157143 C16.7644286,7.29671429 17.6317143,7.293 18.1684286,7.83157143 C18.7032857,8.36642857 18.707,9.22814286 18.1647143,9.77228571 L14.9388571,13 L18.1647143,16.2277143 Z M13,0 C5.82214286,0 0,5.82214286 0,13 C0,20.1778571 5.82214286,26 13,26 C20.1797143,26 26,20.1778571 26,13 C26,5.82214286 20.1797143,0 13,0 L13,0 Z","id","Close-Icon","fill","#8A8A8F","transition","fill 0.3s ease-out","transform","translate(13.000000, 13.000000) rotate(45.000000) translate(-13.000000, -13.000000) "],["action","#"],[1,"input-container"],["rows","1","name","text",1,"input","message-input","single-line",2,"transition-duration","0.3s","transition-timing-function","ease-out","transition-property","color, background-color, border-color, opacity","resize","none",3,"title","placeholder","ngModel","focus","focusout","keydown.enter","ngModelChange"],[1,"send",2,"transition-duration","0.3s","transition-timing-function","ease-out","transition-property","color, background-color, border-color, opacity",3,"click"],[3,"hidden","plusModalHiddenChange"],["id","header",1,"header-wrapper","fixed-intro",3,"ngStyle"],[1,"title-chat"],[1,"buttons-container"],[1,"close-handle","close-hidden",3,"click"],["xmlns","http://www.w3.org/2000/svg","height","24","viewBox","0 -960 960 960","width","24","fill","#fff"],["d","M200-440v-80h560v80H200Z"],[3,"click",4,"ngIf"],[3,"click"],["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 -960 960 960","width","24px","fill","#fff"],["d","m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"],["id","messenger-button",1,"messenger-button",2,"width","100px","height","58px",3,"click"],[1,"messenger-button-icon"],["width","58","height","58",3,"alt","src"],["class","unread-badge",4,"ngIf"],[1,"unread-badge"]],template:function(r,i){1&r&&Ae(0,ECe,2,1,"ng-container",0),2&r&&L("ngIf",i.isChatShow)},dependencies:[Ja,Ri,JV,Ik,kv,O8,fk,Ck,Sp,I0e,hCe,ZV],styles:["#header[_ngcontent-%COMP%]   .title-chat[_ngcontent-%COMP%]{position:absolute;width:100%;text-align:center}#header[_ngcontent-%COMP%]   .buttons-container[_ngcontent-%COMP%]{position:absolute;right:10px;height:24px}#header[_ngcontent-%COMP%]   .buttons-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;border:none}"]}),e})();function ICe(t,e){1&t&&(Oo(0),Y(1,"app-chat"),Fo())}let TCe=(()=>{var t;class e{constructor(r,i,s){this.localStorageService=r,this.pluginsWebService=i,this.activatedRoute=s,this.ready=!1}ngOnInit(){var r=this;return _(function*(){r.pluginsWebService.modeApp=r.isfullscreen;const i=yield r.pluginsWebService.getById(r.company,r.id);if(!i)throw new Error("Invalid configuration, please check your company and id");let s=r.localStorageService.get();(!i.persistence||!s.userId)&&(r.localStorageService.set({}),s={userId:yield r.pluginsWebService.getUserId(),conversationId:null}),s.companyId=r.company,s.pluginWeb=i,s.referral=r.mapReferralProperties(r.activatedRoute.snapshot.params),s.customerId=r.customerId,s.customerName=r.customerName,s.customerCompanyId=r.customerCompanyId,s.customerCompanyName=r.customerCompanyId,s.customerEmail=r.customerEmail,r.localStorageService.set(s),r.ready=!0;const o=Array.from(document.getElementsByTagName("a")),a=/#page\.url/gm;for(const c of o)if(a.test(c.href)){const l=encodeURIComponent(window.location.href);c.href=c.href.replace(a,`%0a${l}`)}})()}mapReferralProperties(r){return Object.keys(r).reduce((i,s)=>(eae.includes(s)&&(i[s]=r[s]),i),{})}}return(t=e).\u0275fac=function(r){return new(r||t)(T(gu),T(lk),T(rc))},t.\u0275cmp=Hn({type:t,selectors:[["plugin-web"]],inputs:{id:"id",company:"company",isfullscreen:"isfullscreen",customerId:"customerId",customerName:"customerName",customerCompanyId:"customerCompanyId",customerEmail:"customerEmail"},decls:1,vars:1,consts:[[4,"ngIf"]],template:function(r,i){1&r&&Ae(0,ICe,2,0,"ng-container",0),2&r&&L("ngIf",i.ready)},dependencies:[Ri,CCe],styles:['.__react_component_tooltip{border-radius:3px;display:inline-block;font-size:13px;left:-999em;opacity:0;padding:8px 21px;position:fixed;pointer-events:none;transition:opacity .3s ease-out;top:-999em;visibility:hidden;z-index:999}.__react_component_tooltip:after,.__react_component_tooltip:before{content:"";width:0;height:0;position:absolute}.__react_component_tooltip.show{opacity:.9;margin-top:0;margin-left:0;visibility:visible}.__react_component_tooltip.type-dark{color:#fff;background-color:#222}.__react_component_tooltip.type-dark.place-top:after{border-top:6px solid #222}.__react_component_tooltip.type-dark.place-bottom:after{border-bottom:6px solid #222}.__react_component_tooltip.type-dark.place-left:after{border-left:6px solid #222}.__react_component_tooltip.type-dark.place-right:after{border-right:6px solid #222}.__react_component_tooltip.type-dark.border{border:1px solid #fff}.__react_component_tooltip.type-dark.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-dark.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-dark.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-dark.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-success{color:#fff;background-color:#8dc572}.__react_component_tooltip.type-success.place-top:after{border-top:6px solid #8dc572}.__react_component_tooltip.type-success.place-bottom:after{border-bottom:6px solid #8dc572}.__react_component_tooltip.type-success.place-left:after{border-left:6px solid #8dc572}.__react_component_tooltip.type-success.place-right:after{border-right:6px solid #8dc572}.__react_component_tooltip.type-success.border{border:1px solid #fff}.__react_component_tooltip.type-success.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-success.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-success.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-success.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-warning{color:#fff;background-color:#f0ad4e}.__react_component_tooltip.type-warning.place-top:after{border-top:6px solid #f0ad4e}.__react_component_tooltip.type-warning.place-bottom:after{border-bottom:6px solid #f0ad4e}.__react_component_tooltip.type-warning.place-left:after{border-left:6px solid #f0ad4e}.__react_component_tooltip.type-warning.place-right:after{border-right:6px solid #f0ad4e}.__react_component_tooltip.type-warning.border{border:1px solid #fff}.__react_component_tooltip.type-warning.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-warning.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-warning.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-warning.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-error{color:#fff;background-color:#be6464}.__react_component_tooltip.type-error.place-top:after{border-top:6px solid #be6464}.__react_component_tooltip.type-error.place-bottom:after{border-bottom:6px solid #be6464}.__react_component_tooltip.type-error.place-left:after{border-left:6px solid #be6464}.__react_component_tooltip.type-error.place-right:after{border-right:6px solid #be6464}.__react_component_tooltip.type-error.border{border:1px solid #fff}.__react_component_tooltip.type-error.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-error.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-error.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-error.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-info{color:#fff;background-color:#337ab7}.__react_component_tooltip.type-info.place-top:after{border-top:6px solid #337ab7}.__react_component_tooltip.type-info.place-bottom:after{border-bottom:6px solid #337ab7}.__react_component_tooltip.type-info.place-left:after{border-left:6px solid #337ab7}.__react_component_tooltip.type-info.place-right:after{border-right:6px solid #337ab7}.__react_component_tooltip.type-info.border{border:1px solid #fff}.__react_component_tooltip.type-info.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-info.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-info.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-info.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-light{color:#222;background-color:#fff}.__react_component_tooltip.type-light.place-top:after{border-top:6px solid #fff}.__react_component_tooltip.type-light.place-bottom:after{border-bottom:6px solid #fff}.__react_component_tooltip.type-light.place-left:after{border-left:6px solid #fff}.__react_component_tooltip.type-light.place-right:after{border-right:6px solid #fff}.__react_component_tooltip.type-light.border{border:1px solid #222}.__react_component_tooltip.type-light.border.place-top:before{border-top:8px solid #222}.__react_component_tooltip.type-light.border.place-bottom:before{border-bottom:8px solid #222}.__react_component_tooltip.type-light.border.place-left:before{border-left:8px solid #222}.__react_component_tooltip.type-light.border.place-right:before{border-right:8px solid #222}.__react_component_tooltip.place-top{margin-top:-10px}.__react_component_tooltip.place-top:before{border-left:10px solid transparent;border-right:10px solid transparent;bottom:-8px;left:50%;margin-left:-10px}.__react_component_tooltip.place-top:after{border-left:8px solid transparent;border-right:8px solid transparent;bottom:-6px;left:50%;margin-left:-8px}.__react_component_tooltip.place-bottom{margin-top:10px}.__react_component_tooltip.place-bottom:before{border-left:10px solid transparent;border-right:10px solid transparent;top:-8px;left:50%;margin-left:-10px}.__react_component_tooltip.place-bottom:after{border-left:8px solid transparent;border-right:8px solid transparent;top:-6px;left:50%;margin-left:-8px}.__react_component_tooltip.place-left{margin-left:-10px}.__react_component_tooltip.place-left:before{border-top:6px solid transparent;border-bottom:6px solid transparent;right:-8px;top:50%;margin-top:-5px}.__react_component_tooltip.place-left:after{border-top:5px solid transparent;border-bottom:5px solid transparent;right:-6px;top:50%;margin-top:-4px}.__react_component_tooltip.place-right{margin-left:10px}.__react_component_tooltip.place-right:before{border-top:6px solid transparent;border-bottom:6px solid transparent;left:-8px;top:50%;margin-top:-5px}.__react_component_tooltip.place-right:after{border-top:5px solid transparent;border-bottom:5px solid transparent;left:-6px;top:50%;margin-top:-4px}.__react_component_tooltip .multi-line{display:block;padding:2px 0;text-align:center}.sk-three-bounce{height:18px}.sk-three-bounce>div{width:18px;height:18px;background-color:currentColor;border-radius:100%;display:inline-block;animation:sk-bouncedelay 1.4s ease-in-out infinite;animation-fill-mode:both}.sk-three-bounce>div:first-child{animation-delay:-.32s}.sk-three-bounce>div:nth-child(2){animation-delay:-.16s}@keyframes sk-bouncedelay{0%,80%,to{transform:scale(0);-webkit-transform:scale(0)}40%{transform:scale(1);-webkit-transform:scale(1)}}.form-group{margin-bottom:15px}.form-control{display:block;width:100%;height:34px;padding:6px 12px;font-size:14px;line-height:1.42857143;color:#555;background-color:#fff;background-image:none;border:1px solid #ccc;border-radius:4px;box-shadow:inset 0 1px 1px #00000013;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-control:focus{border-color:#66afe9;outline:0;box-shadow:inset 0 1px 1px #00000013,0 0 8px #66afe999}.form-control::-moz-placeholder{color:#999;opacity:1}.form-control:-ms-input-placeholder{color:#999}.form-control::-webkit-input-placeholder{color:#999}.form-control::-ms-expand{border:0;background-color:transparent}.form-control[disabled],.form-control[readonly],fieldset[disabled] .form-control{background-color:#eee;opacity:1}.form-control[disabled],fieldset[disabled] .form-control{cursor:not-allowed}textarea.form-control{height:auto}.has-feedback{position:relative}.has-feedback .form-control{padding-right:42.5px}.form-control-feedback{position:absolute;top:0;right:0;z-index:2;display:block;width:34px;height:34px;line-height:34px;text-align:center;pointer-events:none}.form-group-lg .form-control+.form-control-feedback,.input-group-lg+.form-control-feedback,.input-lg+.form-control-feedback{width:46px;height:46px;line-height:46px}.form-group-sm .form-control+.form-control-feedback,.input-group-sm+.form-control-feedback,.input-sm+.form-control-feedback{width:30px;height:30px;line-height:30px}.has-feedback label~.form-control-feedback{top:25px}.has-feedback label.sr-only~.form-control-feedback{top:0}.help-block{display:block;margin-top:5px;margin-bottom:10px;color:#737373}.input-group{position:relative;display:table;border-collapse:separate}.input-group[class*=col-]{float:none;padding-left:0;padding-right:0}.input-group .form-control{position:relative;z-index:2;float:left;width:100%;margin-bottom:0}.input-group .form-control:focus{z-index:3}.input-group-addon,.input-group-btn,.input-group .form-control{display:table-cell}.input-group-addon:not(:first-child):not(:last-child),.input-group-btn:not(:first-child):not(:last-child),.input-group .form-control:not(:first-child):not(:last-child){border-radius:0}.input-group-addon,.input-group-btn{width:1%;white-space:nowrap;vertical-align:middle}.input-group-addon{padding:6px 12px;font-size:14px;font-weight:400;line-height:1;color:#555;text-align:center;background-color:#eee;border:1px solid #ccc;border-radius:4px}.input-group-addon input[type=checkbox],.input-group-addon input[type=radio]{margin-top:0}.input-group-addon:first-child,.input-group-btn:first-child>.btn,.input-group-btn:first-child>.btn-group>.btn,.input-group-btn:first-child>.dropdown-toggle,.input-group-btn:last-child>.btn-group:not(:last-child)>.btn,.input-group-btn:last-child>.btn:not(:last-child):not(.dropdown-toggle),.input-group .form-control:first-child{border-bottom-right-radius:0;border-top-right-radius:0}.input-group-addon:first-child{border-right:0}.input-group-addon:last-child,.input-group-btn:first-child>.btn-group:not(:first-child)>.btn,.input-group-btn:first-child>.btn:not(:first-child),.input-group-btn:last-child>.btn,.input-group-btn:last-child>.btn-group>.btn,.input-group-btn:last-child>.dropdown-toggle,.input-group .form-control:last-child{border-bottom-left-radius:0;border-top-left-radius:0}.input-group-addon:last-child{border-left:0}.input-group-btn{font-size:0;white-space:nowrap}.input-group-btn,.input-group-btn>.btn{position:relative}.input-group-btn>.btn+.btn{margin-left:-1px}.input-group-btn>.btn:active,.input-group-btn>.btn:focus,.input-group-btn>.btn:hover{z-index:2}.input-group-btn:first-child>.btn,.input-group-btn:first-child>.btn-group{margin-right:-1px}.input-group-btn:last-child>.btn,.input-group-btn:last-child>.btn-group{z-index:2;margin-left:-1px}/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}.sr-only,td,th{padding:0}.sr-only{position:absolute;width:1px;height:1px;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.button-display{transform-origin:bottom right;bottom:20px;z-index:2147483647}.button-display.appear{opacity:0;animation:appear-button-frames .4s cubic-bezier(.62,.28,.23,.99);animation-delay:.2s;animation-fill-mode:both}.button-display.close{animation:close-button-frames .4s cubic-bezier(.62,.28,.23,.99);animation-delay:0s;animation-fill-mode:both}.button-display.init{transform:scale(0);opacity:0}.widget-lg .button-display.init{bottom:-640px}.widget-md .button-display.init{bottom:-480px}.widget-sm .button-display.init{bottom:-420px}@keyframes appear-button-frames{0%{opacity:0;transform:scale(0)}1%{opacity:0;transform:scale(.1)}to{display:block;opacity:1;transform:scale(1)}}@keyframes close-button-frames{0%{opacity:1;transform:scale(1)}99%{opacity:0;transform:scale(.1)}to{opacity:0;transform:scale(0)}}.tab-display{top:0}.noselect{-webkit-user-select:none;user-select:none;-webkit-touch-callout:none;-khtml-user-select:none}.unread-badge{background-color:#e54054;border-radius:100px;color:#fff;font-size:12px;line-height:18px;width:18px;height:18px;text-align:center}#messenger-button .unread-badge{left:0;position:absolute;top:0}#header .unread-badge{position:absolute;top:11px;left:10px}#messenger-button{position:fixed;right:6px;border-radius:50%;z-index:2147483647;cursor:pointer;transform-origin:bottom;bottom:35px;opacity:1;transform:scale(1);display:flex;justify-content:center}#messenger-button.messenger-button-shown{animation:messenger-button-shown-frames .4s cubic-bezier(.62,.28,.23,.99);animation-delay:.2s;animation-fill-mode:both}#messenger-button.messenger-button-vibrate{bottom:50px;animation:vibrate .4s infinite cubic-bezier(.36,.07,.19,.97) both;-webkit-animation:vibrate .4s infinite cubic-bezier(.36,.07,.19,.97) both;-moz-animation:vibrate .4s infinite cubic-bezier(.36,.07,.19,.97) both;-o-animation:vibrate .4s infinite cubic-bezier(.36,.07,.19,.97) both;-ms-animation:vibrate .4s infinite cubic-bezier(.36,.07,.19,.97) both}#messenger-button.messenger-button-hidden{animation:messenger-button-hidden-frames .4s cubic-bezier(.62,.28,.23,.99);animation-delay:0s;animation-fill-mode:both}.widget-xs #messenger-button.messenger-button-hidden{animation:messenger-button-hidden-frames-xs .4s cubic-bezier(.62,.28,.23,.99);animation-delay:0s;animation-fill-mode:both}#messenger-button .messenger-button-icon{box-shadow:0 2px 5px #00000042;border-radius:50%;overflow:hidden;width:58px;height:58px}#messenger-button .messenger-button-icon img{max-width:100%}#messenger-button #default-button-icon{margin-top:33%}@keyframes messenger-button-shown-frames{0%{transform:scale(0);bottom:50px;opacity:0}1%{transform:scale(1);bottom:50px;opacity:0}to{bottom:50px;opacity:1}}@keyframes messenger-button-hidden-frames{0%{bottom:50px;opacity:1;transform:scale(1)}99%{bottom:70px;opacity:0;transform:scale(1)}to{bottom:70px;opacity:0;transform:scale(0)}}@keyframes messenger-button-hidden-frames-xs{0%{bottom:40px;right:14px;opacity:1;transform:scale(1)}99%{bottom:20px;right:14px;opacity:0;transform:scale(1)}to{bottom:20px;right:14px;opacity:0;transform:scale(0)}}.form-group{position:relative}.form-group.has-feedback label+div div:not(.input-group) input{-webkit-box-shadow:0 0 0 1000px #f4f6f8 inset!important}.form-group.has-feedback label+div div input{height:38px;border:1px solid rgba(71,69,123,.12);-webkit-appearance:none;-webkit-box-shadow:0 0 0 1000px #fff inset!important}.form-group.has-feedback label+div div input::placeholder{color:#9ba4b3}.form-group.has-feedback label+div div input:-webkit-autofill{-webkit-text-fill-color:#555!important}.form-group.has-feedback label+div div input[readonly]{cursor:default}.form-group.has-feedback label+div div .btn{display:flex;height:38px;width:38px}.form-group.has-feedback label+div div .btn .btn__submit-arrow-icon{margin:0 -50%}.form-group.has-feedback .form-control-feedback{height:24px;width:24px;right:.5em}.form-group.has-feedback *{line-height:1.42857143}.form-group.has-feedback .help-block{overflow:hidden;color:#e62737;font-size:12px;max-height:0;transition-property:max-height,margin;transition-duration:.3s;transition-timing-function:ease;margin:0}.form-group.has-feedback .help-block.help-block--visible{max-height:2rem;margin:5px 0 10px}.form-group.has-feedback.has-error .form-control{border-color:#f8d2d7;background-color:#fdf0f1;color:#e62737;-webkit-box-shadow:0 0 0 1000px #fdf0f1 inset!important;transition-property:border-color,background-color,color;transition-duration:.15s;transition-timing-function:ease-in-out}.form-group.has-feedback.has-error .form-control:focus{border-color:#ff919a;outline:0;box-shadow:inset 0 1px 1px #00000013,0 0 8px #ff919a99;box-shadow:none;border-right:none}.form-group.has-feedback .input-group{padding:0;display:table}.form-group.has-feedback .form-control-feedback{line-height:34px;color:#5ed29d}.form-group.has-feedback .input-group--validated{position:relative}.form-group.has-feedback .input-group--validated input:-webkit-autofill{-webkit-text-fill-color:#9ba4b3!important}.form-group.has-feedback .input-validation{visibility:hidden;opacity:0;transition:opacity .3s ease-out}.form-group.has-feedback .input-validation.input-validation--validated{visibility:visible;opacity:1}.form-group.has-feedback .input-validation.input-validation--validated img{transform:scale(1)}.form-group.has-feedback .input-validation img{top:15%;transform:scale(0);transition:transform .3s cubic-bezier(.17,.89,.32,1.28)}.form-group:last-child{margin-bottom:0}.form-group label{display:inline-block;max-width:100%;height:auto;padding-bottom:5px}.form-group label+select{height:38px;border:1px solid rgba(71,69,123,.12);box-shadow:none;color:#9ba4b3;-webkit-appearance:none;appearance:none}.form-group label+select::placeholder{color:#9ba4b3}.form-group label+select::-ms-expand{display:none}@-moz-document url-prefix(){.form-group label+select{padding-left:8px}}.form-group label+select:focus{box-shadow:none}.form-group label+select[disabled]{background-color:#f4f6f8;cursor:default}.form-group label+select option{color:#212b35}.form-group label+select option[disabled]{color:#898989}.form-group .select-dropdown-icon{position:absolute;transform:scale(0)}.form-group .select-dropdown-icon.select-dropdown-icon--visible{transform:scale(1)}.form-group .select-dropdown-icon.select-dropdown-icon--select{right:1rem;bottom:1rem}.form-group .select-dropdown-icon.select-dropdown-icon--success{right:.5em;bottom:.5rem;transition:transform .3s cubic-bezier(.17,.89,.32,1.28)}.input-group{padding:5px 0;text-align:left;display:block}.input-group.has-error .input{border-color:#e54054}.input-group.has-error label{color:#e54054}.input-group .input{width:100%}.input-group label{display:block;font-weight:600;font-size:12px;margin-bottom:3px}.input{background-color:#fbfbfb;border-radius:4px;font-family:Poppins,sans-serif;font-size:13px;background-color:#fff;border:1px solid #fff;padding:0}.input:-moz-placeholder,.input:-ms-input-placeholder,.input::-moz-placeholder,.input::-webkit-input-placeholder,.input::placeholder{color:#00aeff;opacity:1}.input:focus{background-color:#fff;color:#212121;outline:0}.btn{display:inline-block;margin-bottom:0;font-weight:400;text-align:center;vertical-align:middle;touch-action:manipulation;cursor:pointer;background-image:none;border:1px solid transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding:6px 12px;font-size:14px;line-height:1.42857143;border-radius:4px;-webkit-user-select:none;user-select:none}.btn.active.focus,.btn.active:focus,.btn.focus,.btn:active.focus,.btn:active:focus,.btn:focus{outline:thin dotted;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}.btn.focus,.btn:focus,.btn:hover{color:#333;outline:0;text-decoration:none;opacity:.8;filter:alpha(opacity=80)}.btn.active,.btn:active{outline:0;background-image:none;box-shadow:inset 0 3px 5px #00000020}.btn.disabled,.btn[disabled],fieldset[disabled] .btn{cursor:not-allowed;opacity:.65;filter:alpha(opacity=65);box-shadow:none}a .btn.disabled,fieldset[disabled] a .btn{pointer-events:none}.btn-primary{color:#fff;background-color:#00aeff;border-color:#00aeff}.btn-primary.focus,.btn-primary:focus{color:#fff;background-color:#008bcc;border-color:#005780}.btn-primary.active,.btn-primary:active,.btn-primary:hover,.open>.dropdown-toggle.btn-primary{color:#fff;background-color:#008bcc;border-color:#0084c2}.btn-primary.active.focus,.btn-primary.active:focus,.btn-primary.active:hover,.btn-primary:active.focus,.btn-primary:active:focus,.btn-primary:active:hover,.open>.dropdown-toggle.btn-primary.focus,.open>.dropdown-toggle.btn-primary:focus,.open>.dropdown-toggle.btn-primary:hover{color:#fff;background-color:#0073a8;border-color:#005780}.btn-primary.active,.btn-primary:active,.open>.dropdown-toggle.btn-primary{background-image:none}.btn-primary.disabled,.btn-primary.disabled.active,.btn-primary.disabled.focus,.btn-primary.disabled:active,.btn-primary.disabled:focus,.btn-primary.disabled:hover,.btn-primary[disabled],.btn-primary[disabled].active,.btn-primary[disabled].focus,.btn-primary[disabled]:active,.btn-primary[disabled]:focus,.btn-primary[disabled]:hover,fieldset[disabled] .btn-primary,fieldset[disabled] .btn-primary.active,fieldset[disabled] .btn-primary.focus,fieldset[disabled] .btn-primary:active,fieldset[disabled] .btn-primary:focus,fieldset[disabled] .btn-primary:hover{background-color:#00aeff;border-color:#00aeff}.btn-primary .badge{color:#00aeff;background-color:#fff}.branding-color-dark .btn-primary{color:#fff}.btn-action-paid{cursor:default;color:#787f8c;background-color:transparent;border-color:#787f8c}.btn-action-paid.focus,.btn-action-paid:focus{color:#787f8c;background-color:transparent;border-color:#3d4148}.btn-action-paid.active,.btn-action-paid:active,.btn-action-paid:hover,.open>.dropdown-toggle.btn-action-paid{color:#787f8c;background-color:transparent;border-color:#5b616b}.btn-action-paid.active.focus,.btn-action-paid.active:focus,.btn-action-paid.active:hover,.btn-action-paid:active.focus,.btn-action-paid:active:focus,.btn-action-paid:active:hover,.open>.dropdown-toggle.btn-action-paid.focus,.open>.dropdown-toggle.btn-action-paid:focus,.open>.dropdown-toggle.btn-action-paid:hover{color:#787f8c;background-color:transparent;border-color:#3d4148}.btn-action-paid.active,.btn-action-paid:active,.open>.dropdown-toggle.btn-action-paid{background-image:none}.btn-action-paid.disabled,.btn-action-paid.disabled.active,.btn-action-paid.disabled.focus,.btn-action-paid.disabled:active,.btn-action-paid.disabled:focus,.btn-action-paid.disabled:hover,.btn-action-paid[disabled],.btn-action-paid[disabled].active,.btn-action-paid[disabled].focus,.btn-action-paid[disabled]:active,.btn-action-paid[disabled]:focus,.btn-action-paid[disabled]:hover,fieldset[disabled] .btn-action-paid,fieldset[disabled] .btn-action-paid.active,fieldset[disabled] .btn-action-paid.focus,fieldset[disabled] .btn-action-paid:active,fieldset[disabled] .btn-action-paid:focus,fieldset[disabled] .btn-action-paid:hover{background-color:transparent;border-color:#787f8c}.btn-action-paid .badge{color:transparent;background-color:#787f8c}.btn-action-paid:active,.btn-action-paid:hover{box-shadow:none;border-color:#787f8c}.btn-action-processing{padding:7px;display:block;cursor:default;border-radius:7px;color:#fff;background-color:#00aeff;border-color:#00aeff}.btn-action-processing.focus,.btn-action-processing:focus{color:#fff;background-color:#008bcc;border-color:#005780}.btn-action-processing.active,.btn-action-processing:active,.btn-action-processing:hover,.open>.dropdown-toggle.btn-action-processing{color:#fff;background-color:#008bcc;border-color:#0084c2}.btn-action-processing.active.focus,.btn-action-processing.active:focus,.btn-action-processing.active:hover,.btn-action-processing:active.focus,.btn-action-processing:active:focus,.btn-action-processing:active:hover,.open>.dropdown-toggle.btn-action-processing.focus,.open>.dropdown-toggle.btn-action-processing:focus,.open>.dropdown-toggle.btn-action-processing:hover{color:#fff;background-color:#0073a8;border-color:#005780}.btn-action-processing.active,.btn-action-processing:active,.open>.dropdown-toggle.btn-action-processing{background-image:none}.btn-action-processing.disabled,.btn-action-processing.disabled.active,.btn-action-processing.disabled.focus,.btn-action-processing.disabled:active,.btn-action-processing.disabled:focus,.btn-action-processing.disabled:hover,.btn-action-processing[disabled],.btn-action-processing[disabled].active,.btn-action-processing[disabled].focus,.btn-action-processing[disabled]:active,.btn-action-processing[disabled]:focus,.btn-action-processing[disabled]:hover,fieldset[disabled] .btn-action-processing,fieldset[disabled] .btn-action-processing.active,fieldset[disabled] .btn-action-processing.focus,fieldset[disabled] .btn-action-processing:active,fieldset[disabled] .btn-action-processing:focus,fieldset[disabled] .btn-action-processing:hover{background-color:#00aeff;border-color:#00aeff}.btn-action-processing .badge{color:#00aeff;background-color:#fff}.btn-action-processing:active,.btn-action-processing:active:hover,.btn-action-processing:hover{box-shadow:none;background-color:#00aeff;border-color:#00aeff}a.btn{text-decoration:none}.btn-link{color:#337ab7;font-weight:400;border-radius:0}.btn-link,.btn-link.active,.btn-link:active,.btn-link[disabled],fieldset[disabled] .btn-link{background-color:transparent;box-shadow:none}.btn-link,.btn-link:active,.btn-link:focus,.btn-link:hover{border-color:transparent}.btn-link:focus,.btn-link:hover{color:#23527c;text-decoration:underline;background-color:transparent}.btn-link[disabled]:focus,.btn-link[disabled]:hover,fieldset[disabled] .btn-link:focus,fieldset[disabled] .btn-link:hover{color:#777;text-decoration:none}.btn-reply-action{color:#fff;background-color:#00aeff;border-color:#00aeff}.btn-reply-action.focus,.btn-reply-action:focus{color:#fff;background-color:#008bcc;border-color:#005780}.btn-reply-action.active,.btn-reply-action:active,.btn-reply-action:hover,.open>.dropdown-toggle.btn-reply-action{color:#fff;background-color:#008bcc;border-color:#0084c2}.btn-reply-action.active.focus,.btn-reply-action.active:focus,.btn-reply-action.active:hover,.btn-reply-action:active.focus,.btn-reply-action:active:focus,.btn-reply-action:active:hover,.open>.dropdown-toggle.btn-reply-action.focus,.open>.dropdown-toggle.btn-reply-action:focus,.open>.dropdown-toggle.btn-reply-action:hover{color:#fff;background-color:#0073a8;border-color:#005780}.btn-reply-action.active,.btn-reply-action:active,.open>.dropdown-toggle.btn-reply-action{background-image:none}.btn-reply-action.disabled,.btn-reply-action.disabled.active,.btn-reply-action.disabled.focus,.btn-reply-action.disabled:active,.btn-reply-action.disabled:focus,.btn-reply-action.disabled:hover,.btn-reply-action[disabled],.btn-reply-action[disabled].active,.btn-reply-action[disabled].focus,.btn-reply-action[disabled]:active,.btn-reply-action[disabled]:focus,.btn-reply-action[disabled]:hover,fieldset[disabled] .btn-reply-action,fieldset[disabled] .btn-reply-action.active,fieldset[disabled] .btn-reply-action.focus,fieldset[disabled] .btn-reply-action:active,fieldset[disabled] .btn-reply-action:focus,fieldset[disabled] .btn-reply-action:hover{background-color:#00aeff;border-color:#00aeff}.btn-reply-action .badge{color:#00aeff;background-color:#fff}.branding-color-dark .btn-reply-action{color:#fff}#header{z-index:10;height:38px;background-color:#f4f4f4;font-size:16px;box-sizing:content-box;color:#333;display:flex;align-items:center}.ie11 #header.fixed-intro{height:56px}.widget-xs #header{border-radius:0}#header .fa{line-height:28px;color:#333;font-size:15px}#header .back-handle{cursor:pointer;display:inline-block;margin-right:8px;height:30px}#header .settings-content{display:inline-block;height:44px;margin-top:-6px;margin-left:-15px}#header .settings-content>div{margin-top:6px;margin-left:15px}#badge{position:absolute;top:11px;left:10px}#settings-handle{cursor:pointer;position:absolute;top:7px;right:32px;width:25px;display:none}.appear #settings-handle{display:block}#settings-header{z-index:10;height:44px;line-height:32px;padding:6px 15px;position:relative;background-color:#f4f4f4;cursor:pointer;font-size:16px;font-weight:400;box-sizing:content-box;color:#333}.ie11 #settings-header.fixed-intro{height:56px}.widget-xs #settings-header{border-radius:0}#settings-header .fa{line-height:28px;color:#333;font-size:15px}#settings-header .close-handle{cursor:pointer;position:absolute;top:6px;right:10px}#settings-header .back-handle{cursor:pointer;display:inline-block;margin-right:8px;height:30px}#settings-header .close-handle .fa{font-size:17px}#settings-header .settings-content{display:inline-block;height:44px;margin-top:-6px;margin-left:-15px}#settings-header .settings-content>div{margin-top:6px;margin-left:15px}.branding-color-dark #header,.branding-color-dark #header .fa,.branding-color-dark #settings-header,.branding-color-dark #settings-header .fa{color:#fff}.notification-container{box-shadow:0 1px 3px #0000001a;position:absolute;width:100%;z-index:1}.notification-container .notification{overflow:hidden;width:100%;border-top:1px solid rgba(0,0,0,.1);background-color:#fff}.notification-container .notification p{margin:18px}.notification-container .notification p a{color:#00aeff}.notification-container .notification p .notification-close{font-size:20px;font-weight:600;position:absolute;top:0;right:10px;display:block;width:22px;height:32px;padding-left:10px;text-decoration:none;color:gray}.notification-container .notification.notification-error{margin-top:44px;background-color:#e54054;color:#fff}.notification-container .notification.notification-error .notification-close{color:#fff}.notification-container .notification-enter{height:0}.notification-container .notification-enter-active{transition:height .5s;height:56px}.notification-container .notification-exit{height:56px}.notification-container .notification-exit-active{transition:height .5s;height:0}.accent-color-light #conversation .right-row .msg,.accent-color-light #conversation .right-row .msg-image,.accent-color-light #conversation .right-row .msg-image a.link,.accent-color-light #conversation .right-row .msg-image a.link:visited,.accent-color-light #conversation .right-row .msg a.link,.accent-color-light #conversation .right-row .msg a.link:visited{color:#424242}.accent-color-dark #conversation .right-row .msg,.accent-color-dark #conversation .right-row .msg-image,.accent-color-dark #conversation .right-row .msg-image a.link,.accent-color-dark #conversation .right-row .msg-image a.link:visited,.accent-color-dark #conversation .right-row .msg a.link,.accent-color-dark #conversation .right-row .msg a.link:visited{color:#fff}.link-color-light #conversation .left-row .btn{color:#424242}.writing-wrapper{display:flex;align-items:flex-end;margin-bottom:7px}.writing-wrapper span{margin-left:1px;margin-bottom:4px}.msg-avatar{width:31px;height:31px;margin-right:5px;margin-left:9px;opacity:1}.msg-avatar img{display:inline-block;width:31px;height:31px;border-radius:50%}.msg-avatar.msg-avatar-img{margin-bottom:0}.msg-avatar.msg-avatar-hidden{opacity:0}.msg-avatar-placeholder{padding-right:45px;display:inline-block}.message-status-indicator,.retry{font-weight:400;color:#b2b2b2;margin-top:5px}.message-status-indicator .time,.retry .time{font-size:12px}.left-row .message-status-indicator,.left-row .retry{margin-left:45px}.right-row .message-status-indicator,.right-row .retry{text-align:right}.intro-pane{background-color:#f8f9fa;padding:10px;display:flex;align-items:center;gap:10px}.ie11 .intro-pane.fixed{min-height:inherit;padding-bottom:32px}.intro-pane .app-name{font-size:16px}.intro-pane .intro-text{color:#787f8c;font-size:13px}.intro-pane .app-icon{float:left;width:50px;height:50px;border-radius:50%}.intro-pane .available-channels{margin-top:22px;text-align:center;color:#787f8c}.intro-pane .available-channels .channel-icon{cursor:pointer;margin-right:13px}.intro-pane .available-channels .channel-icon:last-child{margin-right:0}.reply-link-container{text-align:center;position:relative;width:100%;padding-bottom:10px;margin-right:10px}.reply-link-container :hover{color:#fff}.reply-link-container__button__link{width:80%;background-color:#00aeff;padding:3px 7px 4px;border-radius:7px;line-height:20px;display:inline-block;margin-left:5px;color:#fff;margin-bottom:5px;max-width:100%;overflow:auto;white-space:normal}.reply-link-container__button__link :hover{color:#fff}.reply-container{text-align:right;position:relative;padding-bottom:10px;margin-right:10px}.reply-container .btn-reply-action{padding:3px 7px 4px;border-radius:7px;border:1px solid #00aeff;line-height:20px;display:inline-block;margin-left:5px;color:#424242;margin-bottom:5px;max-width:100%;overflow:auto;white-space:normal}.reply-container .btn-reply-action .fading-circle{float:left;vertical-align:bottom;margin-right:5px;top:2.5px}.reply-container .btn-reply-action span{display:block}.reply-container .btn-reply-action span .location-icon,.reply-container .btn-reply-action span .reply-action-icon{width:20px;height:20px;vertical-align:bottom;margin-right:5px}.typing-indicator-container{display:block;clear:both;padding-top:2px;padding-bottom:10px;margin-left:-100px;opacity:.1;transition:margin-left .25s cubic-bezier(.55,0,.1,1) .3s,opacity .25s cubic-bezier(.55,0,.1,1) .3s}.typing-indicator-container.fade-in{margin-left:0;opacity:1}.typing-indicator-container .typing-indicator{clear:both;background-color:#f4f4f4;width:auto;height:35px;border-radius:2px 14px 14px;padding:14px;display:inline-block;position:relative;animation:bulge 2s ease-out infinite;vertical-align:middle}.typing-indicator-container .typing-indicator.typing-indicator-first{border-top-left-radius:14px}.typing-indicator-container .typing-indicator span{height:8px;width:8px;float:left;margin:0 2px;background-color:#787f8c;display:block;border-radius:50%;opacity:.4}.typing-indicator-container .typing-indicator span:first-of-type{animation:blink 1s .3333s infinite}.typing-indicator-container .typing-indicator span:nth-of-type(2){animation:blink 1s .6666s infinite}.typing-indicator-container .typing-indicator span:nth-of-type(3){animation:blink 1s .9999s infinite}.typing-indicator-container .typing-indicator-avatar{width:31px;height:31px;margin-right:5px;margin-left:9px;opacity:1;margin-bottom:0;vertical-align:middle}.typing-indicator-container .typing-indicator-avatar img{display:inline-block;width:31px;height:31px;border-radius:50%}.typing-indicator-container .typing-indicator-avatar.msg-avatar-img{margin-bottom:0}.typing-indicator-container .typing-indicator-avatar.msg-avatar-hidden{opacity:0}.typing-indicator-container .typing-indicator-avatar-placeholder{padding-right:45px;display:inline-block}@keyframes blink{50%{opacity:1}}@keyframes bulge{0%{transform:scale(1)}50%{transform:scale(1.05)}}#footer{position:relative;width:100%;bottom:0;left:0;border:none;box-shadow:0 -1px 3px #0000001a;background-color:#fff;z-index:1;display:flex;-webkit-overflow-scrolling:touch;overflow-y:scroll}#footer .image-upload{height:46px;width:46px;display:inline-block;padding:10px;font-size:14px;line-height:14px}.ie11 #footer .image-upload{width:36px}#footer input[type=file]{position:fixed;top:-1000px}#footer form{flex:1;-ms-flex:1;display:inline-block}#footer .input-container{padding:5px 0;display:block;overflow:hidden}.ie11 #footer .input-container{margin-left:10px}#footer .input-container.no-upload{padding:5px 0 5px 9px}#footer .input-container .message-input{width:100%;-webkit-appearance:none;overflow:hidden;overflow-y:scroll;padding-right:17px;line-height:18px}#footer .input-container .message-input.single-line{margin-top:7px}#footer .input-container .message-input.scrollable{padding-right:0}#footer .input-container .message-input::-ms-clear{display:none}#footer .input-container .message-input:-ms-input-placeholder{color:#b2b2b2}#footer .send{margin-top:1px;color:#b2b2b2;font-weight:600;position:relative;height:45px;line-height:42px;text-decoration:none;padding:0 10px;cursor:pointer;display:inline-block;-webkit-user-select:none;user-select:none}#footer .send.active{color:#00aeff}#footer .send.active:hover{opacity:.8;filter:alpha(opacity=80)}.settings{box-sizing:border-box;border-top:1px solid rgba(0,0,0,.1);position:absolute;inset:44px 0 0;z-index:2;background-color:#fff;overflow:hidden;opacity:1;font-size:12px;color:#787f8c}.settings .settings-wrapper{padding:30px 40px;box-sizing:border-box}.settings .settings-wrapper .settings-header{font-weight:700;font-size:15px;color:#464646;margin-bottom:15px}.settings .settings-wrapper .settings-description{font-size:13px}.settings.settings-enter{width:0}.settings.settings-enter-active{transition:width .25s;width:100%}.settings.settings-exit{width:100%}.settings.settings-exit-active{transition:width .25s;width:0}.settings .channels{margin-top:30px}.settings .channels .channel-item{cursor:pointer}.settings .channels .channel-item.channel-item-linked .channel-item-right{color:#00aeff;text-decoration:underline}.settings .channels .channel-item:first-child .channel-item-name{border-top:1px solid #efefef}.settings .channels .channel-item .channel-item-header{position:relative}.settings .channels .channel-item .channel-item-header .channel-item-icon{width:26px;position:absolute;display:inline-block;vertical-align:middle;top:9px}.settings .channels .channel-item .channel-item-header .channel-item-content{display:inline-block;margin-left:38px;border-bottom:1px solid #efefef;width:calc(100% - 38px)}.settings .channels .channel-item .channel-item-header .channel-item-content .channel-item-name{font-size:13px;color:#464646;line-height:43px}.settings .channels .channel-item .channel-item-header .channel-item-content .channel-item-connected-as{margin-bottom:10px;margin-top:-10px;font-size:10px}.settings .channels .channel-item .channel-item-header .channel-item-right{position:absolute;right:0;height:45px;line-height:45px;display:inline-block}.settings .channels .channel-item .channel-item-header .channel-item-right i.fa{font: 12px/45px FontAwesome-WebMessenger;color:#787f8c;font-size:13px}.flag{background-image:url(https://cdn.smooch.io/fb50b1cb8955e572a69f296d640fd3fd.png);background-size:1024px 192px;width:32px;height:24px}.ad{background-position:0 0}.ae{background-position:-32px 0}.af{background-position:-64px 0}.ag{background-position:-96px 0}.ai{background-position:-128px 0}.al{background-position:-160px 0}.am{background-position:-192px 0}.ao{background-position:-224px 0}.aq{background-position:-256px 0}.ar{background-position:-288px 0}.as{background-position:-320px 0}.at{background-position:-352px 0}.au{background-position:-384px 0}.aw{background-position:-416px 0}.ax{background-position:-448px 0}.az{background-position:-480px 0}.ba{background-position:-512px 0}.bb{background-position:-544px 0}.bd{background-position:-576px 0}.be{background-position:-608px 0}.bf{background-position:-640px 0}.bg{background-position:-672px 0}.bh{background-position:-704px 0}.bi{background-position:-736px 0}.bj{background-position:-768px 0}.bl{background-position:-800px 0}.bm{background-position:-832px 0}.bn{background-position:-864px 0}.bo{background-position:-896px 0}.bq{background-position:-928px 0}.br{background-position:-960px 0}.bs{background-position:-992px 0}.bt{background-position:0 -24px}.bv{background-position:-32px -24px}.bw{background-position:-64px -24px}.by{background-position:-96px -24px}.bz{background-position:-128px -24px}.ca{background-position:-160px -24px}.cc{background-position:-192px -24px}.cd{background-position:-224px -24px}.cf{background-position:-256px -24px}.cg{background-position:-288px -24px}.ch{background-position:-320px -24px}.ci{background-position:-352px -24px}.ck{background-position:-384px -24px}.cl{background-position:-416px -24px}.cm{background-position:-448px -24px}.cn{background-position:-480px -24px}.co{background-position:-512px -24px}.cr{background-position:-544px -24px}.cu{background-position:-576px -24px}.cv{background-position:-608px -24px}.cw{background-position:-640px -24px}.cx{background-position:-672px -24px}.cy{background-position:-704px -24px}.cz{background-position:-736px -24px}.de{background-position:-768px -24px}.dj{background-position:-800px -24px}.dk{background-position:-832px -24px}.dm{background-position:-864px -24px}.do{background-position:-896px -24px}.dz{background-position:-928px -24px}.ec{background-position:-960px -24px}.ee{background-position:-992px -24px}.eg{background-position:0 -48px}.eh{background-position:-32px -48px}.er{background-position:-64px -48px}.es{background-position:-96px -48px}.et{background-position:-128px -48px}.eu{background-position:-160px -48px}.fi{background-position:-192px -48px}.fj{background-position:-224px -48px}.fk{background-position:-256px -48px}.fm{background-position:-288px -48px}.fo{background-position:-320px -48px}.fr{background-position:-352px -48px}.ga{background-position:-384px -48px}.gb-eng{background-position:-416px -48px}.gb-nir{background-position:-448px -48px}.gb-sct{background-position:-480px -48px}.gb-wls{background-position:-512px -48px}.gb{background-position:-544px -48px}.gd{background-position:-576px -48px}.ge{background-position:-608px -48px}.gf{background-position:-640px -48px}.gg{background-position:-672px -48px}.gh{background-position:-704px -48px}.gi{background-position:-736px -48px}.gl{background-position:-768px -48px}.gm{background-position:-800px -48px}.gn{background-position:-832px -48px}.gp{background-position:-864px -48px}.gq{background-position:-896px -48px}.gr{background-position:-928px -48px}.gs{background-position:-960px -48px}.gt{background-position:-992px -48px}.gu{background-position:0 -72px}.gw{background-position:-32px -72px}.gy{background-position:-64px -72px}.hk{background-position:-96px -72px}.hm{background-position:-128px -72px}.hn{background-position:-160px -72px}.hr{background-position:-192px -72px}.ht{background-position:-224px -72px}.hu{background-position:-256px -72px}.id{background-position:-288px -72px}.ie{background-position:-320px -72px}.il{background-position:-352px -72px}.im{background-position:-384px -72px}.in{background-position:-416px -72px}.io{background-position:-448px -72px}.iq{background-position:-480px -72px}.ir{background-position:-512px -72px}.is{background-position:-544px -72px}.it{background-position:-576px -72px}.je{background-position:-608px -72px}.jm{background-position:-640px -72px}.jo{background-position:-672px -72px}.jp{background-position:-704px -72px}.ke{background-position:-736px -72px}.kg{background-position:-768px -72px}.kh{background-position:-800px -72px}.ki{background-position:-832px -72px}.km{background-position:-864px -72px}.kn{background-position:-896px -72px}.kp{background-position:-928px -72px}.kr{background-position:-960px -72px}.kw{background-position:-992px -72px}.ky{background-position:0 -96px}.kz{background-position:-32px -96px}.la{background-position:-64px -96px}.lb{background-position:-96px -96px}.lc{background-position:-128px -96px}.li{background-position:-160px -96px}.lk{background-position:-192px -96px}.lr{background-position:-224px -96px}.ls{background-position:-256px -96px}.lt{background-position:-288px -96px}.lu{background-position:-320px -96px}.lv{background-position:-352px -96px}.ly{background-position:-384px -96px}.ma{background-position:-416px -96px}.mc{background-position:-448px -96px}.md{background-position:-480px -96px}.me{background-position:-512px -96px}.mf{background-position:-544px -96px}.mg{background-position:-576px -96px}.mh{background-position:-608px -96px}.mk{background-position:-640px -96px}.ml{background-position:-672px -96px}.mm{background-position:-704px -96px}.mn{background-position:-736px -96px}.mo{background-position:-768px -96px}.mp{background-position:-800px -96px}.mq{background-position:-832px -96px}.mr{background-position:-864px -96px}.ms{background-position:-896px -96px}.mt{background-position:-928px -96px}.mu{background-position:-960px -96px}.mv{background-position:-992px -96px}.mw{background-position:0 -120px}.mx{background-position:-32px -120px}.my{background-position:-64px -120px}.mz{background-position:-96px -120px}.na{background-position:-128px -120px}.nc{background-position:-160px -120px}.ne{background-position:-192px -120px}.nf{background-position:-224px -120px}.ng{background-position:-256px -120px}.ni{background-position:-288px -120px}.nl{background-position:-320px -120px}.no{background-position:-352px -120px}.np{background-position:-384px -120px}.nr{background-position:-416px -120px}.nu{background-position:-448px -120px}.nz{background-position:-480px -120px}.om{background-position:-512px -120px}.pa{background-position:-544px -120px}.pe{background-position:-576px -120px}.pf{background-position:-608px -120px}.pg{background-position:-640px -120px}.ph{background-position:-672px -120px}.pk{background-position:-704px -120px}.pl{background-position:-736px -120px}.pm{background-position:-768px -120px}.pn{background-position:-800px -120px}.pr{background-position:-832px -120px}.ps{background-position:-864px -120px}.pt{background-position:-896px -120px}.pw{background-position:-928px -120px}.py{background-position:-960px -120px}.qa{background-position:-992px -120px}.re{background-position:0 -144px}.ro{background-position:-32px -144px}.rs{background-position:-64px -144px}.ru{background-position:-96px -144px}.rw{background-position:-128px -144px}.sa{background-position:-160px -144px}.sb{background-position:-192px -144px}.sc{background-position:-224px -144px}.sd{background-position:-256px -144px}.se{background-position:-288px -144px}.sg{background-position:-320px -144px}.sh{background-position:-352px -144px}.si{background-position:-384px -144px}.sj{background-position:-416px -144px}.sk{background-position:-448px -144px}.sl{background-position:-480px -144px}.sm{background-position:-512px -144px}.sn{background-position:-544px -144px}.so{background-position:-576px -144px}.sr{background-position:-608px -144px}.ss{background-position:-640px -144px}.st{background-position:-672px -144px}.sv{background-position:-704px -144px}.sx{background-position:-736px -144px}.sy{background-position:-768px -144px}.sz{background-position:-800px -144px}.tc{background-position:-832px -144px}.td{background-position:-864px -144px}.tf{background-position:-896px -144px}.tg{background-position:-928px -144px}.th{background-position:-960px -144px}.tj{background-position:-992px -144px}.tk{background-position:0 -168px}.tl{background-position:-32px -168px}.tm{background-position:-64px -168px}.tn{background-position:-96px -168px}.to{background-position:-128px -168px}.tr{background-position:-160px -168px}.tt{background-position:-192px -168px}.tv{background-position:-224px -168px}.tw{background-position:-256px -168px}.tz{background-position:-288px -168px}.ua{background-position:-320px -168px}.ug{background-position:-352px -168px}.um{background-position:-384px -168px}.un{background-position:-416px -168px}.us{background-position:-448px -168px}.uy{background-position:-480px -168px}.uz{background-position:-512px -168px}.va{background-position:-544px -168px}.vc{background-position:-576px -168px}.ve{background-position:-608px -168px}.vg{background-position:-640px -168px}.vi{background-position:-672px -168px}.vn{background-position:-704px -168px}.vu{background-position:-736px -168px}.wf{background-position:-768px -168px}.ye{background-position:-800px -168px}.ws{background-position:-832px -168px}.yt{background-position:-864px -168px}.za{background-position:-896px -168px}.zm{background-position:-928px -168px}.zw{background-position:-960px -168px}.zz{background-position:-992px -168px}.react-tel-input{position:relative;margin:auto}.widget-lg .react-tel-input{width:330px}.widget-md .react-tel-input{width:270px}.widget-sm .react-tel-input{width:250px}.widget-xs .react-tel-input{width:240px}.react-tel-input *{box-sizing:border-box;-moz-box-sizing:border-box}.react-tel-input .hide{display:none}.react-tel-input .v-hide{visibility:hidden}.react-tel-input input[type=tel],.react-tel-input input[type=text]{position:relative;z-index:0;margin-top:0!important;margin-bottom:0!important;padding-left:62px;background:#fff;border:none;border-bottom:1px solid #cacaca;border-radius:0;box-shadow:none;line-height:25px;height:39px;width:100%}.react-tel-input input[type=tel]:focus,.react-tel-input input[type=text]:focus{border-color:#42bdff #42bdff #42bdff #cacaca}.react-tel-input input[type=tel].invalid-number .react-tel-input input[type=tel]:not(.empty),.react-tel-input input[type=tel].invalid-number .react-tel-input input[type=text]:not(.empty),.react-tel-input input[type=text].invalid-number .react-tel-input input[type=tel]:not(.empty),.react-tel-input input[type=text].invalid-number .react-tel-input input[type=text]:not(.empty){bottom:1px;left:-1px;background-color:#faf0f0;border:1px solid #d79f9f;border-left-color:#cacaca}.react-tel-input input[type=tel].invalid-number .react-tel-input input[type=tel]:not(.empty):focus,.react-tel-input input[type=tel].invalid-number .react-tel-input input[type=text]:not(.empty):focus,.react-tel-input input[type=text].invalid-number .react-tel-input input[type=tel]:not(.empty):focus,.react-tel-input input[type=text].invalid-number .react-tel-input input[type=text]:not(.empty):focus{border:1px solid #d79f9f;border-left-color:#cacaca;background-color:#faf0f0}.react-tel-input .flag-dropdown{position:absolute;top:0;bottom:0;padding:0}.react-tel-input .flag-dropdown.open-dropdown{border-bottom:0;border-radius:3px 0 0}.react-tel-input .flag-dropdown.open-dropdown .selected-flag{border-radius:3px 0 0}.react-tel-input .flag-dropdown:hover{cursor:pointer}.react-tel-input input[disabled]+.flag-dropdown:hover{cursor:default}.react-tel-input input[disabled]+.flag-dropdown:hover .selected-flag{background-color:transparent}.react-tel-input .selected-flag{width:60px;height:39px;margin-top:-1px;padding-left:8px;margin-left:-1px}.react-tel-input .selected-flag .flag{position:absolute;margin-top:7.5px}.react-tel-input .selected-flag .arrow{position:relative;top:9px;left:37px;width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:6px solid #555}.react-tel-input .selected-flag .arrow.up{border-top:none;border-bottom:6px solid #555}.react-tel-input .country-list{list-style:none;position:absolute;z-index:2;padding:0;margin:-1px 0 0;box-shadow:1px 1px 4px #0003;background-color:#fff;border:1px solid #ccc;overflow-y:scroll;border-radius:3px;top:43px}.widget-lg .react-tel-input .country-list{width:330px}.widget-md .react-tel-input .country-list{width:270px}.widget-sm .react-tel-input .country-list{width:250px}.widget-lg .react-tel-input .country-list{max-height:200px}.widget-md .react-tel-input .country-list{max-height:130px}.widget-sm .react-tel-input .country-list{max-height:90px}.widget-xs .react-tel-input .country-list{width:240px}.widget-embedded .react-tel-input .country-list{max-height:130px}.react-tel-input .country-list .country{padding:5px 10px;text-align:left;line-height:22px}.react-tel-input .country-list .country .dial-code{color:#999}.react-tel-input .country-list .country:hover{background-color:#e8f7fe}.react-tel-input .country-list .country.highlight{background-color:#c7e2f1}.react-tel-input .country-list .flag{float:left;display:inline-block;margin-right:6px}.react-tel-input .country-list .country-name{margin-right:6px}.channel{box-sizing:border-box;border-top:1px solid rgba(0,0,0,.1);position:absolute;top:0;padding-top:44px;width:100%;height:100%;z-index:3;background-color:#fff;overflow:hidden;opacity:1;text-align:center;line-height:1.5;font-size:14px;display:flex}.channel.channel-visible{width:100%}.channel.channel-hidden,.channel.channel-visible{transition:width .25s}.channel.channel-hidden{width:0}.channel .content-wrapper{padding:30px}@media (max-height: 400px){.widget-xs .channel .channel-header .channel-icon,.widget-xs .channel .channel-header .channel-name{display:none}}.channel .channel-header .channel-icon{margin-bottom:40px;height:65px}.widget-sm .channel .channel-header .channel-icon{margin-bottom:20px}.channel .channel-header .channel-name{font-size:18px;color:#464646;font-weight:600;margin-bottom:10px}.channel .channel-header .channel-description{margin-bottom:20px;color:#787f8c}.channel .channel-header .channel-description span{white-space:pre-line}.channel .channel-content a,.channel .channel-content a:visited{color:#00aeff}.channel .channel-content a.error-link,.channel .channel-content a:visited.error-link{color:#e54054;cursor:pointer}.channel .channel-content .channel-content-value{font-weight:600;color:#464646}.channel .channel-content .btn{width:150px;border-radius:20px}.channel .fb-button-wrapper{text-align:left;transform:translate(-76px);margin-left:50%}.sms-linking .phone-number{padding-right:10px;padding-left:10px}.sms-linking .warning-message{font-size:13px;color:red}.sms-linking a{font-size:smaller;text-decoration:underline;float:right;padding-right:3px;cursor:pointer}.sms-linking .btn{margin-top:25px;text-align:center;border:0}.widget-sm .sms-linking .btn{margin-top:10px}.sms-linking.btn{margin-top:25px}.sms-linking.pending-state{border-bottom:1px solid #e4e4e4;text-align:left;padding-left:5px}.sms-linking.pending-state .phone-number{color:#a9a9a9}.sms-linking.linked-state{border-bottom:1px solid #e4e4e4;text-align:left;padding-left:5px}.email-linking .email-input{border:1px solid #f4f4f4;padding:12px 12px 13px;margin-bottom:15px}.email-linking .email-input:focus{padding-bottom:12px;border-bottom-width:2px}.email-linking .btn{padding:5px 12px;font-size:14px;line-height:1.42857143;border-radius:4px}.email-linking .cancel-link{font-size:smaller;text-decoration:underline;cursor:pointer}.whatsapp-linking .device-title{color:#212b35a6;font-size:12px;font-weight:400;height:16px;letter-spacing:-.18px}.upload-enter{opacity:0}.upload-enter-active{opacity:1;transition:opacity .4s}.upload-exit{opacity:1}.upload-exit-active{opacity:0;transition:opacity .4s}.upload-container:after{position:absolute;bottom:-10px;left:9px;box-sizing:border-box;width:0;height:0;content:"";transform:rotate(-45deg);transform-origin:0 0;border-color:transparent transparent #fff #fff;border-style:solid;border-width:5px;box-shadow:-4px 4px 10px #3333331a}.container-message{padding-bottom:0;min-width:110px}.hour-text{font-size:.8em;text-align:end;padding:0 10px 5px}.message-item .file-name:after{font-size:14px;font-weight:500;overflow:hidden;max-width:74px;content:attr(data-content-end);white-space:nowrap}.appear .appear-hidden{display:none}.appear .appear-visible{display:block}.close .close-hidden{display:none}.close .close-visible{display:block}.banner-container{border-radius:6px;width:calc(100% - 20px);background-color:#454f5bf0;box-shadow:0 2px 6px #47457b33,0 4px 14px #47457b08;display:inline-block;overflow:hidden;transition:all .3s ease-in-out}.banner-container .banner-action-text{text-decoration:underline;cursor:pointer}.banner-container .banner-text-container{color:#fff;text-align:center;font-size:13px;padding:10px 0 11px;line-height:1.25;word-wrap:break-word;margin:0 10px}body,html{height:100%;width:100%;position:relative;-webkit-text-size-adjust:100%}#container,body,html{overflow:hidden;-webkit-font-smoothing:antialiased}#container{position:fixed;right:6px;font-family:Poppins,sans-serif;font-weight:400;font-size:13px;line-height:1.4;color:#333;text-rendering:optimizeLegibility;-moz-font-smoothing:antialiased;padding:12px}#container .circular-loading{position:relative;margin:auto}#container .circular-loading.small{width:15px;height:15px}#container .circular-loading.large{width:45px;height:45px}#container .circular-loading svg{animation:rotator 2s linear infinite;fill:none;stroke-width:6;stroke-miterlimit:10;stroke-linecap:round;stroke:inherit}#container .circular-loading svg circle{animation:dash 2s ease-in-out infinite;transform-origin:center;stroke-dasharray:187;stroke-dashoffset:0;stroke:inherit}#container .linear-loading{height:3px;width:100%;position:relative;overflow:hidden}#container .linear-loading .bar{box-shadow:0 0 10px #29d,0 0 5px #29d}#container .linear-loading .bar:before{animation:indeterminate 2.1s cubic-bezier(.65,.815,.735,.395) infinite}#container .linear-loading .bar:after,#container .linear-loading .bar:before{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right}#container .linear-loading .bar:after{animation:indeterminate-short 2.1s cubic-bezier(.165,.84,.44,1) infinite;animation-delay:1.15s}#container #webview{position:absolute;display:flex;z-index:10;inset:0;background-color:#332d5166}#container #webview .webview-container{position:absolute;width:100%;bottom:0;background-color:#fff;border-top-left-radius:8px;border-top-right-radius:8px}#container #webview .webview-container.full{height:calc(100% - 29.33333px)}#container #webview .webview-container.tall{height:70%}#container #webview .webview-container.compact{height:50%}#container #webview .webview-container.webview-content-enter,#container #webview .webview-container.webview-content-enter.compact,#container #webview .webview-container.webview-content-enter.full,#container #webview .webview-container.webview-content-enter.tall{height:0}#container #webview .webview-container.webview-content-enter-active{transition:height .25s cubic-bezier(.455,.03,.515,.955)}#container #webview .webview-container.webview-content-enter-active.full{height:calc(100% - 44px)}#container #webview .webview-container.webview-content-enter-active.tall{height:70%}#container #webview .webview-container.webview-content-enter-active.compact{height:50%}#container #webview .webview-container.webview-content-exit.full{height:calc(100% - 44px)}#container #webview .webview-container.webview-content-exit.tall{height:70%}#container #webview .webview-container.webview-content-exit.compact{height:50%}#container #webview .webview-container.webview-content-exit-active{transition:height .25s cubic-bezier(.455,.03,.515,.955)}#container #webview .webview-container.webview-content-exit-active,#container #webview .webview-container.webview-content-exit-active.compact,#container #webview .webview-container.webview-content-exit-active.full,#container #webview .webview-container.webview-content-exit-active.tall{height:0}#container #webview .webview-container .linear-loading{position:absolute}#container #webview-header{z-index:10;height:44px;line-height:32px;padding:6px 15px;position:relative;background-color:#f4f4f4;cursor:pointer;font-size:16px;font-weight:400;box-sizing:content-box;color:#333;max-height:32px;cursor:default;text-align:center}.ie11 #container #webview-header.fixed-intro{height:56px}.widget-xs #container #webview-header{border-radius:0}#container #webview-header .fa{line-height:28px;color:#333;font-size:15px}#container #webview-header .close-handle{cursor:pointer;position:absolute;top:6px;right:10px}#container #webview-header .back-handle{cursor:pointer;display:inline-block;margin-right:8px;height:30px}#container #webview-header .close-handle .fa{font-size:17px}#container #webview-header .settings-content{display:inline-block;height:44px;margin-top:-6px;margin-left:-15px}#container #webview-header .settings-content>div{margin-top:6px;margin-left:15px}#container #webview-header .header-content{padding-right:20px;padding-left:20px;overflow:hidden;text-overflow:ellipsis;max-height:inherit}#container #webview-iframe-container{border:none;position:relative;width:100%;height:calc(100% - 44px);overflow:hidden}#container #webview-iframe-container.ios{-webkit-overflow-scrolling:touch;overflow:scroll}#container #webview-iframe{border:none;position:relative;width:100%;height:100%}#container .webview-enter{opacity:0}#container .webview-enter-active{transition:opacity .4s;opacity:1}#container .webview-exit{opacity:1}#container .webview-exit-active{transition:opacity .4s;opacity:0}#container #conversation{flex:auto;position:relative;padding:0;height:calc(100% - 89px);overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;background:#fff;transition:padding-top .5s}.widget-xs #container #conversation{height:calc(100% - 89px)}#container #conversation.no-intro{height:auto}.widget-embedded #container #conversation.no-intro{height:calc(100% - 89px)}#container #conversation .messages-container{position:absolute;bottom:0;width:100%;max-height:100%}#container #conversation .messages-container .msg{-webkit-transform:translateZ(0)}#container #conversation .fetch-history{width:100%;text-align:center;font-style:italic;color:#b2b2b2;padding-top:24px;padding-bottom:5px}#container #conversation .fetch-history a,#container #conversation .fetch-history a:active,#container #conversation .fetch-history a:focus,#container #conversation .fetch-history a:hover,#container #conversation .fetch-history a:link,#container #conversation .fetch-history a:visited{color:#b2b2b2}#container #conversation .row{clear:both;padding-bottom:0;padding-top:2px}#container #conversation .row.row-other-user-first:not(.row-other-user-last) .msg-wrapper .msg,#container #conversation .row.row-other-user-first:not(.row-other-user-last) .msg-wrapper .msg-image{border-bottom-left-radius:2px}#container #conversation .row.row-other-user-middle .msg-wrapper .msg,#container #conversation .row.row-other-user-middle .msg-wrapper .msg-image{border-bottom-left-radius:2px;border-top-left-radius:2px}#container #conversation .row.row-other-user-last{margin-bottom:10px}#container #conversation .row.row-other-user-last:not(.row-other-user-first) .msg-wrapper .msg,#container #conversation .row.row-other-user-last:not(.row-other-user-first) .msg-wrapper .msg-image{border-top-left-radius:2px}#container #conversation .row.row-current-user-first:not(.row-current-user-last) .msg-wrapper .msg,#container #conversation .row.row-current-user-first:not(.row-current-user-last) .msg-wrapper .msg-image{border-bottom-right-radius:2px}#container #conversation .row.row-current-user-middle .msg-wrapper .msg,#container #conversation .row.row-current-user-middle .msg-wrapper .msg-image{border-bottom-right-radius:2px;border-top-right-radius:2px}#container #conversation .row.row-current-user-last{margin-bottom:10px}#container #conversation .row.row-current-user-last:not(.row-current-user-first) .msg-wrapper .msg,#container #conversation .row.row-current-user-last:not(.row-current-user-first) .msg-wrapper .msg-image{border-top-right-radius:2px}#container #conversation .row.row-form{margin:10px 0;position:relative;z-index:1}#container #conversation .row .msg-wrapper{max-width:100%;position:relative;display:flex;flex-direction:row}#container #conversation .row .msg-wrapper .msg,#container #conversation .row .msg-wrapper .msg-image{overflow:hidden;line-height:1.25;position:relative;border-radius:14px;border-left-color:#00aeff;transition:opacity .15s;overflow-wrap:break-word;word-break:break-word;word-wrap:break-word}#container #conversation .row .msg-wrapper .msg-image .imageloader,#container #conversation .row .msg-wrapper .msg .imageloader{display:block;overflow:hidden;text-align:center;height:100%;width:100%;position:relative}#container #conversation .row .msg-wrapper .msg-image .carousel-item .imageloader img,#container #conversation .row .msg-wrapper .msg .carousel-item .imageloader img{width:100%;height:auto;max-width:none;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}#container #conversation .row .msg-wrapper .msg-image .carousel-item .imageloader.wide img,#container #conversation .row .msg-wrapper .msg .carousel-item .imageloader.wide img{height:100%;width:auto}#container #conversation .row .msg-wrapper .msg-image .preloader-container,#container #conversation .row .msg-wrapper .msg .preloader-container{min-width:150px;min-height:100px}#container #conversation .row .msg-wrapper .msg-image .preloader-container img,#container #conversation .row .msg-wrapper .msg .preloader-container img{max-width:100%}#container #conversation .row .msg-wrapper .msg-image .image-container,#container #conversation .row .msg-wrapper .msg .image-container{display:flex;position:relative}#container #conversation .row .msg-wrapper .msg-image .image-container .image-placeholder,#container #conversation .row .msg-wrapper .msg .image-container .image-placeholder{margin:auto}#container #conversation .row .msg-wrapper .msg-image .image-overlay,#container #conversation .row .msg-wrapper .msg .image-overlay{position:absolute;width:100%;height:100%;background-color:#ffffff80}#container #conversation .row .msg-wrapper .msg-image .spinner,#container #conversation .row .msg-wrapper .msg .spinner{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}#container #conversation .row .msg-wrapper .msg-image img,#container #conversation .row .msg-wrapper .msg img{max-width:100%;height:auto;display:block}#container #conversation .row .msg-wrapper .msg-image .sk-three-bounce .bounce1,#container #conversation .row .msg-wrapper .msg-image .sk-three-bounce .bounce2,#container #conversation .row .msg-wrapper .msg-image .sk-three-bounce .bounce3,#container #conversation .row .msg-wrapper .msg .sk-three-bounce .bounce1,#container #conversation .row .msg-wrapper .msg .sk-three-bounce .bounce2,#container #conversation .row .msg-wrapper .msg .sk-three-bounce .bounce3{height:15px;width:15px;background-color:#00aeff}#container #conversation .row .msg-wrapper .action{margin-bottom:5px}#container #conversation .row .msg-wrapper .action .btn{display:block;white-space:inherit;transition:width .1s;border-radius:7px;margin-right:8px;margin-left:8px}#container #conversation .row .msg-wrapper .action:last-child{margin-bottom:0}#container #conversation .row .msg-wrapper .message-text{display:inline-block;width:90%}#container #conversation .row .msg-wrapper .message-item{padding:8px 13px 0;line-height:1.3}#container #conversation .row .msg-wrapper .message-item.message-form{width:100%;padding:20px}#container #conversation .row .msg-wrapper .last-item{padding-bottom:9px}#container #conversation .row .msg-wrapper .message-location-loading{padding:0;margin:6px 30px}#container #conversation .row .msg-wrapper .message-location-loading .fading-circle{width:23px;height:23px}#container #conversation .row .msg-wrapper .msg-unsent{opacity:.3}#container #conversation .row .msg-wrapper .message-separator{margin-left:13px;margin-right:13px;margin-top:-9px;padding-bottom:9px}#container #conversation .row.left-row .msg-wrapper{align-items:flex-end}#container #conversation .row.left-row .msg-wrapper .msg,#container #conversation .row.left-row .msg-wrapper .msg-image{background-color:#f4f4f4;color:#424242;max-width:70%}#container #conversation .row.left-row .msg-wrapper .msg-image.msg-carousel,#container #conversation .row.left-row .msg-wrapper .msg.msg-carousel{background-color:transparent;max-width:100%!important;margin-left:-45px}#container #conversation .row.left-row .msg-wrapper .msg-image.msg-carousel .carousel-container .scroll-container,#container #conversation .row.left-row .msg-wrapper .msg.msg-carousel .carousel-container .scroll-container{-ms-overflow-style:none;overflow:-moz-scrollbars-none;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-ms-user-select:none}#container #conversation .row.left-row .msg-wrapper .msg-image.msg-carousel .carousel-container .scroll-container::-webkit-scrollbar,#container #conversation .row.left-row .msg-wrapper .msg.msg-carousel .carousel-container .scroll-container::-webkit-scrollbar{display:none;width:0!important}#container #conversation .row.left-row .msg-wrapper .msg-image.msg-carousel .carousel-container .scroll-container .carousel-content,#container #conversation .row.left-row .msg-wrapper .msg.msg-carousel .carousel-container .scroll-container .carousel-content{-moz-user-select:text;-khtml-user-select:text;-webkit-user-select:text;-o-user-select:text;-ms-user-select:text}#container #conversation .row.left-row .msg-wrapper .msg-image.msg-carousel .carousel-container .scroll-container .carousel-content .carousel-title,#container #conversation .row.left-row .msg-wrapper .msg.msg-carousel .carousel-container .scroll-container .carousel-content .carousel-title{white-space:pre-line}#container #conversation .row.left-row .msg-wrapper .msg-image.msg-carousel .carousel-container .carousel-item .btn:active,#container #conversation .row.left-row .msg-wrapper .msg.msg-carousel .carousel-container .carousel-item .btn:active{box-shadow:none}#container #conversation .row.left-row .msg-wrapper .msg-image:after,#container #conversation .row.left-row .msg-wrapper .msg:after{right:100%;border-color:hsla(0,0%,92.5%,0) #fff hsla(0,0%,92.5%,0) hsla(0,0%,92.5%,0)}#container #conversation .row.left-row .msg-wrapper .msg-image a.link,#container #conversation .row.left-row .msg-wrapper .msg-image a.link:visited,#container #conversation .row.left-row .msg-wrapper .msg a.link,#container #conversation .row.left-row .msg-wrapper .msg a.link:visited{color:#00aeff}#container #conversation .row.left-row .msg-wrapper .msg-form{width:100%;background-color:#fff;border-radius:8px;box-shadow:0 12px 24px #47457b29,0 4px 8px #47457b1f;transition:border .3s ease-in-out,box-shadow .3s ease-in-out}#container #conversation .row.left-row .msg-wrapper .msg-form.form-submitted{border:1px solid rgba(71,69,123,.12);box-shadow:none}#container #conversation .row.left-row .msg-wrapper .message-separator{border-bottom:1px solid rgba(66,66,66,.3)}#container #conversation .row.right-row{margin-right:10px}#container #conversation .row.right-row .msg-wrapper{flex-direction:row-reverse}#container #conversation .row.right-row .msg-wrapper .msg,#container #conversation .row.right-row .msg-wrapper .msg-image{background-color:#00aeff;float:right;max-width:70%}#container #conversation .row.right-row .msg-wrapper .msg-image:after,#container #conversation .row.right-row .msg-wrapper .msg:after{left:100%;border-color:#00aeff00;border-left-color:inherit}#container #conversation .row.right-row .msg-wrapper .msg-image{background-color:transparent}#container #conversation .row.right-row .msg-wrapper .message-separator{border-bottom:1px solid hsla(0,0%,100%,.3)}#container #conversation .row:last-child{padding-bottom:10px}#container #conversation .row .__react_component_tooltip{padding:8px 10px;border-radius:8px;color:#fff;font-size:12px;background-color:#424242}#container #conversation .row .__react_component_tooltip:after{border-bottom-color:#424242}#container #conversation .row .__react_component_tooltip.show{opacity:1}#container #conversation .clear{clear:both}#container #conversation::-webkit-scrollbar-track{border-radius:10px;box-shadow:inset 0 -6px #fff,inset 0 6px #fff;background-color:#f4f4f4}#container #conversation::-webkit-scrollbar{width:8px;background-color:#fff}#container #conversation::-webkit-scrollbar-thumb{border-radius:10px;box-shadow:inset 0 -6px #fff,inset 0 6px #fff;background-color:#d2d2d2f7}#container #conversation .logo{padding-bottom:10px;text-align:center}#container #conversation .logo a{font-size:12px;color:#bbb;text-decoration:none}#container #conversation .logo .image{position:relative;left:2px;top:9px;vertical-align:baseline}#container #conversation .from{white-space:nowrap;top:-20px;font-size:12px;color:#787f8c;padding-left:12px;margin-bottom:2px;margin-left:45px}#container #conversation .connect-notification{display:inline-block;padding:8px 13px 22px;line-height:1.25;font-size:14px;text-align:left;border-radius:14px;background-color:#f4f4f4;color:#424242;max-width:90%;margin-top:5px}#container #conversation .connect-notification p{margin-top:0}#container #conversation .connect-notification .connect-notification-channels{display:flex}#container #conversation .connect-notification .connect-notification-channels .connect-notification-icon{width:70px;opacity:.75;text-align:center;cursor:pointer;display:inline-flex;align-items:center;align-content:center;flex-direction:column;transition:opacity .15s}#container #conversation .connect-notification .connect-notification-channels .connect-notification-icon:hover{opacity:1}#container #conversation .connect-notification .connect-notification-channels .connect-notification-icon img{width:40px;display:block;margin-bottom:10px}#container #conversation .connect-notification .connect-notification-channels .connect-notification-icon span{font-size:12px}#container #conversation .connect-notification .connect-notification-channels .connect-notification-icon.extra-count .count{width:40px;height:40px;line-height:40px;display:block;margin-bottom:10px;font-size:16px;font-weight:600;background-color:#fff;border:1px solid #fff;border-radius:50%}#container #conversation .connect-notification-linking-message{max-width:70%;padding-bottom:0}#container #conversation .conversation-timestamp-header{width:100%;text-align:center;text-transform:uppercase;font-weight:600;font-size:12px;color:#b2b2b2;margin-top:25px;margin-bottom:15px}#container a,#container div,#container form,#container input,#container label{box-sizing:border-box}#container #wrapper{display:flex;flex-direction:column;position:relative;border-radius:10px;box-shadow:0 0 12px #00000026;overflow:hidden;max-height:calc(100vh - 32px)}.widget-lg #container #wrapper{width:380px;height:500px}.widget-md #container #wrapper{width:350px;height:480px}.widget-sm #container #wrapper{width:330px;height:420px}.widget-xs #container #wrapper{height:100%;border-radius:0}.widget-xs #container{padding:0;inset:0;position:fixed;border-radius:0;width:100%;border:none}.widget-xs #container,.widget-xs #container.appear,.widget-xs #container.appear #wrapper{height:100%;max-height:100%}.widget-xs #container #wrapper{width:100%;max-width:100%}#container .content-wrapper{overflow-y:auto}#container .content-wrapper::-webkit-scrollbar-track{border-radius:10px;box-shadow:inset 0 -6px #fff,inset 0 6px #fff;background-color:#f4f4f4}#container .content-wrapper::-webkit-scrollbar{width:8px;background-color:#fff}#container .content-wrapper::-webkit-scrollbar-thumb{border-radius:10px;box-shadow:inset 0 -6px #fff,inset 0 6px #fff;background-color:#d2d2d2f7}.widget-embedded #container{font-family:Poppins,sans-serif;font-weight:400;font-size:13px;line-height:1.4;color:#333;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-font-smoothing:antialiased;padding:0;height:100%;width:100%;inset:0;position:absolute}.widget-embedded #container .circular-loading{position:relative;margin:auto}.widget-embedded #container .circular-loading.small{width:15px;height:15px}.widget-embedded #container .circular-loading.large{width:45px;height:45px}.widget-embedded #container .circular-loading svg{animation:rotator 2s linear infinite;fill:none;stroke-width:6;stroke-miterlimit:10;stroke-linecap:round;stroke:inherit}.widget-embedded #container .circular-loading svg circle{animation:dash 2s ease-in-out infinite;transform-origin:center;stroke-dasharray:187;stroke-dashoffset:0;stroke:inherit}@keyframes rotator{0%{transform:rotate(0)}to{transform:rotate(270deg)}}@keyframes dash{0%{stroke-dashoffset:187}50%{stroke-dashoffset:46.75;transform:rotate(135deg)}to{stroke-dashoffset:187;transform:rotate(450deg)}}.widget-embedded #container .linear-loading{height:3px;width:100%;position:relative;overflow:hidden}.widget-embedded #container .linear-loading .bar{box-shadow:0 0 10px #29d,0 0 5px #29d}.widget-embedded #container .linear-loading .bar:before{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;animation:indeterminate 2.1s cubic-bezier(.65,.815,.735,.395) infinite}.widget-embedded #container .linear-loading .bar:after{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;animation:indeterminate-short 2.1s cubic-bezier(.165,.84,.44,1) infinite;animation-delay:1.15s}@keyframes indeterminate{0%{left:-35%;right:100%}60%{left:100%;right:-90%}to{left:100%;right:-90%}}@keyframes indeterminate-short{0%{left:-200%;right:100%}60%{left:107%;right:-8%}to{left:107%;right:-8%}}.widget-embedded #container #webview{position:absolute;display:flex;z-index:10;inset:0;background-color:#332d5166}.widget-embedded #container #webview .webview-container{position:absolute;width:100%;bottom:0;background-color:#fff;border-top-left-radius:8px;border-top-right-radius:8px}.widget-embedded #container #webview .webview-container.full{height:calc(100% - 29.33333px)}.widget-embedded #container #webview .webview-container.tall{height:70%}.widget-embedded #container #webview .webview-container.compact{height:50%}.widget-embedded #container #webview .webview-container.webview-content-enter,.widget-embedded #container #webview .webview-container.webview-content-enter.compact,.widget-embedded #container #webview .webview-container.webview-content-enter.full,.widget-embedded #container #webview .webview-container.webview-content-enter.tall{height:0}.widget-embedded #container #webview .webview-container.webview-content-enter-active{transition:height .25s cubic-bezier(.455,.03,.515,.955)}.widget-embedded #container #webview .webview-container.webview-content-enter-active.full{height:calc(100% - 44px)}.widget-embedded #container #webview .webview-container.webview-content-enter-active.tall{height:70%}.widget-embedded #container #webview .webview-container.webview-content-enter-active.compact{height:50%}.widget-embedded #container #webview .webview-container.webview-content-exit.full{height:calc(100% - 44px)}.widget-embedded #container #webview .webview-container.webview-content-exit.tall{height:70%}.widget-embedded #container #webview .webview-container.webview-content-exit.compact{height:50%}.widget-embedded #container #webview .webview-container.webview-content-exit-active{transition:height .25s cubic-bezier(.455,.03,.515,.955)}.widget-embedded #container #webview .webview-container.webview-content-exit-active,.widget-embedded #container #webview .webview-container.webview-content-exit-active.compact,.widget-embedded #container #webview .webview-container.webview-content-exit-active.full,.widget-embedded #container #webview .webview-container.webview-content-exit-active.tall{height:0}.widget-embedded #container #webview .webview-container .linear-loading{position:absolute}.widget-embedded #container #webview-header{z-index:10;height:44px;line-height:32px;padding:6px 15px;position:relative;background-color:#f4f4f4;cursor:pointer;font-size:16px;font-weight:400;box-sizing:content-box;color:#333;max-height:32px;cursor:default;text-align:center}.ie11 .widget-embedded #container #webview-header.fixed-intro{height:56px}.widget-xs .widget-embedded #container #webview-header{border-radius:0}.widget-embedded #container #webview-header .fa{line-height:28px;color:#333;font-size:15px}.widget-embedded #container #webview-header .close-handle{cursor:pointer;position:absolute;top:6px;right:10px}.widget-embedded #container #webview-header .back-handle{cursor:pointer;display:inline-block;margin-right:8px;height:30px}.widget-embedded #container #webview-header .close-handle .fa{font-size:17px}.widget-embedded #container #webview-header .settings-content{display:inline-block;height:44px;margin-top:-6px;margin-left:-15px}.widget-embedded #container #webview-header .settings-content>div{margin-top:6px;margin-left:15px}.widget-embedded #container #webview-header .header-content{padding-right:20px;padding-left:20px;overflow:hidden;text-overflow:ellipsis;max-height:inherit}.widget-embedded #container #webview-iframe-container{border:none;position:relative;width:100%;height:calc(100% - 44px);overflow:hidden}.widget-embedded #container #webview-iframe-container.ios{-webkit-overflow-scrolling:touch;overflow:scroll}.widget-embedded #container #webview-iframe{border:none;position:relative;width:100%;height:100%}.widget-embedded #container .webview-enter{opacity:0}.widget-embedded #container .webview-enter-active{transition:opacity .4s;opacity:1}.widget-embedded #container .webview-exit{opacity:1}.widget-embedded #container .webview-exit-active{transition:opacity .4s;opacity:0}.widget-embedded #container #conversation{flex:auto;position:relative;padding:0;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;background:#fff;transition:padding-top .5s}.widget-xs .widget-embedded #container #conversation{height:calc(100% - 89px)}.widget-embedded #container #conversation.no-intro{height:auto}.widget-embedded .widget-embedded #container #conversation.no-intro{height:calc(100% - 89px)}.widget-embedded #container #conversation .messages-container{position:absolute;bottom:0;width:100%;max-height:100%}.widget-embedded #container #conversation .messages-container .msg{-webkit-transform:translateZ(0)}.widget-embedded #container #conversation .fetch-history{width:100%;text-align:center;font-style:italic;color:#b2b2b2;padding-top:24px;padding-bottom:5px}.widget-embedded #container #conversation .fetch-history a,.widget-embedded #container #conversation .fetch-history a:active,.widget-embedded #container #conversation .fetch-history a:focus,.widget-embedded #container #conversation .fetch-history a:hover,.widget-embedded #container #conversation .fetch-history a:link,.widget-embedded #container #conversation .fetch-history a:visited{color:#b2b2b2}.widget-embedded #container #conversation .row{clear:both;padding-bottom:0;padding-top:2px}.widget-embedded #container #conversation .row.row-other-user-first:not(.row-other-user-last) .msg-wrapper .msg,.widget-embedded #container #conversation .row.row-other-user-first:not(.row-other-user-last) .msg-wrapper .msg-image{border-bottom-left-radius:2px}.widget-embedded #container #conversation .row.row-other-user-middle .msg-wrapper .msg,.widget-embedded #container #conversation .row.row-other-user-middle .msg-wrapper .msg-image{border-bottom-left-radius:2px;border-top-left-radius:2px}.widget-embedded #container #conversation .row.row-other-user-last{margin-bottom:10px}.widget-embedded #container #conversation .row.row-other-user-last:not(.row-other-user-first) .msg-wrapper .msg,.widget-embedded #container #conversation .row.row-other-user-last:not(.row-other-user-first) .msg-wrapper .msg-image{border-top-left-radius:2px}.widget-embedded #container #conversation .row.row-current-user-first:not(.row-current-user-last) .msg-wrapper .msg,.widget-embedded #container #conversation .row.row-current-user-first:not(.row-current-user-last) .msg-wrapper .msg-image{border-bottom-right-radius:2px}.widget-embedded #container #conversation .row.row-current-user-middle .msg-wrapper .msg,.widget-embedded #container #conversation .row.row-current-user-middle .msg-wrapper .msg-image{border-bottom-right-radius:2px;border-top-right-radius:2px}.widget-embedded #container #conversation .row.row-current-user-last{margin-bottom:10px}.widget-embedded #container #conversation .row.row-current-user-last:not(.row-current-user-first) .msg-wrapper .msg,.widget-embedded #container #conversation .row.row-current-user-last:not(.row-current-user-first) .msg-wrapper .msg-image{border-top-right-radius:2px}.widget-embedded #container #conversation .row.row-form{margin:10px 0;position:relative;z-index:1}.widget-embedded #container #conversation .row .msg-wrapper{max-width:100%;position:relative;display:flex;flex-direction:row}.widget-embedded #container #conversation .row .msg-wrapper .msg,.widget-embedded #container #conversation .row .msg-wrapper .msg-image{font-size:14px;overflow:hidden;line-height:1.25;position:relative;border-radius:14px;border-left-color:#00aeff;transition:opacity .15s;overflow-wrap:break-word;word-break:break-word;word-wrap:break-word}.widget-embedded #container #conversation .row .msg-wrapper .msg-image .imageloader,.widget-embedded #container #conversation .row .msg-wrapper .msg .imageloader{display:block;overflow:hidden;text-align:center;height:100%;width:100%;position:relative}.widget-embedded #container #conversation .row .msg-wrapper .msg-image .carousel-item .imageloader img,.widget-embedded #container #conversation .row .msg-wrapper .msg .carousel-item .imageloader img{width:100%;height:auto;max-width:none;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.widget-embedded #container #conversation .row .msg-wrapper .msg-image .carousel-item .imageloader.wide img,.widget-embedded #container #conversation .row .msg-wrapper .msg .carousel-item .imageloader.wide img{height:100%;width:auto}.widget-embedded #container #conversation .row .msg-wrapper .msg-image .preloader-container,.widget-embedded #container #conversation .row .msg-wrapper .msg .preloader-container{min-width:150px;min-height:100px}.widget-embedded #container #conversation .row .msg-wrapper .msg-image .preloader-container img,.widget-embedded #container #conversation .row .msg-wrapper .msg .preloader-container img{max-width:100%}.widget-embedded #container #conversation .row .msg-wrapper .msg-image .image-container,.widget-embedded #container #conversation .row .msg-wrapper .msg .image-container{display:flex;position:relative}.widget-embedded #container #conversation .row .msg-wrapper .msg-image .image-container .image-placeholder,.widget-embedded #container #conversation .row .msg-wrapper .msg .image-container .image-placeholder{margin:auto}.widget-embedded #container #conversation .row .msg-wrapper .msg-image .image-overlay,.widget-embedded #container #conversation .row .msg-wrapper .msg .image-overlay{position:absolute;width:100%;height:100%;background-color:#ffffff80}.widget-embedded #container #conversation .row .msg-wrapper .msg-image .spinner,.widget-embedded #container #conversation .row .msg-wrapper .msg .spinner{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.widget-embedded #container #conversation .row .msg-wrapper .msg-image img,.widget-embedded #container #conversation .row .msg-wrapper .msg img{max-width:100%;height:auto;display:block}.widget-embedded #container #conversation .row .msg-wrapper .msg-image .sk-three-bounce .bounce1,.widget-embedded #container #conversation .row .msg-wrapper .msg-image .sk-three-bounce .bounce2,.widget-embedded #container #conversation .row .msg-wrapper .msg-image .sk-three-bounce .bounce3,.widget-embedded #container #conversation .row .msg-wrapper .msg .sk-three-bounce .bounce1,.widget-embedded #container #conversation .row .msg-wrapper .msg .sk-three-bounce .bounce2,.widget-embedded #container #conversation .row .msg-wrapper .msg .sk-three-bounce .bounce3{height:15px;width:15px;background-color:#00aeff}.widget-embedded #container #conversation .row .msg-wrapper .action{margin-bottom:5px}.widget-embedded #container #conversation .row .msg-wrapper .action .btn{display:block;white-space:inherit;transition:width .1s;border-radius:7px;margin-right:8px;margin-left:8px}.widget-embedded #container #conversation .row .msg-wrapper .action:last-child{margin-bottom:0}.widget-embedded #container #conversation .row .msg-wrapper .message-text{display:inline-block;width:90%}.widget-embedded #container #conversation .row .msg-wrapper .message-item{padding:8px 13px 0;line-height:1.3}.widget-embedded #container #conversation .row .msg-wrapper .message-item.message-form{width:100%;padding:20px}.widget-embedded #container #conversation .row .msg-wrapper .last-item{padding-bottom:9px}.widget-embedded #container #conversation .row .msg-wrapper .message-location-loading{padding:0;margin:6px 30px}.widget-embedded #container #conversation .row .msg-wrapper .message-location-loading .fading-circle{width:23px;height:23px}.widget-embedded #container #conversation .row .msg-wrapper .msg-unsent{opacity:.3}.widget-embedded #container #conversation .row .msg-wrapper .message-separator{margin-left:13px;margin-right:13px;margin-top:-9px;padding-bottom:9px}.widget-embedded #container #conversation .row.left-row .msg-wrapper{align-items:flex-end}.widget-embedded #container #conversation .row.left-row .msg-wrapper .msg,.widget-embedded #container #conversation .row.left-row .msg-wrapper .msg-image{background-color:#f4f4f4;color:#424242;max-width:70%}.widget-embedded #container #conversation .row.left-row .msg-wrapper .msg-image.msg-carousel,.widget-embedded #container #conversation .row.left-row .msg-wrapper .msg.msg-carousel{background-color:transparent;max-width:100%!important;margin-left:-45px}.widget-embedded #container #conversation .row.left-row .msg-wrapper .msg-image.msg-carousel .carousel-container .scroll-container,.widget-embedded #container #conversation .row.left-row .msg-wrapper .msg.msg-carousel .carousel-container .scroll-container{-ms-overflow-style:none;overflow:-moz-scrollbars-none;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-ms-user-select:none}.widget-embedded #container #conversation .row.left-row .msg-wrapper .msg-image.msg-carousel .carousel-container .scroll-container::-webkit-scrollbar,.widget-embedded #container #conversation .row.left-row .msg-wrapper .msg.msg-carousel .carousel-container .scroll-container::-webkit-scrollbar{display:none;width:0!important}.widget-embedded #container #conversation .row.left-row .msg-wrapper .msg-image.msg-carousel .carousel-container .scroll-container .carousel-content,.widget-embedded #container #conversation .row.left-row .msg-wrapper .msg.msg-carousel .carousel-container .scroll-container .carousel-content{-moz-user-select:text;-khtml-user-select:text;-webkit-user-select:text;-o-user-select:text;-ms-user-select:text}.widget-embedded #container #conversation .row.left-row .msg-wrapper .msg-image.msg-carousel .carousel-container .scroll-container .carousel-content .carousel-title,.widget-embedded #container #conversation .row.left-row .msg-wrapper .msg.msg-carousel .carousel-container .scroll-container .carousel-content .carousel-title{white-space:pre-line}.widget-embedded #container #conversation .row.left-row .msg-wrapper .msg-image.msg-carousel .carousel-container .carousel-item .btn:active,.widget-embedded #container #conversation .row.left-row .msg-wrapper .msg.msg-carousel .carousel-container .carousel-item .btn:active{box-shadow:none}.widget-embedded #container #conversation .row.left-row .msg-wrapper .msg-image:after,.widget-embedded #container #conversation .row.left-row .msg-wrapper .msg:after{right:100%;border-color:hsla(0,0%,92.5%,0) #fff hsla(0,0%,92.5%,0) hsla(0,0%,92.5%,0)}.widget-embedded #container #conversation .row.left-row .msg-wrapper .msg-image a.link,.widget-embedded #container #conversation .row.left-row .msg-wrapper .msg-image a.link:visited,.widget-embedded #container #conversation .row.left-row .msg-wrapper .msg a.link,.widget-embedded #container #conversation .row.left-row .msg-wrapper .msg a.link:visited{color:#00aeff}.widget-embedded #container #conversation .row.left-row .msg-wrapper .msg-form{width:100%;background-color:#fff;border-radius:8px;box-shadow:0 12px 24px #47457b29,0 4px 8px #47457b1f;transition:border .3s ease-in-out,box-shadow .3s ease-in-out}.widget-embedded #container #conversation .row.left-row .msg-wrapper .msg-form.form-submitted{border:1px solid rgba(71,69,123,.12);box-shadow:none}.widget-embedded #container #conversation .row.left-row .msg-wrapper .message-separator{border-bottom:1px solid rgba(66,66,66,.3)}.widget-embedded #container #conversation .row.right-row{margin-right:10px}.widget-embedded #container #conversation .row.right-row .msg-wrapper{flex-direction:row-reverse}.widget-embedded #container #conversation .row.right-row .msg-wrapper .msg,.widget-embedded #container #conversation .row.right-row .msg-wrapper .msg-image{background-color:#00aeff;float:right;max-width:70%}.widget-embedded #container #conversation .row.right-row .msg-wrapper .msg-image:after,.widget-embedded #container #conversation .row.right-row .msg-wrapper .msg:after{left:100%;border-color:#00aeff00;border-left-color:inherit}.widget-embedded #container #conversation .row.right-row .msg-wrapper .msg-image{background-color:transparent}.widget-embedded #container #conversation .row.right-row .msg-wrapper .message-separator{border-bottom:1px solid hsla(0,0%,100%,.3)}.widget-embedded #container #conversation .row:last-child{padding-bottom:10px}.widget-embedded #container #conversation .row .__react_component_tooltip{padding:8px 10px;border-radius:8px;color:#fff;font-size:12px;background-color:#424242}.widget-embedded #container #conversation .row .__react_component_tooltip:after{border-bottom-color:#424242}.widget-embedded #container #conversation .row .__react_component_tooltip.show{opacity:1}.widget-embedded #container #conversation .clear{clear:both}.widget-embedded #container #conversation::-webkit-scrollbar-track{border-radius:10px;box-shadow:inset 0 -6px #fff,inset 0 6px #fff;background-color:#f4f4f4}.widget-embedded #container #conversation::-webkit-scrollbar{width:8px;background-color:#fff}.widget-embedded #container #conversation::-webkit-scrollbar-thumb{border-radius:10px;box-shadow:inset 0 -6px #fff,inset 0 6px #fff;background-color:#d2d2d2f7}.widget-embedded #container #conversation .logo{padding-bottom:10px;text-align:center}.widget-embedded #container #conversation .logo a{font-size:12px;color:#bbb;text-decoration:none}.widget-embedded #container #conversation .logo .image{position:relative;left:2px;top:9px;vertical-align:baseline}.widget-embedded #container #conversation .from{white-space:nowrap;top:-20px;font-size:12px;color:#787f8c;padding-left:12px;margin-bottom:2px;margin-left:45px}.widget-embedded #container #conversation .connect-notification{display:inline-block;padding:8px 13px 22px;line-height:1.25;font-size:14px;text-align:left;border-radius:14px;background-color:#f4f4f4;color:#424242;max-width:90%;margin-top:5px}.widget-embedded #container #conversation .connect-notification p{margin-top:0}.widget-embedded #container #conversation .connect-notification .connect-notification-channels{display:flex}.widget-embedded #container #conversation .connect-notification .connect-notification-channels .connect-notification-icon{width:70px;opacity:.75;text-align:center;cursor:pointer;display:inline-flex;align-items:center;align-content:center;flex-direction:column;transition:opacity .15s}.widget-embedded #container #conversation .connect-notification .connect-notification-channels .connect-notification-icon:hover{opacity:1}.widget-embedded #container #conversation .connect-notification .connect-notification-channels .connect-notification-icon img{width:40px;display:block;margin-bottom:10px}.widget-embedded #container #conversation .connect-notification .connect-notification-channels .connect-notification-icon span{font-size:12px}.widget-embedded #container #conversation .connect-notification .connect-notification-channels .connect-notification-icon.extra-count .count{width:40px;height:40px;line-height:40px;display:block;margin-bottom:10px;font-size:16px;font-weight:600;background-color:#fff;border:1px solid #fff;border-radius:50%}.widget-embedded #container #conversation .connect-notification-linking-message{max-width:70%;padding-bottom:0}.widget-embedded #container #conversation .conversation-timestamp-header{width:100%;text-align:center;text-transform:uppercase;font-weight:600;font-size:12px;color:#b2b2b2;margin-top:25px;margin-bottom:15px}.widget-embedded #container a,.widget-embedded #container div,.widget-embedded #container form,.widget-embedded #container input,.widget-embedded #container label{box-sizing:border-box}.widget-embedded #container #wrapper{display:flex;flex-direction:column;background:#fff;width:100%;height:100%;position:relative;border-radius:0;box-shadow:none;border:none}.widget-embedded #container #header,.widget-embedded #container #settings-header{cursor:default;border-radius:0}.widget-embedded #container #header .close-handle,.widget-embedded #container #header .show-handle,.widget-embedded #container #settings-header .close-handle,.widget-embedded #container #settings-header .show-handle{display:none}.widget-embedded #container #conversation{height:calc(100% - 89px)}.widget-embedded #container #settings-handle{display:block;right:10px}.widget-embedded #container #footer,.widget-embedded #container .intro-pane{flex:0 0 auto}.widget-embedded #container .settings{width:100%}.widget-xs html.widget-opened,.widget-xs html.widget-opened body{overflow:hidden;position:relative;-webkit-overflow-scrolling:auto;max-height:100%;height:100%;width:100%}.widget-xs html.widget-opened #container #header #settings-handle,.widget-xs html.widget-opened body #container #header #settings-handle{height:40px;width:40px;right:40px}.widget-xs html.widget-opened #container #header .close-handle,.widget-xs html.widget-opened body #container #header .close-handle{height:40px;width:40px;right:0}#container.ios-device{-webkit-text-size-adjust:100%}@media print{#container,#messenger-button{display:none}}@keyframes vibrate{0%{right:6px}12%{right:9px}25%{right:10px}37%{right:9px}50%{right:6px}62%{right:3px}75%{right:0}87%{right:3px}to{right:6px}}\n'],encapsulation:3}),e})();class W5{}class xCe{}const Co="*";function G5(t,e=null){return{type:2,steps:t,options:e}}function q5(t){return{type:6,styles:t,offset:null}}class Np{constructor(e=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const n="start"==e?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}}class K5{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let n=0,r=0,i=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++n==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const n=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,n/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((n,r)=>null===n||r.totalTime>n.totalTime?r:n,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const n="start"==e?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}}function Q5(t){return new E(3e3,!1)}function va(t){switch(t.length){case 0:return new Np;case 1:return t[0];default:return new K5(t)}}function Y5(t,e,n=new Map,r=new Map){const i=[],s=[];let o=-1,a=null;if(e.forEach(c=>{const l=c.get("offset"),u=l==o,d=u&&a||new Map;c.forEach((h,f)=>{let p=f,g=h;if("offset"!==f)switch(p=t.normalizePropertyName(p,i),g){case"!":g=n.get(f);break;case Co:g=r.get(f);break;default:g=t.normalizeStyleValue(f,p,g,i)}d.set(p,g)}),u||s.push(d),a=d,o=l}),i.length)throw function QCe(t){return new E(3502,!1)}();return s}function qk(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&Kk(n,"start",t)));break;case"done":t.onDone(()=>r(n&&Kk(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&Kk(n,"destroy",t)))}}function Kk(t,e,n){const s=Qk(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,n.totalTime??t.totalTime,!!n.disabled),o=t._data;return null!=o&&(s._data=o),s}function Qk(t,e,n,r,i="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function ti(t,e,n){let r=t.get(e);return r||t.set(e,r=n),r}function X5(t){const e=t.indexOf(":");return[t.substring(1,e),t.slice(e+1)]}const aIe=(()=>typeof document>"u"?null:document.documentElement)();function Yk(t){const e=t.parentNode||t.host||null;return e===aIe?null:e}let qc=null,J5=!1;function Z5(t,e){for(;e;){if(e===t)return!0;e=Yk(e)}return!1}function eW(t,e,n){if(n)return Array.from(t.querySelectorAll(e));const r=t.querySelector(e);return r?[r]:[]}let tW=(()=>{var t;class e{validateStyleProperty(r){return function lIe(t){qc||(qc=function uIe(){return typeof document<"u"?document.body:null}()||{},J5=!!qc.style&&"WebkitAppearance"in qc.style);let e=!0;return qc.style&&!function cIe(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in qc.style,!e&&J5&&(e="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in qc.style)),e}(r)}matchesElement(r,i){return!1}containsElement(r,i){return Z5(r,i)}getParentElement(r){return Yk(r)}query(r,i,s){return eW(r,i,s)}computeStyle(r,i,s){return s||""}animate(r,i,s,o,a,c=[],l){return new Np(s,o)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac}),e})(),Xk=(()=>{class e{}return e.NOOP=new tW,e})();const dIe=1e3,Jk="ng-enter",Kv="ng-leave",Qv="ng-trigger",Yv=".ng-trigger",rW="ng-animating",Zk=".ng-animating";function Io(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:eM(parseFloat(e[1]),e[2])}function eM(t,e){return"s"===e?t*dIe:t}function Xv(t,e,n){return t.hasOwnProperty("duration")?t:function fIe(t,e,n){let i,s=0,o="";if("string"==typeof t){const a=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(Q5()),{duration:0,delay:0,easing:""};i=eM(parseFloat(a[1]),a[2]);const c=a[3];null!=c&&(s=eM(parseFloat(c),a[4]));const l=a[5];l&&(o=l)}else i=t;if(!n){let a=!1,c=e.length;i<0&&(e.push(function SCe(){return new E(3100,!1)}()),a=!0),s<0&&(e.push(function DCe(){return new E(3101,!1)}()),a=!0),a&&e.splice(c,0,Q5())}return{duration:i,delay:s,easing:o}}(t,e,n)}function Pp(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function iW(t){const e=new Map;return Object.keys(t).forEach(n=>{e.set(n,t[n])}),e}function wa(t,e=new Map,n){if(n)for(let[r,i]of n)e.set(r,i);for(let[r,i]of t)e.set(r,i);return e}function Is(t,e,n){e.forEach((r,i)=>{const s=nM(i);n&&!n.has(i)&&n.set(i,t.style[s]),t.style[s]=r})}function Kc(t,e){e.forEach((n,r)=>{const i=nM(r);t.style[i]=""})}function Op(t){return Array.isArray(t)?1==t.length?t[0]:G5(t):t}const tM=new RegExp("{{\\s*(.+?)\\s*}}","g");function oW(t){let e=[];if("string"==typeof t){let n;for(;n=tM.exec(t);)e.push(n[1]);tM.lastIndex=0}return e}function Fp(t,e,n){const r=t.toString(),i=r.replace(tM,(s,o)=>{let a=e[o];return null==a&&(n.push(function kCe(t){return new E(3003,!1)}()),a=""),a.toString()});return i==r?t:i}function Jv(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const mIe=/-+([a-z0-9])/g;function nM(t){return t.replace(mIe,(...e)=>e[1].toUpperCase())}function ni(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw function MCe(t){return new E(3004,!1)}()}}function aW(t,e){return window.getComputedStyle(t)[e]}const Zv="*";function vIe(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(r=>function wIe(t,e,n){if(":"==t[0]){const c=function bIe(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,r)=>parseFloat(r)>parseFloat(n);case":decrement":return(n,r)=>parseFloat(r)<parseFloat(n);default:return e.push(function WCe(t){return new E(3016,!1)}()),"* => *"}}(t,n);if("function"==typeof c)return void e.push(c);t=c}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(function zCe(t){return new E(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(cW(i,o));"<"==s[0]&&!(i==Zv&&o==Zv)&&e.push(cW(o,i))}(r,n,e)):n.push(t),n}const ew=new Set(["true","1"]),tw=new Set(["false","0"]);function cW(t,e){const n=ew.has(t)||tw.has(t),r=ew.has(e)||tw.has(e);return(i,s)=>{let o=t==Zv||t==i,a=e==Zv||e==s;return!o&&n&&"boolean"==typeof i&&(o=i?ew.has(t):tw.has(t)),!a&&r&&"boolean"==typeof s&&(a=s?ew.has(e):tw.has(e)),o&&a}}const EIe=new RegExp("s*:selfs*,?","g");function rM(t,e,n,r){return new CIe(t).build(e,n,r)}class CIe{constructor(e){this._driver=e}build(e,n,r){const i=new xIe(n);return this._resetContextStyleTimingState(i),ni(this,Op(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,n){let r=n.queryCount=0,i=n.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&n.errors.push(function NCe(){return new E(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(n),0==a.type){const c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(u=>{c.name=u,s.push(this.visitState(c,n))}),c.name=l}else if(1==a.type){const c=this.visitTransition(a,n);r+=c.queryCount,i+=c.depCount,o.push(c)}else n.errors.push(function PCe(){return new E(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,n){const r=this.visitStyle(e.styles,n),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{oW(c).forEach(l=>{o.hasOwnProperty(l)||s.add(l)})})}),s.size&&(Jv(s.values()),n.errors.push(function OCe(t,e){return new E(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,n){n.queryCount=0,n.depCount=0;const r=ni(this,Op(e.animation),n);return{type:1,matchers:vIe(e.expr,n.errors),animation:r,queryCount:n.queryCount,depCount:n.depCount,options:Qc(e.options)}}visitSequence(e,n){return{type:2,steps:e.steps.map(r=>ni(this,r,n)),options:Qc(e.options)}}visitGroup(e,n){const r=n.currentTime;let i=0;const s=e.steps.map(o=>{n.currentTime=r;const a=ni(this,o,n);return i=Math.max(i,n.currentTime),a});return n.currentTime=i,{type:3,steps:s,options:Qc(e.options)}}visitAnimate(e,n){const r=function DIe(t,e){if(t.hasOwnProperty("duration"))return t;if("number"==typeof t)return iM(Xv(t,e).duration,0,"");const n=t;if(n.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=iM(0,0,"");return s.dynamic=!0,s.strValue=n,s}const i=Xv(n,e);return iM(i.duration,i.delay,i.easing)}(e.timings,n.errors);n.currentAnimateTimings=r;let i,s=e.styles?e.styles:q5({});if(5==s.type)i=this.visitKeyframes(s,n);else{let o=e.styles,a=!1;if(!o){a=!0;const l={};r.easing&&(l.easing=r.easing),o=q5(l)}n.currentTime+=r.duration+r.delay;const c=this.visitStyle(o,n);c.isEmptyStep=a,i=c}return n.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,n){const r=this._makeStyleAst(e,n);return this._validateStyleAst(r,n),r}_makeStyleAst(e,n){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===Co?r.push(a):n.errors.push(new E(3002,!1)):r.push(iW(a));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let c of a.values())if(c.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,n){const r=n.currentAnimateTimings;let i=n.currentTime,s=n.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,c)=>{const l=n.collectedStyles.get(n.currentQuerySelector),u=l.get(c);let d=!0;u&&(s!=i&&s>=u.startTime&&i<=u.endTime&&(n.errors.push(function LCe(t,e,n,r,i){return new E(3010,!1)}()),d=!1),s=u.startTime),d&&l.set(c,{startTime:s,endTime:i}),n.options&&function gIe(t,e,n){const r=e.params||{},i=oW(t);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||n.push(function ACe(t){return new E(3001,!1)}())})}(a,n.options,n.errors)})})}visitKeyframes(e,n){const r={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(function VCe(){return new E(3011,!1)}()),r;let s=0;const o=[];let a=!1,c=!1,l=0;const u=e.steps.map(v=>{const y=this._makeStyleAst(v,n);let C=null!=y.offset?y.offset:function SIe(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(n=>{if(n instanceof Map&&n.has("offset")){const r=n;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(t instanceof Map&&t.has("offset")){const n=t;e=parseFloat(n.get("offset")),n.delete("offset")}return e}(y.styles),I=0;return null!=C&&(s++,I=y.offset=C),c=c||I<0||I>1,a=a||I<l,l=I,o.push(I),y});c&&n.errors.push(function UCe(){return new E(3012,!1)}()),a&&n.errors.push(function BCe(){return new E(3200,!1)}());const d=e.steps.length;let h=0;s>0&&s<d?n.errors.push(function $Ce(){return new E(3202,!1)}()):0==s&&(h=1/(d-1));const f=d-1,p=n.currentTime,g=n.currentAnimateTimings,m=g.duration;return u.forEach((v,y)=>{const C=h>0?y==f?1:h*y:o[y],I=C*m;n.currentTime=p+g.delay+I,g.duration=I,this._validateStyleAst(v,n),v.offset=C,r.styles.push(v)}),r}visitReference(e,n){return{type:8,animation:ni(this,Op(e.animation),n),options:Qc(e.options)}}visitAnimateChild(e,n){return n.depCount++,{type:9,options:Qc(e.options)}}visitAnimateRef(e,n){return{type:10,animation:this.visitReference(e.animation,n),options:Qc(e.options)}}visitQuery(e,n){const r=n.currentQuerySelector,i=e.options||{};n.queryCount++,n.currentQuery=e;const[s,o]=function IIe(t){const e=!!t.split(/\s*,\s*/).find(n=>":self"==n);return e&&(t=t.replace(EIe,"")),t=t.replace(/@\*/g,Yv).replace(/@\w+/g,n=>Yv+"-"+n.slice(1)).replace(/:animating/g,Zk),[t,e]}(e.selector);n.currentQuerySelector=r.length?r+" "+s:s,ti(n.collectedStyles,n.currentQuerySelector,new Map);const a=ni(this,Op(e.animation),n);return n.currentQuery=null,n.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Qc(e.options)}}visitStagger(e,n){n.currentQuery||n.errors.push(function jCe(){return new E(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Xv(e.timings,n.errors,!0);return{type:12,animation:ni(this,Op(e.animation),n),timings:r,options:null}}}class xIe{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Qc(t){return t?(t=Pp(t)).params&&(t.params=function TIe(t){return t?Pp(t):null}(t.params)):t={},t}function iM(t,e,n){return{duration:t,delay:e,easing:n}}function sM(t,e,n,r,i,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class nw{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,n){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...n)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const MIe=new RegExp(":enter","g"),NIe=new RegExp(":leave","g");function oM(t,e,n,r,i,s=new Map,o=new Map,a,c,l=[]){return(new PIe).buildKeyframes(t,e,n,r,i,s,o,a,c,l)}class PIe{buildKeyframes(e,n,r,i,s,o,a,c,l,u=[]){l=l||new nw;const d=new aM(e,n,l,i,s,u,[]);d.options=c;const h=c.delay?Io(c.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([o],null,d.errors,c),ni(this,r,d);const f=d.timelines.filter(p=>p.containsAnimation());if(f.length&&a.size){let p;for(let g=f.length-1;g>=0;g--){const m=f[g];if(m.element===n){p=m;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,c)}return f.length?f.map(p=>p.buildKeyframes()):[sM(n,[],[],[],0,h,"",!1)]}visitTrigger(e,n){}visitState(e,n){}visitTransition(e,n){}visitAnimateChild(e,n){const r=n.subInstructions.get(n.element);if(r){const i=n.createSubContext(e.options),s=n.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&n.transformIntoNewTimeline(o)}n.previousNode=e}visitAnimateRef(e,n){const r=n.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],n,r),this.visitReference(e.animation,r),n.transformIntoNewTimeline(r.currentTimeline.currentTime),n.previousNode=e}_applyAnimationRefDelays(e,n,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:Io(Fp(s,i?.params??{},n.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,n,r){let s=n.currentTimeline.currentTime;const o=null!=r.duration?Io(r.duration):null,a=null!=r.delay?Io(r.delay):null;return 0!==o&&e.forEach(c=>{const l=n.appendInstructionToTimeline(c,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,n){n.updateOptions(e.options,!0),ni(this,e.animation,n),n.previousNode=e}visitSequence(e,n){const r=n.subContextCount;let i=n;const s=e.options;if(s&&(s.params||s.delay)&&(i=n.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=rw);const o=Io(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>ni(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),n.previousNode=e}visitGroup(e,n){const r=[];let i=n.currentTimeline.currentTime;const s=e.options&&e.options.delay?Io(e.options.delay):0;e.steps.forEach(o=>{const a=n.createSubContext(e.options);s&&a.delayNextStep(s),ni(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>n.currentTimeline.mergeTimelineCollectedStyles(o)),n.transformIntoNewTimeline(i),n.previousNode=e}_visitTiming(e,n){if(e.dynamic){const r=e.strValue;return Xv(n.params?Fp(r,n.params,n.errors):r,n.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,n){const r=n.currentAnimateTimings=this._visitTiming(e.timings,n),i=n.currentTimeline;r.delay&&(n.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,n):(n.incrementTime(r.duration),this.visitStyle(s,n),i.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=e}visitStyle(e,n){const r=n.currentTimeline,i=n.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,n.errors,n.options),n.previousNode=e}visitKeyframes(e,n){const r=n.currentAnimateTimings,i=n.currentTimeline.duration,s=r.duration,a=n.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{a.forwardTime((c.offset||0)*s),a.setStyles(c.styles,c.easing,n.errors,n.options),a.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(a),n.transformIntoNewTimeline(i+s),n.previousNode=e}visitQuery(e,n){const r=n.currentTimeline.currentTime,i=e.options||{},s=i.delay?Io(i.delay):0;s&&(6===n.previousNode.type||0==r&&n.currentTimeline.hasCurrentStyleProperties())&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=rw);let o=r;const a=n.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,n.errors);n.currentQueryTotal=a.length;let c=null;a.forEach((l,u)=>{n.currentQueryIndex=u;const d=n.createSubContext(e.options,l);s&&d.delayNextStep(s),l===n.element&&(c=d.currentTimeline),ni(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(o),c&&(n.currentTimeline.mergeTimelineCollectedStyles(c),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=e}visitStagger(e,n){const r=n.parentContext,i=n.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(n.currentQueryTotal-1);let c=o*n.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime}const u=n.currentTimeline;c&&u.delayNextStep(c);const d=u.currentTime;ni(this,e.animation,n),n.previousNode=e,r.currentStaggerTime=i.currentTime-d+(i.startTime-r.currentTimeline.startTime)}}const rw={};class aM{constructor(e,n,r,i,s,o,a,c){this._driver=e,this.element=n,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=rw,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new iw(this._driver,n,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,n){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Io(r.duration)),null!=r.delay&&(i.delay=Io(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!n||!o.hasOwnProperty(a))&&(o[a]=Fp(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const n=this.options.params;if(n){const r=e.params={};Object.keys(n).forEach(i=>{r[i]=n[i]})}}return e}createSubContext(e=null,n,r){const i=n||this.element,s=new aM(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=rw,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,n,r){const i={duration:n??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new OIe(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,n,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(MIe,"."+this._enterClassName)).replace(NIe,"."+this._leaveClassName);let l=this._driver.query(this.element,e,1!=r);0!==r&&(l=r<0?l.slice(l.length+r,l.length):l.slice(0,r)),a.push(...l)}return!s&&0==a.length&&o.push(function HCe(t){return new E(3014,!1)}()),a}}class iw{constructor(e,n,r,i){this._driver=e,this.element=n,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const n=1===this._keyframes.size&&this._pendingStyles.size;this.duration||n?(this.forwardTime(this.currentTime+e),n&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,n){return this.applyStylesToKeyframe(),new iw(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,n){this._localTimelineStyles.set(e,n),this._globalTimelineStyles.set(e,n),this._styleSummary.set(e,{time:this.currentTime,value:n})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[n,r]of this._globalTimelineStyles)this._backFill.set(n,r||Co),this._currentKeyframe.set(n,Co);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,n,r,i){n&&this._previousKeyframe.set("easing",n);const s=i&&i.params||{},o=function FIe(t,e){const n=new Map;let r;return t.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)n.set(s,Co)}else wa(i,n)}),n}(e,this._globalTimelineStyles);for(let[a,c]of o){const l=Fp(c,s,r);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Co),this._updateStyle(a,l)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,n)=>{this._currentKeyframe.set(n,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,n)=>{this._currentKeyframe.has(n)||this._currentKeyframe.set(n,e)}))}snapshotCurrentStyles(){for(let[e,n]of this._localTimelineStyles)this._pendingStyles.set(e,n),this._updateStyle(e,n)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let n in this._currentKeyframe)e.push(n);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((n,r)=>{const i=this._styleSummary.get(r);(!i||n.time>i.time)&&this._updateStyle(r,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,n=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,c)=>{const l=wa(a,new Map,this._backFill);l.forEach((u,d)=>{"!"===u?e.add(d):u===Co&&n.add(d)}),r||l.set("offset",c/this.duration),i.push(l)});const s=e.size?Jv(e.values()):[],o=n.size?Jv(n.values()):[];if(r){const a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return sM(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class OIe extends iw{constructor(e,n,r,i,s,o,a=!1){super(e,n,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:n,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&n){const s=[],o=r+n,a=n/o,c=wa(e[0]);c.set("offset",0),s.push(c);const l=wa(e[0]);l.set("offset",dW(a)),s.push(l);const u=e.length-1;for(let d=1;d<=u;d++){let h=wa(e[d]);const f=h.get("offset");h.set("offset",dW((n+f*r)/o)),s.push(h)}r=o,n=0,i="",e=s}return sM(this.element,e,this.preStyleProps,this.postStyleProps,r,n,i,!0)}}function dW(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class cM{}const LIe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class VIe extends cM{normalizePropertyName(e,n){return nM(e)}normalizeStyleValue(e,n,r,i){let s="";const o=r.toString().trim();if(LIe.has(n)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function RCe(t,e){return new E(3005,!1)}())}return o+s}}function hW(t,e,n,r,i,s,o,a,c,l,u,d,h){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:d,errors:h}}const lM={};class fW{constructor(e,n,r){this._triggerName=e,this.ast=n,this._stateStyles=r}match(e,n,r,i){return function UIe(t,e,n,r,i){return t.some(s=>s(e,n,r,i))}(this.ast.matchers,e,n,r,i)}buildStyles(e,n,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(n,r):new Map}build(e,n,r,i,s,o,a,c,l,u){const d=[],h=this.ast.options&&this.ast.options.params||lM,p=this.buildStyles(r,a&&a.params||lM,d),g=c&&c.params||lM,m=this.buildStyles(i,g,d),v=new Set,y=new Map,C=new Map,I="void"===i,A={params:BIe(g,h),delay:this.ast.options?.delay},q=u?[]:oM(e,n,this.ast.animation,s,o,p,m,A,l,d);let Z=0;if(q.forEach(Nt=>{Z=Math.max(Nt.duration+Nt.delay,Z)}),d.length)return hW(n,this._triggerName,r,i,I,p,m,[],[],y,C,Z,d);q.forEach(Nt=>{const si=Nt.element,Ww=ti(y,si,new Set);Nt.preStyleProps.forEach(cl=>Ww.add(cl));const lg=ti(C,si,new Set);Nt.postStyleProps.forEach(cl=>lg.add(cl)),si!==n&&v.add(si)});const ze=Jv(v.values());return hW(n,this._triggerName,r,i,I,p,m,q,ze,y,C,Z)}}function BIe(t,e){const n=Pp(e);for(const r in t)t.hasOwnProperty(r)&&null!=t[r]&&(n[r]=t[r]);return n}class $Ie{constructor(e,n,r){this.styles=e,this.defaultParams=n,this.normalizer=r}buildStyles(e,n){const r=new Map,i=Pp(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(i[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=Fp(o,i,n));const c=this.normalizer.normalizePropertyName(a,n);o=this.normalizer.normalizeStyleValue(a,c,o,n),r.set(a,o)})}),r}}class HIe{constructor(e,n,r){this.name=e,this.ast=n,this._normalizer=r,this.transitionFactories=[],this.states=new Map,n.states.forEach(i=>{this.states.set(i.name,new $Ie(i.style,i.options&&i.options.params||{},r))}),pW(this.states,"true","1"),pW(this.states,"false","0"),n.transitions.forEach(i=>{this.transitionFactories.push(new fW(e,i,this.states))}),this.fallbackTransition=function zIe(t,e,n){return new fW(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,n,r,i){return this.transitionFactories.find(o=>o.match(e,n,r,i))||null}matchStyles(e,n,r){return this.fallbackTransition.buildStyles(e,n,r)}}function pW(t,e,n){t.has(e)?t.has(n)||t.set(n,t.get(e)):t.has(n)&&t.set(e,t.get(n))}const WIe=new nw;class GIe{constructor(e,n,r){this.bodyNode=e,this._driver=n,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,n){const r=[],s=rM(this._driver,n,r,[]);if(r.length)throw function YCe(t){return new E(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,n,r){const i=e.element,s=Y5(this._normalizer,e.keyframes,n,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,n,r={}){const i=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=oM(this._driver,n,s,Jk,Kv,new Map,new Map,r,WIe,i),o.forEach(u=>{const d=ti(a,u.element,new Map);u.postStyleProps.forEach(h=>d.set(h,null))})):(i.push(function XCe(){return new E(3300,!1)}()),o=[]),i.length)throw function JCe(t){return new E(3504,!1)}();a.forEach((u,d)=>{u.forEach((h,f)=>{u.set(f,this._driver.computeStyle(d,f,Co))})});const l=va(o.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,new Map,d)}));return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){const n=this._getPlayer(e);n.destroy(),this._playersById.delete(e);const r=this.players.indexOf(n);r>=0&&this.players.splice(r,1)}_getPlayer(e){const n=this._playersById.get(e);if(!n)throw function ZCe(t){return new E(3301,!1)}();return n}listen(e,n,r,i){const s=Qk(n,"","","");return qk(this._getPlayer(e),r,s,i),()=>{}}command(e,n,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,n,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const gW="ng-animate-queued",uM="ng-animate-disabled",XIe=[],mW={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},JIe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},$i="__ng_removed";class dM{get params(){return this.options.params}constructor(e,n=""){this.namespaceId=n;const r=e&&e.hasOwnProperty("value");if(this.value=function nTe(t){return t??null}(r?e.value:e),r){const s=Pp(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const n=e.params;if(n){const r=this.options.params;Object.keys(n).forEach(i=>{null==r[i]&&(r[i]=n[i])})}}}const Lp="void",hM=new dM(Lp);class ZIe{constructor(e,n,r){this.id=e,this.hostElement=n,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,bi(n,this._hostClassName)}listen(e,n,r,i){if(!this._triggers.has(n))throw function eIe(t,e){return new E(3302,!1)}();if(null==r||0==r.length)throw function tIe(t){return new E(3303,!1)}();if(!function rTe(t){return"start"==t||"done"==t}(r))throw function nIe(t,e){return new E(3400,!1)}();const s=ti(this._elementListeners,e,[]),o={name:n,phase:r,callback:i};s.push(o);const a=ti(this._engine.statesByElement,e,new Map);return a.has(n)||(bi(e,Qv),bi(e,Qv+"-"+n),a.set(n,hM)),()=>{this._engine.afterFlush(()=>{const c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(n)||a.delete(n)})}}register(e,n){return!this._triggers.has(e)&&(this._triggers.set(e,n),!0)}_getTrigger(e){const n=this._triggers.get(e);if(!n)throw function rIe(t){return new E(3401,!1)}();return n}trigger(e,n,r,i=!0){const s=this._getTrigger(n),o=new fM(this.id,n,e);let a=this._engine.statesByElement.get(e);a||(bi(e,Qv),bi(e,Qv+"-"+n),this._engine.statesByElement.set(e,a=new Map));let c=a.get(n);const l=new dM(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(n,l),c||(c=hM),l.value!==Lp&&c.value===l.value){if(!function oTe(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const s=n[i];if(!e.hasOwnProperty(s)||t[s]!==e[s])return!1}return!0}(c.params,l.params)){const g=[],m=s.matchStyles(c.value,c.params,g),v=s.matchStyles(l.value,l.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{Kc(e,m),Is(e,v)})}return}const h=ti(this._engine.playersByElement,e,[]);h.forEach(g=>{g.namespaceId==this.id&&g.triggerName==n&&g.queued&&g.destroy()});let f=s.matchTransition(c.value,l.value,e,l.params),p=!1;if(!f){if(!i)return;f=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:n,transition:f,fromState:c,toState:l,player:o,isFallbackTransition:p}),p||(bi(e,gW),o.onStart(()=>{hd(e,gW)})),o.onDone(()=>{let g=this.players.indexOf(o);g>=0&&this.players.splice(g,1);const m=this._engine.playersByElement.get(e);if(m){let v=m.indexOf(o);v>=0&&m.splice(v,1)}}),this.players.push(o),h.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(n=>n.delete(e)),this._elementListeners.forEach((n,r)=>{this._elementListeners.set(r,n.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const n=this._engine.playersByElement.get(e);n&&(n.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,n){const r=this._engine.driver.query(e,Yv,!0);r.forEach(i=>{if(i[$i])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,n,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,n,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((c,l)=>{if(o.set(l,c.value),this._triggers.has(l)){const u=this.trigger(e,l,Lp,i);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,n,o),r&&va(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const n=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(n&&r){const i=new Set;n.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const c=this._triggers.get(o).fallbackTransition,l=r.get(o)||hM,u=new dM(Lp),d=new fM(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:l,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,n){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,n),this.triggerLeaveAnimation(e,n,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,n);else{const s=e[$i];(!s||s===mW)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,n))}}insertNode(e,n){bi(e,this._hostClassName)}drainQueuedTransitions(e){const n=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const c=Qk(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,qk(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):n.push(r)}),this._queue=[],n.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class eTe{_onRemovalComplete(e,n){this.onRemovalComplete(e,n)}constructor(e,n,r){this.bodyNode=e,this.driver=n,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(n=>{n.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,n){const r=new ZIe(e,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(r,n):(this.newHostElements.set(n,r),this.collectEnterElement(n)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,n){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(n);for(;a;){const c=i.get(a);if(c){const l=r.indexOf(c);r.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(n,e),e}register(e,n){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,n)),r}registerTrigger(e,n,r){let i=this._namespaceLookup[e];i&&i.register(n,r)&&this.totalAnimations++}destroy(e,n){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(n),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const n=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&n.add(s)}return n}trigger(e,n,r,i){if(sw(n)){const s=this._fetchNamespace(e);if(s)return s.trigger(n,r,i),!0}return!1}insertNode(e,n,r,i){if(!sw(n))return;const s=n[$i];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(n);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(n,r)}i&&this.collectEnterElement(n)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,n){n?this.disabledNodes.has(e)||(this.disabledNodes.add(e),bi(e,uM)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),hd(e,uM))}removeNode(e,n,r){if(sw(n)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(n,r):this.markElementAsRemoved(e,n,!1,r);const s=this.namespacesByHostElement.get(n);s&&s.id!==e&&s.removeNode(n,r)}else this._onRemovalComplete(n,r)}markElementAsRemoved(e,n,r,i,s){this.collectedLeaveElements.push(n),n[$i]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,n,r,i,s){return sw(n)?this._fetchNamespace(e).listen(n,r,i,s):()=>{}}_buildInstruction(e,n,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,n,s)}destroyInnerAnimations(e){let n=this.driver.query(e,Yv,!0);n.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(n=this.driver.query(e,Zk,!0),n.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const n=this.playersByElement.get(e);n&&n.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const n=this.playersByQueriedElement.get(e);n&&n.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return va(this.players).onDone(()=>e());e()})}processLeaveNode(e){const n=e[$i];if(n&&n.setForRemoval){if(e[$i]=mW,n.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}e.classList?.contains(uM)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)bi(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{n=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],n.length?va(n).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function iIe(t){return new E(3402,!1)}()}_flushAnimations(e,n){const r=new nw,i=[],s=new Map,o=[],a=new Map,c=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(Q=>{u.add(Q);const J=this.driver.query(Q,".ng-animate-queued",!0);for(let ne=0;ne<J.length;ne++)u.add(J[ne])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=vW(h,this.collectedEnterElements),p=new Map;let g=0;f.forEach((Q,J)=>{const ne=Jk+g++;p.set(J,ne),Q.forEach(Ve=>bi(Ve,ne))});const m=[],v=new Set,y=new Set;for(let Q=0;Q<this.collectedLeaveElements.length;Q++){const J=this.collectedLeaveElements[Q],ne=J[$i];ne&&ne.setForRemoval&&(m.push(J),v.add(J),ne.hasAnimation?this.driver.query(J,".ng-star-inserted",!0).forEach(Ve=>v.add(Ve)):y.add(J))}const C=new Map,I=vW(h,Array.from(v));I.forEach((Q,J)=>{const ne=Kv+g++;C.set(J,ne),Q.forEach(Ve=>bi(Ve,ne))}),e.push(()=>{f.forEach((Q,J)=>{const ne=p.get(J);Q.forEach(Ve=>hd(Ve,ne))}),I.forEach((Q,J)=>{const ne=C.get(J);Q.forEach(Ve=>hd(Ve,ne))}),m.forEach(Q=>{this.processLeaveNode(Q)})});const A=[],q=[];for(let Q=this._namespaceList.length-1;Q>=0;Q--)this._namespaceList[Q].drainQueuedTransitions(n).forEach(ne=>{const Ve=ne.player,bn=ne.element;if(A.push(Ve),this.collectedEnterElements.length){const Zn=bn[$i];if(Zn&&Zn.setForMove){if(Zn.previousTriggersValues&&Zn.previousTriggersValues.has(ne.triggerName)){const ll=Zn.previousTriggersValues.get(ne.triggerName),Ii=this.statesByElement.get(ne.element);if(Ii&&Ii.has(ne.triggerName)){const Gw=Ii.get(ne.triggerName);Gw.value=ll,Ii.set(ne.triggerName,Gw)}}return void Ve.destroy()}}const Ms=!d||!this.driver.containsElement(d,bn),oi=C.get(bn),ka=p.get(bn),xt=this._buildInstruction(ne,r,ka,oi,Ms);if(xt.errors&&xt.errors.length)return void q.push(xt);if(Ms)return Ve.onStart(()=>Kc(bn,xt.fromStyles)),Ve.onDestroy(()=>Is(bn,xt.toStyles)),void i.push(Ve);if(ne.isFallbackTransition)return Ve.onStart(()=>Kc(bn,xt.fromStyles)),Ve.onDestroy(()=>Is(bn,xt.toStyles)),void i.push(Ve);const Pq=[];xt.timelines.forEach(Zn=>{Zn.stretchStartingKeyframe=!0,this.disabledNodes.has(Zn.element)||Pq.push(Zn)}),xt.timelines=Pq,r.append(bn,xt.timelines),o.push({instruction:xt,player:Ve,element:bn}),xt.queriedElements.forEach(Zn=>ti(a,Zn,[]).push(Ve)),xt.preStyleProps.forEach((Zn,ll)=>{if(Zn.size){let Ii=c.get(ll);Ii||c.set(ll,Ii=new Set),Zn.forEach((Gw,DR)=>Ii.add(DR))}}),xt.postStyleProps.forEach((Zn,ll)=>{let Ii=l.get(ll);Ii||l.set(ll,Ii=new Set),Zn.forEach((Gw,DR)=>Ii.add(DR))})});if(q.length){const Q=[];q.forEach(J=>{Q.push(function sIe(t,e){return new E(3505,!1)}())}),A.forEach(J=>J.destroy()),this.reportError(Q)}const Z=new Map,ze=new Map;o.forEach(Q=>{const J=Q.element;r.has(J)&&(ze.set(J,J),this._beforeAnimationBuild(Q.player.namespaceId,Q.instruction,Z))}),i.forEach(Q=>{const J=Q.element;this._getPreviousPlayers(J,!1,Q.namespaceId,Q.triggerName,null).forEach(Ve=>{ti(Z,J,[]).push(Ve),Ve.destroy()})});const Nt=m.filter(Q=>bW(Q,c,l)),si=new Map;yW(si,this.driver,y,l,Co).forEach(Q=>{bW(Q,c,l)&&Nt.push(Q)});const lg=new Map;f.forEach((Q,J)=>{yW(lg,this.driver,new Set(Q),c,"!")}),Nt.forEach(Q=>{const J=si.get(Q),ne=lg.get(Q);si.set(Q,new Map([...J?.entries()??[],...ne?.entries()??[]]))});const cl=[],Rq=[],Nq={};o.forEach(Q=>{const{element:J,player:ne,instruction:Ve}=Q;if(r.has(J)){if(u.has(J))return ne.onDestroy(()=>Is(J,Ve.toStyles)),ne.disabled=!0,ne.overrideTotalTime(Ve.totalTime),void i.push(ne);let bn=Nq;if(ze.size>1){let oi=J;const ka=[];for(;oi=oi.parentNode;){const xt=ze.get(oi);if(xt){bn=xt;break}ka.push(oi)}ka.forEach(xt=>ze.set(xt,bn))}const Ms=this._buildAnimation(ne.namespaceId,Ve,Z,s,lg,si);if(ne.setRealPlayer(Ms),bn===Nq)cl.push(ne);else{const oi=this.playersByElement.get(bn);oi&&oi.length&&(ne.parentPlayer=va(oi)),i.push(ne)}}else Kc(J,Ve.fromStyles),ne.onDestroy(()=>Is(J,Ve.toStyles)),Rq.push(ne),u.has(J)&&i.push(ne)}),Rq.forEach(Q=>{const J=s.get(Q.element);if(J&&J.length){const ne=va(J);Q.setRealPlayer(ne)}}),i.forEach(Q=>{Q.parentPlayer?Q.syncPlayerEvents(Q.parentPlayer):Q.destroy()});for(let Q=0;Q<m.length;Q++){const J=m[Q],ne=J[$i];if(hd(J,Kv),ne&&ne.hasAnimation)continue;let Ve=[];if(a.size){let Ms=a.get(J);Ms&&Ms.length&&Ve.push(...Ms);let oi=this.driver.query(J,Zk,!0);for(let ka=0;ka<oi.length;ka++){let xt=a.get(oi[ka]);xt&&xt.length&&Ve.push(...xt)}}const bn=Ve.filter(Ms=>!Ms.destroyed);bn.length?iTe(this,J,bn):this.processLeaveNode(J)}return m.length=0,cl.forEach(Q=>{this.players.push(Q),Q.onDone(()=>{Q.destroy();const J=this.players.indexOf(Q);this.players.splice(J,1)}),Q.play()}),cl}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,n,r,i,s){let o=[];if(n){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const c=!s||s==Lp;a.forEach(l=>{l.queued||!c&&l.triggerName!=i||o.push(l)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,n,r){const s=n.element,o=n.isRemovalTransition?void 0:e,a=n.isRemovalTransition?void 0:n.triggerName;for(const c of n.timelines){const l=c.element,u=l!==s,d=ti(r,l,[]);this._getPreviousPlayers(l,u,o,a,n.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}Kc(s,n.fromStyles)}_buildAnimation(e,n,r,i,s,o){const a=n.triggerName,c=n.element,l=[],u=new Set,d=new Set,h=n.timelines.map(p=>{const g=p.element;u.add(g);const m=g[$i];if(m&&m.removedBeforeQueried)return new Np(p.duration,p.delay);const v=g!==c,y=function sTe(t){const e=[];return wW(t,e),e}((r.get(g)||XIe).map(Z=>Z.getRealPlayer())).filter(Z=>!!Z.element&&Z.element===g),C=s.get(g),I=o.get(g),A=Y5(this._normalizer,p.keyframes,C,I),q=this._buildPlayer(p,A,y);if(p.subTimeline&&i&&d.add(g),v){const Z=new fM(e,a,g);Z.setRealPlayer(q),l.push(Z)}return q});l.forEach(p=>{ti(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function tTe(t,e,n){let r=t.get(e);if(r){if(r.length){const i=r.indexOf(n);r.splice(i,1)}0==r.length&&t.delete(e)}return r}(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>bi(p,rW));const f=va(h);return f.onDestroy(()=>{u.forEach(p=>hd(p,rW)),Is(c,n.toStyles)}),d.forEach(p=>{ti(i,p,[]).push(f)}),f}_buildPlayer(e,n,r){return n.length>0?this.driver.animate(e.element,n,e.duration,e.delay,e.easing,r):new Np(e.duration,e.delay)}}class fM{constructor(e,n,r){this.namespaceId=e,this.triggerName=n,this.element=r,this._player=new Np,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((n,r)=>{n.forEach(i=>qk(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const n=this._player;n.triggerCallback&&e.onStart(()=>n.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,n){ti(this._queuedCallbacks,e,[]).push(n)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const n=this._player;n.triggerCallback&&n.triggerCallback(e)}}function sw(t){return t&&1===t.nodeType}function _W(t,e){const n=t.style.display;return t.style.display=e??"none",n}function yW(t,e,n,r,i){const s=[];n.forEach(c=>s.push(_W(c)));const o=[];r.forEach((c,l)=>{const u=new Map;c.forEach(d=>{const h=e.computeStyle(l,d,i);u.set(d,h),(!h||0==h.length)&&(l[$i]=JIe,o.push(l))}),t.set(l,u)});let a=0;return n.forEach(c=>_W(c,s[a++])),o}function vW(t,e){const n=new Map;if(t.forEach(a=>n.set(a,[])),0==e.length)return n;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let c=s.get(a);if(c)return c;const l=a.parentNode;return c=n.has(l)?l:i.has(l)?1:o(l),s.set(a,c),c}return e.forEach(a=>{const c=o(a);1!==c&&n.get(c).push(a)}),n}function bi(t,e){t.classList?.add(e)}function hd(t,e){t.classList?.remove(e)}function iTe(t,e,n){va(n).onDone(()=>t.processLeaveNode(e))}function wW(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof K5?wW(r.players,e):e.push(r)}}function bW(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(s=>i.add(s)):e.set(t,r),n.delete(t),!0}class ow{constructor(e,n,r){this.bodyNode=e,this._driver=n,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new eTe(e,n,r),this._timelineEngine=new GIe(e,n,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,n,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const c=[],u=rM(this._driver,s,c,[]);if(c.length)throw function KCe(t,e){return new E(3404,!1)}();a=function jIe(t,e,n){return new HIe(t,e,n)}(i,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(n,i,a)}register(e,n){this._transitionEngine.register(e,n)}destroy(e,n){this._transitionEngine.destroy(e,n)}onInsert(e,n,r,i){this._transitionEngine.insertNode(e,n,r,i)}onRemove(e,n,r){this._transitionEngine.removeNode(e,n,r)}disableAnimations(e,n){this._transitionEngine.markElementAsDisabled(e,n)}process(e,n,r,i){if("@"==r.charAt(0)){const[s,o]=X5(r);this._timelineEngine.command(s,n,o,i)}else this._transitionEngine.trigger(e,n,r,i)}listen(e,n,r,i,s){if("@"==r.charAt(0)){const[o,a]=X5(r);return this._timelineEngine.listen(o,n,a,s)}return this._transitionEngine.listen(e,n,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let cTe=(()=>{class e{constructor(r,i,s){this._element=r,this._startStyles=i,this._endStyles=s,this._state=0;let o=e.initialStylesByElement.get(r);o||e.initialStylesByElement.set(r,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Is(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Is(this._element,this._initialStyles),this._endStyles&&(Is(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(Kc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Kc(this._element,this._endStyles),this._endStyles=null),Is(this._element,this._initialStyles),this._state=3)}}return e.initialStylesByElement=new WeakMap,e})();function pM(t){let e=null;return t.forEach((n,r)=>{(function lTe(t){return"display"===t||"position"===t})(r)&&(e=e||new Map,e.set(r,n))}),e}class EW{constructor(e,n,r,i){this.element=e,this.keyframes=n,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const n=[];return e.forEach(r=>{n.push(Object.fromEntries(r))}),n}_triggerWebAnimation(e,n,r){return e.animate(this._convertKeyframesToObject(n),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:aW(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const n="start"===e?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}}class uTe{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,n){return!1}containsElement(e,n){return Z5(e,n)}getParentElement(e){return Yk(e)}query(e,n,r){return eW(e,n,r)}computeStyle(e,n,r){return window.getComputedStyle(e)[n]}animate(e,n,r,i,s,o=[]){const c={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(c.easing=s);const l=new Map,u=o.filter(f=>f instanceof EW);(function _Ie(t,e){return 0===t||0===e})(r,i)&&u.forEach(f=>{f.currentSnapshot.forEach((p,g)=>l.set(g,p))});let d=function pIe(t){return t.length?t[0]instanceof Map?t:t.map(e=>iW(e)):[]}(n).map(f=>wa(f));d=function yIe(t,e,n){if(n.size&&e.length){let r=e[0],i=[];if(n.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,aW(t,a)))}}return e}(e,d,l);const h=function aTe(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=pM(e[0]),e.length>1&&(r=pM(e[e.length-1]))):e instanceof Map&&(n=pM(e)),n||r?new cTe(t,n,r):null}(e,d);return new EW(e,d,c,h)}}let dTe=(()=>{var t;class e extends W5{constructor(r,i){super(),this._nextAnimationId=0,this._renderer=r.createRenderer(i.body,{id:"0",encapsulation:ui.None,styles:[],data:{animation:[]}})}build(r){const i=this._nextAnimationId.toString();this._nextAnimationId++;const s=Array.isArray(r)?G5(r):r;return CW(this._renderer,null,i,"register",[s]),new hTe(i,this._renderer)}}return(t=e).\u0275fac=function(r){return new(r||t)(N(nh),N(An))},t.\u0275prov=z({token:t,factory:t.\u0275fac}),e})();class hTe extends xCe{constructor(e,n){super(),this._id=e,this._renderer=n}create(e,n){return new fTe(this._id,e,n||{},this._renderer)}}class fTe{constructor(e,n,r,i){this.id=e,this.element=n,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,n){return this._renderer.listen(this.element,`@@${this.id}:${e}`,n)}_command(e,...n){return CW(this._renderer,this.element,this.id,e,n)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function CW(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const IW="@.disabled";let pTe=(()=>{var t;class e{constructor(r,i,s){this.delegate=r,this.engine=i,this._zone=s,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,i.onRemovalComplete=(o,a)=>{const c=a?.parentNode(o);c&&a.removeChild(c,o)}}createRenderer(r,i){const o=this.delegate.createRenderer(r,i);if(!(r&&i&&i.data&&i.data.animation)){let d=this._rendererCache.get(o);return d||(d=new TW("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,d)),d}const a=i.id,c=i.id+"-"+this._currentId;this._currentId++,this.engine.register(c,r);const l=d=>{Array.isArray(d)?d.forEach(l):this.engine.registerTrigger(a,c,r,d.name,d)};return i.data.animation.forEach(l),new gTe(this,c,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(r,i,s){r>=0&&r<this._microtaskId?this._zone.run(()=>i(s)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[a,c]=o;a(c)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,s]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return(t=e).\u0275fac=function(r){return new(r||t)(N(nh),N(ow),N(Re))},t.\u0275prov=z({token:t,factory:t.\u0275fac}),e})();class TW{constructor(e,n,r,i){this.namespaceId=e,this.delegate=n,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,n){this.delegate.appendChild(e,n),this.engine.onInsert(this.namespaceId,n,e,!1)}insertBefore(e,n,r,i=!0){this.delegate.insertBefore(e,n,r),this.engine.onInsert(this.namespaceId,n,e,i)}removeChild(e,n,r){this.engine.onRemove(this.namespaceId,n,this.delegate)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,r,i){this.delegate.setAttribute(e,n,r,i)}removeAttribute(e,n,r){this.delegate.removeAttribute(e,n,r)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,r,i){this.delegate.setStyle(e,n,r,i)}removeStyle(e,n,r){this.delegate.removeStyle(e,n,r)}setProperty(e,n,r){"@"==n.charAt(0)&&n==IW?this.disableAnimations(e,!!r):this.delegate.setProperty(e,n,r)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,r){return this.delegate.listen(e,n,r)}disableAnimations(e,n){this.engine.disableAnimations(e,n)}}class gTe extends TW{constructor(e,n,r,i,s){super(n,r,i,s),this.factory=e,this.namespaceId=n}setProperty(e,n,r){"@"==n.charAt(0)?"."==n.charAt(1)&&n==IW?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,n.slice(1),r):this.delegate.setProperty(e,n,r)}listen(e,n,r){if("@"==n.charAt(0)){const i=function mTe(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(e);let s=n.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function _Te(t){const e=t.indexOf(".");return[t.substring(0,e),t.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,n,r)}}let yTe=(()=>{var t;class e extends ow{constructor(r,i,s,o){super(r.body,i,s)}ngOnDestroy(){this.flush()}}return(t=e).\u0275fac=function(r){return new(r||t)(N(An),N(Xk),N(cM),N(Bo))},t.\u0275prov=z({token:t,factory:t.\u0275fac}),e})();const xW=[{provide:W5,useClass:dTe},{provide:cM,useFactory:function vTe(){return new VIe}},{provide:ow,useClass:yTe},{provide:nh,useFactory:function wTe(t,e,n){return new pTe(t,e,n)},deps:[mC,ow,Re]}],gM=[{provide:Xk,useFactory:()=>new uTe},{provide:fO,useValue:"BrowserAnimations"},...xW],SW=[{provide:Xk,useClass:tW},{provide:fO,useValue:"NoopAnimations"},...xW];let bTe=(()=>{var t;class e{static withConfig(r){return{ngModule:e,providers:r.disableAnimations?SW:gM}}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Jt({type:t}),t.\u0275inj=zt({providers:gM,imports:[EU]}),e})();class ETe extends bt{constructor(e=1/0,n=1/0,r=$T){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=n.now();let a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}}const cw={schedule(t,e){const n=setTimeout(t,e);return()=>clearTimeout(n)},scheduleBeforeRender(t){if(typeof window>"u")return cw.schedule(t,0);if(typeof window.requestAnimationFrame>"u")return cw.schedule(t,16);const e=window.requestAnimationFrame(t);return()=>window.cancelAnimationFrame(e)}};let mM;function MTe(t,e,n){let r=n;return function ITe(t){return!!t&&t.nodeType===Node.ELEMENT_NODE}(t)&&e.some((i,s)=>!("*"===i||!function xTe(t,e){if(!mM){const n=Element.prototype;mM=n.matches||n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}return t.nodeType===Node.ELEMENT_NODE&&mM.call(t,e)}(t,i)||(r=s,0))),r}class NTe{constructor(e,n){this.componentFactory=n.get(Ll).resolveComponentFactory(e)}create(e){return new PTe(this.componentFactory,e)}}class PTe{constructor(e,n){this.componentFactory=e,this.injector=n,this.eventEmitters=new ETe(1),this.events=this.eventEmitters.pipe(ci(r=>WR(...r))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:r})=>r)),this.ngZone=this.injector.get(Re),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=cw.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(e){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(e):this.componentRef.instance[e])}setInputValue(e,n,r){this.runInZone(()=>{r&&(n=r.call(this.componentRef?.instance,n)),null!==this.componentRef?function STe(t,e){return t===e||t!=t&&e!=e}(n,this.getInputValue(e))&&(void 0!==n||!this.unchangedInputs.has(e))||(this.recordInputChange(e,n),this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.instance[e]=n,this.scheduleDetectChanges()):this.initialInputValues.set(e,n)})}initializeComponent(e){const n=Vt.create({providers:[],parent:this.injector}),r=function kTe(t,e){const n=t.childNodes,r=e.map(()=>[]);let i=-1;e.some((s,o)=>"*"===s&&(i=o,!0));for(let s=0,o=n.length;s<o;++s){const a=n[s],c=MTe(a,e,i);-1!==c&&r[c].push(a)}return r}(e,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(n,r,e),this.viewChangeDetectorRef=this.componentRef.injector.get(ru),this.implementsOnChanges=function TTe(t){return"function"==typeof t}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(Bo).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:e,transform:n})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e),n)}),this.initialInputValues.clear()}initializeOutputs(e){const n=this.componentFactory.outputs.map(({propName:r,templateName:i})=>e.instance[r].pipe(be(o=>({name:i,value:o}))));this.eventEmitters.next(n)}callNgOnChanges(e){if(!this.implementsOnChanges||null===this.inputChanges)return;const n=this.inputChanges;this.inputChanges=null,e.instance.ngOnChanges(n)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=cw.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(e,n){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const r=this.inputChanges[e];if(r)return void(r.currentValue=n);const i=this.unchangedInputs.has(e),s=i?void 0:this.getInputValue(e);this.inputChanges[e]=new TN(s,n,i)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}}class OTe extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}let DW=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Jt({type:t}),t.\u0275inj=zt({imports:[cC]}),e})(),LTe=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=Jt({type:t}),t.\u0275inj=zt({imports:[cC,DW]}),e})();const lt=void 0,UTe=["es-US",[["a.\xa0m.","p.\xa0m."],lt,lt],lt,[["D","L","M","M","J","V","S"],["dom","lun","mar","mi\xe9","jue","vie","s\xe1b"],["domingo","lunes","martes","mi\xe9rcoles","jueves","viernes","s\xe1bado"],["DO","LU","MA","MI","JU","VI","SA"]],lt,[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene","feb","mar","abr","may","jun","jul","ago","sept","oct","nov","dic"],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]],lt,[["a. C.","d. C."],lt,["antes de Cristo","despu\xe9s de Cristo"]],0,[6,0],["d/M/y","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",lt,lt,lt],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0\xa0%","\xa4#,##0.00","#E0"],"USD","$","d\xf3lar estadounidense",{AUD:[lt,"$"],BRL:[lt,"R$"],BYN:[lt,"\u0440."],CAD:[lt,"$"],CNY:[lt,"\xa5"],ESP:["\u20a7"],EUR:[lt,"\u20ac"],GBP:[lt,"\xa3"],HKD:[lt,"$"],ILS:[lt,"\u20aa"],INR:[lt,"\u20b9"],KRW:[lt,"\u20a9"],MXN:[lt,"$"],NZD:[lt,"$"],PHP:[lt,"\u20b1"],TWD:[lt,"NT$"],VND:[lt,"\u20ab"],XAF:[],XCD:[lt,"$"],XOF:[]},"ltr",function VTe(t){const e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length,i=parseInt(t.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return 1===e?1:0===i&&0!==n&&n%1e6==0&&0===r||!(i>=0&&i<=5)?4:5}],Yc=void 0,$Te=["en",[["a","p"],["AM","PM"],Yc],[["AM","PM"],Yc,Yc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Yc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Yc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Yc,"{1} 'at' {0}",Yc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function BTe(t){const n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===r?1:5}],$t=void 0,HTe=["fr",[["AM","PM"],$t,$t],$t,[["D","L","M","M","J","V","S"],["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],["di","lu","ma","me","je","ve","sa"]],$t,[["J","F","M","A","M","J","J","A","S","O","N","D"],["janv.","f\xe9vr.","mars","avr.","mai","juin","juil.","ao\xfbt","sept.","oct.","nov.","d\xe9c."],["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre"]],$t,[["av. J.-C.","ap. J.-C."],$t,["avant J\xe9sus-Christ","apr\xe8s J\xe9sus-Christ"]],1,[6,0],["dd/MM/y","d MMM y","d MMMM y","EEEE d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1} {0}","{1}, {0}","{1} '\xe0' {0}",$t],[",","\u202f",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0\xa0%","#,##0.00\xa0\xa4","#E0"],"EUR","\u20ac","euro",{ARS:["$AR","$"],AUD:["$AU","$"],BEF:["FB"],BMD:["$BM","$"],BND:["$BN","$"],BYN:[$t,"\u0440."],BZD:["$BZ","$"],CAD:["$CA","$"],CLP:["$CL","$"],CNY:[$t,"\xa5"],COP:["$CO","$"],CYP:["\xa3CY"],EGP:[$t,"\xa3E"],FJD:["$FJ","$"],FKP:["\xa3FK","\xa3"],FRF:["F"],GBP:["\xa3GB","\xa3"],GIP:["\xa3GI","\xa3"],HKD:[$t,"$"],IEP:["\xa3IE"],ILP:["\xa3IL"],ITL:["\u20a4IT"],JPY:[$t,"\xa5"],KMF:[$t,"FC"],LBP:["\xa3LB","\xa3L"],MTP:["\xa3MT"],MXN:["$MX","$"],NAD:["$NA","$"],NIO:[$t,"$C"],NZD:["$NZ","$"],PHP:[$t,"\u20b1"],RHD:["$RH"],RON:[$t,"L"],RWF:[$t,"FR"],SBD:["$SB","$"],SGD:["$SG","$"],SRD:["$SR","$"],TOP:[$t,"$T"],TTD:["$TT","$"],TWD:[$t,"NT$"],USD:["$US","$"],UYU:["$UY","$"],WST:["$WS"],XCD:[$t,"$"],XPF:["FCFP"],ZMW:[$t,"Kw"]},"ltr",function jTe(t){const n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length,i=parseInt(t.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return 0===n||1===n?1:0===i&&0!==n&&n%1e6==0&&0===r||!(i>=0&&i<=5)?4:5}],ri=void 0,WTe=["pt",[["AM","PM"],ri,ri],ri,[["D","S","T","Q","Q","S","S"],["dom.","seg.","ter.","qua.","qui.","sex.","s\xe1b."],["domingo","segunda-feira","ter\xe7a-feira","quarta-feira","quinta-feira","sexta-feira","s\xe1bado"],["dom.","seg.","ter.","qua.","qui.","sex.","s\xe1b."]],ri,[["J","F","M","A","M","J","J","A","S","O","N","D"],["jan.","fev.","mar.","abr.","mai.","jun.","jul.","ago.","set.","out.","nov.","dez."],["janeiro","fevereiro","mar\xe7o","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]],ri,[["a.C.","d.C."],ri,["antes de Cristo","depois de Cristo"]],0,[6,0],["dd/MM/y","d 'de' MMM 'de' y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1} {0}",ri,ri,ri],[",",".",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4\xa0#,##0.00","#E0"],"BRL","R$","Real brasileiro",{AUD:["AU$","$"],BYN:[ri,"\u0440."],JPY:["JP\xa5","\xa5"],PHP:[ri,"\u20b1"],PTE:["Esc."],RON:[ri,"L"],SYP:[ri,"S\xa3"],THB:["\u0e3f"],TWD:["NT$"],USD:["US$","$"]},"ltr",function zTe(t){const n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length,i=parseInt(t.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return n===Math.floor(n)&&n>=0&&n<=1?1:0===i&&0!==n&&n%1e6==0&&0===r||!(i>=0&&i<=5)?4:5}],AW="@firebase/database";let _M="";class qTe{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){null==n?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Mn(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return null==n?null:Qh(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class KTe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){null==n?delete this.cache_[e]:this.cache_[e]=n}get(e){return ro(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const MW=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new qTe(e)}}catch{}return new KTe},Xc=MW("localStorage"),yM=MW("sessionStorage"),fd=new oc("@firebase/database"),RW=function(){let t=1;return function(){return t++}}(),NW=function(t){const e=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,O(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),n=new bae;n.update(e);const r=n.digest();return x_.encodeByteArray(r)},Vp=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Vp.apply(null,r):e+="object"==typeof r?Mn(r):r,e+=" "}return e};let Jc=null,PW=!0;const vn=function(...t){if(!0===PW&&(PW=!1,null===Jc&&!0===yM.get("logging_enabled")&&function(t,e){O(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(fd.logLevel=Le.VERBOSE,Jc=fd.log.bind(fd),e&&yM.set("logging_enabled",!0)):"function"==typeof t?Jc=t:(Jc=null,yM.remove("logging_enabled"))}(!0)),Jc){const e=Vp.apply(null,t);Jc(e)}},Up=function(t){return function(...e){vn(t,...e)}},vM=function(...t){const e="FIREBASE INTERNAL ERROR: "+Vp(...t);fd.error(e)},Ts=function(...t){const e=`FIREBASE FATAL ERROR: ${Vp(...t)}`;throw fd.error(e),new Error(e)},Jn=function(...t){const e="FIREBASE WARNING: "+Vp(...t);fd.warn(e)},lw=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},To="[MIN_NAME]",xs="[MAX_NAME]",Zc=function(t,e){if(t===e)return 0;if(t===To||e===xs)return-1;if(e===To||t===xs)return 1;{const n=uw(t),r=uw(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1}},XTe=function(t,e){return t===e?0:t<e?-1:1},Bp=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Mn(e))},wM=function(t){if("object"!=typeof t||null===t)return Mn(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)0!==r&&(n+=","),n+=Mn(e[r]),n+=":",n+=wM(t[e[r]]);return n+="}",n},FW=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function wn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const LW=function(t){O(!lw(t),"Invalid JSON number");const r=1023;let i,s,o,a,c;0===t?(s=0,o=0,i=1/t==-1/0?1:0):(i=t<0,(t=Math.abs(t))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(t/Math.pow(2,-1074))));const l=[];for(c=52;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=11;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();const u=l.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);1===h.length&&(h="0"+h),d+=h}return d.toLowerCase()},txe=new RegExp("^-?(0*)\\d{1,10}$"),uw=function(t){if(txe.test(t)){const e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},pd=function(t){try{t()}catch(e){setTimeout(()=>{throw Jn("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},$p=function(t,e){const n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n};class rxe{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;null===(n=this.appCheckProvider)||void 0===n||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Jn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class ixe{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&"auth/token-not-initialized"===n.code?(vn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Jn(e)}}let jp=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}return t.OWNER="owner",t})();const HW=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,GW="websocket",qW="long_polling";class CM{constructor(e,n,r,i,s=!1,o="",a=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Xc.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Xc.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function KW(t,e,n){let r;if(O("string"==typeof e,"typeof type must == string"),O("object"==typeof n,"typeof params must == object"),e===GW)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==qW)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function sxe(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);const i=[];return wn(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class oxe{constructor(){this.counters_={}}incrementCounter(e,n=1){ro(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return dae(this.counters_)}}const IM={},TM={};function xM(t){const e=t.toString();return IM[e]||(IM[e]=new oxe),IM[e]}class cxe{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&pd(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ba{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Up(e),this.stats_=xM(n),this.urlFn=c=>(this.appCheckToken&&(c.ac=this.appCheckToken),KW(n,qW,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new cxe(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{let e=!1;const n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new SM((...s)=>{const[o,a,c,l,u]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=c;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&HW.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ba.forceAllow_=!0}static forceDisallow(){ba.forceDisallow_=!0}static isAvailable(){return!(!ba.forceAllow_&&(ba.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Mn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=jB(n),i=FW(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Mn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class SM{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=RW(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=SM.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){vn("frame writing exception"),a.stack&&vn(a.stack),vn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||vn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return n+=r,this.addLongPollTag_(n,this.currentSerial),!0}return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{vn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let hw=null;typeof MozWebSocket<"u"?hw=MozWebSocket:typeof WebSocket<"u"&&(hw=WebSocket);let gd=(()=>{class t{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Up(this.connId),this.stats_=xM(r),this.connURL=t.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){const a={v:"5"};return typeof location<"u"&&location.hostname&&HW.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),KW(n,GW,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Xc.set("previous_websocket_failure",!0);try{let i;0,this.mySock=new hw(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&null!==hw&&!t.forceDisallow_}static previouslyFailed(){return Xc.isInMemoryStorage||!0===Xc.get("previous_websocket_failure")}markConnectionHealthy(){Xc.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=Qh(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(O(null===this.frames,"We already have a frame buffer"),n.length<=6){const r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(null===this.mySock)return;const r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();const r=Mn(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=FW(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t})(),tG=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[ba,gd]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){const r=gd&&gd.isAvailable();let i=r&&!gd.previouslyFailed();if(n.webSocketOnly&&(r||Jn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[gd];else{const s=this.transports_=[];for(const o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return t.globalTransportInitialized_=!1,t})();class cG{constructor(e,n,r,i,s,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Up("c:"+this.id+":"),this.transportManager_=new tG(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=$p(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const n=e.t;"a"===n?this.upgradeIfSecondaryHealthy_():"r"===n?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===n&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Bp("t",e),r=Bp("d",e);if("c"===n)this.onSecondaryControl_(r);else{if("d"!==n)throw new Error("Unknown protocol layer: "+n);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Bp("t",e),r=Bp("d",e);"c"===n?this.onControl_(r):"d"===n&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Bp("t",e);if("d"in e){const r=e.d;if("h"===n)this.onHandshake_(r);else if("n"===n){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===n?this.onConnectionShutdown_(r):"r"===n?this.onReset_(r):"e"===n?vM("Server Error: "+r):"o"===n?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):vM("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),"5"!==r&&Jn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),$p(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$p(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Xc.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class lG{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}class uG{constructor(e){this.allowedEvents_=e,this.listeners_={},O(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){O(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}class fw extends uG{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!D_()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new fw}getInitialEvent(e){return O("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Ge{constructor(e,n){if(void 0===n){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)""!==this.pieces_[n]&&(e+="/"+this.pieces_[n]);return e||"/"}}function Be(){return new Ge("")}function Ie(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ea(t){return t.pieces_.length-t.pieceNum_}function rt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ge(t.pieces_,e)}function AM(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Hp(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function fG(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ge(e,0)}function vt(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Ge)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Ge(n,0)}function Te(t){return t.pieceNum_>=t.pieces_.length}function vr(t,e){const n=Ie(t),r=Ie(e);if(null===n)return e;if(n===r)return vr(rt(t),rt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function kM(t,e){if(Ea(t)!==Ea(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Ei(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Ea(t)>Ea(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Mxe{constructor(e,n){this.errorPrefix_=n,this.parts_=Hp(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=N_(this.parts_[r]);pG(this)}}function pG(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+el(t))}function el(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}class MM extends uG{constructor(){let e,n;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new MM}getInitialEvent(e){return O("visible"===e,"Unknown event type: "+e),[this.visible_]}}const zp=1e3;let gw,tl=(()=>{class t extends lG{constructor(n,r,i,s,o,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=Up("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=zp,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");MM.getInstance().on("visible",this.onVisible_,this),-1===n.host.indexOf("fblocal")&&fw.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){const s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(Mn(o)),O(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();const r=new _u,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{const c=a.d;"ok"===a.s?r.resolve(c):r.reject(c)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(n,r,i,s){this.initConnection_();const o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),O(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),O(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){const r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){const r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest("q",o,c=>{const l=c.d,u=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),"ok"!==u&&this.removeListen_(i,s),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&"object"==typeof n&&ro(n,"w")){const i=yu(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Jn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&40===n.length||function(t){const e=k_(t).claims;return"object"==typeof e&&!0===e.admin}(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,r=function(t){const n=k_(t).claims;return!!n&&"object"==typeof n&&n.hasOwnProperty("iat")}(n)?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===n&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const r=n.s,i=n.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){const i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),O(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);const o={p:n};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(n){const r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){const r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Mn(n));const r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),"d"===n?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===n?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===n?this.onListenRevoked_(r.p,r.q):"ac"===n?this.onAuthRevoked_(r.s,r.d):"apc"===n?this.onAppCheckRevoked_(r.s,r.d):"sd"===n?this.onSecurityDebugPacket_(r):vM("Unrecognized action received from server: "+Mn(n)+"\nAre you using the latest client?")}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){O(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=zp,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=zp,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=zp),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const n=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var n=this;return _(function*(){if(n.shouldReconnect_()){n.log_("Making a connection attempt"),n.lastConnectionAttemptTime_=(new Date).getTime(),n.lastConnectionEstablishedTime_=null;const r=n.onDataMessage_.bind(n),i=n.onReady_.bind(n),s=n.onRealtimeDisconnect_.bind(n),o=n.id+":"+t.nextConnectionId_++,a=n.lastSessionId;let c=!1,l=null;const u=function(){l?l.close():(c=!0,s())};n.realtime_={close:u,sendRequest:function(f){O(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(f)}};const h=n.forceTokenRefresh_;n.forceTokenRefresh_=!1;try{const[f,p]=yield Promise.all([n.authTokenProvider_.getToken(h),n.appCheckTokenProvider_.getToken(h)]);c?vn("getToken() completed but was canceled"):(vn("getToken() completed. Creating connection."),n.authToken_=f&&f.accessToken,n.appCheckToken_=p&&p.token,l=new cG(o,n.repoInfo_,n.applicationId_,n.appCheckToken_,n.authToken_,r,i,s,g=>{Jn(g+" ("+n.repoInfo_.toString()+")"),n.interrupt("server_kill")},a))}catch(f){n.log_("Failed to get token: "+f),c||(n.repoInfo_.nodeAdmin&&Jn(f),u())}}})()}interrupt(n){vn("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){vn("Resuming connection for reason: "+n),delete this.interruptReasons_[n],YC(this.interruptReasons_)&&(this.reconnectDelay_=zp,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const r=n-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;i=r?r.map(o=>wM(o)).join("$"):"default";const s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){const i=new Ge(n).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){vn("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===n||"permission_denied"===n)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){vn("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===n||"permission_denied"===n)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let r="js";n["sdk."+r+"."+_M.replace(/\./g,"-")]=1,D_()?n["framework.cordova"]=1:KC()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=fw.getInstance().currentlyOnline();return YC(this.interruptReasons_)&&n}}return t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t})();class xe{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new xe(e,n)}}class pw{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new xe(To,e),i=new xe(To,n);return 0!==this.compare(r,i)}minPost(){return xe.MIN}}class _G extends pw{static get __EMPTY_NODE(){return gw}static set __EMPTY_NODE(e){gw=e}compare(e,n){return Zc(e.name,n.name)}isDefinedOn(e){throw mu("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return xe.MIN}maxPost(){return new xe(xs,gw)}makePost(e,n){return O("string"==typeof e,"KeyIndex indexValue must always be a string."),new xe(e,gw)}toString(){return".key"}}const Ss=new _G;class mw{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let n,e=this.nodeStack_.pop();if(n=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let NM,ji=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??Pr.EMPTY_NODE,this.right=o??Pr.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this;const o=i(n,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(n,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Pr.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(n,i.key)){if(i.right.isEmpty())return Pr.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})();class Pr{constructor(e,n=Pr.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Pr(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ji.BLACK,null,null))}remove(e){return new Pr(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ji.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),0===n)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),0===n){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}n<0?r=r.left:n>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new mw(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new mw(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new mw(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new mw(this.root_,null,this.comparator_,!0,e)}}function Uxe(t,e){return Zc(t.name,e.name)}function RM(t,e){return Zc(t,e)}Pr.EMPTY_NODE=new class Vxe{copy(e,n,r,i,s){return this}insert(e,n,r){return new ji(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const yG=function(t){return"number"==typeof t?"number:"+LW(t):"string:"+t},vG=function(t){if(t.isLeafNode()){const e=t.val();O("string"==typeof e||"number"==typeof e||"object"==typeof e&&ro(e,".sv"),"Priority must be a string or number.")}else O(t===NM||t.isEmpty(),"priority of unexpected type.");O(t===NM||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let wG,bG,EG,md=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,O(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),vG(this.priorityNode_)}static set __childrenNodeConstructor(n){wG=n}static get __childrenNodeConstructor(){return wG}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return".priority"===n?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return Te(n)?this:".priority"===Ie(n)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return".priority"===n?this.updatePriority(r):r.isEmpty()&&".priority"!==n?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){const i=Ie(n);return null===i?r:r.isEmpty()&&".priority"!==i?this:(O(".priority"!==i||1===Ea(n),".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(rt(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+yG(this.priorityNode_.val())+":");const r=typeof this.value_;n+=r+":",n+="number"===r?LW(this.value_):this.value_,this.lazyHash_=NW(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(O(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return O(s>=0,"Unknown leaf type: "+r),O(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){return n===this||!!n.isLeafNode()&&(this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_))}}return t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t})();const ut=new class Hxe extends pw{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return 0===s?Zc(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return xe.MIN}maxPost(){return new xe(xs,new md("[PRIORITY-POST]",EG))}makePost(e,n){const r=bG(e);return new xe(n,new md("[PRIORITY-POST]",r))}toString(){return".priority"}},zxe=Math.log(2);class Wxe{constructor(e){this.count=parseInt(Math.log(e+1)/zxe,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const _w=function(t,e,n,r){t.sort(e);const i=function(c,l){const u=l-c;let d,h;if(0===u)return null;if(1===u)return d=t[c],h=n?n(d):d,new ji(h,d.node,ji.BLACK,null,null);{const f=parseInt(u/2,10)+c,p=i(c,f),g=i(f+1,l);return d=t[f],h=n?n(d):d,new ji(h,d.node,ji.BLACK,p,g)}},a=function(c){let l=null,u=null,d=t.length;const h=function(p,g){const m=d-p,v=d;d-=p;const y=i(m+1,v),C=t[m],I=n?n(C):C;f(new ji(I,C.node,g,null,y))},f=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){const g=c.nextBitIsOne(),m=Math.pow(2,c.count-(p+1));g?h(m,ji.BLACK):(h(m,ji.BLACK),h(m,ji.RED))}return u}(new Wxe(t.length));return new Pr(r||e,a)};let PM;const _d={};class xo{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return O(_d&&ut,"ChildrenNode.ts has not been loaded"),PM=PM||new xo({".priority":_d},{".priority":ut}),PM}get(e){const n=yu(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Pr?n:null}hasIndex(e){return ro(this.indexSet_,e.toString())}addIndex(e,n){O(e!==Ss,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(xe.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?_w(r,e.getCompare()):_d;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=a,new xo(u,l)}addToIndexes(e,n){const r=M_(this.indexes_,(i,s)=>{const o=yu(this.indexSet_,s);if(O(o,"Missing index implementation for "+s),i===_d){if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(xe.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),_w(a,o.getCompare())}return _d}{const a=n.get(e.name);let c=i;return a&&(c=c.remove(new xe(e.name,a))),c.insert(e,e.node)}});return new xo(r,this.indexSet_)}removeFromIndexes(e,n){const r=M_(this.indexes_,i=>{if(i===_d)return i;{const s=n.get(e.name);return s?i.remove(new xe(e.name,s)):i}});return new xo(r,this.indexSet_)}}let Wp,me=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&vG(this.priorityNode_),this.children_.isEmpty()&&O(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Wp||(Wp=new t(new Pr(RM),null,xo.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Wp}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(".priority"===n)return this.getPriority();{const r=this.children_.get(n);return null===r?Wp:r}}getChild(n){const r=Ie(n);return null===r?this:this.getImmediateChild(r).getChild(rt(n))}hasChild(n){return null!==this.children_.get(n)}updateImmediateChild(n,r){if(O(r,"We should always be passing snapshot nodes"),".priority"===n)return this.updatePriority(r);{const i=new xe(n,r);let s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?Wp:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){const i=Ie(n);if(null===i)return r;{O(".priority"!==Ie(n)||1===Ea(n),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(rt(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(ut,(a,c)=>{r[a]=c.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){const a=[];for(const c in r)a[c]=r[c];return a}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let n="";this.getPriority().isEmpty()||(n+="priority:"+yG(this.getPriority().val())+":"),this.forEachChild(ut,(r,i)=>{const s=i.hash();""!==s&&(n+=":"+r+":"+s)}),this.lazyHash_=""===n?"":NW(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new xe(n,r));return o?o.name:null}return this.children_.getPredecessorKey(n)}getFirstChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(n){const r=this.getFirstChildName(n);return r?new xe(r,this.children_.get(r)):null}getLastChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(n){const r=this.getLastChildName(n);return r?new xe(r,this.children_.get(r)):null}forEachChild(n,r){const i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{const s=this.children_.getIteratorFrom(n.name,xe.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{const s=this.children_.getReverseIteratorFrom(n.name,xe.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Gp?-1:0}withIndex(n){if(n===Ss||this.indexMap_.hasIndex(n))return this;{const r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Ss||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const r=n;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(ut),s=r.getIterator(ut);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(n){return n===Ss?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})();const Gp=new class Gxe extends me{constructor(){super(new Pr(RM),me.EMPTY_NODE,xo.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return me.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(xe,{MIN:{value:new xe(To,me.EMPTY_NODE)},MAX:{value:new xe(xs,Gp)}}),_G.__EMPTY_NODE=me.EMPTY_NODE,md.__childrenNodeConstructor=me,function Bxe(t){NM=t}(Gp),function jxe(t){EG=t}(Gp);const qxe=!0;function Tt(t,e=null){if(null===t)return me.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),O(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new md(t,Tt(e));if(t instanceof Array||!qxe){let n=me.EMPTY_NODE;return wn(t,(r,i)=>{if(ro(t,r)&&"."!==r.substring(0,1)){const s=Tt(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Tt(e))}{const n=[];let r=!1;if(wn(t,(o,a)=>{if("."!==o.substring(0,1)){const c=Tt(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new xe(o,c)))}}),0===n.length)return me.EMPTY_NODE;const s=_w(n,Uxe,o=>o.name,RM);if(r){const o=_w(n,ut.getCompare());return new me(s,Tt(e),new xo({".priority":o},{".priority":ut}))}return new me(s,Tt(e),xo.Default)}}!function $xe(t){bG=t}(Tt);class OM extends pw{constructor(e){super(),this.indexPath_=e,O(!Te(e)&&".priority"!==Ie(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return 0===s?Zc(e.name,n.name):s}makePost(e,n){const r=Tt(e),i=me.EMPTY_NODE.updateChild(this.indexPath_,r);return new xe(n,i)}maxPost(){const e=me.EMPTY_NODE.updateChild(this.indexPath_,Gp);return new xe(xs,e)}toString(){return Hp(this.indexPath_,0).join("/")}}const FM=new class Kxe extends pw{compare(e,n){const r=e.node.compareTo(n.node);return 0===r?Zc(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return xe.MIN}maxPost(){return xe.MAX}makePost(e,n){const r=Tt(e);return new xe(n,r)}toString(){return".value"}};function Kp(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}class UM{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ut}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return O(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return O(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:To}hasEnd(){return this.endSet_}getIndexEndValue(){return O(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return O(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:xs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return O(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ut}copy(){const e=new UM;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function DG(t){const e={};if(t.isDefault())return e;let n;return t.index_===ut?n="$priority":t.index_===FM?n="$value":t.index_===Ss?n="$key":(O(t.index_ instanceof OM,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Mn(n),t.startSet_&&(e.startAt=Mn(t.indexStartValue_),t.startNameSet_&&(e.startAt+=","+Mn(t.indexStartName_))),t.endSet_&&(e.endAt=Mn(t.indexEndValue_),t.endNameSet_&&(e.endAt+=","+Mn(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function AG(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==ut&&(e.i=t.index_.toString()),e}class vw extends lG{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Up("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return void 0!==n?"tag$"+n:(O(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=vw.getListenId_(e,r),a={};this.listens_[o]=a;const c=DG(e._queryParams);this.restRequest_(s+".json",c,(l,u)=>{let d=u;if(404===l&&(d=null,l=null),null===l&&this.onDataUpdate_(s,d,!1,r),yu(this.listens_,o)===a){let h;h=l?401===l?"permission_denied":"rest_error:"+l:"ok",i(h,null)}})}unlisten(e,n){const r=vw.getListenId_(e,n);delete this.listens_[r]}get(e){const n=DG(e._queryParams),r=e._path.toString(),i=new _u;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Xh(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Qh(a.responseText)}catch{Jn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else 401!==a.status&&404!==a.status&&Jn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class rSe{constructor(){this.rootNode_=me.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}function ww(){return{value:null,children:new Map}}function wd(t,e,n){if(Te(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{const r=Ie(e);t.children.has(r)||t.children.set(r,ww()),wd(t.children.get(r),e=rt(e),n)}}function HM(t,e,n){null!==t.value?n(e,t.value):function iSe(t,e){t.children.forEach((n,r)=>{e(r,n)})}(t,(r,i)=>{HM(i,new Ge(e.toString()+"/"+r),n)})}class sSe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&wn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}class cSe{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new sSe(e);const r=1e4+2e4*Math.random();$p(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;wn(e,(i,s)=>{s>0&&ro(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),$p(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ds=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Ds||{});function GM(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}class bw{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Ds.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Te(this.path)){if(null!=this.affectedTree.value)return O(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ge(e));return new bw(Be(),n,this.revert)}}return O(Ie(this.path)===e,"operationForChild called for unrelated child."),new bw(rt(this.path),this.affectedTree,this.revert)}}class nl{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Ds.OVERWRITE}operationForChild(e){return Te(this.path)?new nl(this.source,Be(),this.snap.getImmediateChild(e)):new nl(this.source,rt(this.path),this.snap)}}class bd{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Ds.MERGE}operationForChild(e){if(Te(this.path)){const n=this.children.subtree(new Ge(e));return n.isEmpty()?null:n.value?new nl(this.source,Be(),n.value):new bd(this.source,Be(),n)}return O(Ie(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new bd(this.source,rt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ca{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Te(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ie(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function Xp(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,c)=>function hSe(t,e,n){if(null==e.childName||null==n.childName)throw mu("Should only compare child_ events.");const r=new xe(e.childName,e.snapshotNode),i=new xe(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,a,c)),o.forEach(a=>{const c=function dSe(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function Ew(t,e){return{eventCache:t,serverCache:e}}function Jp(t,e,n,r){return Ew(new Ca(e,n,r),t.serverCache)}function MG(t,e,n,r){return Ew(t.eventCache,new Ca(e,n,r))}function Cw(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function rl(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}let qM;class dt{constructor(e,n=(()=>(qM||(qM=new Pr(XTe)),qM))()){this.value=e,this.children=n}static fromObject(e){let n=new dt(null);return wn(e,(r,i)=>{n=n.set(new Ge(r),i)}),n}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(null!=this.value&&n(this.value))return{path:Be(),value:this.value};if(Te(e))return null;{const r=Ie(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(rt(e),n);return null!=s?{path:vt(new Ge(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Te(e))return this;{const n=Ie(e),r=this.children.get(n);return null!==r?r.subtree(rt(e)):new dt(null)}}set(e,n){if(Te(e))return new dt(n,this.children);{const r=Ie(e),s=(this.children.get(r)||new dt(null)).set(rt(e),n),o=this.children.insert(r,s);return new dt(this.value,o)}}remove(e){if(Te(e))return this.children.isEmpty()?new dt(null):new dt(null,this.children);{const n=Ie(e),r=this.children.get(n);if(r){const i=r.remove(rt(e));let s;return s=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&s.isEmpty()?new dt(null):new dt(this.value,s)}return this}}get(e){if(Te(e))return this.value;{const n=Ie(e),r=this.children.get(n);return r?r.get(rt(e)):null}}setTree(e,n){if(Te(e))return n;{const r=Ie(e),s=(this.children.get(r)||new dt(null)).setTree(rt(e),n);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new dt(this.value,o)}}fold(e){return this.fold_(Be(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(vt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Be(),n)}findOnPath_(e,n,r){const i=!!this.value&&r(n,this.value);if(i)return i;if(Te(e))return null;{const s=Ie(e),o=this.children.get(s);return o?o.findOnPath_(rt(e),vt(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Be(),n)}foreachOnPath_(e,n,r){if(Te(e))return this;{this.value&&r(n,this.value);const i=Ie(e),s=this.children.get(i);return s?s.foreachOnPath_(rt(e),vt(n,i),r):new dt(null)}}foreach(e){this.foreach_(Be(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(vt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}class Hi{constructor(e){this.writeTree_=e}static empty(){return new Hi(new dt(null))}}function Zp(t,e,n){if(Te(e))return new Hi(new dt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=vr(i,e);return s=s.updateChild(o,n),new Hi(t.writeTree_.set(i,s))}{const i=new dt(n),s=t.writeTree_.setTree(e,i);return new Hi(s)}}}function KM(t,e,n){let r=t;return wn(n,(i,s)=>{r=Zp(r,vt(e,i),s)}),r}function RG(t,e){if(Te(e))return Hi.empty();{const n=t.writeTree_.setTree(e,new dt(null));return new Hi(n)}}function QM(t,e){return null!=il(t,e)}function il(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(vr(n.path,e)):null}function NG(t){const e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(ut,(r,i)=>{e.push(new xe(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new xe(r,i.value))}),e}function Ia(t,e){if(Te(e))return t;{const n=il(t,e);return new Hi(null!=n?new dt(n):t.writeTree_.subtree(e))}}function YM(t){return t.writeTree_.isEmpty()}function Ed(t,e){return PG(Be(),t.writeTree_,e)}function PG(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?(O(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):n=PG(vt(t,i),s,n)}),!n.getChild(t).isEmpty()&&null!==r&&(n=n.updateChild(vt(t,".priority"),r)),n}}function Iw(t,e){return UG(e,t)}function ySe(t,e){if(t.snap)return Ei(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Ei(vt(t.path,n),e))return!0;return!1}function wSe(t){return t.visible}function OG(t,e,n){let r=Hi.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Ei(n,o)?(a=vr(n,o),r=Zp(r,a,s.snap)):Ei(o,n)&&(a=vr(o,n),r=Zp(r,Be(),s.snap.getChild(a)));else{if(!s.children)throw mu("WriteRecord should have .snap or .children");if(Ei(n,o))a=vr(n,o),r=KM(r,a,s.children);else if(Ei(o,n))if(a=vr(o,n),Te(a))r=KM(r,Be(),s.children);else{const c=yu(s.children,Ie(a));if(c){const l=c.getChild(rt(a));r=Zp(r,Be(),l)}}}}}return r}function FG(t,e,n,r,i){if(r||i){const s=Ia(t.visibleWrites,e);return!i&&YM(s)?n:i||null!=n||QM(s,Be())?Ed(OG(t.allWrites,function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Ei(l.path,e)||Ei(e,l.path))},e),n||me.EMPTY_NODE):null}{const s=il(t.visibleWrites,e);if(null!=s)return s;{const o=Ia(t.visibleWrites,e);return YM(o)?n:null!=n||QM(o,Be())?Ed(o,n||me.EMPTY_NODE):null}}}function Tw(t,e,n,r){return FG(t.writeTree,t.treePath,e,n,r)}function XM(t,e){return function bSe(t,e,n){let r=me.EMPTY_NODE;const i=il(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ut,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Ia(t.visibleWrites,e);return n.forEachChild(ut,(o,a)=>{const c=Ed(Ia(s,new Ge(o)),a);r=r.updateImmediateChild(o,c)}),NG(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return NG(Ia(t.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(t.writeTree,t.treePath,e)}function LG(t,e,n,r){return function ESe(t,e,n,r,i){O(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=vt(e,n);if(QM(t.visibleWrites,s))return null;{const o=Ia(t.visibleWrites,s);return YM(o)?i.getChild(n):Ed(o,i.getChild(n))}}(t.writeTree,t.treePath,e,n,r)}function xw(t,e){return function ISe(t,e){return il(t.visibleWrites,e)}(t.writeTree,vt(t.treePath,e))}function JM(t,e,n){return function CSe(t,e,n,r){const i=vt(e,n),s=il(t.visibleWrites,i);return null!=s?s:r.isCompleteForChild(n)?Ed(Ia(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function VG(t,e){return UG(vt(t.treePath,e),t.writeTree)}function UG(t,e){return{treePath:t,writeTree:e}}class DSe{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;O("child_added"===n||"child_changed"===n||"child_removed"===n,"Only child changes supported for tracking"),O(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===n&&"child_removed"===s)this.changeMap.set(r,Kp(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===n&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===n&&"child_changed"===s)this.changeMap.set(r,function qp(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}(r,i.oldSnap));else if("child_changed"===n&&"child_added"===s)this.changeMap.set(r,function vd(t,e){return{type:"child_added",snapshotNode:e,childName:t}}(r,e.snapshotNode));else{if("child_changed"!==n||"child_changed"!==s)throw mu("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Kp(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const BG=new class ASe{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}};class ZM{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Ca(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return JM(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:rl(this.viewCache_),s=function SSe(t,e,n,r,i,s){return function TSe(t,e,n,r,i,s,o){let a;const c=Ia(t.visibleWrites,e),l=il(c,Be());if(null!=l)a=l;else{if(null==n)return[];a=Ed(c,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<i;)0!==d(f,r)&&u.push(f),f=h.getNext();return u}}(t.writeTree,t.treePath,e,n,r,i,s)}(this.writes_,i,n,1,r,e);return 0===s.length?null:s[0]}}function $G(t,e,n,r,i,s){const o=e.eventCache;if(null!=xw(r,n))return e;{let a,c;if(Te(n))if(O(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=rl(e),d=XM(r,l instanceof me?l:me.EMPTY_NODE);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const l=Tw(r,rl(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{const l=Ie(n);if(".priority"===l){O(1===Ea(n),"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const d=LG(r,n,u,c);a=null!=d?t.filter.updatePriority(u,d):o.getNode()}else{const u=rt(n);let d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const h=LG(r,n,o.getNode(),c);d=null!=h?o.getNode().getImmediateChild(l).updateChild(u,h):o.getNode().getImmediateChild(l)}else d=JM(r,l,e.serverCache);a=null!=d?t.filter.updateChild(o.getNode(),l,d,u,i,s):o.getNode()}}return Jp(e,a,o.isFullyInitialized()||Te(n),t.filter.filtersNodes())}}function Sw(t,e,n,r,i,s,o,a){const c=e.serverCache;let l;const u=o?t.filter:t.filter.getIndexedFilter();if(Te(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{const f=Ie(n);if(!c.isCompleteForPath(n)&&Ea(n)>1)return e;const p=rt(n),m=c.getNode().getImmediateChild(f).updateChild(p,r);l=".priority"===f?u.updatePriority(c.getNode(),m):u.updateChild(c.getNode(),f,m,p,BG,null)}const d=MG(e,l,c.isFullyInitialized()||Te(n),u.filtersNodes());return $G(t,d,n,i,new ZM(i,d,s),a)}function eR(t,e,n,r,i,s,o){const a=e.eventCache;let c,l;const u=new ZM(i,e,s);if(Te(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Jp(e,l,!0,t.filter.filtersNodes());else{const d=Ie(n);if(".priority"===d)l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Jp(e,l,a.isFullyInitialized(),a.isFiltered());else{const h=rt(n),f=a.getNode().getImmediateChild(d);let p;if(Te(h))p=r;else{const g=u.getCompleteChild(d);p=null!=g?".priority"===AM(h)&&g.getChild(fG(h)).isEmpty()?g:g.updateChild(h,r):me.EMPTY_NODE}c=f.equals(p)?e:Jp(e,t.filter.updateChild(a.getNode(),d,p,h,u,o),a.isFullyInitialized(),t.filter.filtersNodes())}}return c}function jG(t,e){return t.eventCache.isCompleteForChild(e)}function HG(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function tR(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l,c=e;l=Te(n)?r:new dt(null).setTree(n,r);const u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const p=HG(0,e.serverCache.getNode().getImmediateChild(d),h);c=Sw(t,c,new Ge(d),p,i,s,o,a)}}),l.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&void 0===h.value;if(!u.hasChild(d)&&!f){const g=HG(0,e.serverCache.getNode().getImmediateChild(d),h);c=Sw(t,c,new Ge(d),g,i,s,o,a)}}),c}function $Se(t,e){const n=rl(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Te(e)&&!n.getImmediateChild(Ie(e)).isEmpty())?n.getChild(e):null}function GG(t,e,n,r){e.type===Ds.MERGE&&null!==e.source.queryId&&(O(rl(t.viewCache_),"We should always have a full cache before handling merges"),O(Cw(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=function RSe(t,e,n,r,i){const s=new DSe;let o,a;if(n.type===Ds.OVERWRITE){const l=n;l.source.fromUser?o=eR(t,e,l.path,l.snap,r,i,s):(O(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Te(l.path),o=Sw(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===Ds.MERGE){const l=n;l.source.fromUser?o=function PSe(t,e,n,r,i,s,o){let a=e;return r.foreach((c,l)=>{const u=vt(n,c);jG(e,Ie(u))&&(a=eR(t,a,u,l,i,s,o))}),r.foreach((c,l)=>{const u=vt(n,c);jG(e,Ie(u))||(a=eR(t,a,u,l,i,s,o))}),a}(t,e,l.path,l.children,r,i,s):(O(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=tR(t,e,l.path,l.children,r,i,a,s))}else if(n.type===Ds.ACK_USER_WRITE){const l=n;o=l.revert?function LSe(t,e,n,r,i,s){let o;if(null!=xw(r,n))return e;{const a=new ZM(r,e,i),c=e.eventCache.getNode();let l;if(Te(n)||".priority"===Ie(n)){let u;if(e.serverCache.isFullyInitialized())u=Tw(r,rl(e));else{const d=e.serverCache.getNode();O(d instanceof me,"serverChildren would be complete if leaf node"),u=XM(r,d)}l=t.filter.updateFullNode(c,u,s)}else{const u=Ie(n);let d=JM(r,u,e.serverCache);null==d&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),l=null!=d?t.filter.updateChild(c,u,d,rt(n),a,s):e.eventCache.getNode().hasChild(u)?t.filter.updateChild(c,u,me.EMPTY_NODE,rt(n),a,s):c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Tw(r,rl(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=xw(r,Be()),Jp(e,l,o,t.filter.filtersNodes())}}(t,e,l.path,r,i,s):function OSe(t,e,n,r,i,s,o){if(null!=xw(i,n))return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(null!=r.value){if(Te(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Sw(t,e,n,c.getNode().getChild(n),i,s,a,o);if(Te(n)){let l=new dt(null);return c.getNode().forEachChild(Ss,(u,d)=>{l=l.set(new Ge(u),d)}),tR(t,e,n,l,i,s,a,o)}return e}{let l=new dt(null);return r.foreach((u,d)=>{const h=vt(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),tR(t,e,n,l,i,s,a,o)}}(t,e,l.path,l.affectedTree,r,i,s)}else{if(n.type!==Ds.LISTEN_COMPLETE)throw mu("Unknown operation type: "+n.type);o=function FSe(t,e,n,r,i){const s=e.serverCache;return $G(t,MG(e,s.getNode(),s.isFullyInitialized()||Te(n),s.isFiltered()),n,r,BG,i)}(t,e,n.path,r,s)}const c=s.getChanges();return function NSe(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Cw(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(function SG(t){return{type:"value",snapshotNode:t}}(Cw(e)))}}(e,o,c),{viewCache:o,changes:c}}(t.processor_,i,e,n,r);return function MSe(t,e){O(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),O(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}(t.processor_,s.viewCache),O(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,function qG(t,e,n,r){return function uSe(t,e,n,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function Yxe(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}(o.childName,o.snapshotNode))}),Xp(t,i,"child_removed",e,r,n),Xp(t,i,"child_added",e,r,n),Xp(t,i,"child_moved",s,r,n),Xp(t,i,"child_changed",e,r,n),Xp(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}(t,s.changes,s.viewCache.eventCache.getNode(),null)}let Dw,kw;function nR(t,e,n,r){const i=e.source.queryId;if(null!==i){const s=t.views.get(i);return O(null!=s,"SyncTree gave us an op for an invalid query."),GG(s,e,n,r)}{let s=[];for(const o of t.views.values())s=s.concat(GG(o,e,n,r));return s}}function Ta(t,e){let n=null;for(const r of t.views.values())n=n||$Se(r,e);return n}class JG{constructor(e){this.listenProvider_=e,this.syncPointTree_=new dt(null),this.pendingWriteTree_=function xSe(){return{visibleWrites:Hi.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function iR(t,e,n,r,i){return function pSe(t,e,n,r,i){O(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Zp(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?Cd(t,new nl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Sa(t,e,n=!1){const r=function mSe(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function _Se(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);O(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&ySe(a,r.path)?i=!1:Ei(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function vSe(t){t.visibleWrites=OG(t.allWrites,wSe,Be()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=RG(t.visibleWrites,r.path):wn(r.children,c=>{t.visibleWrites=RG(t.visibleWrites,vt(r.path,c))}),!0))}(t.pendingWriteTree_,e)){let s=new dt(null);return null!=r.snap?s=s.set(Be(),!0):wn(r.children,o=>{s=s.set(new Ge(o),!0)}),Cd(t,new bw(r.path,s,n))}return[]}function eg(t,e,n){return Cd(t,new nl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Rw(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Ta(a,vr(o,e));if(l)return l});return FG(i,e,s,n,!0)}function Cd(t,e){return nq(e,t.syncPointTree_,null,Iw(t.pendingWriteTree_,Be()))}function nq(t,e,n,r){if(Te(t.path))return rq(t,e,n,r);{const i=e.get(Be());null==n&&null!=i&&(n=Ta(i,Be()));let s=[];const o=Ie(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const l=n?n.getImmediateChild(o):null,u=VG(r,o);s=s.concat(nq(a,c,l,u))}return i&&(s=s.concat(nR(i,t,r,n))),s}}function rq(t,e,n,r){const i=e.get(Be());null==n&&null!=i&&(n=Ta(i,Be()));let s=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,l=VG(r,o),u=t.operationForChild(o);u&&(s=s.concat(rq(u,a,c,l)))}),i&&(s=s.concat(nR(i,t,r,n))),s}function sR(t,e){return t.tagToQueryMap.get(e)}function oR(t){const e=t.indexOf("$");return O(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ge(t.substr(0,e))}}function aR(t,e,n){const r=t.syncPointTree_.get(e);return O(r,"Missing sync point for query tag that we're tracking"),nR(r,n,Iw(t.pendingWriteTree_,e),null)}class cR{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new cR(n)}node(){return this.node_}}class lR{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=vt(this.path_,e);return new lR(this.syncTree_,n)}node(){return Rw(this.syncTree_,this.path_)}}const lDe=function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t},sq=function(t,e,n){return t&&"object"==typeof t?(O(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?uDe(t[".sv"],e,n):"object"==typeof t[".sv"]?dDe(t[".sv"],e):void O(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},uDe=function(t,e,n){if("timestamp"===t)return n.timestamp;O(!1,"Unexpected server value: "+t)},dDe=function(t,e,n){t.hasOwnProperty("increment")||O(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;"number"!=typeof r&&O(!1,"Unexpected increment value: "+r);const i=e.node();if(O(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},oq=function(t,e,n,r){return dR(e,new lR(n,t),r)},uR=function(t,e,n){return dR(t,new cR(e),n)};function dR(t,e,n){const r=t.getPriority().val(),i=sq(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=sq(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new md(a,Tt(i)):t}{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new md(i))),o.forEachChild(ut,(a,c)=>{const l=dR(c,e.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}class hR{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Pw(t,e){let n=e instanceof Ge?e:new Ge(e),r=t,i=Ie(n);for(;null!==i;){const s=yu(r.node.children,i)||{children:{},childCount:0};r=new hR(i,r,s),n=rt(n),i=Ie(n)}return r}function sl(t){return t.node.value}function fR(t,e){t.node.value=e,pR(t)}function aq(t){return t.node.childCount>0}function Ow(t,e){wn(t.node.children,(n,r)=>{e(new hR(n,t,r))})}function cq(t,e,n,r){n&&!r&&e(t),Ow(t,i=>{cq(i,e,!0,r)}),n&&r&&e(t)}function rg(t){return new Ge(null===t.parent?t.name:rg(t.parent)+"/"+t.name)}function pR(t){null!==t.parent&&function pDe(t,e,n){const r=function hDe(t){return void 0===sl(t)&&!aq(t)}(n),i=ro(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,pR(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,pR(t))}(t.parent,t.name,t)}const gDe=/[\[\].#$\/\u0000-\u001F\u007F]/,mDe=/[\[\].#$\u0000-\u001F\u007F]/,gR=10485760,Fw=function(t){return"string"==typeof t&&0!==t.length&&!gDe.test(t)},sg=function(t,e,n){const r=n instanceof Ge?new Mxe(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+el(r));if("function"==typeof e)throw new Error(t+"contains a function "+el(r)+" with contents = "+e.toString());if(lw(e))throw new Error(t+"contains "+e.toString()+" "+el(r));if("string"==typeof e&&e.length>gR/3&&N_(e)>gR)throw new Error(t+"contains a string greater than "+gR+" utf8 bytes "+el(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(wn(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!Fw(o)))throw new Error(t+" contains an invalid key ("+o+") "+el(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Rxe(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=N_(e),pG(t)})(r,o),sg(t,a,r),function Nxe(t){const e=t.parts_.pop();t.byteLength_-=N_(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)}),i&&s)throw new Error(t+' contains ".value" child '+el(r)+" in addition to actual children.")}},dq=function(t,e){const n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Fw(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),function(t){return"string"==typeof t&&0!==t.length&&!mDe.test(t)}(t)}(n))throw new Error(function R_(t,e){return`${t} failed: ${e} argument `}(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class wDe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ci(t,e,n){(function Lw(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==n&&!kM(s,n.path)&&(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)})(t,n),function fq(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];i&&(e(i.path)?(bDe(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}(t,r=>Ei(r,e)||Ei(e,r))}function bDe(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(null!==n){t.events[e]=null;const r=n.getEventRunner();Jc&&vn("event: "+n.toString()),pd(r)}}}const EDe=25;class CDe{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new wDe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ww(),this.transactionQueueTree_=new hR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function gq(t){const n=t.infoData_.getNode(new Ge(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+n}function ag(t){return lDe({timestamp:gq(t)})}function mq(t,e,n,r,i){t.dataUpdateCount++;const s=new Ge(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const c=M_(n,l=>Tt(l));o=function rDe(t,e,n,r){const i=sR(t,r);if(i){const s=oR(i),o=s.path,a=s.queryId,c=vr(o,e),l=dt.fromObject(n);return aR(t,o,new bd(GM(a),c,l))}return[]}(t.serverSyncTree_,s,c,i)}else{const c=Tt(n);o=function ZG(t,e,n,r){const i=sR(t,r);if(null!=i){const s=oR(i),o=s.path,a=s.queryId,c=vr(o,e);return aR(t,o,new nl(GM(a),c,n))}return[]}(t.serverSyncTree_,s,c,i)}else if(r){const c=M_(n,l=>Tt(l));o=function ZSe(t,e,n){const r=dt.fromObject(n);return Cd(t,new bd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,c)}else{const c=Tt(n);o=eg(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=Id(t,s)),Ci(t.eventQueue_,a,o)}function _q(t,e){yR(t,"connected",e),!1===e&&function DDe(t){ol(t,"onDisconnectEvents");const e=ag(t),n=ww();HM(t.onDisconnect_,Be(),(i,s)=>{const o=oq(i,s,t.serverSyncTree_,e);wd(n,i,o)});let r=[];HM(n,Be(),(i,s)=>{r=r.concat(eg(t.serverSyncTree_,i,s));const o=function ER(t,e){const n=rg(wq(t,e)),r=Pw(t.transactionQueueTree_,e);return function fDe(t,e,n){let r=n?t:t.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{CR(t,i)}),CR(t,r),cq(r,i=>{CR(t,i)}),n}(t,i);Id(t,o)}),t.onDisconnect_=ww(),Ci(t.eventQueue_,Be(),r)}(t)}function yR(t,e,n){const r=new Ge("/.info/"+e),i=Tt(n);t.infoData_.updateSnapshot(r,i);const s=eg(t.infoSyncTree_,r,i);Ci(t.eventQueue_,r,s)}function Vw(t){return t.nextWriteId_++}function ol(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),vn(n,...e)}function bR(t,e,n){return Rw(t.serverSyncTree_,e,n)||me.EMPTY_NODE}function Uw(t,e=t.transactionQueueTree_){if(e||Bw(t,e),sl(e)){const n=bq(t,e);O(n.length>0,"Sending zero length transaction queue"),n.every(i=>0===i.status)&&function ODe(t,e,n){const r=n.map(l=>l.currentWriteId),i=bR(t,e,r);let s=i;const o=i.hash();for(let l=0;l<n.length;l++){const u=n[l];O(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=vr(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}const a=s.val(!0),c=e;t.server_.put(c.toString(),a,l=>{ol(t,"transaction put response",{path:c.toString(),status:l});let u=[];if("ok"===l){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(Sa(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Bw(t,Pw(t.transactionQueueTree_,e)),Uw(t,t.transactionQueueTree_),Ci(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)pd(d[h])}else{if("datastale"===l)for(let d=0;d<n.length;d++)n[d].status=3===n[d].status?4:0;else{Jn("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}Id(t,e)}},o)}(t,rg(e),n)}else aq(e)&&Ow(e,n=>{Uw(t,n)})}function Id(t,e){const n=wq(t,e),r=rg(n);return function FDe(t,e,n){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=vr(n,c.path);let d,u=!1;if(O(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)u=!0,d=c.abortReason,i=i.concat(Sa(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=EDe)u=!0,d="maxretry",i=i.concat(Sa(t.serverSyncTree_,c.currentWriteId,!0));else{const h=bR(t,c.path,o);c.currentInputSnapshot=h;const f=e[a].update(h.val());if(void 0!==f){sg("transaction failed: Data returned ",f,c.path);let p=Tt(f);"object"==typeof f&&null!=f&&ro(f,".priority")||(p=p.updatePriority(h.getPriority()));const m=c.currentWriteId,v=ag(t),y=uR(p,h,v);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=y,c.currentWriteId=Vw(t),o.splice(o.indexOf(m),1),i=i.concat(iR(t.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally)),i=i.concat(Sa(t.serverSyncTree_,m,!0))}else u=!0,d="nodata",i=i.concat(Sa(t.serverSyncTree_,c.currentWriteId,!0))}Ci(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===d?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(d),!1,null)))}Bw(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)pd(r[a]);Uw(t,t.transactionQueueTree_)}(t,bq(t,n),r),r}function wq(t,e){let n,r=t.transactionQueueTree_;for(n=Ie(e);null!==n&&void 0===sl(r);)r=Pw(r,n),n=Ie(e=rt(e));return r}function bq(t,e){const n=[];return Eq(t,e,n),n.sort((r,i)=>r.order-i.order),n}function Eq(t,e,n){const r=sl(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Ow(e,i=>{Eq(t,i,n)})}function Bw(t,e){const n=sl(e);if(n){let r=0;for(let i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,fR(e,n.length>0?n:void 0)}Ow(e,r=>{Bw(t,r)})}function CR(t,e){const n=sl(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(O(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(O(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Sa(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?fR(e,void 0):n.length=s+1,Ci(t.eventQueue_,rg(e),i);for(let o=0;o<r.length;o++)pd(r[o])}}const IR=function(t,e){const n=UDe(t),r=n.namespace;return"firebase.com"===n.domain&&Ts(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==n.domain&&Ts("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Jn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new CM(n.host,n.secure,r,"ws"===n.scheme||"wss"===n.scheme,e,"",r!==n.subdomain),path:new Ge(n.pathString)}},UDe=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if("string"==typeof t){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");-1===u&&(u=t.length);let d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=function LDe(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(t.substring(u,d)));const h=function VDe(t){const e={};"?"===t.charAt(0)&&(t=t.substring(1));for(const n of t.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Jn(`Invalid query segment '${n}' in query '${t}'`)}return e}(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o="https"===a||"wss"===a,c=parseInt(e.substring(l+1),10)):l=e.length;const f=e.slice(0,l);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};class ii{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Te(this._path)?null:AM(this._path)}get ref(){return new zi(this._repo,this._path)}get _queryIdentifier(){const e=AG(this._queryParams),n=wM(e);return"{}"===n?"default":n}get _queryObject(){return AG(this._queryParams)}isEqual(e){if(!((e=Gt(e))instanceof ii))return!1;const n=this._repo===e._repo,r=kM(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Axe(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)}}class zi extends ii{constructor(e,n){super(e,n,new UM,!1)}get parent(){const e=fG(this._path);return null===e?null:new zi(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function zSe(t){O(!Dw,"__referenceConstructor has already been defined"),Dw=t})(zi),function QSe(t){O(!kw,"__referenceConstructor has already been defined"),kw=t}(zi);const TR={};class i1e{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function IDe(t,e,n){if(t.stats_=xM(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new vw(t.repoInfo_,(r,i,s,o)=>{mq(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>_q(t,!0),0);else{if(typeof n<"u"&&null!==n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Mn(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new tl(t.repoInfo_,e,(r,i,s,o)=>{mq(t,r,i,s,o)},r=>{_q(t,r)},r=>{!function TDe(t,e){wn(e,(n,r)=>{yR(t,n,r)})}(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=function axe(t,e){const n=t.toString();return TM[n]||(TM[n]=e()),TM[n]}(t.repoInfo_,()=>new cSe(t.stats_,t.server_)),t.infoData_=new rSe,t.infoSyncTree_=new JG({startListening:(r,i,s,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=eg(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),yR(t,"connected",!1),t.serverSyncTree_=new JG({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{const l=o(a,c);Ci(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new zi(this._repo,Be())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function t1e(t,e){const n=TR[e];(!n||n[t.key]!==t)&&Ts(`Database ${e}(${t.repoInfo_}) has already been deleted.`),function vq(t){t.persistentConnection_&&t.persistentConnection_.interrupt("repo_interrupt")}(t),delete n[t.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ts("Cannot call "+e+" on a deleted database.")}}function s1e(t=Jh(),e){return Wo(t,"database").getImmediate({identifier:e})}tl.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},tl.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)},function o1e(t){(function GTe(t){_M=t})(qo),Rn(new un("database",(e,{instanceIdentifier:n})=>function e1e(t,e,n,r,i){let s=r||t.options.databaseURL;void 0===s&&(t.options.projectId||Ts("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),vn("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let c,l,o=IR(s,i),a=o.repoInfo;typeof process<"u"&&process.env&&(l=process.env.FIREBASE_DATABASE_EMULATOR_HOST),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=IR(s,i),a=o.repoInfo):c=!o.repoInfo.secure;const u=i&&c?new jp(jp.OWNER):new ixe(t.name,t.options,e);dq("Invalid Firebase Database URL",o),Te(o.path)||Ts("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function n1e(t,e,n,r){let i=TR[e.name];i||(i={},TR[e.name]=i);let s=i[t.toURLString()];return s&&Ts("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new CDe(t,!1,n,r),i[t.toURLString()]=s,s}(a,t,u,new rxe(t.name,n));return new i1e(d,t)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n),"PUBLIC").setMultipleInstances(!0)),Ze(AW,"0.13.3",t),Ze(AW,"0.13.3","esm2017")}();class xR{constructor(e){return e}}const Mq="database",SR=new U("angularfire2.database-instances");function d1e(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new xR(r)}}const h1e={provide:class l1e{constructor(){return rf(Mq)}},deps:[[new Ct,SR]]},f1e={provide:xR,useFactory:function u1e(t,e){const n=nf(Mq,t,e);return n&&new xR(n)},deps:[[new Ct,SR],Ko]};let p1e=(()=>{class t{constructor(){Ze("angularfire",bu.full,"rtdb")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Jt({type:t}),t.\u0275inj=zt({providers:[f1e,h1e]}),t})();function g1e(t,...e){return{ngModule:p1e,providers:[{provide:SR,useFactory:d1e(t),multi:!0,deps:[Re,Vt,sf,af,[new Ct,dy],[new Ct,uf],...e]}]}}const m1e=On(s1e,!0);n_(UTe,"es"),n_($Te,"en"),n_(HTe,"fr"),n_(WTe,"pt");let _1e=(()=>{var t;class e{constructor(r){this.injector=r}ngDoBootstrap(){const r=function FTe(t,e){const r=function ATe(t,e){return e.get(Ll).resolveComponentFactory(t).inputs}(t,e.injector),i=e.strategyFactory||new NTe(t,e.injector),s=function DTe(t){const e={};return t.forEach(({propName:n,templateName:r,transform:i})=>{e[function CTe(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}(r)]=[n,i]}),e}(r);class o extends OTe{get ngElementStrategy(){if(!this._ngElementStrategy){const c=this._ngElementStrategy=i.create(this.injector||e.injector);r.forEach(({propName:l,transform:u})=>{if(!this.hasOwnProperty(l))return;const d=this[l];delete this[l],c.setInputValue(l,d,u)})}return this._ngElementStrategy}constructor(c){super(),this.injector=c}attributeChangedCallback(c,l,u,d){const[h,f]=s[c];this.ngElementStrategy.setInputValue(h,u,f)}connectedCallback(){let c=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),c=!0),this.ngElementStrategy.connect(this),c||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(c=>{const l=new CustomEvent(c.name,{detail:c.value});this.dispatchEvent(l)})}}return o.observedAttributes=Object.keys(s),r.forEach(({propName:a,transform:c})=>{Object.defineProperty(o.prototype,a,{get(){return this.ngElementStrategy.getInputValue(a)},set(l){this.ngElementStrategy.setInputValue(a,l,c)},configurable:!0,enumerable:!0})}),o}(TCe,{injector:this.injector});customElements.define("atom-plugin-web",r)}}return(t=e).\u0275fac=function(r){return new(r||t)(N(Vt))},t.\u0275mod=Jt({type:t}),t.\u0275inj=zt({providers:[{provide:"environment",useValue:Dp},{provide:qE,useValue:"/"},{provide:ls,useValue:"es-Us"}],imports:[EU,Ade(()=>kde(Dp.firebase)),nge(()=>rge(nj())),Zoe,twe(()=>swe(nj(),{})),g1e(()=>m1e()),iCe(()=>oCe()),bTe,Pbe,Rwe,LTe,DW]}),e})();gie().bootstrapModule(_1e).catch(t=>console.error(t))},304:function(Rs){Rs.exports=function(){"use strict";var er="millisecond",Or="second",Fr="minute",St="hour",Lr="day",Ns="week",Pt="month",Vr="quarter",jn="year",Ur="date",xd="Invalid Date",qw=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Kw=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Qw={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},Ma=function(we,G,H){var ce=String(we);return!ce||ce.length>=G?we:""+Array(G+1-ce.length).join(H)+we},Ps={s:Ma,z:function(we){var G=-we.utcOffset(),H=Math.abs(G),ce=Math.floor(H/60),F=H%60;return(G<=0?"+":"-")+Ma(ce,2,"0")+":"+Ma(F,2,"0")},m:function we(G,H){if(G.date()<H.date())return-we(H,G);var ce=12*(H.year()-G.year())+(H.month()-G.month()),F=G.clone().add(ce,Pt),_e=H-F<0,he=G.clone().add(ce+(_e?-1:1),Pt);return+(-(ce+(H-F)/(_e?F-he:he-F))||0)},a:function(we){return we<0?Math.ceil(we)||0:Math.floor(we)},p:function(we){return{M:Pt,y:jn,w:Ns,d:Lr,D:Ur,h:St,m:Fr,s:Or,ms:er,Q:Vr}[we]||String(we||"").toLowerCase().replace(/s$/,"")},u:function(we){return void 0===we}},Gi="en",Os={};Os[Gi]=Qw;var Ra=function(we){return we instanceof qi},ul=function we(G,H,ce){var F;if(!G)return Gi;if("string"==typeof G){var _e=G.toLowerCase();Os[_e]&&(F=_e),H&&(Os[_e]=H,F=_e);var he=G.split("-");if(!F&&he.length>1)return we(he[0])}else{var X=G.name;Os[X]=G,F=X}return!ce&&F&&(Gi=F),F||!ce&&Gi},Dt=function(we,G){if(Ra(we))return we.clone();var H="object"==typeof G?G:{};return H.date=we,H.args=arguments,new qi(H)},qe=Ps;qe.l=ul,qe.i=Ra,qe.w=function(we,G){return Dt(we,{locale:G.$L,utc:G.$u,x:G.$x,$offset:G.$offset})};var qi=function(){function we(H){this.$L=ul(H.locale,null,!0),this.parse(H)}var G=we.prototype;return G.parse=function(H){this.$d=function(ce){var F=ce.date,_e=ce.utc;if(null===F)return new Date(NaN);if(qe.u(F))return new Date;if(F instanceof Date)return new Date(F);if("string"==typeof F&&!/Z$/i.test(F)){var he=F.match(qw);if(he){var X=he[2]-1||0,wt=(he[7]||"0").substring(0,3);return _e?new Date(Date.UTC(he[1],X,he[3]||1,he[4]||0,he[5]||0,he[6]||0,wt)):new Date(he[1],X,he[3]||1,he[4]||0,he[5]||0,he[6]||0,wt)}}return new Date(F)}(H),this.$x=H.x||{},this.init()},G.init=function(){var H=this.$d;this.$y=H.getFullYear(),this.$M=H.getMonth(),this.$D=H.getDate(),this.$W=H.getDay(),this.$H=H.getHours(),this.$m=H.getMinutes(),this.$s=H.getSeconds(),this.$ms=H.getMilliseconds()},G.$utils=function(){return qe},G.isValid=function(){return this.$d.toString()!==xd},G.isSame=function(H,ce){var F=Dt(H);return this.startOf(ce)<=F&&F<=this.endOf(ce)},G.isAfter=function(H,ce){return Dt(H)<this.startOf(ce)},G.isBefore=function(H,ce){return this.endOf(ce)<Dt(H)},G.$g=function(H,ce,F){return qe.u(H)?this[ce]:this.set(F,H)},G.unix=function(){return Math.floor(this.valueOf()/1e3)},G.valueOf=function(){return this.$d.getTime()},G.startOf=function(H,ce){var F=this,_e=!!qe.u(ce)||ce,he=qe.p(H),X=function(Fs,Fe){var Xe=qe.w(F.$u?Date.UTC(F.$y,Fe,Fs):new Date(F.$y,Fe,Fs),F);return _e?Xe:Xe.endOf(Lr)},wt=function(Fs,Fe){return qe.w(F.toDate()[Fs].apply(F.toDate("s"),(_e?[0,0,0,0]:[23,59,59,999]).slice(Fe)),F)},ht=this.$W,on=this.$M,Ki=this.$D,bt="set"+(this.$u?"UTC":"");switch(he){case jn:return _e?X(1,0):X(31,11);case Pt:return _e?X(1,on):X(0,on+1);case Ns:var So=this.$locale().weekStart||0,jt=(ht<So?ht+7:ht)-So;return X(_e?Ki-jt:Ki+(6-jt),on);case Lr:case Ur:return wt(bt+"Hours",0);case St:return wt(bt+"Minutes",1);case Fr:return wt(bt+"Seconds",2);case Or:return wt(bt+"Milliseconds",3);default:return this.clone()}},G.endOf=function(H){return this.startOf(H,!1)},G.$set=function(H,ce){var F,_e=qe.p(H),he="set"+(this.$u?"UTC":""),X=(F={},F[Lr]=he+"Date",F[Ur]=he+"Date",F[Pt]=he+"Month",F[jn]=he+"FullYear",F[St]=he+"Hours",F[Fr]=he+"Minutes",F[Or]=he+"Seconds",F[er]=he+"Milliseconds",F)[_e],wt=_e===Lr?this.$D+(ce-this.$W):ce;if(_e===Pt||_e===jn){var ht=this.clone().set(Ur,1);ht.$d[X](wt),ht.init(),this.$d=ht.set(Ur,Math.min(this.$D,ht.daysInMonth())).$d}else X&&this.$d[X](wt);return this.init(),this},G.set=function(H,ce){return this.clone().$set(H,ce)},G.get=function(H){return this[qe.p(H)]()},G.add=function(H,ce){var F,_e=this;H=Number(H);var he=qe.p(ce),X=function(on){var Ki=Dt(_e);return qe.w(Ki.date(Ki.date()+Math.round(on*H)),_e)};if(he===Pt)return this.set(Pt,this.$M+H);if(he===jn)return this.set(jn,this.$y+H);if(he===Lr)return X(1);if(he===Ns)return X(7);var wt=(F={},F[Fr]=6e4,F[St]=36e5,F[Or]=1e3,F)[he]||1,ht=this.$d.getTime()+H*wt;return qe.w(ht,this)},G.subtract=function(H,ce){return this.add(-1*H,ce)},G.format=function(H){var ce=this,F=this.$locale();if(!this.isValid())return F.invalidDate||xd;var _e=H||"YYYY-MM-DDTHH:mm:ssZ",he=qe.z(this),X=this.$H,wt=this.$m,ht=this.$M,on=F.weekdays,Ki=F.months,bt=function(Fe,Xe,Sd,be){return Fe&&(Fe[Xe]||Fe(ce,_e))||Sd[Xe].slice(0,be)},So=function(Fe){return qe.s(X%12||12,Fe,"0")},jt=F.meridiem||function(Fe,Xe,Sd){var be=Fe<12?"AM":"PM";return Sd?be.toLowerCase():be},Fs={YY:String(this.$y).slice(-2),YYYY:this.$y,M:ht+1,MM:qe.s(ht+1,2,"0"),MMM:bt(F.monthsShort,ht,Ki,3),MMMM:bt(Ki,ht),D:this.$D,DD:qe.s(this.$D,2,"0"),d:String(this.$W),dd:bt(F.weekdaysMin,this.$W,on,2),ddd:bt(F.weekdaysShort,this.$W,on,3),dddd:on[this.$W],H:String(X),HH:qe.s(X,2,"0"),h:So(1),hh:So(2),a:jt(X,wt,!0),A:jt(X,wt,!1),m:String(wt),mm:qe.s(wt,2,"0"),s:String(this.$s),ss:qe.s(this.$s,2,"0"),SSS:qe.s(this.$ms,3,"0"),Z:he};return _e.replace(Kw,function(Fe,Xe){return Xe||Fs[Fe]||he.replace(":","")})},G.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},G.diff=function(H,ce,F){var _e,he=qe.p(ce),X=Dt(H),wt=6e4*(X.utcOffset()-this.utcOffset()),ht=this-X,on=qe.m(this,X);return on=(_e={},_e[jn]=on/12,_e[Pt]=on,_e[Vr]=on/3,_e[Ns]=(ht-wt)/6048e5,_e[Lr]=(ht-wt)/864e5,_e[St]=ht/36e5,_e[Fr]=ht/6e4,_e[Or]=ht/1e3,_e)[he]||ht,F?on:qe.a(on)},G.daysInMonth=function(){return this.endOf(Pt).$D},G.$locale=function(){return Os[this.$L]},G.locale=function(H,ce){if(!H)return this.$L;var F=this.clone(),_e=ul(H,ce,!0);return _e&&(F.$L=_e),F},G.clone=function(){return qe.w(this.$d,this)},G.toDate=function(){return new Date(this.valueOf())},G.toJSON=function(){return this.isValid()?this.toISOString():null},G.toISOString=function(){return this.$d.toISOString()},G.toString=function(){return this.$d.toUTCString()},we}(),Na=qi.prototype;return Dt.prototype=Na,[["$ms",er],["$s",Or],["$m",Fr],["$H",St],["$W",Lr],["$M",Pt],["$y",jn],["$D",Ur]].forEach(function(we){Na[we[1]]=function(G){return this.$g(G,we[0],we[1])}}),Dt.extend=function(we,G){return we.$i||(we(G,qi,Dt),we.$i=!0),Dt},Dt.locale=ul,Dt.isDayjs=Ra,Dt.unix=function(we){return Dt(1e3*we)},Dt.en=Os[Gi],Dt.Ls=Os,Dt.p={},Dt}()},616:function(Rs){Rs.exports=function(){"use strict";return function(Wi,En,De){var er="h:mm A",Or={lastDay:"[Yesterday at] "+er,sameDay:"[Today at] "+er,nextDay:"[Tomorrow at] "+er,nextWeek:"dddd [at] "+er,lastWeek:"[Last] dddd [at] "+er,sameElse:"MM/DD/YYYY"};En.prototype.calendar=function(Fr,St){var Lr=St||this.$locale().calendar||Or,Ns=De(Fr||void 0).startOf("d"),Pt=this.diff(Ns,"d",!0),Vr="sameElse",jn=Pt<-6?Vr:Pt<-1?"lastWeek":Pt<0?"lastDay":Pt<1?"sameDay":Pt<2?"nextDay":Pt<7?"nextWeek":Vr,Ur=Lr[jn]||Or[jn];return"function"==typeof Ur?Ur.call(this,De()):this.format(Ur)}}}()},77:function(Rs){Rs.exports=function(){"use strict";return function(Wi,En,De){De.isMoment=function(er){return De.isDayjs(er)}}}()}},Rs=>{Rs(Rs.s=890)}]);